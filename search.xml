<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ•°æ®åº“ç³»ç»ŸåŸç†]]></title>
    <url>%2F2019%2F07%2F16%2F%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[æ•´ä¸ªæ–‡ç« æ€è·¯ï¼šæ•°æ®åº“äº‹åŠ¡ACIDâ€”â€”ã€‹é«˜å¹¶å‘ä¸‹ï¼Œä¼šäº§ç”Ÿä»€ä¹ˆæƒ…å†µâ€”â€”ã€‹å‡ºç°å¹¶å‘ä¸€è‡´æ€§é—®é¢˜â€”â€”ã€‹å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”ã€‹å°é”å’Œäº‹åŠ¡éš”ç¦» ä¸€ã€äº‹åŠ¡æ¦‚å¿µï¼šäº‹åŠ¡æŒ‡çš„æ˜¯æ»¡è¶³ACIDç‰¹æ€§çš„ä¸€ç»„æ“ä½œï¼Œå¯ä»¥é€šè¿‡Commitæäº¤ä¸€ä¸ªäº‹åŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Rollbackè¿›è¡Œå›æ»šã€‚ ACID1. åŸå­æ€§ï¼ˆAtomicityï¼‰äº‹åŠ¡è¢«è§†ä¸ºä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œäº‹åŠ¡çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æäº¤æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»š å›æ»šå¯ä»¥ç”¨å›æ»šæ—¥å¿—å®ç°ï¼Œå›æ»šæ—¥å¿—è®°å½•äº‹åŠ¡æ‰§è¡Œçš„ä¿®æ”¹æ“ä½œï¼Œåœ¨å›æ»šæ—¶åå‘æ‰§è¡Œè¿™äº›ä¿®æ”¹æ“ä½œå³å¯ 2. ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰æ•°æ®åº“åœ¨äº‹åŠ¡æ‰§è¡Œå‰åéƒ½ä¿å­˜ä¸€è‡´æ€§çŠ¶æ€ã€‚åœ¨ä¸€è‡´æ€§çŠ¶æ€ä¸‹ï¼Œæ‰€æœ‰äº‹åŠ¡å¯¹ä¸€ä¸ªæ•°æ®çš„è¯»å–ç»“æœéƒ½æ˜¯ç›¸åŒçš„ 3. éš”ç¦»æ€§ï¼ˆIsolationï¼‰ä¸€ä¸ªäº‹åŠ¡æ‰€åšçš„ä¿®æ”¹åœ¨æœ€ç»ˆæäº¤ä¹‹å‰ï¼Œå¯¹å…¶ä»–äº‹åŠ¡æ˜¯ä¸å¯è§çš„ã€‚ 4. æŒä¹…æ€§ï¼ˆDurabilityï¼‰ä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œåšçš„ä¿®æ”¹å°†ä¼šæ°¸è¿œä¿å­˜åˆ°æ•°æ®åº“ä¸­ï¼Œå³ä½¿ç³»ç»Ÿå‘é€å´©æºƒï¼Œäº‹åŠ¡æ‰§è¡Œçš„ç»“æœä¹Ÿä¸èƒ½ä¸¢å¤±ã€‚ ä½¿ç”¨é‡åšæ—¥å¿—æ¥ä¿è¯æŒä¹…æ€§ 4ä¸ªç‰¹æ€§ä¸æ˜¯å¹³çº§å…³ç³»ï¼š åªæœ‰æ»¡è¶³ä¸€è‡´æ€§ï¼Œäº‹åŠ¡çš„æ‰§è¡Œç»“æœæ‰æ˜¯æ­£ç¡®çš„ æ— å¹¶å‘ä¸‹ï¼Œäº‹åŠ¡ä¸²è¡Œæ‰§è¡Œï¼Œéš”ç¦»æ€§ä¸€å®šèƒ½å¤Ÿæ»¡è¶³ï¼Œæ­¤æ—¶åªè¦èƒ½æ»¡è¶³åŸå­æ€§ï¼Œå°±ä¸€å®šèƒ½æ»¡è¶³ä¸€è‡´æ€§ å¹¶å‘ä¸‹ï¼Œå¤šä¸ªäº‹åŠ¡å¹¶è¡Œæ‰§è¡Œï¼Œæ»¡è¶³åŸå­æ€§ï¼Œéš”ç¦»æ€§ï¼Œæ‰èƒ½æ»¡è¶³ä¸€è‡´æ€§ æ•°æ®åº“æ»¡è¶³æŒä¹…åŒ–æ˜¯ä¸ºäº†åº”å¯¹æ•°æ®åº“å´©æºƒçš„æƒ…å†µ AUTOCOMMITï¼ˆè‡ªåŠ¨æäº¤ï¼‰MYSQLé»˜è®¤è‡ªåŠ¨æäº¤æ–¹å¼ï¼Œä¿®æ”¹æ‰‹åŠ¨æäº¤START TRANSACTIONè¯­å¥ äºŒã€å¹¶å‘ä¸€è‡´æ€§é—®é¢˜å¹¶å‘ç¯å¢ƒä¸‹ï¼Œäº‹åŠ¡çš„éš”ç¦»æ€§å¾ˆéš¾ä¿è¯ï¼Œå› æ­¤ä¼šå‡ºç°å¾ˆå¤šå¹¶å‘ä¸€è‡´æ€§é—®é¢˜ã€‚ 1. ä¸¢å¤±ä¿®æ”¹T1å…ˆä¿®æ”¹ï¼ŒT2éšåä¿®æ”¹ï¼ŒT2çš„ä¿®æ”¹è¦†ç›–äº†T1ä¿®æ”¹ 2. è¯»è„æ•°æ®T1ä¿®æ”¹æ•°æ®ï¼ŒT2éšåè¯»å–è¿™ä¸ªæ•°æ®ï¼Œå¦‚æœT1æ’¤é”€äº†è¿™æ¬¡ä¿®æ”¹ï¼Œé‚£ä¹ˆT2è¯»å–çš„æ•°æ®å°±æ˜¯è„æ•°æ®ã€‚ 3. ä¸å¯é‡å¤è¯»T2è¯»å–æ•°æ®ï¼ŒT1å¯¹è¯¥æ•°æ®åšäº†ä¿®æ”¹ï¼Œå¦‚æœT2å†æ¬¡è¯»å–è¿™ä¸ªæ•°æ®ï¼Œæœ¬æ¬¡è¯»å–çš„ç»“æœå’Œç¬¬ä¸€æ¬¡ä¸ä¸€æ ·ã€‚ 4. å¹»å½±è¯»T1æŸ¥æŸä¸ªèŒƒå›´çš„æ•°æ®ï¼ŒT2åœ¨è¿™ä¸ªèŒƒå›´è¿›è¡Œäº†æ’å…¥æ•°æ®ï¼ŒT1å†æŸ¥è¿™ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œè¯»å–ç»“æœä¸¤æ¬¡ä¸ä¸€æ · äº§ç”Ÿå¹¶å‘ä¸€è‡´æ€§é—®é¢˜ä¸»è¦åŸå› æ˜¯ç ´åäº†äº‹åŠ¡çš„éš”ç¦»æ€§ï¼Œè§£å†³æ–¹æ³•æ˜¯é€šè¿‡å¹¶å‘æ§åˆ¶æ¥ä¿è¯éš”ç¦»æ€§ã€‚å¹¶å‘æ§åˆ¶å¯ä»¥é€šè¿‡é”æ¥å®ç°ï¼Œå°é”æ“ä½œç”¨æˆ·è‡ªå·±æ§åˆ¶ï¼Œå¾ˆå¤æ‚ã€‚æ•°æ®åº“ç®¡ç†ç³»ç»Ÿæä¾›äº†äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ã€‚ ä¸‰ã€å°é”1. å°é”ç²’åº¦ å°é”å¯¹è±¡çš„å¤§å°ç§°ä¸ºå°é”ç²’åº¦ MySQLæä¾›äº†ä¸¤ç§å°é”ç²’åº¦ï¼šè¡Œçº§é”ã€è¡¨çº§é” å°½é‡é”è‡ªå·±éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼Œä¸è¦é”ä½å…¶ä»–é¢å¤–çš„èµ„æºï¼Œé”å®šçš„æ•°æ®é‡è¶Šå°‘ï¼Œå‘é€é”äº‰ç”¨çš„å¯èƒ½å°±è¶Šå°ï¼Œç³»ç»Ÿçš„å¹¶å‘ç¨‹åº¦å°±è¶Šé«˜ã€‚ åŠ é”éœ€è¦èµ„æºï¼Œé”çš„å„ç§æ“ä½œï¼ˆåŒ…æ‹¬è·å–é”ã€é‡Šæ”¾é”ã€ä»¥åŠæ£€æŸ¥é”çŠ¶æ€ï¼‰éƒ½ä¼šå¢åŠ ç³»ç»Ÿå¼€é”€ã€‚ é”å®šçš„ç²’åº¦è¶Šå°ï¼Œéœ€è¦é”å®šçš„å¯¹è±¡å°±è¶Šå¤šï¼Œå¯é€‰æ‹©æ€§å°±è¶Šå¤§ï¼Œå¹¶å‘åº¦å°±è¶Šå¤§ï¼Œå¼€é”€å°±è¶Šå¤§ åœ¨é€‰æ‹©å°é”ç²’åº¦æ—¶ï¼Œéœ€è¦åœ¨é”å¼€é”€å’Œå¹¶å‘ç¨‹åº¦ä¹‹é—´åšä¸€ä¸ªæƒè¡¡ã€‚ 2. å°é”ç±»å‹1.è¯»å†™é” æ’å®ƒé”ï¼ˆExclusiveï¼‰ï¼Œç®€å†™Xé”ï¼Œåˆç§°å†™é”ã€‚ å…±äº«é”ï¼ˆSharedï¼‰ï¼Œç®€å†™Sé”ï¼Œåˆç§°è¯»é”ã€‚ æœ‰ä»¥ä¸‹ä¸¤ä¸ªè§„å®šï¼š ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®å¯¹è±¡AåŠ äº†Xé”ï¼Œå¯ä»¥å¯¹Aè¿›è¡Œè¯»å–å’Œæ›´æ–°ã€‚åŠ é”æœŸé—´å…¶ä»–äº‹åŠ¡ä¸èƒ½å¯¹AåŠ ä»»ä½•é” ä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®å¯¹è±¡AåŠ äº†Sé”ï¼Œå¯ä»¥å¯¹Aè¿›è¡Œè¯»å–ã€‚åŠ é”æœŸé—´å…¶ä»–äº‹åŠ¡å¯ä»¥å¯¹AåŠ Sé”ï¼Œä¸èƒ½åŠ Xé” é”çš„å…¼å®¹å…³ç³»å¦‚ä¸‹ï¼š 2.æ„å‘é”ç™½è¯ç‰ˆï¼šæ„å‘é”å°±æ˜¯å‘Šè¯‰åˆ«äººï¼Œæˆ‘è¦ç»™è¿™ä¸ªæ•°æ®å¯¹è±¡AåŠ é”ï¼Œåªæ˜¯è¡¨ç¤ºæƒ³è¦ï¼Œå¹¶ä¸æ˜¯çœŸçš„åŠ é” ä½¿ç”¨æ„å‘é”ï¼ˆIntention Locksï¼‰å¯ä»¥æ›´å®¹æ˜“åœ°æ”¯æŒå¤šç²’åº¦å°é”ã€‚ åœ¨å­˜åœ¨è¡Œçº§é”å’Œè¡¨çº§é”çš„æƒ…å†µä¸‹ï¼Œäº‹åŠ¡Tæƒ³è¦å¯¹è¡¨AåŠ Xé”ï¼Œå°±éœ€è¦å…ˆæ£€æµ‹æ˜¯å¦æœ‰å…¶å®ƒäº‹åŠ¡å¯¹è¡¨Aæˆ–è€…è¡¨Aä¸­çš„ä»»æ„ä¸€è¡ŒåŠ äº†é”ï¼Œé‚£ä¹ˆå°±éœ€è¦å¯¹è¡¨Açš„æ¯ä¸€è¡Œéƒ½æ£€æµ‹ä¸€æ¬¡ï¼Œè¿™æ˜¯éå¸¸è€—æ—¶çš„ï¼Œ æ„å‘é”åœ¨åŸæ¥çš„ X/S é”ä¹‹ä¸Šå¼•å…¥äº† IX/ISï¼ŒIX/IS éƒ½æ˜¯è¡¨é”ï¼Œç”¨æ¥è¡¨ç¤ºä¸€ä¸ªäº‹åŠ¡æƒ³è¦åœ¨è¡¨ä¸­çš„æŸä¸ªæ•°æ®è¡Œä¸ŠåŠ  X é”æˆ– S é”ã€‚æœ‰ä»¥ä¸‹ä¸¤ä¸ªè§„å®šï¼š ä¸€ä¸ªäº‹åŠ¡åœ¨è·å¾—æŸä¸ªæ•°æ®è¡Œå¯¹è±¡çš„ S é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IS é”æˆ–è€…æ›´å¼ºçš„é”ï¼› ä¸€ä¸ªäº‹åŠ¡åœ¨è·å¾—æŸä¸ªæ•°æ®è¡Œå¯¹è±¡çš„ X é”ä¹‹å‰ï¼Œå¿…é¡»å…ˆè·å¾—è¡¨çš„ IX é”ã€‚ é€šè¿‡å¼•å…¥æ„å‘é”ï¼Œäº‹åŠ¡ T æƒ³è¦å¯¹è¡¨ A åŠ  X é”ï¼Œåªéœ€è¦å…ˆæ£€æµ‹æ˜¯å¦æœ‰å…¶å®ƒäº‹åŠ¡å¯¹è¡¨ A åŠ äº† X/IX/S/IS é”ï¼Œå¦‚æœåŠ äº†å°±è¡¨ç¤ºæœ‰å…¶å®ƒäº‹åŠ¡æ­£åœ¨ä½¿ç”¨è¿™ä¸ªè¡¨æˆ–è€…è¡¨ä¸­æŸä¸€è¡Œçš„é”ï¼Œå› æ­¤äº‹åŠ¡ T åŠ  X é”å¤±è´¥ã€‚ é”çš„å…¼å®¹å…³ç³»ï¼š è§£é‡Šå¦‚ä¸‹ï¼š ä»»æ„ IS/IX é”ä¹‹é—´éƒ½æ˜¯å…¼å®¹çš„ï¼Œå› ä¸ºå®ƒä»¬åªæ˜¯è¡¨ç¤ºæƒ³è¦å¯¹è¡¨åŠ é”ï¼Œè€Œä¸æ˜¯çœŸæ­£åŠ é”ï¼› S é”åªä¸ S é”å’Œ IS é”å…¼å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´äº‹åŠ¡ T æƒ³è¦å¯¹æ•°æ®è¡ŒåŠ  S é”ï¼Œå…¶å®ƒäº‹åŠ¡å¯ä»¥å·²ç»è·å¾—å¯¹è¡¨æˆ–è€…è¡¨ä¸­çš„è¡Œçš„ S é”ã€‚ 3.å°é”åè®®1. ä¸‰çº§å°é”åè®®ä¸€çº§å°é”åè®®äº‹åŠ¡Tè¦ä¿®æ”¹æ•°æ®Aæ—¶å¿…é¡»åŠ Xé”ï¼Œç›´åˆ°Tç»“æŸæ‰èƒ½é‡Šæ”¾é” å¯ä»¥è§£å†³ä¸¢å¤±ä¿®æ”¹é—®é¢˜ï¼Œå› ä¸ºä¸èƒ½åŒæ—¶ä¸¤ä¸ªäº‹åŠ¡å¯¹AåŠ Xé”ï¼Œå°±ä¸ä¼šæ•°æ®è¢«è¦†ç›– äºŒçº§å°é”åè®®åœ¨ä¸€çº§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¯»å–æ•°æ®Aæ—¶å¿…é¡»åŠ Sé”ï¼Œè¯»å–å®Œé©¬ä¸Šé‡Šæ”¾Sé”ã€‚ è§£å†³è¯»è„æ•°æ®é—®é¢˜ï¼Œå› ä¸ºä¸€ä¸ªäº‹åŠ¡å¯¹æ•°æ®Aè¿›è¡Œä¿®æ”¹ï¼Œæ ¹æ®ä¸€çº§å°é”åè®®ï¼Œä¼šåŠ Xé”ï¼Œé‚£ä¹ˆå°±ä¸èƒ½å†åŠ Sé”ï¼Œå°±ä¸ä¼šè¯»å…¥æ•°æ® ä¸‰çº§å°é”åè®®åœ¨äºŒçº§çš„åŸºç¡€ä¸Šï¼Œè¦æ±‚è¯»å–æ•°æ®Aæ—¶å¿…é¡»åŠ Sé”ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸäº†æ‰èƒ½é‡Šæ”¾Sé”ã€‚ è§£å†³ä¸å¯é‡å¤è¯»é—®é¢˜ï¼Œå› ä¸ºè¯»Aæ—¶ï¼Œå…¶ä»–äº‹åŠ¡ä¸èƒ½å¯¹AåŠ Xé”ï¼Œä»è€Œé¿å…äº†åœ¨è¯»çš„æœŸé—´æ•°æ®å‘é€æ”¹å˜ 2. ä¸¤æ®µå°é”åè®®åŠ é”å’Œè§£é”åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µè¿›è¡Œ 4. MySQLéšå¼ä¸æ˜¾ç¤ºé”å®šMySQL çš„ InnoDB å­˜å‚¨å¼•æ“é‡‡ç”¨ä¸¤æ®µé”åè®®ï¼Œä¼šæ ¹æ®éš”ç¦»çº§åˆ«åœ¨éœ€è¦çš„æ—¶å€™è‡ªåŠ¨åŠ é”ï¼Œå¹¶ä¸”æ‰€æœ‰çš„é”éƒ½æ˜¯åœ¨åŒä¸€æ—¶åˆ»è¢«é‡Šæ”¾ï¼Œè¿™è¢«ç§°ä¸ºéšå¼é”å®šã€‚ InnoDB ä¹Ÿå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„è¯­å¥è¿›è¡Œæ˜¾ç¤ºé”å®šï¼š 12SELECT ... LOCK In SHARE MODE;SELECT ... FOR UPDATE; å››ã€éš”ç¦»çº§åˆ«é¦–å…ˆåˆ›å»ºä¸€ä¸ªaccountçš„è¡¨ï¼Œæ’å…¥æ•°æ®ï¼Œå¼•æ“ä¸ºInnodb 1. æœªæäº¤è¯»ï¼ˆRead uncommittedï¼‰å…è®¸è„è¯»ï¼Œäº‹åŠ¡ä¸­çš„ä¿®æ”¹ï¼Œå³æ—¶æ²¡æœ‰æäº¤ï¼Œå¯¹å…¶å®ƒäº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„ AæŸ¥è¯¢æ‰§è¡Œæ“ä½œï¼š 123set session transaction isolation level read uncommitted; --è®¾ç½®éš”ç¦»çº§åˆ«ä¸ºread uncommittedstart transaction; --è®¾ç½®æ‰‹åŠ¨æäº¤select * from account; ç»“æœæ˜¯è¿™æ ·çš„ BæŸ¥è¯¢æ‰§è¡Œæ“ä½œï¼š 123set session transaction isolation level read uncommitted;start transaction;update account set account = account + 200 where id = 1; Bå†è¿è¡Œ 1select * from account; ç„¶è€ŒBæ‰§è¡Œçš„æ›´æ–°æ“ä½œï¼Œå¹¶æ²¡æœ‰æ‰‹åŠ¨æäº¤ï¼Œæ•°æ®åº“é‡Œæ•°æ®è¿˜æ˜¯1 - 1000ï¼Œè€Œä¸æ˜¯1200ï¼Œéœ€è¦çœŸçš„æ›´æ–°åˆ°æ•°æ®åº“ï¼Œéœ€è¦commit 2. æäº¤è¯»ï¼ˆRead committedï¼‰åªèƒ½è¯»å–åˆ°å·²ç»æäº¤çš„æ•°æ®ï¼Œä½†æ˜¯å‡ºç°ä¸å¯é‡å¤è¯»æƒ…å†µ Aæ‰§è¡Œæ“ä½œï¼š 12345set session transaction isolation level read committed;start transaction;update account set account=account - 200 where id = 1;select * from account; Bæ‰§è¡Œæ“ä½œï¼š 1select * from account; ä¸æ˜¯800ï¼Œï¼Ÿï¼Ÿï¼Ÿï¼Ÿwhyï¼Ÿï¼Ÿï¼Ÿï¼Ÿ Aæ‰§è¡Œæ“ä½œï¼š 1commit; å†æ‰§è¡ŒBï¼š å˜ä¸º800ï¼ï¼ï¼ï¼ 3. å¯é‡å¤è¯»ï¼ˆRepeatable readï¼‰ï¼ˆMySQLé»˜è®¤çº§åˆ«ï¼‰ä¿è¯åœ¨åŒä¸€äº‹åŠ¡ä¸­å¤šæ¬¡è¯»å–åŒæ ·æ•°æ®çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œæ¶ˆé™¤äº†ä¸å¯é‡å¤è¯»ï¼Œä½†æ˜¯è¿˜å­˜åœ¨å¹»å½±è¯» Aæ“ä½œï¼š 1234set session transaction isolation level repeatable read;start transaction;select * from account Bæ“ä½œï¼š 1234insert into account(id,account) value(3,1000);commit;select * from account; æ’å…¥æˆåŠŸ Aæ“ä½œï¼š 1select * from account Aä¸¤æ¬¡æŸ¥è¯¢ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè§£å†³äº†ä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼ï¼ï¼ï¼ Aæ“ä½œï¼š 1insert into account (id,account) values(3,1000); ç«Ÿç„¶æŠ¥é”™äº†ï¼ï¼ï¼ï¼ï¼ï¼ï¼è¯´è¿™æ¡æ•°æ®å­˜åœ¨ï¼Œ è¿™é‡Œå°±å‡ºç°äº†å¹»å½±è¯»é—®é¢˜ï¼ï¼ï¼ 4. å¯ä¸²è¡ŒåŒ–ï¼ˆSerializableï¼‰å¼ºåˆ¶äº‹åŠ¡ä¸²è¡Œæ‰§è¡Œã€‚ éœ€è¦åŠ é”å®ç°ï¼Œè€Œå…¶å®ƒéš”ç¦»çº§åˆ«é€šå¸¸ä¸éœ€è¦ã€‚ å‚è€ƒèµ„æ–™ï¼š https://www.runoob.com/mysql/mysql-transaction.html https://www.jianshu.com/p/4e3edbedb9a8 https://cyc2018.github.io/CS-Notes/#/notes/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E5%8E%9F%E7%90%86?id=mysql-%e9%9a%90%e5%bc%8f%e4%b8%8e%e6%98%be%e7%a4%ba%e9%94%81%e5%ae%9a]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>äº‹åŠ¡ACID</tag>
        <tag>å¹¶å‘ä¸€è‡´æ€§é—®é¢˜</tag>
        <tag>éš”ç¦»çº§åˆ«</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå†…å­˜æ¨¡å‹JMM]]></title>
    <url>%2F2019%2F06%2F27%2FJava%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8BJMM%2F</url>
    <content type="text"><![CDATA[Javaå†…å­˜æ¨¡å‹ != JVMå†…å­˜æ¨¡å‹ï¼ï¼ï¼ï¼ï¼ï¼ ä¸€ã€å¼•å…¥â€‹ ç”±äºè®¡ç®—æœºçš„å­˜å‚¨è®¾å¤‡ä¸å¤„ç†å™¨çš„è¿ç®—èƒ½åŠ›ä¹‹é—´æœ‰å‡ ä¸ªæ•°é‡çº§çš„å·®è·ï¼Œæ‰€ä»¥ç°ä»£è®¡ç®—æœºç³»ç»Ÿéƒ½ä¸å¾—ä¸åŠ å…¥ä¸€å±‚è¯»å†™é€Ÿåº¦å°½å¯èƒ½æ¥è¿‘å¤„ç†å™¨è¿ç®—é€Ÿåº¦çš„é«˜é€Ÿç¼“å­˜ï¼ˆcacheï¼‰æ¥ä½œä¸ºå†…å­˜ä¸å¤„ç†å™¨ä¹‹é—´çš„ç¼“å†²ï¼šå°†è¿ç®—éœ€è¦ä½¿ç”¨åˆ°çš„æ•°æ®å¤åˆ¶åˆ°ç¼“å­˜ä¸­ï¼Œè®©è¿ç®—èƒ½å¿«é€Ÿè¿›è¡Œï¼Œå½“è¿ç®—ç»“æŸåå†ä»ç¼“å­˜åŒæ­¥å›å†…å­˜ä¹‹ä¸­æ²¡è¿™æ ·å¤„ç†å™¨å°±æ— éœ€ç­‰å¾…ç¼“æ…¢çš„å†…å­˜è¯»å†™äº†ã€‚ åŸºäºé«˜é€Ÿç¼“å­˜çš„å­˜å‚¨äº¤äº’å¾ˆå¥½åœ°è§£å†³äº†å¤„ç†å™¨ä¸å†…å­˜çš„é€Ÿåº¦çŸ›ç›¾ï¼Œä½†æ˜¯å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼šç¼“å­˜ä¸€è‡´æ€§ï¼ˆCache Coherenceï¼‰ã€‚åœ¨å¤šå¤„ç†å™¨ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªå¤„ç†å™¨éƒ½æœ‰è‡ªå·±çš„é«˜é€Ÿç¼“å­˜ï¼Œè€Œä»–ä»¬åˆå…±äº«åŒä¸€ä¸»å­˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå¤šä¸ªå¤„ç†å™¨è¿ç®—ä»»åŠ¡éƒ½æ¶‰åŠåŒä¸€å—ä¸»å­˜ï¼Œéœ€è¦ä¸€ç§åè®®å¯ä»¥ä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ï¼Œè¿™ç±»åè®®æœ‰MSIã€MESIã€MOSIåŠDragon Protocolç­‰ã€‚Javaè™šæ‹Ÿæœºå†…å­˜æ¨¡å‹ä¸­å®šä¹‰çš„å†…å­˜è®¿é—®æ“ä½œä¸ç¡¬ä»¶çš„ç¼“å­˜è®¿é—®æ“ä½œæ˜¯å…·æœ‰å¯æ¯”æ€§çš„ï¼Œåç»­å°†ä»‹ç»Javaå†…å­˜æ¨¡å‹ã€‚ äºŒã€Javaå†…å­˜æ¨¡å‹ï¼ˆJMMï¼‰æ˜¯ä»€ä¹ˆJavaå†…å­˜æ¨¡å‹ç®€ç§°JMMï¼ˆJava Memory Modelï¼‰ï¼Œæ˜¯Javaè™šæ‹Ÿæœºæ‰€å®šä¹‰çš„ä¸€ç§æŠ½è±¡è§„èŒƒï¼Œç”¨æ¥å±è”½ä¸åŒç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œè®©javaç¨‹åºåœ¨å„ç§å¹³å°ä¸‹éƒ½èƒ½è¾¾åˆ°ä¸€è‡´çš„å†…å­˜è®¿é—®æ•ˆæœã€‚ Javaå†…å­˜æ¨¡å‹æœ¬èº«æ˜¯ä¸€ç§æŠ½è±¡çš„æ¦‚å¿µï¼Œå¹¶ä¸çœŸå®å­˜åœ¨ï¼Œå®ƒæè¿°çš„æ˜¯ä¸€ç»„è§„åˆ™æˆ–è§„èŒƒï¼Œé€šè¿‡è¿™ç»„è§„èŒƒå®šä¹‰äº†ç¨‹åºä¸­å„ä¸ªå˜é‡ï¼ˆåŒ…æ‹¬å®ä¾‹å­—æ®µï¼Œé™æ€å­—æ®µå’Œæ„æˆæ•°ç»„å¯¹è±¡çš„å…ƒç´ ï¼‰ï¼ˆä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼‰çš„è®¿é—®æ–¹å¼ã€‚ 2.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜æ³¨æ„ï¼šè¿™é‡Œçš„ä¸»å†…å­˜ã€å·¥ä½œå†…å­˜ä¸Javaå†…å­˜åŒºåŸŸçš„Javaå †ã€æ ˆã€æ–¹æ³•åŒºä¸æ˜¯åŒä¸€å±‚æ¬¡å†…å­˜åˆ’åˆ†ï¼Œè¿™ä¸¤è€…åŸºæœ¬ä¸Šæ²¡æœ‰å…³ç³»ï¼Œä¸è¦æ··æ·†ã€‚ ä¸»å†…å­˜ï¼ˆMain Memoryï¼‰ï¼šå…±äº«ã€ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€‚ æœ¬åœ°å†…å­˜ï¼ˆWorking Memoryï¼‰-å·¥ä½œå†…å­˜ï¼šå­˜ä¸»å†…å­˜ä¸­æ•°æ®çš„å‰¯æœ¬ 2.2 å†…å­˜é—´äº¤äº’æ“ä½œï¼ˆå…«å¤§æŒ‡ä»¤ï¼‰ æŒ‡ä»¤ ä½œç”¨å¯¹è±¡ ä½œç”¨ lock(é”å®š) ä¸»å†…å­˜çš„å˜é‡ æŠŠä¸€ä¸ªå˜é‡æ ‡è¯†ä¸ºä¸€ä¸ªçº¿ç¨‹ç‹¬å çŠ¶æ€ unlock(è§£é”) ä¸»å†…å­˜çš„å˜é‡ æŠŠé”å®šçš„å˜é‡é‡Šæ”¾å‡ºæ¥ï¼Œé‡Šæ”¾å‡ºæ¥çš„å˜é‡æ‰èƒ½è¢«å…¶ä»–çº¿ç¨‹ä½¿ç”¨ read(è¯»å–) ä¸»å†…å­˜çš„å˜é‡ æŠŠä¸€ä¸ªå˜é‡çš„å€¼ä»ä¸»å†…å­˜ä¼ è¾“åˆ°çº¿ç¨‹çš„å·¥ä½œå†…å­˜ï¼Œåç»­è¢«loadä½¿ç”¨ load(è½½å…¥) å·¥ä½œå†…å­˜çš„å˜é‡ æŠŠreadæ“ä½œå¾—åˆ°çš„å€¼æ”¾å…¥åˆ°å·¥ä½œå†…å­˜çš„å˜é‡å‰¯æœ¬ä¸­egï¼šreadæ˜¯è´§è½¦ï¼Œå·¥ä½œå†…å­˜æ˜¯ä»“åº“ï¼ŒloadæŠŠè´§è½¦é‡Œä¸œè¥¿æ”¾è¿›ä»“åº“ use(ä½¿ç”¨) å·¥ä½œå†…å­˜çš„å˜é‡ æŠŠå˜é‡å€¼ä¼ é€’ç»™æ‰§è¡Œå¼•æ“ï¼Œæ¯å½“è™šæ‹Ÿæœºé‡åˆ°ä¸€ä¸ªéœ€è¦ä½¿ç”¨å˜é‡çš„å€¼çš„å­—èŠ‚ç æŒ‡ä»¤æ—¶ï¼Œå°†ä¼šæ‰§è¡Œè¿™ä¸ªæ“ä½œ assign(èµ‹å€¼) å·¥ä½œå†…å­˜çš„å˜é‡ æŠŠuseä¸­æ‰§è¡Œå¼•æ“æ“ä½œçš„ç»“æœèµ‹å€¼ç»™å·¥ä½œå†…å­˜çš„å˜é‡egï¼šuseå¥½æ¯”ç«™ç‚¹è¿›è¡Œå¿«é€’å‘˜åˆ†é…ï¼Œç«™ç‚¹è¯´æˆ‘æŠŠå¿«é€’åˆ†ç»™ä½ äº†å¿«é€’å‘˜Aã€‚å¿«é€’å‘˜Aæ¥æ”¶åˆ°å¿«é€’ assignå¼€å§‹æ´¾é€ã€‚ store(å­˜å‚¨) å·¥ä½œå†…å­˜çš„å˜é‡ æŠŠå·¥ä½œå†…å­˜çš„å˜é‡ä¼ é€åˆ°ä¸»å†…å­˜ä¸­ï¼Œä»¥ä¾¿åé¢çš„writeæ“ä½œ write(å†™å…¥) ä¸»å†…å­˜çš„å˜é‡ æŠŠstoreæ“ä½œä¸­çš„å˜é‡å€¼ä¼ é€åˆ°ä¸»å†…å­˜çš„å˜é‡ä¸­egï¼šstoreå’Œ writeå°±å¥½ç†è§£äº†ï¼Œå¿«é€’å‘˜Aå°†å¿«é€’é€åˆ°ä½ å®¶é—¨å£ï¼ˆstoreï¼‰ï¼Œç„¶åä½ å¾—ç­¾æ”¶ï¼ˆwriteï¼‰ è¿™äº›è¡Œä¸ºå…·æœ‰åŸå­æ€§ï¼Œåœ¨ä½¿ç”¨ä¸Šç›¸äº’ä¾èµ– read-loadä»ä¸»å†…å­˜å¤åˆ¶å˜é‡åˆ°å½“å‰å·¥ä½œå†…å­˜ï¼Œ use-assignæ‰§è¡Œä»£ç æ”¹å˜å…±äº«å˜é‡å€¼ store-writeç”¨å·¥ä½œå†…å­˜æ•°æ®åˆ·æ–°ä¸»å­˜ç›¸å…³å†…å®¹ï¼ŒæŒ‡ä»¤é¡ºåºä¸èƒ½å˜ ä¸Šé¢æ“ä½œæŒ‡ä»¤é¡ºåºä¸èƒ½å˜ï¼Œä½†æ˜¯ä¹‹é—´å¯ä»¥æ’å…¥å…¶ä»–çš„æŒ‡ä»¤ï¼Œegï¼šread aï¼Œread bï¼Œload bï¼Œ load a 2.3 æŒ‡ä»¤è§„åˆ™ ä¸å…è®¸readå’Œloadã€storeå’Œwriteæ“ä½œä¹‹ä¸€å•ç‹¬å‡ºç° ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹ä¸¢å¼ƒå®ƒçš„æœ€è¿‘assignçš„æ“ä½œï¼Œå³å˜é‡åœ¨å·¥ä½œå†…å­˜ä¸­æ”¹å˜äº†ä¹‹åå¿…é¡»åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ã€‚ ä¸å…è®¸ä¸€ä¸ªçº¿ç¨‹æ— åŸå› åœ°ï¼ˆæ²¡æœ‰å‘ç”Ÿè¿‡ä»»ä½•assignæ“ä½œï¼‰æŠŠæ•°æ®ä»å·¥ä½œå†…å­˜åŒæ­¥å›ä¸»å†…å­˜ä¸­ã€‚ ä¸€ä¸ªæ–°çš„å˜é‡åªèƒ½åœ¨ä¸»å†…å­˜ä¸­è¯ç”Ÿï¼Œä¸å…è®¸åœ¨å·¥ä½œå†…å­˜ä¸­ç›´æ¥ä½¿ç”¨ä¸€ä¸ªæœªè¢«åˆå§‹åŒ–ï¼ˆloadæˆ–assignï¼‰çš„å˜é‡ã€‚å³å°±æ˜¯å¯¹ä¸€ä¸ªå˜é‡å®æ–½useå’Œstoreæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰§è¡Œè¿‡äº†assignå’Œloadæ“ä½œã€‚ ä¸€ä¸ªå˜é‡åœ¨åŒä¸€æ—¶åˆ»åªå…è®¸ä¸€æ¡çº¿ç¨‹å¯¹å…¶è¿›è¡Œlockæ“ä½œï¼Œlockå’Œunlockå¿…é¡»æˆå¯¹å‡ºç° å¦‚æœå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œlockæ“ä½œï¼Œå°†ä¼šæ¸…ç©ºå·¥ä½œå†…å­˜ä¸­æ­¤å˜é‡çš„å€¼ï¼Œåœ¨æ‰§è¡Œå¼•æ“ä½¿ç”¨è¿™ä¸ªå˜é‡å‰éœ€è¦é‡æ–°æ‰§è¡Œloadæˆ–assignæ“ä½œåˆå§‹åŒ–å˜é‡çš„å€¼ å¦‚æœä¸€ä¸ªå˜é‡äº‹å…ˆæ²¡æœ‰è¢«lockæ“ä½œé”å®šï¼Œåˆ™ä¸å…è®¸å¯¹å®ƒæ‰§è¡Œunlockæ“ä½œï¼›ä¹Ÿä¸å…è®¸å»unlockä¸€ä¸ªè¢«å…¶ä»–çº¿ç¨‹é”å®šçš„å˜é‡ã€‚ å¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥åˆ°ä¸»å†…å­˜ä¸­ï¼ˆæ‰§è¡Œstoreå’Œwriteæ“ä½œï¼‰ã€‚ 2.4 longå’Œdoubleå‹å˜é‡çš„ç‰¹æ®Šè§„åˆ™longå’Œdoubleæ˜¯64ä½çš„æ•°æ®ç±»å‹ï¼Œå¦‚æœæ²¡æœ‰è¢«volatileä¿®é¥°ï¼Œæ¯æ¬¡æ“ä½œåˆ’åˆ†ä¸º2æ¬¡32ä½è¿›è¡Œæ“ä½œï¼ŒåŸå­æ€§å¯¹äºè¿™ä¸ªä¸èµ·ä½œç”¨ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹æ“ä½œè¿™æ ·çš„æ•°æ®ï¼Œä¼šå‡ºç°æ•°æ®é”™è¯¯ã€‚ ä¸‰ã€JMMå­˜åœ¨çš„å¿…è¦æ€§ç”±äºJVMè¿è¡Œç¨‹åºçš„å®ä½“æ˜¯çº¿ç¨‹ï¼Œè€Œæ¯ä¸ªçº¿ç¨‹åˆ›å»ºæ—¶JVMéƒ½ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå·¥ä½œå†…å­˜(æœ‰äº›åœ°æ–¹ç§°ä¸ºæ ˆç©ºé—´)ï¼Œç”¨äºå­˜å‚¨çº¿ç¨‹ç§æœ‰çš„æ•°æ®ã€‚ çº¿ç¨‹ä¸ä¸»å†…å­˜ä¸­çš„å˜é‡æ“ä½œå¿…é¡»é€šè¿‡å·¥ä½œå†…å­˜é—´æ¥å®Œæˆã€‚ä¸»è¦è¿‡ç¨‹æ˜¯å°†å˜é‡ä»ä¸»å†…å­˜æ‹·è´åˆ°æ¯ä¸ªçº¿ç¨‹å„è‡ªçš„å·¥ä½œå†…å­˜ç©ºé—´ï¼Œç„¶åå¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œæ“ä½œå®Œæˆåå†å°†å˜é‡å†™å›ä¸»å†…å­˜ã€‚å¦‚æœå­˜åœ¨ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€ä¸ªä¸»å†…å­˜ä¸­çš„å®ä¾‹å¯¹è±¡çš„å˜é‡è¿›è¡Œæ“ä½œå°±æœ‰å¯èƒ½è¯±å‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ å¦‚ä¸‹å›¾ï¼Œä¸»å†…å­˜ä¸­å­˜åœ¨ä¸€ä¸ªå…±äº«å˜é‡xï¼Œç°åœ¨æœ‰Aå’ŒBä¸¤æ¡çº¿ç¨‹åˆ†åˆ«å¯¹è¯¥å˜é‡x=1è¿›è¡Œæ“ä½œï¼ŒA/Bçº¿ç¨‹å„è‡ªçš„å·¥ä½œå†…å­˜ä¸­å­˜åœ¨å…±äº«å˜é‡å‰¯æœ¬xã€‚å‡è®¾ç°åœ¨Açº¿ç¨‹æƒ³è¦ä¿®æ”¹xçš„å€¼ä¸º2ï¼Œè€ŒBçº¿ç¨‹å´æƒ³è¦è¯»å–xçš„å€¼ï¼Œé‚£ä¹ˆBçº¿ç¨‹è¯»å–åˆ°çš„å€¼æ˜¯Açº¿ç¨‹æ›´æ–°åçš„å€¼2è¿˜æ˜¯æ›´æ–°å‰çš„å€¼1å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼Œä¸ç¡®å®šã€‚å³Bçº¿ç¨‹æœ‰å¯èƒ½è¯»å–åˆ°Açº¿ç¨‹æ›´æ–°å‰çš„å€¼1ï¼Œä¹Ÿæœ‰å¯èƒ½è¯»å–åˆ°Açº¿ç¨‹æ›´æ–°åçš„å€¼2ï¼Œè¿™æ˜¯å› ä¸ºå·¥ä½œå†…å­˜æ˜¯æ¯ä¸ªçº¿ç¨‹ç§æœ‰çš„æ•°æ®åŒºåŸŸï¼Œè€Œçº¿ç¨‹Aå˜é‡xæ—¶ï¼Œé¦–å…ˆæ˜¯å°†å˜é‡ä»ä¸»å†…å­˜æ‹·è´åˆ°Açº¿ç¨‹çš„å·¥ä½œå†…å­˜ä¸­ï¼Œç„¶åå¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œæ“ä½œå®Œæˆåå†å°†å˜é‡xå†™å›ä¸»å†…å­˜ï¼Œè€Œå¯¹äºBçº¿ç¨‹çš„ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚è¿™æ ·å°±æœ‰å¯èƒ½é€ æˆä¸»å†…å­˜ä¸å·¥ä½œå†…å­˜é—´æ•°æ®å­˜åœ¨ä¸€è‡´æ€§é—®é¢˜ã€‚å‡å¦‚Açº¿ç¨‹ä¿®æ”¹å®Œåæ­£åœ¨å°†æ•°æ®å†™å›ä¸»å†…å­˜ï¼Œè€ŒBçº¿ç¨‹æ­¤æ—¶æ­£åœ¨è¯»å–ä¸»å†…å­˜ï¼Œå³å°†x=1æ‹·è´åˆ°è‡ªå·±çš„å·¥ä½œå†…å­˜ä¸­ï¼Œè¿™æ ·Bçº¿ç¨‹è¯»å–åˆ°çš„å€¼å°±æ˜¯x=1ï¼Œä½†å¦‚æœAçº¿ç¨‹å·²å°†x=2å†™å›ä¸»å†…å­˜åï¼ŒBçº¿ç¨‹æ‰å¼€å§‹è¯»å–çš„è¯ï¼Œé‚£ä¹ˆæ­¤æ—¶Bçº¿ç¨‹è¯»å–åˆ°çš„å°±æ˜¯x=2ï¼Œä½†åˆ°åº•æ˜¯å“ªç§æƒ…å†µå…ˆå‘ç”Ÿå‘¢ï¼Ÿè¿™æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ ä¸ºäº†è§£å†³ç±»ä¼¼ä¸Šè¿°çš„é—®é¢˜ï¼ŒJVMå®šä¹‰äº†ä¸€ç»„è§„åˆ™ï¼Œé€šè¿‡è¿™ç»„è§„åˆ™æ¥å†³å®šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ï¼Œè¿™ç»„è§„åˆ™ä¹Ÿç§°ä¸ºJavaå†…å­˜æ¨¡å‹ï¼ˆå³JMMï¼‰ï¼ŒJMMæ˜¯å›´ç»•ç€ç¨‹åºæ‰§è¡Œçš„åŸå­æ€§ã€æœ‰åºæ€§ã€å¯è§æ€§å±•å¼€çš„ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹çœ‹è¿™ä¸‰ä¸ªç‰¹æ€§ã€‚ å››ã€Javaå†…å­˜æ¨¡å‹çš„ä¸‰å¤§ç‰¹å¾ï¼ˆåŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ï¼‰4.1 åŸå­æ€§ï¼ˆsynchronizedå…·æœ‰åŸå­æ€§ï¼‰ç”±Javaå†…å­˜æ¨¡å‹æ¥ç›´æ¥ä¿è¯çš„åŸå­æ€§å˜é‡æ“ä½œåŒ…æ‹¬readã€loadã€useã€assignã€storeå’Œwriteå…­ä¸ªï¼Œå¤§è‡´å¯ä»¥è®¤ä¸ºåŸºç¡€æ•°æ®ç±»å‹çš„è®¿é—®å’Œè¯»å†™æ˜¯å…·å¤‡åŸå­æ€§çš„ã€‚å¦‚æœåº”ç”¨åœºæ™¯éœ€è¦ä¸€ä¸ªæ›´å¤§èŒƒå›´çš„åŸå­æ€§ä¿è¯ï¼ŒJavaå†…å­˜æ¨¡å‹è¿˜æä¾›äº†lockå’Œunlockæ“ä½œæ¥æ»¡è¶³è¿™ç§éœ€æ±‚ï¼Œå°½ç®¡è™šæ‹ŸæœºæœªæŠŠlockä¸unlockæ“ä½œç›´æ¥å¼€æ”¾ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œä½†æ˜¯å´æä¾›äº†æ›´é«˜å±‚æ¬¡çš„å­—èŠ‚ç æŒ‡ä»¤monitorenterå’Œmonitorexitæ¥éšåŒ¿åœ°ä½¿ç”¨è¿™ä¸¤ä¸ªæ“ä½œï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚ç æŒ‡ä»¤åæ˜ åˆ°Javaä»£ç ä¸­å°±æ˜¯åŒæ­¥å—â€”synchronizedå…³é”®å­—ï¼Œå› æ­¤åœ¨synchronizedå—ä¹‹é—´çš„æ“ä½œä¹Ÿå…·å¤‡åŸå­æ€§ã€‚ åŸå­æ€§æŒ‡çš„æ˜¯ä¸€ä¸ªæ“ä½œæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œå³ä½¿æ˜¯åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œä¸€ä¸ªæ“ä½œä¸€æ—¦å¼€å§‹å°±ä¸ä¼šè¢«å…¶ä»–çº¿ç¨‹å½±å“ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªé™æ€å˜é‡int xï¼Œä¸¤æ¡çº¿ç¨‹åŒæ—¶å¯¹ä»–èµ‹å€¼ï¼Œçº¿ç¨‹Aèµ‹å€¼ä¸º1ï¼Œè€Œçº¿ç¨‹Bèµ‹å€¼ä¸º2ï¼Œä¸ç®¡çº¿ç¨‹å¦‚ä½•è¿è¡Œï¼Œæœ€ç»ˆxçš„å€¼è¦ä¹ˆæ˜¯1ï¼Œè¦ä¹ˆæ˜¯2ï¼Œçº¿ç¨‹Aå’Œçº¿ç¨‹Bé—´çš„æ“ä½œæ˜¯æ²¡æœ‰å¹²æ‰°çš„ï¼Œè¿™å°±æ˜¯åŸå­æ€§æ“ä½œï¼Œä¸å¯è¢«ä¸­æ–­çš„ç‰¹ç‚¹ã€‚ 4.2 å¯è§æ€§ï¼ˆvolatileã€synchronizedã€finalï¼‰å¯è§æ€§æ˜¯æŒ‡å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†å…±äº«å˜é‡çš„å€¼ï¼Œå…¶ä»–çº¿ç¨‹èƒ½å¤Ÿç«‹å³å¾—çŸ¥è¿™ä¸ªä¿®æ”¹ã€‚ Javaå†…å­˜æ¨¡å‹æ˜¯é€šè¿‡åœ¨å˜é‡ä¿®æ”¹åå°†æ–°å€¼åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œæ— è®ºæ˜¯æ™®é€šå˜é‡è¿˜æ˜¯volatileå˜é‡éƒ½æ˜¯å¦‚æ­¤ï¼Œæ™®é€šå˜é‡ä¸volatileå˜é‡çš„åŒºåˆ«æ˜¯ï¼Œvolatileçš„ç‰¹æ®Šè§„åˆ™ä¿è¯äº†æ–°å€¼èƒ½ç«‹å³åŒæ­¥åˆ°ä¸»å†…å­˜ï¼Œä»¥åŠæ¯æ¬¡ä½¿ç”¨å‰ç«‹å³ä»ä¸»å†…å­˜åˆ·æ–°ã€‚å› æ­¤ï¼Œå¯ä»¥è¯´volatileä¿è¯äº†å¤šçº¿ç¨‹æ“ä½œæ—¶å˜é‡çš„å¯è§æ€§ï¼Œè€Œæ™®é€šå˜é‡ä¸èƒ½ä¿è¯è¿™ä¸€ç‚¹ã€‚ é™¤äº†volatileä¹‹å¤–ï¼ŒJavaè¿˜æœ‰ä¸¤ä¸ªå…³é”®å­—èƒ½å®ç°å¯è§æ€§ï¼Œå³synchronizedå’Œfinalã€‚åŒæ­¥å—çš„å¯è§æ€§æ˜¯ç”±â€œå¯¹ä¸€ä¸ªå˜é‡æ‰§è¡Œunlockæ“ä½œä¹‹å‰ï¼Œå¿…é¡»å…ˆæŠŠæ­¤å˜é‡åŒæ­¥å›ä¸»å†…å­˜ä¸­(æ‰§è¡Œstore writeæ“ä½œ)â€è¿™æ¡è§„åˆ™è·å¾—çš„ï¼Œè€Œfinalå…³é”®å­—çš„å¯è§æ€§æ˜¯æŒ‡ï¼šè¢«finalä¿®é¥°çš„å­—æ®µåœ¨æ„é€ å™¨ä¸­ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œå¹¶ä¸”æ„é€ å™¨æ²¡æœ‰æŠŠâ€thisâ€çš„å¼•ç”¨ä¼ é€’å‡ºå»ï¼ˆthiså¼•ç”¨é€ƒé€¸æ˜¯ä¸€ä»¶å¾ˆå±é™©çš„äº‹æƒ…ï¼Œå…¶ä»–çº¿ç¨‹æœ‰å¯èƒ½é€šè¿‡è¿™ä¸ªå¼•ç”¨è®¿é—®åˆ°â€œåˆå§‹åŒ–äº†ä¸€åŠâ€çš„å¯¹è±¡ï¼‰ï¼Œé‚£åœ¨å…¶ä»–çº¿ç¨‹ä¸­å°±èƒ½çœ‹è§finalå­—æ®µçš„å€¼ã€‚ å·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿç°è±¡å°±é€ æˆäº†å¯è§æ€§é—®é¢˜ã€‚å¦å¤–æŒ‡ä»¤é‡æ’ä»¥åŠç¼–è¯‘å™¨ä¼˜åŒ–ä¹Ÿå¯èƒ½å¯¼è‡´å¯è§æ€§é—®é¢˜ã€‚ 4.3 æœ‰åºæ€§ï¼ˆvolatileã€synchronizedï¼‰Javaç¨‹åºä¸­å¤©ç„¶çš„æœ‰åºæ€§å¯ä»¥æ€»ç»“ä¸ºä¸€å¥è¯ï¼šå¦‚æœåœ¨æœ¬çº¿ç¨‹å†…è§‚å¯Ÿï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼›å¦‚æœåœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­è§‚å¯Ÿå¦ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯æ— åºçš„ã€‚å‰åŠå¥æ˜¯æŒ‡â€œçº¿ç¨‹å†…è¡¨ç°ä¸ºä¸²è¡Œçš„è¯­ä¹‰â€(Within-Thread As-If-Serial Semantics)ï¼ŒååŠå¥æ˜¯æŒ‡â€œæŒ‡ä»¤é‡æ’åºâ€ç°è±¡å’Œâ€œå·¥ä½œå†…å­˜ä¸ä¸»å†…å­˜åŒæ­¥å»¶è¿Ÿâ€ç°è±¡ã€‚ æ¢å¥è¯è¯´æœ‰åºæ€§æ˜¯æŒ‡å¯¹äºå•çº¿ç¨‹ç¯å¢ƒä¸‹ä»£ç æ‰§è¡Œçš„æœ€ç»ˆç»“æœå’ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œçš„ç»“æœä¸€è‡´ã€‚ä½†å¯¹äºå¤šçº¿ç¨‹ç¯å¢ƒï¼Œåˆ™å¯èƒ½å‡ºç°ä¹±åºç°è±¡ã€‚å› ä¸ºç¨‹åºç¼–è¯‘æˆæœºå™¨ç æŒ‡ä»¤åå¯èƒ½ä¼šå‡ºç°æŒ‡ä»¤é‡æ’ç°è±¡ï¼Œé‡æ’åçš„æŒ‡ä»¤ä¸åŸæŒ‡ä»¤çš„é¡ºåºæœªå¿…ä¸€è‡´ã€‚ å¯èƒ½æœ‰ç‚¹ä¸å¤ªå®¹æ˜“ç†è§£ï¼Œæœ‰åºæ€§å°±æ˜¯ï¼Œä¸ç®¡å“ªä¸ªçº¿ç¨‹æ¥çœ‹ï¼Œæ“ä½œéƒ½æ˜¯æœ‰åºçš„ äº”ã€æŒ‡ä»¤é‡æ’åºï¼ˆvolatileã€synchronizedã€æœ‰åºæ€§æœ‰å…³ï¼‰5.1 åŸºæœ¬æ¦‚å¿µï¼šåœ¨æ‰§è¡Œç¨‹åºæ—¶ä¸ºäº†æé«˜æ€§èƒ½ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤åšé‡æ’åºï¼ˆç®€å•ç†è§£å°±æ˜¯åŸæœ¬æˆ‘ä»¬å†™çš„ä»£ç æŒ‡ä»¤æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯Aâ†’Bâ†’Cï¼Œä½†æ˜¯ç°åœ¨çš„CPUéƒ½æ˜¯å¤šæ ¸CPUï¼Œä¸ºäº†æé«˜å¹¶è¡Œåº¦ï¼Œä¸ºäº†æé«˜æ€§èƒ½ç­‰ï¼Œå¯èƒ½ä¼šå‡ºç°æŒ‡ä»¤é¡ºåºå˜ä¸ºBâ†’Aâ†’Cç­‰å…¶ä»–æƒ…å†µï¼‰ã€‚ å½“ç„¶CPUä»¬ä¹Ÿä¸æ˜¯éšä¾¿å°±å»é‡æ’åºï¼Œ éœ€è¦æ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ï¼ˆéµå¾ªçš„è§„åˆ™ï¼‰ï¼š åœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ä¸èƒ½æ”¹å˜ç¨‹åºè¿è¡Œçš„ç»“æœï¼› å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸å…è®¸é‡æ’åº 5.2 æ•°æ®ä¾èµ–æ€§ é‡æ’åºéµå®ˆæ•°æ®ä¾èµ–æ€§ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šæ”¹å˜å­˜åœ¨æ•°æ®ä¾èµ–å…³ç³»çš„ä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºã€‚ä½†æ˜¯è¿™é‡Œæ‰€è¯´çš„æ•°æ®ä¾èµ–æ€§ä»…é’ˆå¯¹å•ä¸ªå¤„ç†å™¨ä¸­æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—å’Œå•ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œï¼Œä¸åŒå¤„ç†å™¨ä¹‹é—´å’Œä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ä¸è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨è€ƒè™‘ã€‚ 5.3 é‡æ’åºåˆ†ä¸‰ç±» ç¼–è¯‘å™¨ä¼˜åŒ–çš„é‡æ’åºã€‚ç¼–è¯‘å™¨åœ¨ä¸æ”¹å˜å•çº¿ç¨‹ç¨‹åºè¯­ä¹‰çš„å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚ æŒ‡ä»¤çº§å¹¶è¡Œçš„é‡æ’åºã€‚ç°ä»£å¤„ç†å™¨é‡‡ç”¨äº†æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯æ¥å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚å¦‚æœä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚ å†…å­˜ç³»ç»Ÿçš„é‡æ’åºã€‚ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»ï¼å†™ç¼“å†²åŒºï¼Œè¿™ä½¿å¾—åŠ è½½å’Œå­˜å‚¨æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œã€‚å› ä¸ºä¸‰çº§ç¼“å­˜çš„å­˜åœ¨ï¼Œå¯¼è‡´å†…å­˜ä¸ç¼“å­˜çš„æ•°æ®åŒæ­¥å­˜åœ¨æ—¶é—´å·®ã€‚ ä» Java æºä»£ç åˆ°æœ€ç»ˆå®é™…æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—ï¼Œä¼šåˆ†åˆ«ç»å†ä¸‹é¢ä¸‰ç§é‡æ’åºï¼š å…­ã€volatileå…³é”®å­—volatileæ˜¯Javaè™šæ‹Ÿæœºæä¾›çš„è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ã€‚ volatileå…³é”®å­—æœ‰å¦‚ä¸‹ä¸¤ä¸ªä½œç”¨ï¼š ä¿è¯è¢«volatileä¿®é¥°çš„å…±äº«å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹æ€»æ˜¯å¯è§çš„ï¼Œä¹Ÿå°±æ˜¯å½“ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹äº†ä¸€ä¸ªè¢«volatileä¿®é¥°å…±äº«å˜é‡çš„å€¼ï¼Œæ–°å€¼æ€»æ˜¯å¯ä»¥è¢«å…¶ä»–çº¿ç¨‹ç«‹å³å¾—çŸ¥ï¼Œè¿™ä¸ªçº¿ç¨‹ä¼šé€šçŸ¥å…¶ä»–çº¿ç¨‹ä»æ–°è¯»å–ä¸»å†…å­˜çš„å€¼ ç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚ ä¸å…·æœ‰åŸå­æ€§ï¼Œi++ç­‰ä¼šå‡ºç°çº¿ç¨‹å®‰å…¨é—®é¢˜ ä¸ƒã€finalfinalåœ¨Javaä¸­æ˜¯ä¸€ä¸ªä¿ç•™çš„å…³é”®å­—ï¼Œå¯ä»¥å£°æ˜æˆå‘˜å˜é‡ã€æ–¹æ³•ã€ç±»ä»¥åŠæœ¬åœ°å˜é‡ã€‚ è¢«finalä¿®é¥°çš„å˜é‡ä¸èƒ½è¢«ä¿®æ”¹ï¼Œæ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚ å¯¹äºfinalï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨è¦éµå®ˆä¸¤ä¸ªé‡æ’åºè§„åˆ™ï¼šå†™è§„åˆ™å’Œè¯»è§„åˆ™ å…«ã€æ€»ç»“JMMå°±æ˜¯ä¸€ç»„è§„åˆ™ï¼Œè§£å†³åœ¨å¹¶å‘ç¼–ç¨‹å¯èƒ½å‡ºç°çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæä¾›äº†å†…ç½®è§£å†³æ–¹æ¡ˆï¼ˆhappen-beforeåŸåˆ™ï¼‰åŠå…¶å¤–éƒ¨å¯ä½¿ç”¨çš„åŒæ­¥æ‰‹æ®µï¼ˆsynchronized/volatileç­‰ï¼‰ï¼Œç¡®ä¿äº†ç¨‹åºåœ¨å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡Œä¸­çš„åŸå­æ€§ã€å¯è§æ€§ã€æœ‰åºæ€§ã€‚ é‡æ’åºæ˜¯å¤šæ ¸CPUç­‰ä¸ºäº†æ€§èƒ½è¿›è¡Œçš„ä¼˜åŒ–æ“ä½œï¼Œä½†ä¼šå¯¼è‡´å¯è§æ€§ç­‰é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæ‰€ä»¥JMMéœ€è¦åˆ¶å®šä¸€äº›è§„åˆ™ï¼Œä¸è®©å…¶éšæ„é‡æ’åºã€‚ as-if-serialåªä¿è¯å•çº¿ç¨‹ç¯å¢ƒçš„ä¸å¯éšæ„é‡æ’åºã€‚ å¤šçº¿ç¨‹ä¸‹ç”¨ï¼Œhappens-beforeæ˜¯JMMåˆ¶å®šçš„æœ€ç»ˆç›®çš„ï¼Œå†…å­˜å±éšœåˆ™æ˜¯å®ç°happens-beforeçš„å…·ä½“æ‰‹æ®µã€‚ å‚è€ƒèµ„æ–™ï¼š https://blog.csdn.net/j080624/article/details/85320108 https://www.cnblogs.com/nexiyi/p/java_memory_model_and_thread.html]]></content>
      <categories>
        <category>Javaå†…å­˜æ¨¡å‹JMM</category>
      </categories>
      <tags>
        <tag>çº¿ç¨‹</tag>
        <tag>Javaå†…å­˜æ¨¡å‹</tag>
        <tag>JMM</tag>
        <tag>volatile</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ï¼ˆè½¬ï¼‰PicGo+GitHubå›¾åºŠ+å¾®åšå›¾åºŠ]]></title>
    <url>%2F2019%2F05%2F27%2F%EF%BC%88%E8%BD%AC%EF%BC%89PicGo-GitHub%E5%9B%BE%E5%BA%8A-%E5%BE%AE%E5%8D%9A%E5%9B%BE%E5%BA%8A%2F</url>
    <content type="text"><![CDATA[PicGoå›¾åºŠä¸Šä¼ å·¥å…·ï¼Œé…ç½®GitHubå›¾åºŠã€å¾®åšå›¾åºŠï¼ˆåœ¨csdnå’Œåšå®¢ä¸Šä¸æ˜¾ç¤ºå‡ºæ¥ï¼Œè¢«åäº†ï¼‰ åŸé“¾æ¥ PicGoä»‹ç»è¿™æ˜¯ä¸€æ¬¾å›¾ç‰‡ä¸Šä¼ çš„å·¥å…·ï¼Œç›®å‰æ”¯æŒå¾®åšå›¾åºŠï¼Œä¸ƒç‰›å›¾åºŠï¼Œè…¾è®¯äº‘ï¼Œåˆæ‹äº‘ï¼ŒGitHubç­‰å›¾åºŠï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå›¾åºŠã€‚ æ‰€ä»¥è§£å†³é—®é¢˜çš„æ€è·¯å°±æ˜¯ï¼Œå°†æœ¬åœ°çš„æ–‡ä»¶ï¼Œæˆ–è€…å‰ªåˆ‡æ¿ä¸Šé¢çš„æˆªå›¾å‘é€å›¾åºŠï¼Œç„¶åç”Ÿæˆåœ¨çº¿å›¾ç‰‡çš„é“¾æ¥ï¼Œèµ°åˆ°å“ªå°±å¯ä»¥ç”¨åˆ°å“ªğŸ˜Šã€‚ ä¸€ã€GitHubå›¾åºŠï¼š1. åˆ›å»ºGitHubå›¾åºŠä¹‹å‰ï¼Œéœ€è¦æ³¨å†Œ/ç™»é™†GitHubè´¦å·ç”³è¯·GitHubè´¦å·å¾ˆç®€å•ï¼Œæˆ‘å°±ä¸æ¼”ç¤ºäº† 2. åˆ›å»ºRepository 3.ç”Ÿæˆä¸€ä¸ªTokenç”¨äºæ“ä½œGitHub repository æ³¨ï¼šåˆ›å»ºæˆåŠŸåï¼Œä¼šç”Ÿæˆä¸€ä¸²tokenï¼Œè¿™ä¸²tokenä¹‹åä¸ä¼šå†æ˜¾ç¤ºï¼Œæ‰€ä»¥ç¬¬ä¸€æ¬¡çœ‹åˆ°çš„æ—¶å€™ï¼Œå°±è¦å¥½å¥½ä¿å­˜ é…ç½®PicGo1. ä¸‹è½½è¿è¡ŒPicGoä¸‹è½½ 2. é…ç½®å›¾åºŠ ã€‚è®¾å®šä»“åº“åçš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§â€œè´¦æˆ·å/ä»“åº“åçš„æ ¼å¼å¡«å†™â€ã€‚åˆ†æ”¯åç»Ÿä¸€å¡«å†™â€œmasterâ€ã€‚å°†ä¹‹å‰çš„Tokené»è´´åœ¨è¿™é‡Œã€‚å­˜å‚¨çš„è·¯å¾„å¯ä»¥æŒ‰ç…§æˆ‘è¿™æ ·å­å†™ï¼Œå°±ä¼šåœ¨repositoryä¸‹åˆ›å»ºä¸€ä¸ªâ€œimgâ€æ–‡ä»¶å¤¹ ã€‚è‡ªå®šä¹‰åŸŸåçš„ä½œç”¨æ˜¯ï¼Œåœ¨ä¸Šä¼ å›¾ç‰‡åæˆåŠŸåï¼ŒPicGoä¼šå°†â€œè‡ªå®šä¹‰åŸŸå+ä¸Šä¼ çš„å›¾ç‰‡åâ€ç”Ÿæˆçš„è®¿é—®é“¾æ¥ï¼Œæ”¾åˆ°å‰ªåˆ‡æ¿ä¸Šhttps://raw.githubusercontent.com/ç”¨æˆ·å/RepositoryName/åˆ†æ”¯åï¼Œï¼Œè‡ªå®šä¹‰åŸŸåéœ€è¦æŒ‰ç…§è¿™æ ·å»å¡«å†™ äºŒã€å¾®åšå›¾åºŠä¸Šä¼ çš„å›¾ç‰‡ä¸ä¼šå‡ºç°åœ¨ä½ çš„å¾®åšç›¸å†Œé‡Œã€‚å¯ä»¥é€‰æ‹©é“¾æ¥çš„å›¾ç‰‡è´¨é‡ï¼Œè¿™æ ·åœ¨å¤åˆ¶åˆ°å‰ªè´´æ¿é‡Œçš„å›¾ç‰‡å°†ä¼šå¯¹åº”ä¿®æ”¹æˆå¯¹åº”çš„é“¾æ¥åœ°å€ã€‚è®¾ç½®ä½ çš„å¾®åšå›¾åºŠå¯ä»¥é€‰æ‹©ä¸¤ç§æ¨¡å¼ï¼š åªéœ€å¡«å†™ä½ çš„å¾®åšç”¨æˆ·åå¯†ç å³å¯ã€‚ç¼ºç‚¹ï¼šä¸Šä¼ é€Ÿåº¦ä¼šæ…¢ï¼ˆå°¤å…¶windowså¹³å°ï¼‰ï¼Œå› ä¸ºè¦ç»è¿‡å¾ˆå¤šå±‚éªŒè¯ã€‚å¹¶ä¸”å¦‚æœå‡ºç°éœ€è¦éªŒè¯ç çš„æƒ…å†µæ— æ³•è§£å†³ã€‚ åªéœ€Cookieä¸Šä¼ ï¼ˆPicGo v1.3.2åŠä»¥ä¸Šç‰ˆæœ¬æ”¯æŒï¼‰ã€‚åˆ‡æ¢æˆcookieæ¨¡å¼ã€‚ç„¶åå…ˆç™»å½•å¾®åšï¼ˆå¿…é¡»å…ˆç™»å½•ï¼‰ï¼Œä¹‹åæ‰“å¼€minipublishï¼ˆminipublishé“¾æ¥åœ°å€ï¼‰é¡µé¢ï¼Œå¦‚æœä½ æ˜¯macç”¨æˆ·ï¼Œä½¿ç”¨command+alt+iï¼Œå¦‚æœä½ æ˜¯windowsç”¨æˆ·ï¼Œä½¿ç”¨F12æ‰“å¼€æ§åˆ¶å°ï¼Œé€‰æ‹©Networkæ ‡ç­¾æ ã€‚ç„¶ååˆ·æ–°ä¸€ä¸‹é¡µé¢ï¼Œæ‰¾åˆ°Networké‡Œçš„minipublishä¸€é¡¹ï¼Œå†æ‰¾åˆ°minipublishå³ä¾§çš„Cookieä¸€é¡¹ï¼ŒæŠŠCookieå†’å·åçš„å€¼å…¨éƒ¨å¤åˆ¶ï¼ˆä¸è¦æŠŠCookie:è¿™ä¸ªä¹Ÿå¤åˆ¶äº†ï¼‰ç„¶åå¡«å…¥PicGoé‡Œçš„Cookieä¸€æ ã€‚è¿™æ ·å°±è¡Œäº†ã€‚]]></content>
      <categories>
        <category>æ‚ä¸ƒæ‚å…«</category>
      </categories>
      <tags>
        <tag>å›¾åºŠ</tag>
        <tag>PicGo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JVMï¼ˆä¸€ï¼‰JVMæ„æˆåŠç®€å•å…¥é—¨]]></title>
    <url>%2F2019%2F04%2F12%2FJVM%EF%BC%88%E4%B8%80%EF%BC%89JVM%E6%9E%84%E6%88%90%E5%8F%8A%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆè¦ä½¿ç”¨JVMã€JVMæ„æˆï¼ˆæ–¹æ³•åŒºã€å †å†…å­˜ã€çº¿ç¨‹ç‹¬æœ‰çš„ï¼ˆçº¿ç¨‹æ ˆã€æœ¬åœ°æ–¹æ³•æ ˆã€PCè®¡æ•°å™¨ï¼‰ï¼‰ ä»HelloWordè§’åº¦ç†è§£JVM1.ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è™šæ‹Ÿæœº(JVM)è™šæ‹Ÿé™¤äº†ä¸€å°æ‹¥æœ‰å’ŒçœŸå®è®¡ç®—æœºç›¸åŒèƒ½åŠ›çš„æœºå™¨ï¼Œåªä¸è¿‡ä»–é‡Œé¢çš„ä»»ä½•ç¡¬ä»¶éƒ½æ˜¯è™šæ‹Ÿå‡ºæ¥çš„ï¼Œé€šè¿‡è™šæ‹Ÿæœºæ¥ä¿è¯äº†çœŸå®æœºå™¨çš„å®‰å…¨ï¼ŒJVMåŒæ—¶ä¹Ÿæ˜¯javaè·¨å¹³å°è¿è¡Œçš„åŸºç¡€ã€‚ 2.JVMæ„æˆ æ–¹æ³•åŒºé‡Œä¼šæœ‰å¸¸é‡æ±  å †å†…å­˜ï¼šå¤šçº¿ç¨‹å…±äº«ï¼Œä¼šå‘ç”Ÿå¹¶å‘ å¦å¤–ä¸€å—æ˜¯çº¿ç¨‹ç§æœ‰çš„ï¼Œä¸ä¼šå‘ç”Ÿå¹¶å‘ çº¿ç¨‹æ ˆï¼šæ–¹æ³•å‹æ ˆåˆ°è¿™é‡Œé¢æ‰§è¡Œ,å…ˆè¿›åå‡º PCè®¡æ•°å™¨ï¼šè®°å½•ç¨‹åºæŒ‡ä»¤æ‰§è¡Œåˆ°å“ª æœ¬åœ°æ–¹æ³•æ ˆï¼šJNIï¼ŒæŠŠcå’Œc++çš„å‡½æ•°å‹åˆ°æœ¬åœ°æ ˆé‡Œæ‰§è¡Œ è¿˜æœ‰æ ˆä¸Šåˆ†é…å¯¹è±¡(æœªç”»å‡º):å¼€è¾Ÿä¸€ä¸ªç©ºé—´ï¼Œçº¿ç¨‹é¦–å…ˆåœ¨è¿™ä¸ªç©ºé—´é‡Œè¿è¡Œï¼Œå¦‚æœä¸èƒ½æ»¡è¶³ï¼Œå†å»å †å†…å­˜è¿è¡Œï¼Œé¿å…åœ¨å †å†…å­˜ä¸­å¤šçº¿ç¨‹å¹¶å‘é—®é¢˜ 3.å­—èŠ‚ç åœ¨ç±»åŠ è½½å™¨çš„è¿‡ç¨‹ åŠ è½½ éªŒè¯ï¼š classæ–‡ä»¶çš„ç‰ˆæœ¬èƒ½ä¸èƒ½å…¼å®¹å½“å‰JVMç‰ˆæœ¬ï¼Œeg:jdk1.9çš„æ–‡ä»¶åˆ°jdk1.7çš„è¿è¡Œ classæ–‡ä»¶æ˜¯å¦æ»¡è¶³jvmè§„èŒƒ(classçš„ç¬¬ä¸€ä¸ªå­—èŠ‚ç æ–‡ä»¶ä¸ºâ€™é­”æ•°â€™å€¼)ä¸ºåå…­è¿›åˆ¶çš„ä»£ç  å‡†å¤‡ï¼šæŠŠç±»æˆå‘˜åˆå§‹åŒ–ä¸ºåˆå§‹å€¼ã€‚finalçš„ç±»å˜é‡é™¤å¤–ï¼Œfinalå˜é‡ç›´æ¥åˆå§‹åŒ–ä¸ºå˜é‡å€¼ è§£æï¼š æŠŠç¬¦å·å¼•ç”¨è§£æä¸ºç›´æ¥å¼•ç”¨ ç¬¦å·å¼•ç”¨ï¼šå°±æ˜¯æˆ‘ä»¬å†™çš„xxå˜é‡ xxxå¯¹è±¡çš„å¼•ç”¨ å¦‚Integer xxx = new Integer(); è§£æå°±æ˜¯è¦æŠŠç±»ä¼¼äºxxxï¼Œxxè¿™ç§ç¬¦å·å¼•ç”¨å˜ä¸ºç›´æ¥å¼•ç”¨å³å†…å­˜åœ°å€ åˆå§‹åŒ–ï¼šæŠŠæˆ‘ä»¬å®šä¹‰çš„staticå˜é‡æˆ–è€…staticé™æ€ä»£ç å—æŒ‰é¡ºåºç»„ç»‡æˆ&lt;clinit&gt;æ„é€ å™¨(ä¹Ÿç§°ä½œç±»æ„é€ å™¨)æ¥åˆå§‹åŒ–å˜é‡ æœ€ååˆ°æ–¹æ³•åŒºï¼Œæ‰€æœ‰å…³äºç±»çš„ä¿¡æ¯å…¨éƒ¨ä¿å­˜åœ¨æ–¹æ³•åŒºã€‚é€šè¿‡å¸¸é‡æ± æ¥ä¿å­˜ï¼Œç”Ÿæˆäº†ä¸€ä¸ªä»£è¡¨æ‰€æœ‰ç±»ä¿¡æ¯çš„å¯¹è±¡classInstance 4.åˆ†æHello Wordåœ¨jvmä¸­æ‰§è¡Œè¿‡ç¨‹12345public class Hello&#123; public static void main(String[] args)&#123; System.out.println("hello word"); &#125;&#125; mainæ–¹æ³•å‹æ ˆåˆ°å †æ ˆé‡Œï¼Œæ‰§è¡Œä»– è°ƒç”¨ä»–ï¼Œé‡Œé¢çš„Systemç±»åˆåŠ è½½åˆ°æ–¹æ³•åŒºé‡Œï¼Œè¿™ä¸ªç±»é‡Œä¸€ä¸ªoutçš„é™æ€å˜é‡ï¼Œç„¶åè°ƒç”¨äº†printlnæ–¹æ³•(è¿™ä¸ªä¹Ÿæ˜¯åœ¨æ–¹æ³•åŒºé‡Œ) 5.åç¼–è¯‘åˆ†æhello Wordå­—èŠ‚ç cmdæŒ‡ä»¤ javap -c xxx å°†æŒ‡å®šå­—èŠ‚ç åç¼–è¯‘ä¸ºå­—èŠ‚ç æŒ‡ä»¤è¾“å‡º åˆ†æä¸‹é¢çš„æŒ‡ä»¤ï¼š 0ï¼šgetstatic #2 å­—é¢æ„æ€ï¼Œè·å–é™æ€ï¼Œå°±æ˜¯åœ¨æ–¹æ³•åŒºä»Systemè¿™ä¸ªç±»ä¸­å–2å·ä½å¸¸é‡æ± Fieldä¸­çš„outå¯¹è±¡çš„å¼•ç”¨å‹æ ˆåˆ°å †æ ˆä¸­ 3ï¼šldc #3 æŠŠ3å·ä½Stringçš„å¼•ç”¨å‹æ ˆåˆ°å †æ ˆä¸­ 5ï¼šinvokevirtual #4 æ¿€æ´»outå¯¹è±¡é‡Œçš„printlnæ–¹æ³• 8ï¼šreturn ç¨‹åºç»“æŸå®Œæ¯•]]></content>
      <categories>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨JVM</tag>
        <tag>JVMæ„æˆ</tag>
        <tag>ç±»åŠ è½½å™¨</tag>
        <tag>æ–¹æ³•åŒº</tag>
        <tag>å †å†…å­˜</tag>
        <tag>çº¿ç¨‹æ ˆï¼ˆå †æ ˆï¼‰</tag>
        <tag>æœ¬åœ°æ–¹æ³•æ ˆ</tag>
        <tag>PCè®¡æ•°å™¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å‡ºç§Ÿè½¦é¡¹ç›®æŠ€æœ¯æ€»ç»“]]></title>
    <url>%2F2019%2F03%2F16%2F%E5%87%BA%E7%A7%9F%E8%BD%A6%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[2018.10-2019.1 é¡¹ç›®æè¿°ï¼šå‡ºç§Ÿè½¦å…¬å¸çš„ç®¡ç†ç³»ç»Ÿï¼Œå®ç°è½¦è¾†æ¡£æ¡ˆç®¡ç†ã€è½¦è¾†æ”¶è´¹ã€å…¬å¸æŠ¥è¡¨ã€è®¾å¤‡å’Œ sim å‡ºå…¥åº“æŠ¥åºŸã€å­—å…¸è®¾ ç½®ã€æƒé™ç®¡ç†ï¼Œæ‰“å°ç­‰ æŠ€æœ¯ï¼šSpring+SpringMvc+MyBatis+MySQL+shiro+Bootstrap3+HTML5+CSS3+JQueryAjax [TOC] 1.ä¸åŒå…¬å¸çš„äººåªèƒ½çœ‹è§å®ƒå…¬å¸çš„ç›¸å…³ä¿¡æ¯æˆ–è€…å­å…¬å¸çš„ç›¸å…³ä¿¡æ¯ï¼Œè¿›è¡Œä¸€ä¸ªæ•°æ®è¿‡æ»¤è§£å†³åŠæ³•ï¼šæ•°æ®åº“è®¾è®¡è¿‡æ»¤ ç»™å…¬å¸å­—æ®µåŠ å…¥æ˜¯å‡ çº§å…¬å¸ï¼Œå…¬å¸å/å…¬å¸ç¼–ç ï¼ˆæˆ–å…¶ä»–å”¯ä¸€çš„ï¼‰ ç»™äººçš„å­—æ®µåŠ å…¥æ‰€åœ¨å…¬å¸çš„å±‚æ¬¡çº§åˆ«å’Œå…¬å¸å ç»™è¿™ä¸ªå…¬å¸çš„ç›¸å…³äº§å“åŠ ä¸Šå…¬å¸åå’Œçº§åˆ«å­—æ®µ æ¡ˆä¾‹ï¼š â€‹ å…¬å¸è¡¨ï¼š â€‹ å…¬å¸å‘˜å·¥è¡¨ï¼š â€‹ å…¬å¸çš„è½¦è¾†è¡¨ï¼š åˆ†æï¼š æœ¬è¿‡æ»¤ç”¨äºï¼Œå¤šå°‘çº§å…¬å¸å…·ä½“çŸ¥é“ ç®¡ç†å‘˜ç»™å‘˜å·¥è´¦å·åˆ†é…å…¬å¸ï¼Œå‘˜å·¥ä¸‰ä¸ªå­—æ®µå°±å‡ºæ¥äº† å‘˜å·¥ç™»å½•ç³»ç»Ÿï¼ŒæŸ¥çœ‹è½¦è¾†ï¼Œä»sessioné‡Œå–å‡ºç™»å½•äººæ‰€åœ¨å…¬å¸çº§åˆ«å’Œå…¬å¸ç¼–ç ï¼Œå¦‚æœä¸º1çº§å…¬å¸ï¼Œå°±æ˜¯level1=å…¬å¸ç¼–ç ï¼Œ2çº§å…¬å¸å°±æ˜¯level2=å…¬å¸ç¼–ç â€¦. æ·»åŠ è½¦è¾†æ—¶ï¼Œå–ç™»å½•äººæ‰€åœ¨å…¬å¸çº§åˆ«å’Œå…¬å¸ç¼–ç ï¼Œç„¶åä½œä¸ºæ•°æ®æ”¾è¿›å„ä¸ªè¡¨é‡Œï¼Œå¦‚æœä»–ä¸æ˜¯æ€»å…¬å¸ï¼Œå°±å¾—æŠŠä»–çš„çˆ¶å…¬å¸ç¼–ç å¡«è¿›ç›¸åº”çš„å­—æ®µã€‚ 2.æ ¹æ®è®¿é—®ipè·å–æ‰€åœ¨åœ°æ–¹çš„ä¿¡æ¯(ç™¾åº¦API)123456789$.ajax(&#123; url : 'http://api.map.baidu.com/location/ip?ak=ia6HfFL660Bvh43exmH9LrI6', type : 'GET', dataType : 'jsonp', async : false, success : function(data) &#123; console.log(data); &#125;&#125;); è¾“å‡º====ï¼š 12345678910111213141516171819&#123; "address": "CN|å‰æ—|é•¿æ˜¥|None|UNICOM|0|0", "content": &#123; "address_detail": &#123; "province": "å‰æ—çœ", "city": "é•¿æ˜¥å¸‚", "district": "", "street": "", "street_number": "", "city_code": xx &#125;, "address": "å‰æ—çœé•¿æ˜¥å¸‚", "point": &#123; "y": "xxx", "x": "xx" &#125; &#125;, "status": 0&#125; 3.åŠ¨æ€æ‹¼æ¥HTMLæœ‰äº›æ•°æ®éœ€è¦ä»æ•°æ®åº“é‡ŒåŠ¨æ€å¯¼å‡ºæ¥ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°åŠ¨æ€æ‹¼æ¥è¡¨å•å…ƒç´ ï¼Œå¯èƒ½ä¼šç”¨åˆ°append()å‡½æ•°ç­‰ï¼Œå¾ˆå¤šæ—¶å€™å…³äºå…ƒç´ çš„å®šä½ï¼Œæ‰¾ä»–ä¸Šä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œéœ€è¦ç”¨åˆ°next()ã€parents()ã€children()ç­‰å‡½æ•°æ¥è·å–æ•°æ® 4.é¡µé¢ä¸Šå‡ºç°å¿«é€ŸæŸ¥è¯¢åŠŸèƒ½ï¼ˆjQuery UIçš„autocompleteï¼‰å…è®¸ç”¨æˆ·åœ¨é”®å…¥æ—¶å¿«é€ŸæŸ¥æ‰¾å’Œé€‰æ‹©é¢„å…ˆå¡«å……çš„å€¼åˆ—è¡¨ï¼Œåˆ©ç”¨æœç´¢å’Œè¿‡æ»¤ã€‚ jQuery UI å®ä¾‹ â€“ è‡ªåŠ¨å®Œæˆï¼ˆAutocompleteï¼‰ | èœé¸Ÿæ•™ç¨‹ è‡ªåŠ¨å®Œæˆ| jQuery UI 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&lt;!doctype html&gt;&lt;html lang="en"&gt;&lt;head&gt; &lt;meta charset="utf-8"&gt; &lt;title&gt;jQuery UI è‡ªåŠ¨å®Œæˆï¼ˆAutocompleteï¼‰ - é»˜è®¤åŠŸèƒ½&lt;/title&gt; &lt;link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css"&gt; &lt;script src="//code.jquery.com/jquery-1.9.1.js"&gt;&lt;/script&gt; &lt;script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"&gt;&lt;/script&gt; &lt;link rel="stylesheet" href="http://jqueryui.com/resources/demos/style.css"&gt; &lt;script&gt; $(function() &#123; var availableTags = [ "ActionScript", "AppleScript", "Asp", "BASIC", "C", "C++", "Clojure", "COBOL", "ColdFusion", "Erlang", "Fortran", "Groovy", "Haskell", "Java", "JavaScript", "Lisp", "Perl", "PHP", "Python", "Ruby", "Scala", "Scheme" ]; $( "#tags" ).autocomplete(&#123; source: availableTags &lt;!--availableTagsæ•°æ®æºï¼Œä¹Ÿå¯ä»¥ä»åå°ä¼ å›æ¥ä¸€ä¸ªlisté›†åˆçš„jsonæ•°æ®--&gt; &#125;); &#125;); &lt;/script&gt;&lt;/head&gt;&lt;body&gt; &lt;div class="ui-widget"&gt; &lt;label for="tags"&gt;æ ‡ç­¾ï¼š&lt;/label&gt; &lt;input id="tags"&gt;&lt;/div&gt; &lt;/body&gt;&lt;/html&gt; 5.å‰ç«¯é¡µé¢æ‰“å°1.åˆ©ç”¨printå‡½æ•°åˆ©ç”¨å‰ç«¯å®ç°æ‰“å°åŠŸèƒ½ 2.åˆ©ç”¨å‰ç«¯æ‰“å°æ§ä»¶lodopå‰ç«¯æ‰“å°æ§ä»¶lodopçš„ç›¸å…³ä½¿ç”¨é—®é¢˜å’Œç›¸å…³çš„çŸ¥è¯†é¢†åŸŸ lodopå®˜ç½‘ 6.è™šæ‹Ÿè·¯å¾„ï¼ˆè§£å†³å›¾ç‰‡ä¸ä¿å­˜åœ¨tomcatä¸‹ï¼Œç¡¬ç›˜å…¶ä»–åœ°æ–¹ï¼Œé‡å¯tomcatï¼Œå›¾ç‰‡æ–‡ä»¶è¿˜åœ¨ï¼‰1.ä¿®æ”¹tomcatä¸‹çš„server.xmlæ–‡ä»¶ 123&lt;Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" pattern="%h %l %u %t &amp;quot;%r&amp;quot; %s %b" prefix="localhost_access_log" suffix=".txt"/&gt; &lt;!--docBase:çœŸå®è·¯å¾„ï¼Œpathï¼šè™šæ‹Ÿè·¯å¾„ï¼ˆæ–‡ä»¶è®¿é—®ç›´æ¥/photoï¼‰ï¼ŒreloadableæŒ‡æœ‰æ–‡ä»¶æ›´æ–°æ—¶ï¼Œæ˜¯å¦é‡æ–°åŠ è½½ --&gt; &lt;Context debug="0" docBase="D:\upphoto\" path="/photo" reloadable="true"/&gt; tomcaté…ç½®è™šæ‹Ÿè·¯å¾„ä¿å­˜ã€è®¿é—®å›¾ç‰‡ - å°å“¥z - åšå®¢å›­ 7.å®ç°excelå¯¼å…¥å¯¼å‡ºåŠŸèƒ½8.åœ¨åå°ç»™åŠ å…¥ä¸€ä¸ªbuttonï¼ŒæŒ‰é’®åœ¨å‰å°æ˜¾ç¤ºå‡ºæ¥ç»™æ•°æ®åº“åŠ ä¸ªå­—æ®µï¼Œç„¶åå†åå°ç»§ç»­æ‹¼æ¥htmlå…ƒç´ å­˜å…¥æ•°æ®åº“ï¼Œä½†æ˜¯éœ€è¦å•åŒå¼•å·çš„é—®é¢˜ eg: 1String buttonStr = "&lt;button class='but' id='xx'&gt;"+æŸä¸ªå€¼æˆ–è€…ä»€ä¹ˆçš„+"&lt;/button&gt;" 9.bootstrapçš„æ ‡ç­¾é¡µ(é€‰é¡¹å¡) é€‰é¡¹å¡demo 10.bootstrapçš„æ—¶é—´æ§ä»¶(datetimepicker) DateTime Picker Â· Bootstrap 123456789101112&lt;input id="crecordtime"&gt;$('#crecordtime').datetimepicker(&#123; format : 'yyyy-mm-dd', //æ—¶é—´æ ¼å¼ todayBtn : true, //todayæŒ‰é’®æ˜¾ç¤º language : 'zh-CN', //è¯­è¨€è®¾ç½®ä¸­æ–‡ autoclose : true, // é€‰ä¸­æ—¶é—´åè‡ªåŠ¨å…³é—­ todayHighlight : true, // å½“å¤©æ—¶é—´é«˜äº® minView : 2, //æ—¥æœŸæ—¶é—´é€‰æ‹©å™¨æ‰€èƒ½å¤Ÿæä¾›çš„æœ€ç²¾ç¡®çš„æ—¶é—´é€‰æ‹©è§†å›¾ã€‚ maxView : 1, //æœ€å¤§è§†å›¾ startView : 1 //ç‚¹å‡»æ’ä»¶ä¸€å‡ºæ¥çš„æ—¥æœŸé€‰æ‹©è§†å›¾ //forceParse &#125;); 11.å¤šå›¾ç‰‡ä¸Šä¼ ï¼ˆå¹¶ä¸”æŠŠå›¾ç‰‡é€‰æ‹©äº†å›¾ç‰‡æ˜¾ç¤ºå‡ºæ¥ï¼‰å‰å°ä»£ç ï¼š 123456789101112131415161718&lt;div class="tab-pane fade" id="picture"&gt; &lt;h4 style="text-align:center;"&gt;è½¦è¾†å›¾ç‰‡ä¸Šä¼ &lt;/h4&gt; &lt;form class="inpform" id="uploadForm" method="post" enctype="multipart/form-data" multipart=""&gt; &lt;div id="detail-img"&gt; &lt;input type="file" id="carfile" multiple="multiple" name="file" onchange="xmTanUploadImg(this)" /&gt; &lt;/div&gt; &lt;/form&gt; &lt;div id="img-follow2"&gt;&lt;/div&gt; &lt;div class="msg" style="display: none;"&gt;&lt;/div&gt; &lt;footer class="panel-footer text-right bg-light lter" style="margin-top:102px;"&gt; &lt;button type="button" id="upload" class="btn btn-success btn-s-xs"&gt;ä¸Šä¼ &lt;/button&gt; &lt;/footer&gt; &lt;form&gt;&lt;/form&gt; &lt;/div&gt; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384 //æ˜¾ç¤ºé€‰æ‹©çš„å›¾ç‰‡ function xmTanUploadImg(obj) &#123; /* alert("asdasdasd"); */ var fileInput = "&lt;input type=â€™file' multiple='multiple' name='file' onchange='xmTanUploadImg(this)'/&gt;"; console.log(fileInput); /* $("#uploadForm").append(fileInput); */ $('#detail-img').append('&lt;input type="file" multiple="multiple" name="file" onchange="xmTanUploadImg(this)" class="detail-img"/&gt;'); var fl = obj.files.length; for (var i = 0; i &lt; fl; i++) &#123; var file = obj.files[i]; //FileReaderç”¨æ¥æŠŠæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå¹¶ä¸”è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚ // FileReaderæ¥å£æä¾›äº†ä¸€ä¸ªå¼‚æ­¥APIï¼Œä½¿ç”¨è¯¥APIå¯ä»¥åœ¨æµè§ˆå™¨ä¸»çº¿ç¨‹ä¸­å¼‚æ­¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œè¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚ var reader = new FileReader(); //è¯»å–æ–‡ä»¶è¿‡ç¨‹æ–¹æ³• reader.onload = function(e) &#123; //ä¸å¤ªæ˜ç™½e.target.resultä»£è¡¨ä»€ä¹ˆï¼ˆä¸€å¤§ä¸²æ•°å­—ï¼‰å¥½åƒæ˜¯å›¾ç‰‡è½¬åŒ–ä¸ºbase64 var imgstr = '&lt;img style="width:200px;height:200px;" src="' + e.target.result + '"/&gt;'; $("#img-follow2").append("&lt;div class=\"img\" style='display:inline-block;margin:20px 0px 20px 20px;'&gt;" + "&lt;div class=\"img-bg\"&gt;" + "" + imgstr + "" + "&lt;/div&gt;&lt;button type=\"button\" onclick=\"delbtn(this)\" &gt;åˆ é™¤&lt;/button&gt;") &#125;; //è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨data:urlçš„å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º reader.readAsDataURL(file); &#125; &#125;; // æŠŠå›¾ç‰‡å±•ç¤ºå‡ºæ¥ function showpic(obj) &#123; var file = obj.files[0]; //FileReaderç”¨æ¥æŠŠæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå¹¶ä¸”è¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚ // FileReaderæ¥å£æä¾›äº†ä¸€ä¸ªå¼‚æ­¥APIï¼Œä½¿ç”¨è¯¥APIå¯ä»¥åœ¨æµè§ˆå™¨ä¸»çº¿ç¨‹ä¸­å¼‚æ­¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œè¯»å–æ–‡ä»¶ä¸­çš„æ•°æ®ã€‚ var reader = new FileReader(); //è¯»å–æ–‡ä»¶è¿‡ç¨‹æ–¹æ³• reader.onload = function(e) &#123; //ä¸å¤ªæ˜ç™½e.target.resultä»£è¡¨ä»€ä¹ˆï¼ˆä¸€å¤§ä¸²æ•°å­—ï¼‰å¥½åƒæ˜¯å›¾ç‰‡è½¬åŒ–ä¸ºbase64 var imgstr = '&lt;img style="width:200px;height:200px;" src="' + e.target.result + '"/&gt;'; $("div").remove(".img"); $("#img-follow").append("&lt;div class=\"img\"&gt;" + "&lt;div class=\"img-bg\"&gt;" + "" + imgstr + "") &#125;; //è¯»å–æ–‡ä»¶å†…å®¹ï¼Œç»“æœç”¨data:urlçš„å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤º reader.readAsDataURL(file); &#125;; //åˆ é™¤åŠŸèƒ½ function delbtn(obj) &#123; var index = $(obj).parents(".img").index(); console.log("ç¬¬å‡ ä¸ªï¼š"+index); $("#detail-img input[type=file]").each(function (i,j) &#123; if (index == i) &#123; console.log("åˆ é™¤çš„æ˜¯ç¬¬å‡ ä¸ª"+i); this.remove(); &#125; &#125;) var _this = $(obj); _this.parents(".img").remove(); &#125;;//ç‚¹å‡»ä¸Šä¼ $("#upload").click(function() &#123; var formData = new FormData($("#uploadForm")[0]); //formData.append("cplateid", $("#cplateid").val()); //å¦‚æœè¿™é‡Œè¿˜æœ‰å…¶ä»–çš„æ•°æ®ä¹‹ç±»çš„è¯ $.ajax(&#123; type : "post", url : rootPath + '/car/upload.shtml', data : formData, async : false, contentType : false,// jQueryä¸è¦å»è®¾ç½®Content-Typeè¯·æ±‚å¤´ processData : false,// jQueryä¸è¦å»å¤„ç†å‘é€çš„æ•°æ® dataType : "json", success : function(data) &#123; if (data == "success") &#123; layer.msg('ä¸Šä¼ æˆåŠŸ!'); &#125; else &#123; layer.msg('æ·»åŠ å¤±è´¥ï¼'); &#125; &#125; &#125;) &#125;); åå°ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738@ResponseBody@RequestMapping("upload")// å‡¡éœ€è¦å¤„ç†ä¸šåŠ¡é€»è¾‘çš„.éƒ½éœ€è¦è®°å½•æ“ä½œæ—¥å¿—public String upload(@RequestParam(value = "file", required = false) MultipartFile[] file,HttpServletRequest request) throws Exception &#123; // è‡ªå®šä¹‰è·¯å¾„ String path = "D:/upphoto/carimg"; // 4.å»ºç«‹è”ç³» File folder = new File(path); // 5.åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶å¤¹ if (!folder.exists()) &#123; folder.mkdirs(); // åˆ›å»ºæ–‡ä»¶å¤¹ &#125; System.out.println("æ–‡ä»¶æ•°é‡å¤§å°+++++" + file.length); String newFileName = ""; for (MultipartFile mf : file) &#123; if (!mf.isEmpty()) &#123; // 6,è·å–ä¸Šä¼ æ–‡ä»¶çš„åç¼€åç§° String contentType = mf.getContentType(); String ext = contentType.substring(contentType.indexOf("/") + 1); // 7.åˆ›å»ºæ–°çš„æ–‡ä»¶åç§° // String newFileName = UUID.randomUUID().toString() + "." + ext; // æˆ–è€…ç”¨æ—¶é—´æˆ³åˆ›å»ºåç§° newFileName = new Date().getTime() + "_" + new Random().nextInt(100000) + "." + ext; // 8.æ–‡ä»¶ä¸Šä¼ ï¼ŒFile.separatorä¸ºæ–œçº¿ String newPath = path + "/" + newFileName; mf.transferTo(new File(newPath)); System.out.println("æœ€ç»ˆè·¯å¾„+++++++" + newPath); //ä¹‹åå¯ä»¥è¿›è¡Œå­˜å…¥æ•°æ®åº“ç­‰æ“ä½œ &#125; &#125; return "success";&#125; æ¯”è¾ƒå¥½çš„demo 1.https://github.com/gaoyuyue/MyUploader]]></content>
      <categories>
        <category>é¡¹ç›®æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSMå®æˆ˜</tag>
        <tag>è™šæ‹Ÿè·¯å¾„</tag>
        <tag>å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[win10é‡è£…æ¢å¤æ‰‹å†Œ]]></title>
    <url>%2F2018%2F10%2F23%2Fwin10%E9%87%8D%E8%A3%85%E6%81%A2%E5%A4%8D%E6%89%8B%E5%86%8C%2F</url>
    <content type="text"><![CDATA[æ¯ä¸€æ¬¡é‡è£…ç³»ç»Ÿä¹‹åï¼Œå°±è¦æŠŠå„ç§è½¯ä»¶é‡æ–°è£…ä¸€éï¼Œç„¶åè‡ªå·±çš„è½¯ä»¶è¿˜å¤šï¼Œä¸çŸ¥é“åˆ°åº•æœ‰å“ªäº›ï¼Œæ‰€ä»¥å°±æœ‰äº†è¿™ä¸ªæ–‡ç« ï¼Œä¸€ç›´æŒç»­æ›´æ–°ä¸­ é¦–å…ˆè¿˜æ˜¯çŒ®ä¸Šè‡ªå·±çš„æ¡Œé¢å¸ƒå±€ ä¸€ã€ç¯å¢ƒï¼š javaçš„ç¯å¢ƒ mysql mavençš„é…ç½® tomcat åšå®¢ç”¨çš„node.js git æˆ‘çš„åšå®¢æ¢å¤ äºŒã€è½¯ä»¶å·¥å…· ideaï¼šjavaå¼€å‘å·¥å…·ã€ideaçš„å„ç§é…ç½® eclipseï¼šjavaå¼€å‘å·¥å…· Navicat Premiumï¼šç®¡ç†å„ç§æ•°æ®åº“ notepad++ï¼šç¥å™¨èˆ¬çš„æ‰“å¼€å„ç§æ–‡ä»¶ everythingï¼šå¿«é€Ÿçš„æœç´¢å„ç§è½¯ä»¶ sublime text3ï¼šå¯ä»¥ç”¨æ¥å†™å„ç§HTMLå•Š Snipasteï¼šä¸€ä¸ªéå¸¸ç‰›é€¼çš„æˆªå›¾å’Œè´´å›¾è½¯ä»¶ Officeï¼šåŠå…¬å…¨å¥— https://account.microsoft.com/services/ OneNoteï¼šç”¨æ¥åšç¬”è®°çš„ bandizipï¼šå‹ç¼©è½¯ä»¶ VMï¼šè™šæ‹Ÿæœº Visioï¼šå¯ä»¥æ¥æ¢æµç¨‹å›¾ï¼ŒUMlå›¾ï¼Œå„ç§å›¾ è°·æ­Œæµè§ˆå™¨ã€360æé€Ÿæµè§ˆå™¨ SupportAssistï¼šæˆ´å°”å®˜æ–¹çš„æ¸…ç†è½¯ä»¶ https://www.dell.com/support/contents/cn/zh/cnbsd1/article/product-support/self-support-knowledgebase/software-and-downloads/supportassist Xmind 8 å’ŒXmind Zenï¼šç”»æ€ç»´å¯¼å›¾ LICEcapï¼šå½•åˆ¶ç”µè„‘çš„gif PicGoï¼šä¿å­˜å›¾ç‰‡åˆ°å„å¤§å›¾åºŠ Typoraï¼šä¸€ä¸ªå¼ºå¤§çš„markdownç¼–è¾‘å™¨ ç™¾åº¦äº‘ä¸‹è½½å·¥å…·ï¼š é€Ÿç›˜ pandownload çˆ±å¥‡è‰ºä¸‡èƒ½æ’­æ”¾å™¨ ç¿»å¢™ï¼š è“ç¯ Lantern èµ›é£ psiphon3 MaxxAudioProï¼šç”µè„‘è°ƒå„ç§éŸ³æ•ˆçš„è½¯ä»¶ http://del.ly/6528DC6l4 Sticky Notesï¼šwin10è‡ªå¸¦çš„å°ä¾¿ç­¾ æœç‹—è¾“å…¥æ³• å¾®ä¿¡ã€QQã€TIM EVå½•å± ä¸‰ã€å„ç§è®¾ç½® å…³é—­äº†æ‰“å¼€ä¸€ä¸ªè½¯ä»¶çš„æç¤ºæ¡† https://jingyan.baidu.com/article/a681b0de5abddc3b18434681.html]]></content>
      <categories>
        <category>å·¥å…·è½¯ä»¶</category>
      </categories>
      <tags>
        <tag>ç³»ç»Ÿé‡è£…æ¢å¤</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mavené¡¹ç›®æ‰¾ä¸åˆ°resourcesä¸‹çš„èµ„æºæ–‡ä»¶]]></title>
    <url>%2F2018%2F09%2F14%2Fmaven%E9%A1%B9%E7%9B%AE%E6%89%BE%E4%B8%8D%E5%88%B0resources%E4%B8%8B%E7%9A%84%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"><![CDATA[ä»Šå¤©åœ¨å†™SSMæ•´åˆï¼Œæµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç°resourcesä¸‹çš„SpringMvc.xmlæ²¡æœ‰æ‰«æåˆ°ã€‚ é¦–å…ˆåœ¨web.xmlä¸­springmvc.xmlçš„è·¯å¾„å¦‚ä¸‹ 12345678910111213141516&lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;!--æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„ä½ç½®å’Œåç§°--&gt; &lt;param-value&gt;/WEB-INF/springmvc.xml&lt;/param-value&gt; &lt;!--&lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;--&gt; &lt;/init-param&gt; &lt;!--å¯åŠ¨æœåŠ¡å™¨çš„æ—¶å€™å°±å¯¹DispatcherServletè¿›è¡Œå®ä¾‹åŒ–æ“ä½œ--&gt; &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; æˆ‘å†™çš„/WEB-INF/springmvc.xmlï¼ŒæŠŠspringmvc.xmlæ”¾åœ¨WEB-INFä¸‹ï¼Œä¹Ÿä¾ç„¶ä¸èƒ½è®¿é—®ï¼ŒæŠ¥çš„é”™è¯¯ä¹Ÿå¾ˆå¥‡æ€ªï¼Œ 1Handler processing failed; nested exception is java.lang.NoClassDefFoundError: javax/servlet/jsp/jstl/core/Config è‡ªå·±ç™¾åº¦äº†ï¼Œéƒ½è¯´æ˜¯å°‘äº†jstlçš„åŒ…ï¼Œä½†æ˜¯æˆ‘pom.xmlä¾èµ–é‡ŒåŠ äº†jstlçš„ä¾èµ–çš„ï¼Œå¤ªå¥‡æ€ªäº†ï¼Œæœ€åä¸€ä¸ªè§£å†³åŠæ³•ï¼Œåœ¨pom.xmlä¸­åŠ å…¥ 123456789101112131415161718192021&lt;build&gt; &lt;!--æ‰«æåˆ°resourcesä¸‹çš„xmlç­‰èµ„æºæ–‡ä»¶--&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/java&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;includes&gt; &lt;include&gt;**/*.properties&lt;/include&gt; &lt;include&gt;**/*.xml&lt;/include&gt; &lt;/includes&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt;&lt;/build&gt; åŠ å…¥è¿™ä¸ªä»£ç ï¼Œä¸ç®¡xmlæ–‡ä»¶æ”¾åœ¨resourcesä¸‹è¿˜æ˜¯WEB-INFä¸‹ï¼Œéƒ½èƒ½æ‰«æåˆ°ã€‚ ä½†æ˜¯è¿˜æ˜¯æ¯”è¾ƒçº ç»“æŠ¥é”™çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆæŠ¥é‚£ä¸ªé”™è¯¯ï¼ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ]]></content>
      <categories>
        <category>maven</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>SpringMvc</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VMå®‰è£…ã€Ubuntuçš„å®‰è£…ã€Ubuntuè®¾ç½®ä¸ºä¸­æ–‡]]></title>
    <url>%2F2018%2F09%2F14%2FVM%E5%AE%89%E8%A3%85%E3%80%81Ubuntu%E7%9A%84%E5%AE%89%E8%A3%85%E3%80%81Ubuntu%E8%AE%BE%E7%BD%AE%E4%B8%BA%E4%B8%AD%E6%96%87%2F</url>
    <content type="text"><![CDATA[vmä¸‹è½½åŠç ´è§£ï¼šé“¾æ¥: https://pan.baidu.com/s/1znunnWwNIdgrmmd_LGm0-g å¯†ç : d23j Ubuntué•œåƒä¸‹è½½ï¼šhttps://cn.ubuntu.com/desktop/ é‡ç‚¹ï¼ï¼ï¼ï¼Œå®‰è£…Ubuntuçš„æ—¶å€™ï¼Œåƒä¸‡ä¸èƒ½è”ç½‘ï¼Œè‡ªå·±åƒäº†ä¸€ä¸ªå¤§äºï¼ï¼ï¼ï¼ï¼ï¼Œå…¶ä»–æ­¥éª¤éƒ½å¯ä»¥è”ç½‘æ“ä½œï¼Œå®‰è£…Ubuntuæœ‰äº›åœ°æ–¹ä¼šå¾ˆæ…¢ï¼Œè¯·è€å¿ƒç­‰å¾… 1.å®‰è£…vmä¸‹è½½å¥½äº†vmè½¯ä»¶ï¼ŒåŒå‡» é€‰æ‹©å®‰è£…ä½ç½® æŠŠè¿™ä¸¤ä¸ªâˆšå»æ‰ï¼Œé¿å…æ›´æ–° ç‚¹å‡»è¿™ä¸ªè¾“å…¥è®¸å¯è¯å³ok 2.å®‰è£…Ubuntuå®˜ç½‘ä¸‹è½½Ubuntuçš„é•œåƒï¼Œç„¶ååœ¨æ‰“å¼€è™šæ‹Ÿæœºï¼Œä¸¤ç§æ–¹å¼æ–°å»ºè™šæ‹Ÿæœºã€‚ è¿™ä¸ªå…³é”®ï¼Œä¸€å®šå‹¾é€‰è¿™ä¸ªï¼Œå¦‚æœé€‰æ‹©äº†ç¬¬äºŒä¸ªï¼Œåœ¨åé¢å¯èƒ½ä¼šå‡ºé”™ï¼Œå¡ä½ï¼Œ è¿™é‡Œé€‰æ‹©ä½ éœ€è¦è£…çš„ç³»ç»Ÿ é€‰æ‹©ä½ ç³»ç»Ÿè£…çš„ä½ç½®å’Œåç§° é€‰æ‹©ä½ ç³»ç»Ÿçš„é…ç½®å¤§å° ç»™è™šæ‹Ÿæœºåˆ†é…çš„ç£ç›˜ç©ºé—´å¤§å° ç„¶åç‚¹å‡»å®Œæˆï¼Œæ¥ä¸‹æ¥æ”¾å…¥ç³»ç»Ÿé•œåƒ ç„¶åç‚¹å‡»ç¡®å®šï¼Œç„¶åå¼€å¯æ­¤è™šæ‹Ÿæœºç”µæºï¼Œæ…¢æ…¢ç­‰å¾…å‡ºç°ï¼Œ è¿™é‡Œè¾“å…¥ä½ çš„è™šæ‹Ÿæœºç³»ç»Ÿåç§°å’Œå¯†ç ï¼Œç„¶åcontinueï¼Œæœ€åä¼šæé†’ä½ é‡å¯ï¼Œå³é‡å¯ï¼Œç„¶åå†æ¬¡æ‰“å¼€è™šæ‹Ÿæœºï¼Œå³å®‰è£…å®Œæˆ 3.è®¾ç½®Ubuntuç³»ç»Ÿä¸ºä¸­æ–‡æ‰“å¼€è™šæ‹Ÿæœº è¿™é‡Œä¼šæé†’ä½ ä¸‹è½½è¯­è¨€åŒ…ï¼Œç„¶åç­‰å¾…ä¸‹è½½ï¼Œå¯èƒ½ä¼šå¾ˆæ…¢ã€‚ä¸‹è½½æˆåŠŸä¹‹åï¼Œåœ¨é‡Œé¢å‹¾é€‰Chineseã€‚ å¦‚æœè¿™é‡Œå‡ºç°æ±‰è¯­ï¼Œä½†æ˜¯å´æ˜¯ç°è‰²ï¼Œé¼ æ ‡æŠŠä»–æ‹–ä¸Šé¢å»ï¼Œå°±å˜é»‘äº†ï¼Œç„¶åå³okã€‚]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Ubuntuå®‰è£…</tag>
        <tag>VMå®‰è£…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SSMæ¡†æ¶æ€»ç»“â€”å­¦ä¹ è·¯çº¿]]></title>
    <url>%2F2018%2F09%2F04%2FSSM%E6%A1%86%E6%9E%B6%E6%80%BB%E7%BB%93%E2%80%94%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%2F</url>
    <content type="text"><![CDATA[MyBatis,Spring,SpringMvc,å•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œæ—¥å¿—æ¡†æ¶Log4J æ€ç»´å¯¼å›¾æºæ–‡ä»¶è·å–ï¼Œç”¨xmind 8 æ‰“å¼€github [TOC] MyBatisæ¡†æ¶æ¦‚è¿° MyBatisæ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶/ORMæ¡†æ¶ï¼Œä¼šå¯¹ç»“æœé›†(æŸ¥è¯¢)æ˜ å°„ï¼Œå¯¹JDBCç®€å•çš„å°è£… insert update delete selectOne selectList æŒä¹…åŒ– ç‹­ä¹‰ï¼šå°†æ•°æ®æ°¸ä¹…çš„ä¿å­˜åˆ°æ•°æ®åº“/ç£ç›˜ç­‰åª’ä»‹ å¹¿ä¹‰ï¼šé’ˆå¯¹äºæ•°æ®çš„æ“ä½œéƒ½ç§°ä¹‹æŒä¹…åŒ–æ“ä½œ å®ä½“Bean == æŒä¹…åŒ–ç±» éœ€è¦çš„jaråŒ… mybatis-3.4.6.jar mysql-connector-java-5.1.45-bin.jar CRUDæ“ä½œ é’ˆå¯¹äºCUDæ“ä½œï¼ŒMyBatiséœ€è¦æ‰‹åŠ¨æäº¤äº‹åŠ¡ MyBatisçš„APIè°ƒç”¨è¿‡ç¨‹ package com.hs.util; /** çŸ¥è¯†ç‚¹ï¼š finalä¿®é¥°ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿ ä¿®é¥°æ–¹æ³•ï¼šä¸èƒ½è¢«é‡å†™ ä¿®é¥°å˜é‡ï¼šå¸¸é‡ä¸å¯ç”¨å˜ï¼Œä½†å¦‚æœæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„å€¼å¯ä»¥å˜ * */ import org.apache.ibatis.io.Resources; import org.apache.ibatis.session.SqlSession; import org.apache.ibatis.session.SqlSessionFactory; import org.apache.ibatis.session.SqlSessionFactoryBuilder; import java.io.IOException; import java.io.InputStream; public class MyBatisUtils { private MyBatisUtils() { } //ä¸å…è®¸å®ä¾‹åŒ– private static final String PATH = â€œmybatis-config.xmlâ€; private static InputStream inputStream; private static SqlSessionFactory sqlSessionFactory; static { //1.é™æ€ä»£ç å—ï¼Œåªæ˜¯åŠ è½½ä¸€æ¬¡ try { //è¾“å…¥æµ è¯»æ–‡ä»¶ //1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ inputStream = Resources.getResourceAsStream(PATH); //2.åˆ›å»ºSqlSessionå·¥å‚(SqlSessionFactory)ç›¸å½“äºConnection sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); } catch (IOException e) { e.printStackTrace(); throw new RuntimeException(â€œåŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶å¤±è´¥â€); } } /** *3.è·å–SqlSession ç›¸å½“äº æ‰§è¡ŒSQLè¯­å¥å¯¹è±¡PreparedStamenté¢„å¤„ç†å¯¹è±¡ SqlSessionå®Œæˆæ‰€æœ‰çš„æŒä¹…åŒ–æ“ä½œCRUD */ public static SqlSession getSqlsession() { return sqlSessionFactory.openSession(); } /** *6.å…³é—­èµ„æº */ public static void closeSqlSession(SqlSession sqlSession) { if (sqlSession != null) { sqlSession.close(); } } } 1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ classpath(src)/mybatis-config.xml åŠ è½½æ•°æ®åº“ä¿¡æ¯å±æ€§æ–‡ä»¶jdbc.propertiesï¼Œ${key}è·å–å€¼ è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«å é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ åŠ è½½æ˜ å°„æ–‡ä»¶ 2.åˆ›å»ºSqlSessionå·¥å‚ == SqlSessionFactory 3.è·å–SqlSession è¿æ¥æ•°æ®åº“ å®Œæˆé’ˆå¯¹äºæ•°æ®çš„CRUDæ“ä½œ 4.æ‰§è¡Œå®šåˆ¶çš„SQLè¯­å¥ ä¼ ç»Ÿæ–¹å¼ å‘½åç©ºé—´namespaceæŒä¹…åŒ–ç±»çš„å…¨è·¯å¾„ . æ˜ å°„æ–‡ä»¶çš„ID æ¥å£ä»£ç†æ¨¡å¼â€”â€”æ¨è å‘½åç©ºé—´namespaceå›ºå®šå¿…é¡»ä¸ºæ¥å£çš„å…¨è·¯å¾„ æ˜ å°„æ–‡ä»¶ä¸­çš„IDéœ€è¦è·Ÿæ¥å£ä¸­çš„æ–¹æ³•åä¿æŒä¸€è‡´ æŸ¥è¯¢æ“ä½œï¼šæ ¹æ®ä½ çš„æ¥å£çš„è¿”å›å€¼ selectOne selectList 5.äº‹åŠ¡çš„æäº¤ Springæ¡†æ¶ä¸­æœ‰äº‹åŠ¡çš„ç®¡ç† 6.å…³é—­èµ„æº æå–å…¬å…±çš„å­—æ®µä»£ç  æ— åˆ«å role_id,role_name,role_key,status æœ‰åˆ«å ${alias}.role_id,${alias}.role_name,${alias}.role_key,${alias}.status æ¦‚è¦: å¦‚ä½•ç”¨ æŸ¥è¯¢æ“ä½œ ç»“æœé›†çš„å¤„ç†æ–¹å¼ resultType resultMap ç»“æœé›†å¯ä»¥å¤„ç†æˆä»€ä¹ˆæ–¹å¼ï¼Ÿ è¿”å›Mapç±»å‹ resultType=â€mapâ€æˆ–è€…resultType=â€java.util.Mapâ€ resultMapå±æ€§å»æ‰¾resultMapæ ‡ç­¾ é»˜è®¤æƒ…å†µæ˜¯è‡ªåŠ¨æ˜ å°„ å¯ä»¥è®¾ç½®åˆ«å è¿”å›Listç±»å‹â€“&gt;ä¾æ—§ä½¿ç”¨Mapå¤„ç†ç»“æœ åªæ˜¯åœ¨è°ƒç”¨æ–¹æ³•çš„æ—¶å€™ä½¿ç”¨selectListå³å¯ è¿”å›å¯¹è±¡ å¯ä»¥ä½¿ç”¨åˆ«åæ–¹å¼ï¼Œä¿è¯æŸ¥è¯¢çš„å­—æ®µåç§°å’Œç±»ä¸­çš„å±æ€§åç§°ä¸€è‡´å³å¯ä½¿ç”¨resultTypeå®Œæˆå¯¹è±¡çš„æ˜ å°„ é‡ç‚¹resultMapå±æ€§ ä¸€å¯¹ä¸€å’Œå¤šå¯¹ä¸€çš„å…³è”æ ‡ç­¾association selectæ–¹å¼ ç»“æœé›†æ˜ å°„æ–¹å¼ resultMap id=â€JoinResultMapperâ€ type=â€Userâ€ extends=â€BaseResultMapperâ€&gt; &lt;!â€“ â€“&gt; ä¸€å¯¹å¤šçš„å…³è”æ ‡ç­¾collection æ–¹å¼ selectæ–¹å¼ &lt;!â€“åœ¨ç»“æœé›†ä¸­æ‰¾åˆ°role_idè¿™ä¸ªå­—æ®µï¼Œç„¶åä¼ ç»™å‘½åç©ºé—´com.hs.dao.UserDaoä¸‹idä¸ºgetUserByFkçš„è¯­å¥ï¼Œ è¿”å›çš„ç»“æœé›†å­—æ®µä¸ºuserListï¼Œç±»å‹ä¸ºjava.util.Listï¼Œé‡Œé¢è£…çš„ç±»å‹æ˜¯com.he.model.Userè¿™ä¸ªç±»å‹ â€“&gt; &lt;collection property=â€userListâ€ javaType=â€java.util.Listâ€ ofType=â€Userâ€ column=â€role_idâ€ select=â€com.hs.dao.UserDao.getUserByFkâ€/&gt; ç»“æœé›†æ˜ å°„æ–¹å¼ &lt;collection property=â€userListâ€ javaType=â€listâ€ ofType=â€com.hs.model.Userâ€ resultMap=â€com.hs.dao.UserDao.BaseResultMapperâ€/&gt; &lt;!â€“ â€“&gt; æ³¨æ„ï¼šofTypeå±æ€§æ˜¯å¿…é¡»è¦å¡«å†™ æ¨¡ç³ŠæŸ¥è¯¢ concat(â€˜%â€™,#{name},â€™%â€™) åŠ¨æ€çš„SQLè¯­å¥ åœ¨æ˜ å°„æ–‡ä»¶ä¸­è·å–æ•°æ®çš„æ–¹å¼ #() #()é»˜è®¤æ˜¯é¢„å¤„ç†æ¨¡å¼ $() $()é»˜è®¤æ˜¯ç›´æ¥æ‹¼æ¥åˆ°SQLè¯­å¥å½“ä¸­ï¼Œå¹¶ä¸”éœ€è¦æä¾›KEYå€¼ï¼Œæ¨èåœ¨æ’åºä½¿ç”¨ ifæ ‡ç­¾ testå±æ€§ test=â€ç±»ä¸­å±æ€§æˆ–è€…Mapä¸­çš„KEYæˆ–è€…ä½¿ç”¨@ParamæŒ‡å®šKEYâ€ whereæ ‡ç­¾ å¦‚æœæœ‰å†…å®¹ï¼Œåœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥whereå…³é”®å­—ï¼Œå¹¶ä¸”å»æ‰å†…å®¹æœ€å‰é¢çš„andæˆ–è€…or and user_name like concat(â€˜%â€™,#{name},â€™%â€™) and sex = #{sex} setæ ‡ç­¾ å¦‚æœæœ‰å†…å®¹ï¼Œåœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥setå…³é”®å­—ï¼Œå¹¶ä¸”å»æ‰å†…å®¹æœ€åé¢çš„é€—å· user_name = #{user_name}, sex = #{sex}, money = #{money}, trimæ ‡ç­¾ ä¸»è¦çš„ç›®çš„æ˜¯å®Œæˆå¯¹åŠ¨æ€æ·»åŠ SQLçš„æ‹¼å†™â€” ä¸€èˆ¬å¯ä»¥ç”¨æ¥å®Œæˆsetå’ŒwhereåŠŸèƒ½ &lt;trim prefix=â€å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹â€ prefixOverrides=â€å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹â€ suffix=â€å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹â€ suffixOverrides=â€å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹â€&gt; foreachæ ‡ç­¾ å¦‚æœä½ ä¼ é€’çš„æ•°æ®çš„å½¢å‚ä¸ºä¸€ä¸ªæ•°æ®ï¼Œå¹¶ä¸”æ•°æ®ç±»å‹æ˜¯æ•°ç»„æˆ–è€…List collectionå±æ€§åªèƒ½å–array || list å¦‚æœä½ ä¼ é€’çš„æ˜¯Mapæˆ–è€…å¯¹è±¡(éƒ½æœ‰ä¸€ä¸ªå­˜å‚¨é›†åˆçš„å±æ€§æˆ–è€…KEY) collection=â€é›†åˆå¯¹åº”çš„Mapä¸­çš„KEYæˆ–è€…ç±»ä¸­çš„å±æ€§â€ ä¼ é€’å¤šä¸ªå‚æ•° /** ä¼ é€’å¤šä¸ªå‚æ•° 1.å½“ä½ çš„å½¢å‚ä¼ é€’&gt;1ä¸ªçš„æ—¶å€™ï¼ŒparameterTypeä¸å†™ï¼Œè®©å…¶è‡ªåŠ¨å¤„ç† 2.#{å€¼}ï¼Œé»˜è®¤ä¸ºarg0ï¼Œarg1â€¦..æˆ–param1ï¼Œparam2ï¼Œï¼Œï¼Œ è‹¥åœ¨daoæ³¨è§£äº†@xxx(ç›¸å½“äºæŒ‡æ˜äº†keyå€¼)ï¼Œå³ä¹Ÿå¯ä»¥å†™xxxï¼Œé»˜è®¤çš„ä¹Ÿå¯ä»¥å†™ï¼Œç›¸å½“äº3ä¸ªå€¼ */ User getUser(@Param(â€œaccountâ€) String account, @Param(â€œpasswordâ€) String password); æ¥å£ä»£ç†æ¨¡å¼å’Œä¼ ç»Ÿæ¨¡å¼ æ¥å£ä»£ç†æ¨¡å¼ åªéœ€è¦å†™æ¥å£ï¼Œåœ¨æµ‹è¯•ç±»ä¸­è°ƒç”¨ï¼Œæ¥å£ç¼–ç¨‹: ä»€ä¹ˆæ˜¯æ¥å£? ç®€å•ç†è§£:æ¥å£å°±æ˜¯å®šä¹‰è§„èŒƒ æ¥å£è¿”å›ç±»å‹è·Ÿä½ è®¾ç½®çš„resultMapæˆ–è€…resultTypeå¯¹åº”ä¸Šå³å¯,ä½†æ˜¯ä¼šæ ¹æ®ä½ è¿”å›çš„ç±»å‹å®Œæˆselectoneæˆ–è€…selectListæ“ä½œ æ¥å£é‡Œæ–¹æ³•å¦‚ä½•å†™ï¼šsqlè¯­å¥è¿”å›çš„ç»“æœé›†ç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); eg:List getSkillLike02(String name); Listä¸ºSQLè¯­å¥è¿”å›çš„ç»“æœé›†ç±»å‹ï¼ŒgetSkillLike02ä¸ºæ˜ å°„æ–‡ä»¶ä¸­SQLè¯­å¥çš„idï¼ŒString nameæ˜¯ä¼ ç»™æ˜ å°„æ–‡ä»¶çš„å€¼ æ˜ å°„æ–‡ä»¶å‘½åç©ºé—´ä¸ºæ¥å£çš„å…¨è·¯å¾„ å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯Listï¼Œå¦‚æœæ˜¯Listï¼Œä¹Ÿæ˜¯List ä¼ ç»Ÿæ¨¡å¼ éœ€è¦å†™æ¥å£ï¼Œæ¥å£å®ç°ç±»ï¼Œæµ‹è¯•ç±»ï¼Œ æ˜ å°„æ–‡ä»¶å‘½åç©ºé—´ä¸ºæŒä¹…åŒ–ç±»çš„å…¨è·¯å¾„ å•å…ƒæµ‹è¯•æ¡†æ¶æ¦‚è¿° å•å…ƒ(æ–¹æ³•)å°±æ˜¯å¯¹ç±»ä¸­æ–¹æ³•çš„æµ‹è¯• å‘½åè§„åˆ™ ç±»å UserDaoTest æ–¹æ³• testLoadMethod éœ€è¦çš„jaråŒ… hamcrest-core-1.3.jar junit-4.12.jar å¦‚ä½•ä½¿ç”¨ @Before @Before //å†æ¯ä¸ªå•å…ƒæµ‹è¯•è¿è¡Œä¹‹å‰éƒ½è¦è¿›è¡Œè¿™ä¸ªæ–¹æ³• public void init() { this.arithmeticService = new ArithmeticServiceImpl(); //æƒ³ç”¨å“ªä¸ªåŠŸèƒ½å°±å®ä¾‹åŒ–å“ªä¸ª } @Test @Test //æµ‹è¯•è¿™ä¸ªæ–¹æ³• public void test01() {} æ—¥å¿—æ¡†æ¶Log4Jæ¦‚è¿° åœ¨MyBatisä¸­æ˜¾ç¤ºå‡ºSQLè¯­å¥ï¼Œä¿¡æ¯ç­‰ï¼Œæ”¾åœ¨classpathè·¯å¾„ä¸‹log4j.properties éœ€è¦çš„jaråŒ… log4j-1.2.17.jar å¦‚ä½•ä½¿ç”¨ Global logging configuration log4j.rootLogger=ERROR, stdout MyBatis logging configurationâ€¦ å¦‚æœè¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®éœ€è¦é…ç½®ä¸ºå‘½åç©ºé—´ log4j.logger.com.shxt.model.Skill=TRACE Console outputâ€¦ log4j.appender.stdout=org.apache.log4j.ConsoleAppender log4j.appender.stdout.layout=org.apache.log4j.PatternLayout log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n SpringMVCæ¡†æ¶æ¦‚è¿° æ ¸å¿ƒé…ç½®æ–‡ä»¶DispatcherServletçš„è§„åˆ™ é»˜è®¤æƒ…å†µä¸‹ï¼šWEB-INF/[servlet-name]-servlet.xml springmvc org.springframework.web.servlet.DispatcherServlet 2 springmvc &lt;!â€“ / æ‰€æœ‰çš„èµ„æºè®¿é—®éƒ½éœ€è¦ç»è¿‡ DispatcherServletå¤„ç† è·¯å¾„ href srcâ€¦.. åŒºåˆ† /* å’Œ / â€“&gt; / è‡ªå®šä¹‰è§„åˆ™ springmvc org.springframework.web.servlet.DispatcherServlet contextConfigLocation /WEB-INF/springmvc.xml 1 springmvc / éœ€è¦çš„jaråŒ… spring-aop-4.3.6.RELEASE.jar spring-beans-4.3.6.RELEASE.jar spring-context-4.3.6.RELEASE.jar spring-context-support-4.3.6.RELEASE.jar spring-core-4.3.6.RELEASE.jar spring-expression-4.3.6.RELEASE.jar spring-web-4.3.6.RELEASE.jar spring-webmvc-4.3.6.RELEASE.jar commons-logging-1.2.jar æ§åˆ¶å™¨ä¸“é¢˜ æ§åˆ¶ä¼ é€’çš„å‚æ•° @RequestMapping(path = â€œ/param02â€,params = {â€œhs!=tomcatâ€,â€method=addâ€}) å½¢å‚ é»˜è®¤ä¼šå¯¹å½¢å‚ä¸­çš„ç±»è¿›è¡Œè‡ªåŠ¨çš„å®ä¾‹åŒ–æ“ä½œ é¡µé¢è·³è½¬æ–¹å¼ é»˜è®¤è¯·æ±‚è½¬å‘ï¼Œèƒ½è®¿é—®WEB-INFä¸‹ é‡å®šå‘ï¼Œä¸èƒ½è®¿é—®WEB-INFä¸‹ æ¦‚è¦: æŒ‡æ˜å‰ç¼€ï¼Œè¯·æ±‚è½¬å‘â€forward:/hs011.jspâ€,é‡å®šå‘redirect:/xxx è¿”å›ç±»å‹ ModelAndView JSPçš„è¯·æ±‚è½¬å‘çš„è§†å›¾è§£æå™¨ &lt;!â€“jspè¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ è¯·æ±‚è½¬å‘jspé¡µé¢çš„æ—¶å€™ï¼Œåœ¨è·¯å¾„ä¸ŠåŠ å…¥å‰ç¼€å’Œåç¼€ â€“&gt; void é»˜è®¤æƒ…å†µä¸‹æ˜¯æŒ‰ç…§è·¯å¾„å»è¯·æ±‚è½¬å‘æ‰¾åˆ°å¯¹åº”çš„JSPé¡µé¢_ä¸æ¨èä½¿ç”¨ String æ¨èä½¿ç”¨ï¼Œè·³è½¬åˆ°é¡µé¢æˆ–è€…å¦å¤–çš„Controllerï¼Œä¹Ÿæ»¡è¶³JSPçš„è¯·æ±‚è½¬å‘çš„è§†å›¾è§£æå™¨å¦‚æœä½¿ç”¨äº†å‰ç¼€çš„æ ‡è¯†é‚£ä¹ˆä¸€å®šæ˜¯ä»Controllerè·³è½¬åˆ°å¦ä¸€ä¸ªController ä»»æ„ ResponseEntity @ResponseBodyâ€”æ¨èï¼Œå¸¸ç”¨äºJSONä¸²çš„å¤„ç† é’ˆå¯¹äºä½ è¿”å›çš„æ•°æ®çš„ç±»å‹è¿›è¡Œè½¬æ¢ï¼Œå¯ä»¥è½¬æ¢ä»»æ„ç±»å‹ï¼Œä½†æ˜¯éœ€è¦ç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒ æƒ…å†µè¯´æ˜ å­—ç¬¦ä¸²é»˜è®¤å¯ä»¥è‡ªåŠ¨è½¬æ¢ä¸ºæ–‡æœ¬ å¦‚æœæ˜¯å…¶ä»–ç±»å‹éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹Jacksonçš„æ”¯æŒï¼Œå°†è¿”å›çš„æ•°æ®è½¬æ¢æˆJSONæ ¼å¼çš„å­—ç¬¦ä¸² Jacksonçš„jaråŒ… jackson-annotations-2.8.1.jar jackson-core-2.8.1.jar jackson-databind-2.8.1.jar è®¿é—®è·¯å¾„ è·¯å¾„çš„è®¾ç½® /sys/user /sys/*æˆ–è€…/sys/**â€”ä¸æ¨èä½¿ç”¨ /sys/user/{hs}å ä½ç¬¦è·¯å¾„ ä½¿ç”¨å ä½ç¬¦ï¼Œä¸€èˆ¬åªæ˜¯ä¼ é€’ä¸»é”®å’Œç®€å•çš„å­—ç¬¦ä¸²ï¼Œå®ŒæˆRESTé£æ ¼çš„è·¯å¾„ï¼Œä¼˜å…ˆçº§æ¯”é€šé…ç¬¦é«˜ï¼Œhsæ¥æ”¶ä¼ è¿‡çš„å€¼ è¯·æ±‚æ–¹å¼çš„è¯´æ˜ HTMLé¡µé¢ä¸­æœ‰ä¸”åªæœ‰GET/POSTè¯·æ±‚ é€šè¿‡è®¾ç½®è¿‡æ»¤å™¨å®Œæˆäº†8ç§è¯·æ±‚æ–¹å¼ &lt;!â€“httpçš„è¯·æ±‚è½¬æ¢è¿‡æ»¤å™¨ è¿‡æ»¤å™¨ä½¿htmlä¸­æ”¯æŒé™¤äº†getã€postï¼Œçš„å…¶ä»–è¯·æ±‚putï¼Œdeleteï¼Œpatchâ€“&gt; httpMethodFilter org.springframework.web.filter.HiddenHttpMethodFilter httpMethodFilter springmvc ä¸ºäº†æ”¯æŒå…¶ä»–çš„è¯·æ±‚æ–¹å¼ï¼ŒæŠŠmethodéƒ½æ”¹ä¸ºpostï¼Œç„¶ååŠ å…¥ä¸€ä¸ª valueä¸åˆ†å¤§å°å†™ï¼Œname=xxxå›ºå®š getï¼šæŸ¥è¯¢ postï¼šæ·»åŠ  putï¼šæ›´æ–° deleteï¼šåˆ é™¤ é™æ€èµ„æº(å›¾ç‰‡ã€jsã€css)æ’é™¤æ–¹æ¡ˆï¼Œä¸ç»è¿‡DispatcherServlet &lt;!â€“4.é™æ€èµ„æº(å›¾ç‰‡ã€jsã€cssä¹‹ç±»çš„)(è®©è¿™äº›èµ„æºä¸ç»è¿‡servletå¤„ç†)çš„ å¤„ç†æ–¹å¼ä¸€ æ¨èæ–¹å¼â€“&gt; &lt;mvc:default-servlet-handler default-servlet-name=â€defaultâ€/&gt; å®¢æˆ·ç«¯ä¼ é€’æ•°æ®è½¬æ¢æˆæœåŠ¡ç«¯å¯¹åº”çš„æ•°æ®ç±»å‹ @RequestParamæ³¨è§£ public ModelAndView test02(@RequestParam(value = â€œuser_nameâ€, required = false) String name, @RequestParam(name = â€œuser_idâ€, required = false, defaultValue = â€œ1111â€) Integer id) { System.out.println(â€œå§“åâ€ + name); System.out.println(â€œIDâ€ + id); return null; } name=â€â€ | value=â€â€å¯¹åº”ä¼ é€’æ•°æ®çš„åç§° required=â€trueâ€é»˜è®¤å€¼ defaultValue=â€è®¾ç½®é»˜è®¤å€¼â€ ç®€å†™æ–¹å¼ æ¨èï¼šä¼ é€’çš„nameå’Œå½¢å‚ä¸­çš„åç§°ä¿æŒä¸€è‡´å³å¯ æ•°ç»„ è¶…é“¾æ¥è·å–æ•°ç»„ ä¼ é€’æ•°ç»„ @GetMapping(â€œ/client04â€) public ModelAndView test01(@RequestParam(name = â€œrole_idâ€) Integer[] roles) { System.out.println(Arrays.asList(roles)); return null; } å¤é€‰æ¡†ä¼ é€’æ•°ç»„ ç¯®çƒ è¶³çƒ çœ‹ä¹¦ ç®€å†™æ–¹å¼ @GetMapping(â€œ/client05â€) public ModelAndView test02(String[] hobby) { if (hobby != null) { System.out.println(Arrays.asList(hobby)); } else { System.out.println(â€œæ‚¨æ²¡æœ‰çˆ±å¥½ï¼â€); } return null; } æ–‡æœ¬æ¡†ä¼ é€’æ•°æ® ç®€å†™æ–¹å¼ @GetMapping(â€œ/client06â€) public ModelAndView test03(String[] hobby) { System.out.println(Arrays.asList(hobby)); return null; } å¤šé€‰åˆ—è¡¨ä¼ é€’æ•°ç»„ éŸ³ä¹ çœ‹ä¹¦ è¶³çƒ ç®€å†™æ–¹å¼ @GetMapping(â€œ/client07â€) public ModelAndView test04(String[] hobby) { if (hobby != null) { System.out.println(Arrays.asList(hobby)); } else { System.out.println(â€œæ‚¨æ²¡æœ‰çˆ±å¥½ï¼ï¼â€); } return null; } å¯¹è±¡ ç®€å•å¯¹è±¡ï¼Œåªæ˜¯éœ€è¦ä½ ä¼ é€’çš„åç§°è·Ÿç±»ä¸­çš„å±æ€§åä¿æŒä¸€è‡´å³å¯ @GetMapping(â€œ/client08â€) public ModelAndView test01(User user, String user_name, String sex) { System.out.println(user); System.out.println(â€œâ€”â€“ä¾ç„¶å¯ä»¥ä½¿ç”¨ç®€å•æ–¹å¼â€”-â€œ); System.out.println(user_name); System.out.println(sex); return null; } å¤šä¸ªå¯¹è±¡å¦‚æœå±æ€§ä¸ç›¸åŒï¼Œé‚£ä¹ˆSpringMvcæ¡†æ¶ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆè½¬æ¢ @GetMapping(â€œ/client09â€) public ModelAndView test02(User user, Role role) { System.out.println(user); System.out.println(â€œâ€”â€“è§’è‰²â€”-â€œ); System.out.println(role); return null; } å…³è”å¯¹è±¡ï¼Œä¸€ä¸ªå¯¹è±¡é‡Œæœ‰å¦å¤–ä¸€ä¸ªå¯¹è±¡ public class User { private Role role; åå°å¤„ç† @GetMapping(â€œ/client10â€) public ModelAndView test03(User user, Role role) { //è®¾ç½®å…³è”å…³ç³» user.setRole(role); System.out.println(user); return null; } å‰å°å¤„ç† å¤šä¸ªå¯¹è±¡è¿›è¡Œå…³è”æ–¹å¼äºŒï¼šå‰å°å¤„ç† å§“åï¼š æ€§åˆ«ï¼š è§’è‰²åç§°ï¼š&lt;%â€“name=ç±»ä¸­.å±æ€§â€“%&gt; æäº¤æ•°æ® @GetMapping(â€œ/client11â€) public ModelAndView test04(User user) { System.out.println(user); return null; } å¤šä¸ªå¯¹è±¡å¦‚æœå‡ºç°åŒå±æ€§é—®é¢˜ï¼Œéœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»æ¥åŒºåˆ†æ•°æ®çš„å½’å±æƒ…å†µ ä¸åŒå¯¹è±¡åŒå±æ€§ä¼ é€’å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±» ç”¨æˆ· å§“åï¼š æ€§åˆ«ï¼š è§’è‰²ä¿¡æ¯ï¼š å­¦ç”Ÿ å§“åï¼š æ€§åˆ«ï¼š æäº¤æ•°æ® @GetMapping(â€œ/client12â€) public ModelAndView test05(HsModel hsModel) { System.out.println(hsModel.getStudent()); System.out.println(hsModel.getUser()); return null; } ç¬¬ä¸‰æ–¹ç±»å«è¿™äº›ç±» public class HsModel { private User user; private Student student; Map å§“åï¼š&lt;input type=â€textâ€ name=â€query[â€˜user_nameâ€™]â€&lt;%â€“å±æ€§[â€˜éœ€è¦è®¾ç½®çš„keyå€¼â€™]â€“%&gt;&gt; æ€§åˆ«ï¼š æäº¤æ•°æ® @GetMapping(â€œ/client13â€) public ModelAndView test01(HsModel hsModel) { System.out.println(hsModel.getQuery()); return null; } éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»çš„æ”¯æŒ public class HsModel { private Map&lt;String,Object&gt; query; ä¸€èˆ¬åšåˆ†é¡µæŸ¥è¯¢çš„æ—¶å€™ä½¿ç”¨ query[â€œè®¾ç½®Mapä¸­çš„KEYâ€] List å§“åï¼š &lt;%â€“è®¾ç½®ç¬¬1æ¡æ•°æ®çš„user_nameâ€“%&gt; æ€§åˆ«ï¼š&lt;%â€“è®¾ç½®ç¬¬1æ¡æ•°æ®çš„sexâ€“%&gt; å§“åï¼š &lt;%â€“è®¾ç½®ç¬¬2æ¡æ•°æ®çš„user_nameâ€“%&gt; æ€§åˆ«ï¼š å§“åï¼š &lt;%â€“è®¾ç½®ç¬¬6æ¡æ•°æ®çš„user_name,åŒæ—¶ä¹Ÿè®¾ç½®äº†è¿™ä¸ªlisté•¿åº¦æ˜¯6â€“%&gt; æ€§åˆ«ï¼š æäº¤æ•°æ® @Controller public class ListTypeDemoController { @GetMapping(â€œ/client14â€) public ModelAndView test01(HsModel hsModel) { System.out.println(hsModel.getStudentList()); return null; } } éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»çš„æ”¯æŒ public class HsModel { private List studentList; ä¸€èˆ¬åšæ‰¹é‡æ·»åŠ  å ä½ç¬¦ä¼ é€’æ•°æ® å ä½ç¬¦ä¼ é€’æ•°æ® æ™®é€šæ¥æ”¶æ•°æ® @GetMapping(â€œ/client15/{id}/{name}â€) public ModelAndView test01( @PathVariable(â€œidâ€) int user_id,/å ä½ç¬¦çš„åå­—å’Œå½¢å‚ä¸ä¸€æ ·ï¼Œåœ¨PathVariableä¸­éœ€è¦å†™å ä½ç¬¦çš„åå­—/ @PathVariable String name,/ä¸€æ ·åˆ™å¯ä»¥çœç•¥/ String sex /@RequestParamçš„ç®€å†™æ–¹å¼/ ) { System.out.println(user_id); System.out.println(name); System.out.println(sex); return null; } Mapæ¥æ”¶æ•°æ® @GetMapping(â€œ/client16/{id}/{name}â€) public ModelAndView test01( @PathVariable Map&lt;String,Object&gt; map,/å ä½ç¬¦çš„åå­—ä½œä¸ºkeyå€¼/ String sex /@RequestParamçš„ç®€å†™æ–¹å¼/ ) { System.out.println(map); System.out.println(sex); return null; } JSONæ•°æ® æœåŠ¡ç«¯ä½¿ç”¨@RequestBodyæ¥æ”¶æ•°æ® JSONæ•°æ®â€”Javaå¯¹è±¡äº’è½¬ Map @Test public void test01() throws IOException { Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put(â€œuser_nameâ€,â€æ‚Ÿç©ºâ€); map.put(â€œageâ€, 500); map.put(â€œhobbyâ€,/é™æ€åˆå§‹åŒ–æ•°æ®/ new String[]{â€œmusicâ€,â€bookâ€}); System.out.println(â€œè½¬æ¢ä¹‹å‰çš„Map:â€+map); //1.javaå¯¹è±¡è½¬JSONæ ¼å¼çš„å­—ç¬¦ä¸² ObjectMapper objectMapper = new ObjectMapper(); String jsonString = objectMapper.writeValueAsString(map); System.out.println(â€œjavaå¯¹è±¡è½¬JSONæ ¼å¼çš„å­—ç¬¦ä¸²:â€+jsonString); //2.JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡ Map&lt;String, Object&gt; hsMap = objectMapper.readValue(jsonString, Map.class); System.out.println(â€œJSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡:â€+hsMap); } é›†åˆ @Test public void test03() throws Exception { List userList = new ArrayList&lt;&gt;(); User user = new User(); user.setUser_id(100); user.setUser_name(â€œå…«æˆ’â€); user.setSex(â€œç”·â€); Role role = new Role(); role.setRole_name(â€œè¶…çº§ç®¡ç†å‘˜â€); user.setRole(role); userList.add(user); user = new User(); user.setUser_id(100); user.setUser_name(â€œæ‚Ÿç©ºâ€); user.setSex(â€œç”·â€); role = new Role(); role.setRole_name(â€œç®¡ç†å‘˜â€); user.setRole(role); userList.add(user); System.out.println(â€œè½¬æ¢ä¹‹å‰çš„List:â€+userList); //1.javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸² ObjectMapper objectMapper = new ObjectMapper(); String jsonString = objectMapper.writeValueAsString(userList); System.out.println(â€œjavaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸²:â€+jsonString); //2.jsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡ System.out.println(â€œç»„æˆçš„List:â€+objectMapper.readValue(jsonString, List.class)); //ç»„æˆçš„æ˜¯List JavaType t = objectMapper.getTypeFactory().constructParametricType(List.class, User.class); List tempList = objectMapper.readValue(jsonString, t); System.out.println(â€œjsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡:â€+tempList); } è‡ªå®šä¹‰å¯¹è±¡ @Test public void test02() throws Exception { User user = new User(); user.setUser_id(100); user.setUser_name(â€œå…«æˆ’â€); user.setSex(â€œç”·â€); Role role = new Role(); role.setRole_name(â€œè¶…çº§ç®¡ç†å‘˜â€); //å»ºç«‹è”ç³» user.setRole(role); System.out.println(â€œè½¬æ¢ä¹‹å‰çš„User:â€+user); //1.javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸² ObjectMapper objectMapper = new ObjectMapper(); String jsonString = objectMapper.writeValueAsString(user); System.out.println(â€œjavaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸²:â€+jsonString); //2.jsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡ User hsUser = objectMapper.readValue(jsonString, User.class); System.out.println(â€œjsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡:â€+hsUser); } JavaScriptå¯¹è±¡â€”JSONæ ¼å¼å­—ç¬¦äº’è½¬ //ç»™å¯¹è±¡èµ‹å€¼çš„å‡ ç§æ–¹ å¼ //javascriptä¸­ï¼Œvar å¯¹è±¡ = {}å¤§æ‹¬å·ï¼Œæ•°ç»„[] var obj = { user_name: â€œæ‚Ÿç©ºâ€, sex: â€œç”·â€, hobby: [â€œbasktballâ€, â€œfootballâ€], classInfo: { class_name: â€œè®¡ç®—æœºâ€, number:8 } }; obj.nickname = â€œé½å¤©å¤§åœ£â€; obj[â€œageâ€] = 500; console.log(obj); //1.å°†JavaScriptå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼çš„å­—ç¬¦ä¸² var jsonStr = JSON.stringify(obj); console.log(jsonStr); //2.å°†JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaScriptå¯¹è±¡ var hs = JSON.parse(jsonStr); console.log(hs); æ–‡ä»¶ä¸Šä¼  é…ç½®ä¸Šä¼ æ–‡ä»¶çš„è§£æå™¨ï¼Œå¦‚æœå‘ç°ä½ æ˜¯äºŒè¿›åˆ¶æµçš„æ–¹å¼ä¼ é€’æ•°æ®ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨è¯¥è§£æå™¨å¤„ç†æ•°æ® æ•°æ®ç±»å‹çš„è½¬æ¢ æ—¥æœŸç±»å‹çš„è½¬æ¢@@DateTimeFormat /** æ¥æ”¶æ—¥æœŸç±»å‹çš„å®¢æˆ·ç«¯ä¼ é€’æ•°æ®ï¼Œç®€å†™æ–¹å¼ æ²¡æœ‰å†™æ³¨è§£ï¼Œå°±å†™ 2018/8/14 15:31:20 å†™äº†æ³¨è§£å°±æŒ‰ç…§ä»–çš„æ ¼å¼æ¥ï¼Œå¦‚æœæ²¡æœ‰å†™æ—¶é—´ï¼Œä½ è¾“å…¥äº†æ—¶é—´ä¹Ÿä¸ä¼šè®¤ å¦‚æœä¸€ä¸ªç±»ä¸­ä¹Ÿæœ‰è¿™æ ·çš„å±æ€§ï¼ŒåŒæ—¶æ¥æ”¶è¿™ä¸ªæ—¶é—´ï¼Œæ³¨è§£é‡Œä¹Ÿè¦å†™æ ¼å¼ * @return */ @GetMapping(â€œ/client01â€) public ModelAndView test01( @DateTimeFormat(pattern = â€œyyyy-MM-dd HH:mm:ssâ€) Date mydate, User user) { System.out.println(mydate); System.out.println(user); return null; } @InitBinder @InitBinder public void init01(WebDataBinder binder) { //ç›‘æ§è¦è½¬æ¢(String)çš„æ•°æ®ç±»å‹ binder.registerCustomEditor(String.class, /åŒ¿åå¯¹è±¡/new PropertyEditorSupport() { //é‡å†™äº†setAsTextæ–¹æ³• @Override public void setAsText(String text) throws IllegalArgumentException { System.out.println(â€œä¹‹å‰æ¥æ”¶çš„å€¼â€”-â€œ + text); //å¯¹æ•°æ®é‡æ–°å¤„ç†èµ‹å€¼ï¼Œèµ‹å€¼ç»™å½¢å‚user_name this.setValue(â€œå¯¹æ•°æ®å¤„ç†ä¹‹åçš„å€¼â€”-â€œ + text + â€œæ‚Ÿç©ºâ€); } }); //ç›‘æ§Integerç±»å‹ binder.registerCustomEditor(Integer.class, new PropertyEditorSupport() { @Override public void setAsText(String text) throws IllegalArgumentException { System.out.println(text); this.setValue(â€œ999â€); } }); } å®¢æˆ·ç«¯ä¼ é€’æ•°æ®ä¸­æ–‡ä¹±ç  getè¯·æ±‚ tomcat7 å…¨å±€è®¾ç½® åœ¨tomcaté‡Œçš„sever.xmlä¸­ä¿®æ”¹ è¿™ä¸€è¡ŒåŠ å…¥URIEncoding=â€UTF-8â€ å•é¡¹ç›®è®¾ç½® user_name = new String(user_name.getBytes(â€œISO8859-1â€),â€UTF-8â€); tomcat8 é»˜è®¤ä¸ºUTF-8ï¼Œä¸éœ€è¦ä¿®æ”¹ postè¯·æ±‚ åœ¨web.xmlä¸­é…ç½®è¿‡æ»¤å™¨ characterEncodingFilter org.springframework.web.filter.CharacterEncodingFilter encoding UTF-8 forceRequestEncoding true forceResponseEncoding true characterEncodingFilter /* æœåŠ¡ç«¯ä¼ é€’æ•°æ®åˆ°å®¢æˆ·ç«¯ è¿”å›ç±»å‹ModelAndViewä¼ é€’æ•°æ® æŒ‡æ˜KEY @GetMapping(â€œ/server02â€) public ModelAndView test02() { ModelAndView mav = new ModelAndView(); // mav.addObject() æ²¡æœ‰æŒ‡æ˜KEY //ä¸€æ­¥ä¸€æ­¥çš„è¿½æºç ï¼Œå‘ç°ä¸€ä¸ªModelMapçš„ç±»å®ä¾‹åŒ–å¯¹è±¡.ç”¨å®ƒçš„addAttributeæ–¹æ³•æ·»åŠ ï¼ŒModelMapåˆæ˜¯ç»§æ‰¿äº†HashMap mav.addObject(â€œtitleâ€, â€œé€šè¿‡ModelAndViewä¼ é€’æ•°æ®â€); mav.addObject(â€œhsâ€, â€œä¸­å›½å’Œå°šâ€); mav.addObject(â€œclassâ€, â€œè®¡ç®—æœºè®¡ç§‘â€); mav.addObject(â€œnumberâ€, 11); mav.setViewName(â€œjsp/result02â€); //è¯·æ±‚è½¬å‘ï¼Œé€šè¿‡è§†å›¾è§£æå™¨ return mav; } æ²¡æœ‰æŒ‡æ˜KEYï¼Œé»˜è®¤ä¼ é€’æ•°æ®çš„KEYçš„åç§°ä¸ºç±»åçš„é¦–å­—æ¯å°å†™ @GetMapping(â€œ/server03â€) public ModelAndView test03() { ModelAndView mav = new ModelAndView(); mav.addObject(â€œintegerâ€, 100); mav.addObject(200); mav.addObject(â€œstringâ€, â€œå­—ç¬¦ä¸²â€); mav.addObject(â€œæ‚Ÿç©ºâ€); // è§„åˆ™ï¼šå®¢æˆ·ç«¯è·å–æ²¡æœ‰åŠ keyçš„æ•°æ®ï¼Œé»˜è®¤keyæ­£å¸¸æ˜¯æ•°æ®å¯¹åº”çš„ç±»å‹çš„é¦–å­—æ¯å°å†™ Integerâ€”integer Stringâ€”string // ä¸¤ä¸ªkeyä¸€æ ·çš„,åªè®¤æœ€åä¸€ä¸ª // doubleæ˜¯å…³é”®å­—ï¼Œä¸èƒ½${double},åªèƒ½${requestScope[â€œdoubleâ€] } double a = 123.123; mav.addObject(a); User user = new User(); user.setMydate(new Date()); mav.addObject(user); mav.setViewName(â€œjsp/result03â€); //è¯·æ±‚è½¬å‘ï¼Œé€šè¿‡è§†å›¾è§£æå™¨ return mav; } è¿”å›ç±»å‹Stringä¼ é€’æ•°æ® Map @GetMapping(â€œ/server04â€) public String test01(Map&lt;String,Object&gt; map) { map.put(â€œtitleâ€, â€œMapåœ¨å½¢å‚ä¸­å®šä¹‰ï¼Œå¯ä»¥ä¼ é€’æ•°æ®â€); map.put(â€œhsâ€, â€œ123â€); map.put(â€œclassâ€, â€œ12222â€); map.put(â€œnumberâ€, 1111); return â€œjsp/result04â€; //é€šè¿‡è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ } ModelMap @GetMapping(â€œ/server05â€) public String test02(ModelMap modelMap) { modelMap.addAttribute(â€œtitleâ€, â€œModelMapè¿›è¡Œä¼ é€’æ•°æ®â€); modelMap.addAttribute(â€œhsâ€, â€œ123â€); modelMap.addAttribute(â€œclassâ€, â€œ12222â€); modelMap.addAttribute(â€œnumberâ€, 1111); return â€œjsp/result04â€; //é€šè¿‡è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ } Model @GetMapping(â€œ/server06â€) public String test03(Model model) { model.addAttribute(â€œtitleâ€, â€œModelæ¥å£è¿›è¡Œä¼ é€’æ•°æ®â€); model.addAttribute(â€œhsâ€, â€œ123â€); model.addAttribute(â€œclassâ€, â€œ12222â€); model.addAttribute(â€œnumberâ€, 1111); return â€œjsp/result04â€; //é€šè¿‡è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ } @ResponseBodyè¿”å›JSONæ•°æ®æ ¼å¼ è¿”å›JSONæ ¼å¼æ•°æ® Map @GetMapping(â€œ/json03â€) @ResponseBody //æŠŠjavaæ•°æ®è½¬æ¢ä¸ºJSONçš„å­—ç¬¦ä¸² å­˜åœ¨BUG(IEæµè§ˆå™¨ä¸å¥½ä½¿ï¼Œè§£å†³åŠæ³•åœ¨springmvc.xmlé…ç½®) public Map&lt;String, Object&gt; test03() { Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put(â€œnameâ€, â€œé©¬è€æ¿â€); map.put(â€œsexâ€, â€œç”·â€); return map; } List @GetMapping(â€œ/json04â€) public @ResponseBody List&lt;Map&lt;String, Object&gt;&gt; test04() { List&lt;Map&lt;String,Object&gt;&gt; tempList = new ArrayList&lt;Map&lt;String,Object&gt;&gt;(); Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put(â€œnameâ€, â€œé©¬è€æ¿â€); map.put(â€œsexâ€, â€œç”·â€); tempList.add(map); map = new HashMap&lt;String, Object&gt;(); map.put(â€œnameâ€, â€œæ‚Ÿç©ºâ€); map.put(â€œsexâ€, â€œç”·â€); tempList.add(map); return tempList; } IEæµè§ˆå™¨çš„ä¸‹è½½é—®é¢˜ text/html;charset=UTF-8 text/plan;charset=UTF-8 application/json;charset=UTF-8 è¿”å›æ—¥æœŸæ ¼å¼çš„é—®é¢˜ @JsonFormat éœ€è¦åœ¨userçš„dateå±æ€§ä¸‹åŠ æ³¨è§£ // ç›¸æ”¾å“ªé‡Œå°±æ”¾å“ªé‡Œï¼Œpattern:æ ¼å¼ï¼Œtimezone:æ—¶åŒºï¼Œè¿™æ˜¯è®¾ç½®ä¸œå…«åŒº // @JsonFormat(pattern = â€œyyyy-MM-dd HH:mm:ssâ€) Date mydate; // @JsonFormat(pattern = â€œyyyy-MM-dd HH:mm:ssâ€,timezone = â€œGMT+8â€) // @JsonFormat(pattern = â€œyyyy-MM-ddâ€,timezone = â€œGMT+8â€) public Date getMydate() { return mydate; } ä½¿ç”¨SpringMvcé…ç½® å‰å°å¦‚ä½•æ¥æ”¶ ${title} ${requestScope.hs} â€“æŒ‡æ˜èŒƒå›´äº†çš„ ${requestScope[â€œclassâ€]} ${number} â€”é»˜è®¤æƒ…å†µä¸‹æ˜¯ä»pageContext-&gt;request-&gt;session-&gt;applicationä¸‹å¼€å§‹å¯»æ‰¾ ${requestScope.integer } ${requestScope.string } ${requestScope[â€œdoubleâ€] }â€”â€“å› ä¸ºdoubleæ˜¯å…³é”®å­—ï¼Œæ‰€ä»¥ä¸èƒ½.double ${requestScope.user.mydate } ${requestScope[â€œuserâ€][â€œmydateâ€] } æ–‡ä»¶çš„ä¸Šä¼ å’Œä¸‹è½½ ä¸Šä¼  &lt;%@ page contentType=â€text/html;charset=UTF-8â€ language=â€javaâ€ %&gt; Title å•æ–‡ä»¶ä¸Šä¼  æ ‡é¢˜ï¼š æ–‡ä»¶ï¼š æ–‡ä»¶ä¸Šä¼  $(function () { //å…ƒç´ é€‰æ‹©å™¨ $(â€œbuttonâ€).click(function () { //1.è·å–ä¸Šä¼ æ–‡ä»¶çš„å¯¹è±¡ï¼Œæ˜¯æ•°ç»„ï¼Œè·å–çš„ç¬¬ä¸€ä¸ª var myfile = $(â€œ#myfileâ€).prop(â€œfilesâ€)[0]; //2.åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰ if (myfile) { //3.è·å–æ–‡ä»¶åç§° var fileName = myfile.name; //4.è·å–æ–‡ä»¶çš„åç¼€åç§° var ext = fileName.substring(fileName.lastIndexOf(â€œ.â€) + 1); //5.è®¾ç½®å…è®¸ä¸Šä¼ çš„æ–‡ä»¶åç¼€åç§° var allowFileTypes = [â€œjpgâ€, â€œpngâ€, â€œgifâ€, â€œjpegâ€, â€œdmpâ€, â€œrarâ€]; //6.è®¾ç½®ä¸€ä¸ªæ ‡è¯†ï¼Œç”¨æ¥åšåˆ¤æ–­ var flag = false; //å¾ªç¯åˆ¤æ–­ä¸Šä¼ æ ¼å¼æ˜¯å¦æ­£ç¡® for (var i = 0; i &lt; allowFileTypes.length; i++) { if (ext == allowFileTypes[i]) { flag = true; break; } } if (!flag) { alert(â€œæ‚¨ä¸Šä¼ çš„æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼Œå…è®¸çš„æ ¼å¼ä¸ºï¼šâ€ + allowFileTypes.join(â€œ | â€œ)); return false; } //7.åˆ¤æ–­æ–‡ä»¶çš„å¤§å° if (myfile.size &gt; 20 1024 1024) { alert(â€œæ‚¨ä¸Šä¼ çš„æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é‡æ–°é€‰æ‹©â€) } return false; //8.è¡¨å•æäº¤ ${â€œ#uploadFormâ€}.submit(); } else { alert(â€œè¯·é€‰æ‹©æ‚¨è¦ä¸Šä¼ çš„æ–‡ä»¶â€); return false; } }) }) è¦æ±‚ formè¡¨å•ä¼ é€’æ•°æ® è¯·æ±‚å¿…é¡»ä¸ºPOSTè¯·æ±‚ ä½¿ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼ä¼ é€’æ•°æ® enctype=â€multipart/form-dataâ€ æ–‡ä»¶åŸŸ å·¥å…· Servlet3.0 Commons-FileUpload @PostMapping(â€œ/upload01â€) public ModelAndView test01(String title, MultipartFile myfile, HttpServletRequest request) throws IOException { ModelAndView mav = new ModelAndView(); // System.out.println(title); //1.è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§° String fileName = myfile.getOriginalFilename(); mav.addObject(â€œfileNameâ€, fileName); //2.åˆ¤æ–­æ–‡ä»¶åç§°æ˜¯å¦æœ‰å€¼,isEmptyæ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„length=0ä¸ºtrue if (!fileName.isEmpty()) { //3.è·å–æœåŠ¡å™¨çš„ç»å¯¹è·¯å¾„ String path = request.getServletContext().getRealPath(â€œ/uploadâ€); //4.å»ºç«‹è”ç³» File folder = new File(path); //5.åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶å¤¹ if (!folder.exists()) { folder.mkdirs(); //åˆ›å»ºæ–‡ä»¶å¤¹ } //6,è·å–ä¸Šä¼ æ–‡ä»¶çš„åç¼€åç§° String ext = FilenameUtils.getExtension(fileName); //7.åˆ›å»ºæ–°çš„æ–‡ä»¶åç§° //String newFileName = UUID.randomUUID().toString() + â€œ.â€ + ext; //æˆ–è€…ç”¨æ—¶é—´æˆ³åˆ›å»ºåç§° String newFileName = new Date().getTime() + â€œ_â€ + new Random().nextInt(100000) + â€œ.â€ + ext; mav.addObject(â€œnewFileNameâ€, newFileName); // System.out.println(newFileName); //8.æ–‡ä»¶ä¸Šä¼ ï¼ŒFile.separatorä¸ºæ–œçº¿ myfile.transferTo(new File(path + File.separator + newFileName)); } mav.addObject(â€œhsâ€, â€œå’Œå°šâ€); mav.setViewName(â€œjsp/resultâ€); /*System.out.println(â€œæµ‹è¯•æ˜¯å¦å¯ä»¥è·å–æ­£å¸¸çš„æ•°æ®:â€+title); System.out.println(â€œ=====â€); System.out.println(â€œæ–‡ä»¶çš„MIMEç±»å‹ :â€+myfile.getContentType()); System.out.println(â€œæ–‡ä»¶NAMEå±æ€§å¯¹åº”çš„å€¼ :â€+myfile.getName()); System.out.println(â€œä¸Šä¼ æ–‡ä»¶çš„åç§° :â€+myfile.getOriginalFilename()); System.out.println(â€œä¸Šä¼ æ–‡ä»¶çš„å¤§å° :â€+myfile.getSize());*/ return mav; } commons-fileupload-1.3.1.jar ä¸‹è½½ @GetMapping(â€œ/downloadâ€) public ResponseEntity&lt;byte[]&gt; test02(String newFileName, String fileName, HttpServletRequest request) throws IOException { //è·å–æœåŠ¡ç«¯çš„ç»å¯¹è·¯å¾„ String path = request.getServletContext().getRealPath(â€œ/upload/â€œ); HttpHeaders headers = new HttpHeaders(); //è®¾ç½®ç›¸åº”çš„å†…å®¹ä¸ºæµ headers.setContentType(MediaType.TEXT_EVENT_STREAM); //è®¾ç½®ä¸‹è½½çš„åç§°â€“å’Œä¸­æ–‡ä¹±ç çš„é—®é¢˜ headers.setContentDispositionFormData(â€œattachmentâ€, new String(fileName.getBytes(â€œUTF-8â€), â€œISO8859-1â€) ); //æ‰¾åˆ°æ–‡ä»¶ File file = new File(path + File.separator + newFileName); return new ResponseEntity&lt;byte[]&gt;(FileUtils.readFileToByteArray(file),/å°†æ–‡ä»¶è½¬æ¢ä¸ºbyteæ•°ç»„/ headers, HttpStatus.CREATED); } éœ€è¦çš„jaråŒ… commons-io-2.4.jar å¼‚å¸¸å¤„ç† æ³¨è§£æ–¹å¼ å±€éƒ¨å¤„ç†@ExceptionHandler å…¨å±€å¤„ç†@ControllerAdvice+@ExceptionHandler XMLæ–¹å¼ jsp/error jsp/error jsp/error jsp/error æ‹¦æˆªå™¨ æ‹¦æˆªå™¨æœ‰ä¸”åªèƒ½æ‹¦æˆªController Springæ¡†æ¶æ¦‚è¿° Springæ˜¯IoC(DI)å’ŒAOPçš„å®¹å™¨æ¡†æ¶ IoC #æ§åˆ¶åè½¬ï¼šç™½è¯ï¼šè®©åˆ«äººä¸ºæˆ‘ä»¬æœåŠ¡ï¼Œå¸®æˆ‘newå¯¹è±¡ ç®¡ç†Beançš„å£°æ˜å‘¨æœŸ èŒƒå›´Scope é»˜è®¤æƒ…å†µä¸‹æ˜¯å•ä¾‹æ¨¡å¼single å¤šä¾‹æ¨¡å¼prototype request session å®ç°æ–¹å¼æœ‰ä¸¤ç§ æ³¨è§£æ–¹å¼ @Component @Controller @Service @Repository DI(æ³¨å…¥æ–¹å¼) #ç™½è¯ï¼šæ³¨å…¥å°±æ˜¯å®ä¾‹åŒ–ï¼Œèµ‹å€¼ Setteræ–¹å¼â€“æ¨è XMLæ–¹å¼ com.hs.model.Userç±»ä¸­çš„å±æ€§å¿…é¡»è¦æä¾›setæ–¹æ³• å½¢å¼å¦‚ä¸‹ &lt;property name=â€å±æ€§åâ€ value=â€å€¼â€ refå¼•ç”¨å¯¹è±¡ æ ‡å‡†å†™æ³• ç¼©å†™ pæ–¹å¼(pæ–¹å¼çš„å¼•ç”¨) å„ä¸ªç±»å‹å¦‚ä½•æ³¨å…¥ æ™®é€šå±æ€§çš„å€¼ value é›†åˆ list/set/array map/props è‡ªå®šä¹‰ç±»å‹ å†…éƒ¨ä½¿ç”¨ å¤–éƒ¨å®ä¾‹åŒ–ï¼Œå†…éƒ¨ä½¿ç”¨refè¿›è¡Œå¼•ç”¨ å¤–éƒ¨å®ä¾‹åŒ–ï¼Œä½¿ç”¨p:xxx-refå¼•ç”¨ æ¥å£æ³¨å…¥å®ç°ç±»(æ¥å£å›è°ƒ) å¤–éƒ¨å®šä¹‰æ¥å£å®ç°ç±»å®ä¾‹åŒ–ï¼Œå†…éƒ¨ä½¿ç”¨è¿›è¡Œå¼•ç”¨ å¤–éƒ¨å®šä¹‰æ¥å£å®ç°ç±»å®ä¾‹åŒ–ï¼Œä½¿ç”¨p:xxx-refå¼•ç”¨ util:list | set | map | propertiesâ€”-ä¸å¸¸ç”¨ å†…éƒ¨å®šä¹‰ï¼Œå†…éƒ¨å¼•ç”¨ å¤–éƒ¨å®šä¹‰ï¼Œpå¼•ç”¨ æ³¨è§£æ–¹å¼ @Autowiredâ€“æ¨è @Qualifier(â€œbookDaoImplâ€)ï¼ŒæŒ‡æ˜å…·ä½“çš„id @Resource æ¦‚è¦: åŒºåˆ« @Autowiredå…ˆæŒ‰ç±»å‹å†æŒ‰ç…§åç§°æŸ¥æ‰¾ @Resourceå…ˆæŒ‰åç§°å†æŒ‰ç…§ç±»å‹æŸ¥æ‰¾ æ„é€ å‡½æ•°æ³¨å…¥æ–¹å¼ XMLæ–¹å¼ æ ‡å‡†å†™æ³• ç¼©å†™ å„ä¸ªç±»å‹å¦‚ä½•æ³¨å…¥ æ™®é€šå±æ€§çš„å€¼ value é›†åˆ list/set/array map/props è‡ªå®šä¹‰ç±»å‹ å†…éƒ¨ä½¿ç”¨ å¤–éƒ¨å®ä¾‹åŒ–ï¼Œå†…éƒ¨ä½¿ç”¨refè¿›è¡Œå¼•ç”¨ æ¥å£æ³¨å…¥å®ç°ç±»(æ¥å£å›è°ƒ) å¤–éƒ¨å®šä¹‰æ¥å£å®ç°ç±»å®ä¾‹åŒ–ï¼Œå†…éƒ¨ä½¿ç”¨è¿›è¡Œå¼•ç”¨ æ³¨è§£æ–¹å¼ @Autowiredâ€“æ¨è @Resource @Valueæ³¨è§£æ³¨å…¥å€¼ @Value(â€œæˆ‘æ˜¯å…¶ä»–å±æ€§â€) private String anotherValue; æˆ–è€…å†™åœ¨setæ–¹æ³•ä¸Š æ³¨å…¥æ™®é€šå­—ç¬¦ä¸² æ³¨å…¥æ“ä½œç³»ç»Ÿå±æ€§ æ³¨å…¥è¡¨è¾¾å¼è¿ç®—ç»“æœ æ³¨å…¥å…¶ä»–beançš„å±æ€§ã€‚ æ³¨å…¥æ–‡ä»¶å†…å®¹ã€‚ æ³¨å…¥ç½‘å€ä¿¡æ¯ã€‚ æ³¨å…¥å±æ€§æ–‡ä»¶ã€‚ AOP #ç™½è¯ï¼šåœ¨ä¸æ”¹å˜åŸæ¥ä»£ç çš„åŸºç¡€ä¸Šï¼Œå¢åŠ æ–°çš„åŠŸèƒ½ï¼ŒAOPçš„åº•å±‚çš„å®ç°å°±æ˜¯ä½¿ç”¨çš„æ˜¯Javaçš„åŠ¨æ€ä»£ç† æ¦‚å¿µ Aspect Oriented Programming with Spring é¢å‘åˆ‡é¢ï¼ˆæ–¹é¢ï¼‰ç¼–ç¨‹ é¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªè¡¥å……è€Œå·² ç™½è¯ï¼šæˆ‘çš„ç†è§£â€”-&gt;åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„åŸºç¡€ä¸Šå¢å¼ºï¼ˆå¢åŠ ï¼‰æ–°çš„åŠŸèƒ½ é™æ€ä»£ç† åŠ¨æ€ä»£ç† CGLIBåŠ¨æ€ä»£ç† proxy-target-class=â€trueâ€ åˆ‡é¢ @Aspect aop:aspect è¿æ¥ç‚¹ è¡¨è¾¾å¼ execution( com.hs..service.Service.*(**) åˆ‡ç‚¹ @PointCut &lt;aop:point-cut é€šçŸ¥ å‰ç½®é€šçŸ¥ ä¸ç®¡ç¨‹åºæ˜¯å¦æ­£ç¡®éƒ½ä¼šæ‰§è¡Œ åç½®é€šçŸ¥ ä¸ç®¡ç¨‹åºæ˜¯å¦æ­£ç¡®éƒ½ä¼šæ‰§è¡Œ è¿”å›é€šçŸ¥ åªæœ‰ç¨‹åºæ˜¯æ­£ç¡®çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥è·å–è¿è¡Œåçš„æ•°æ® å¼‚å¸¸é€šçŸ¥ åªæœ‰ç¨‹åºæ˜¯é”™è¯¯çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ ç¯ç»•é€šçŸ¥â€”â€”-ä¸æ¨èï¼ï¼ï¼ ä»£ç†å¯¹è±¡ JdbcTemplateå·¥å…·ç±» é…ç½®æ•°æ®æº é…ç½®å·¥å…·ç±» SQLè¯­å¥ æŸ¥è¯¢ è¿”å›Mapæ•°æ® @Test public void test01() { /String sql = â€œselect from oa_user where user_id = 3â€; Map&lt;String, Object&gt; map = this.jdbcTemplate.queryForMap(sql);*/ String sql = â€œselect * from oa_user where user_id = ?â€; Map&lt;String, Object&gt; map = jdbcTemplate.queryForMap(sql, 2); System.out.println(map); } è¿”å›Listæ•°æ® @Test public void test02() { String sql = â€œselect * from oa_userâ€; System.out.println(jdbcTemplate.queryForList(sql)); } è¿”å›ä¸€ä¸ªå€¼ @Test public void test03() { String sql = â€œselect count(*) from oa_userâ€; System.out.println(jdbcTemplate.queryForObject(sql, Integer.class)); } è¿”å›ä¸€ä¸ªå¯¹è±¡ @Test public void test04() { String sql = â€œselect * from oa_user where user_id = ?â€; User user = jdbcTemplate.queryForObject(sql, /åŒ¿åå†…éƒ¨ç±»/new RowMapper() { @Override public User mapRow(ResultSet rs, int rowNum) throws SQLException { User user = new User(); user.setUser_id(rs.getInt(â€œuser_idâ€)); user.setUser_name(rs.getString(â€œUser_nameâ€)); user.setSex(rs.getString(â€œsexâ€)); user.setMoney(rs.getBigDecimal(â€œmoneyâ€)); user.setBirthday((Date) rs.getObject(â€œbirthdayâ€)); return user; } }, 2); System.out.println(user); } è¿”å›ä¸€ä¸ªList&lt;å¯¹è±¡&gt; @Test public void test06() { String sql = â€œselect * from oa_user where user_name like concat(â€˜%â€™,?,â€™%â€™)â€; List userList = jdbcTemplate.query(sql,/å¤„ç†ä¸€æ¡ä¸€æ¡çš„æ•°æ®ï¼Œï¼Œï¼Œå¯ä»¥ä¸ç”¨å†™/new BeanPropertyRowMapper(User.class), â€œæ²™åƒ§â€); System.out.println(userList); } å¢åˆ æ”¹ @Test public void test07() { String sql1 = â€œinsert into oa_user(user_name,sex,money,birthday) values(?,?,?,?)â€; String sql2 = â€œupdate oa_user set user_name=?,sex=? where user_id = ?â€; String sql3 = â€œdelete from oa_user where user_id = ?â€; int num1 = jdbcTemplate.update(sql1, â€œå”åƒ§â€, â€œç”·â€, 220.00, â€œ2018-8-9â€); int num2 = jdbcTemplate.update(sql2, â€œå’Œå°šâ€, â€œç”·â€, 16); int num3 = jdbcTemplate.update(sql3, 17); System.out.println(num1+â€â€“â€+num2+â€â€”â€œ+num3); } äº‹åŠ¡ äº‹åŠ¡ æ¦‚å¿µ ä¸€ä¸ªå·¥ä½œå•å…ƒç”±å¤šä¸ªåŠ¨ä½œç»„æˆï¼Œåªæœ‰åŠ¨ä½œå…¨éƒ¨æ­£ç¡®çš„æ—¶å€™æ‰èƒ½æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªåŠ¨ä½œé”™äº†ï¼Œå…¶ä»–çš„åŠ¨ä½œéƒ½æ˜¯æ— æ•ˆçš„ï¼ˆå›æ»šï¼‰ å…³é”®å±æ€§ï¼ˆACIDï¼‰ åŸå­æ€§(atomicity):äº‹åŠ¡æ˜¯ä¸€ä¸€ä¸ªåŸå­æ“ä½œ,ç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆï¼Œäº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ ä¸€è‡´æ€§(consistency):ä¸€æ—¦æ‰€æœ‰äº‹åŠ¡åŠ¨ä½œå®Œæˆï¼Œäº‹åŠ¡å°±è¢«æäº¤ï¼Œæ•°æ®å’Œèµ„æºå°±å¤„äºä¸€ç§æ»¡è¶³ä¸šåŠ¡è§„åˆ™çš„ä¸€-è‡´æ€§çŠ¶æ€ä¸­. éš”ç¦»æ€§(isolation):å¯èƒ½æœ‰è®¸å¤šäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹ç‰©éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸå æŒä¹…æ€§(durability): ä¸€æ—¦äº‹åŠ¡å®Œæˆï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆç³»ç»Ÿé”™è¯¯ï¼Œå®ƒçš„ç»“æœéƒ½ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ä¸­ äº‹åŠ¡ç®¡ç† äº‹åŠ¡ç®¡ç†å°±æ˜¯ç®¡ç†äº‹åŠ¡ï¼Œç”¨æ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§. äº‹åŠ¡ç®¡ç†å™¨ å°±æ˜¯å¯¹äº‹åŠ¡ç®¡ç†çš„å®ç°ï¼Œæ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼ˆæ•°æ®åº“â€”&gt;æ•°æ®æºï¼‰ ä¼ æ’­æ€§ å½“ä½ äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ£€æŸ¥å…¶äº‹åŠ¡çš„ä¼ æ’­æ€§ è°ƒç”¨è¿‡ç¨‹ XMLç‰ˆâ€”æ¨è #XMLç‰ˆæœ¬å®Œæˆäº‹åŠ¡ï¼Œéœ€è¦è·ŸAOPé…åˆä½¿ç”¨ é…ç½®äº‹åŠ¡ç®¡ç†å™¨ å‘ŠçŸ¥å“ªäº›æ–¹æ³•æ˜¯éœ€è¦è¢«äº‹åŠ¡ç®¡ç†å™¨è¿›è¡Œç®¡ç†çš„ &lt;!â€“6.å‘ŠçŸ¥å“ªäº›æ–¹æ³•æ˜¯éœ€è¦è¢«äº‹åŠ¡ç®¡ç†å™¨è¿›è¡Œç®¡ç†çš„ï¼Œ ç­‰ä»·äºæ³¨è§£ç‰ˆï¼Œåœ¨æ–¹æ³•ä¸Šé¢å†™@Transactional â€“&gt; &lt;tx:advice transaction-manager=â€transactionManagerâ€ id=â€serviceAdviceâ€&gt; tx:attributes &lt;tx:method name=â€get*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€load*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€list*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€find*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€query*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€sel*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€check*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€valid*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€login*â€ read-only=â€trueâ€/&gt; &lt;tx:method name=â€*â€ propagation=â€REQUIREDâ€/&gt; &lt;/tx:attributes&gt; &lt;/tx:advice&gt; é…ç½®AOPå’Œtx:adviceé…åˆä½¿ç”¨ï¼Œå‘ŠçŸ¥æˆ‘å“ªä¸ªå±‚æ¬¡ä¸‹çš„æ–¹æ³•ä¼šè¢«äº‹åŠ¡ç®¡ç†å™¨è¿›è¡Œç®¡ç† &lt;aop:config proxy-target-class=â€trueâ€&gt; &lt;aop:pointcut id=â€servicePointCutâ€ expression=â€execution( com.hs..service.Service.*(..))â€/&gt; &lt;aop:advisor advice-ref=â€serviceAdviceâ€ pointcut-ref=â€servicePointCutâ€/&gt; &lt;/aop:config&gt; å¯åŠ¨äº‹åŠ¡æ³¨è§£ &lt;tx:annotation-driven transaction-manager=â€transactionManagerâ€ proxy-target-class=â€trueâ€/&gt; æ³¨è§£ç‰ˆ é…ç½®äº‹åŠ¡ç®¡ç†å™¨ å¯åŠ¨äº‹åŠ¡æ³¨è§£ &lt;!â€“6.å¯åŠ¨äº‹åŠ¡æ³¨è§£ï¼šå‘ŠçŸ¥è¯¥æ–¹æ³•æ˜¯äº‹åŠ¡æ–¹æ³•(ä¸€ä¸ªé”™ï¼Œå…¶ä»–å…¨éƒ¨é”™)ï¼Œè€Œä¸æ˜¯æ™®é€šæ–¹æ³• transaction-manager=â€transactionManagerâ€å¯ä»¥çœç•¥ â€“&gt; &lt;tx:annotation-driven transaction-manager=â€transactionManagerâ€ proxy-target-class=â€trueâ€/&gt; åœ¨æ–¹æ³•æˆ–è€…ç±»çš„å‰é¢@Transactionalï¼Œå‘Šä¹‹æ˜¯äº‹åŠ¡æ–¹æ³• @Transactionalçš„å±æ€§ @Transactional(readOnly = true) //åªè¯»ï¼Œä¸€èˆ¬åªåšæŸ¥è¯¢æ“ä½œä½¿ç”¨ @Transactional(noRollbackForClassName = â€œRuntimeExceptionâ€) //é‡è§è¿™ä¸ªå¼‚å¸¸ï¼Œæ•°æ®å°±ä¸ä¼šå›æ»š ä¼ æ’­æ€§çš„è¡Œä¸º é»˜è®¤ï¼š@Transactional(propagation = Propagation.REQUIRED) @Transactional(propagation = Propagation.REQUIRES_NEW) XMind: ZEN - Trial Version]]></content>
      <categories>
        <category>SSMå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆåäº”ï¼‰Springäº‹åŠ¡XMLç‰ˆ-æ¨è]]></title>
    <url>%2F2018%2F09%2F03%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%BA%94%EF%BC%89Spring%E4%BA%8B%E5%8A%A1XML%E7%89%88-%E6%8E%A8%E8%8D%90%2F</url>
    <content type="text"><![CDATA[åœ¨XMLç‰ˆä¸­å®Œæˆæ³¨è§£@Transactionalçš„åŠŸèƒ½ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ï¼Œæ•°æ®åº“è¡¨è·Ÿæ³¨è§£ç‰ˆä¸€æ ·2.XMLé…ç½®1234567891011121314151617181920212223242526272829303132333435&lt;!--5.é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="druidDataSource"/&gt;&lt;/bean&gt;&lt;!--6.å‘ŠçŸ¥å“ªäº›æ–¹æ³•æ˜¯éœ€è¦è¢«äº‹åŠ¡ç®¡ç†å™¨è¿›è¡Œç®¡ç†çš„ï¼Œ ç­‰ä»·äºæ³¨è§£ç‰ˆï¼Œåœ¨æ–¹æ³•ä¸Šé¢å†™@Transactional --&gt;&lt;tx:advice transaction-manager="transactionManager" id="serviceAdvice"&gt; &lt;tx:attributes&gt; &lt;!--å“ªäº›æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å±æ€§ï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„å±æ€§--&gt; &lt;tx:method name="get*" read-only="true"/&gt; &lt;tx:method name="load*" read-only="true"/&gt; &lt;tx:method name="list*" read-only="true"/&gt; &lt;tx:method name="find*" read-only="true"/&gt; &lt;tx:method name="query*" read-only="true"/&gt; &lt;tx:method name="sel*" read-only="true"/&gt; &lt;tx:method name="check*" read-only="true"/&gt; &lt;tx:method name="valid*" read-only="true"/&gt; &lt;tx:method name="login*" read-only="true"/&gt; &lt;!--è¿™æ˜¯æ–¹æ³•éƒ½æ˜¯æŸ¥è¯¢çš„æ–¹æ³•,è®¾ç½®ä¸ºåªè¯»--&gt; &lt;tx:method name="*" propagation="REQUIRED"/&gt; &lt;/tx:attributes&gt;&lt;/tx:advice&gt;&lt;!--7.é…ç½®AOPå’Œtx:adviceé…åˆä½¿ç”¨ï¼Œå‘ŠçŸ¥æˆ‘å“ªä¸ªå±‚æ¬¡ä¸‹çš„æ–¹æ³•ä¼šè¢«äº‹åŠ¡ç®¡ç†å™¨è¿›è¡Œç®¡ç†--&gt;&lt;aop:config proxy-target-class="true"&gt; &lt;aop:pointcut id="servicePointCut" expression="execution(* com.hs..service.*Service.*(..))"/&gt; &lt;aop:advisor advice-ref="serviceAdvice" pointcut-ref="servicePointCut"/&gt;&lt;/aop:config&gt;&lt;!--8.å¯åŠ¨äº‹åŠ¡æ³¨è§£ï¼šå‘ŠçŸ¥è¯¥æ–¹æ³•æ˜¯äº‹åŠ¡æ–¹æ³•(ä¸€ä¸ªé”™ï¼Œå…¶ä»–å…¨éƒ¨é”™)ï¼Œè€Œä¸æ˜¯æ™®é€šæ–¹æ³• transaction-manager="transactionManager"å¯ä»¥çœç•¥--&gt;&lt;tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/&gt; æ„æ€å°±æ˜¯ï¼šæˆ‘ç›‘æ§çš„æ˜¯com.hs..service.*Serviceï¼šserviceå±‚ä¸‹ä»¥Serviceç»“å°¾çš„ç±»ä¸‹çš„ï¼šè¿™äº›æ–¹æ³• 1234567891011 &lt;tx:method name="get" read-only="true"/&gt; &lt;tx:method name="load" read-only="true"/&gt; &lt;tx:method name="list" read-only="true"/&gt; &lt;tx:method name="find" read-only="true"/&gt; &lt;tx:method name="query" read-only="true"/&gt; &lt;tx:method name="sel" read-only="true"/&gt; &lt;tx:method name="check" read-only="true"/&gt; &lt;tx:method name="valid" read-only="true"/&gt; &lt;tx:method name="login" read-only="true"/&gt; &lt;!--è¿™æ˜¯æ–¹æ³•éƒ½æ˜¯æŸ¥è¯¢çš„æ–¹æ³•,è®¾ç½®ä¸ºåªè¯»--&gt;&lt;tx:method name="*" propagation="REQUIRED"/&gt; 3.å…¶ä»–ä»£ç è·Ÿæ³¨è§£ç‰ˆä¸€æ ·ï¼Œåªæ˜¯å»æ‰@Transactional]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆåå››ï¼‰Springäº‹åŠ¡]]></title>
    <url>%2F2018%2F09%2F03%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E5%9B%9B%EF%BC%89Spring%E4%BA%8B%E5%8A%A1%2F</url>
    <content type="text"><![CDATA[Spring äº‹åŠ¡ã€äº‹åŠ¡ç®¡ç†ã€äº‹åŠ¡ç®¡ç†å™¨ã€äº‹åŠ¡çš„ä¼ æ’­æ€§ã€@Transactional æºç è·å–github [TOC] 1.å®ä¾‹å¼•å…¥å’Œå°šç»ç†è·ŸæŸä¸ªä¹¦åº—æ²Ÿé€šä¸šåŠ¡ï¼Œç‹ç»ç†æœ‰ä¸€ä¸ªéœ€æ±‚éœ€è¦ä¹°ä¹¦çš„æ“ä½œ(æš‚æ—¶åªèƒ½è®©ä¹°ä¸€æœ¬ä¹¦ï¼Œä½¿ç”¨ä¼šå‘˜å¡) éœ€æ±‚ï¼šä¹°ä¸€æœ¬ä¹¦===&gt;éœ€è¦çš„æ­¥éª¤ å’Œå°šç»ç†æ€è€ƒï¼š æŸ¥è¯¢ä¹¦çš„ä»·æ ¼ åˆ¤æ–­ä½™é¢æ˜¯å¦å……è¶³ï¼ˆè·å–ä½™é¢çš„ä¿¡æ¯ï¼‰ ä¼šå‘˜ä¸­çš„ä½™é¢ â€” ä¹¦ä»·æ ¼ åˆ¤æ–­åº“å­˜æ˜¯å¦å……è¶³ï¼ˆè·å–ä¹¦åº“å­˜æ•°é‡ï¼‰ åº“å­˜ä¹¦çš„æ•°é‡ â€” 1 2.æ•°æ®åº“è¡¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273SET FOREIGN_KEY_CHECKS=0;-------- Table structure for tx_book------DROP TABLE IF EXISTS `tx_book`;CREATE TABLE `tx_book` ( `isbn` varchar(255) NOT NULL, `book_name` varchar(255) DEFAULT NULL, `price` int(11) DEFAULT NULL, PRIMARY KEY (`isbn`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;-------- Records of tx_book------INSERT INTO `tx_book` VALUES (&apos;1001&apos;, &apos;è¥¿æ¸¸è®°&apos;, &apos;50&apos;);INSERT INTO `tx_book` VALUES (&apos;1002&apos;, &apos;æ°´æµ’&apos;, &apos;60&apos;);INSERT INTO `tx_book` VALUES (&apos;1003&apos;, &apos;ä¸‰å›½&apos;, &apos;70&apos;);-------- Table structure for tx_book_stock------DROP TABLE IF EXISTS `tx_book_stock`;CREATE TABLE `tx_book_stock` ( `id` int(11) NOT NULL AUTO_INCREMENT, `isbn` varchar(255) DEFAULT NULL, `stock` int(11) DEFAULT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;-------- Records of tx_book_stock------INSERT INTO `tx_book_stock` VALUES (&apos;1&apos;, &apos;1001&apos;, &apos;10&apos;);INSERT INTO `tx_book_stock` VALUES (&apos;2&apos;, &apos;1002&apos;, &apos;10&apos;);INSERT INTO `tx_book_stock` VALUES (&apos;3&apos;, &apos;1003&apos;, &apos;10&apos;);-------- Table structure for tx_user------DROP TABLE IF EXISTS `tx_user`;CREATE TABLE `tx_user` ( `user_id` int(11) NOT NULL AUTO_INCREMENT, `account` varchar(255) DEFAULT NULL, `balance` int(255) DEFAULT NULL, PRIMARY KEY (`user_id`)) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;-------- Records of tx_user------INSERT INTO `tx_user` VALUES (&apos;1&apos;, &apos;wukong&apos;, &apos;100&apos;);INSERT INTO `tx_user` VALUES (&apos;2&apos;, &apos;bajie&apos;, &apos;200&apos;);INSERT INTO `tx_user` VALUES (&apos;3&apos;, &apos;tangseng&apos;, &apos;100&apos;); 3.é¡¹ç›®ç»“æ„4.daoå±‚æ¥å£ 12345678910111213141516171819202122232425262728293031323334353637package com.hs.dao;public interface BookDao &#123; /** * é€šè¿‡ä¹¦çš„isbnæŸ¥çœ‹è¿™æœ¬ä¹¦çš„ä»·æ ¼ * @param isbn * @return */ int getBookPriceByIsbn(String isbn); /** * å‡å»ç”¨æˆ·é‡Œçš„é’± * @param account * @param price */ void updateUserBalance(String account, int price); /** * å‡å°‘ä¹¦çš„æ•°é‡ * @param isbn */ void updateBookStock(String isbn); /** * æŸ¥è¯¢ç”¨æˆ·çš„ä½™é¢ * @param account * @return */ int getUserBalanceByAccount(String account); /** * æŸ¥è¯¢ä¹¦çš„åº“å­˜ * @param isbn * @return */ int getBookStockByIsbn(String isbn);&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package com.hs.dao;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.stereotype.Repository;@Repository //&lt;bean id =bookDaoImpl &gt;public class BookDaoImpl implements BookDao &#123; private JdbcTemplate jdbcTemplate; @Autowired public void setJdbcTemplate(JdbcTemplate jdbcTemplate) &#123; this.jdbcTemplate = jdbcTemplate; &#125; @Override public int getBookPriceByIsbn(String isbn) &#123; String sql = "select price from tx_book where isbn=?"; int price = jdbcTemplate.queryForObject(sql, Integer.class, isbn); return price; &#125; @Override public void updateUserBalance(String account, int price) &#123; String sql = "update tx_user set balance = balance-? where account = ?"; jdbcTemplate.update(sql, price, account); &#125; @Override public void updateBookStock(String isbn) &#123; String sql = "update tx_book_stock set stock = stock-1 where isbn = ?"; jdbcTemplate.update(sql, isbn); &#125; @Override public int getUserBalanceByAccount(String account) &#123; String sql = "select balance from tx_user where account=?"; int balance = jdbcTemplate.queryForObject(sql, Integer.class, account); return balance; &#125; @Override public int getBookStockByIsbn(String isbn) &#123; String sql = "select stock from tx_book_stock where isbn=?"; int stock = jdbcTemplate.queryForObject(sql, Integer.class, isbn); return stock; &#125;&#125; 5.Serviceå±‚æ¥å£ 12345package com.hs.service;public interface OneBookService &#123; void buyOneBook(String account, String isbn);&#125; 123456789101112131415161718192021222324252627282930313233343536package com.hs.service;import com.hs.dao.BookDao;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Service;@Service //&lt;bean id = "oneBookServiceImpl" class="xxx"&gt;public class OneBookServiceImpl implements OneBookService &#123; //å»ºç«‹è”ç³» @Autowired //ç›´æ¥åœ¨å±æ€§ä¸Šæ³¨è§£setteræ–¹å¼ï¼Œä¹Ÿå¯ä»¥åœ¨setteræ–¹æ³•ä¸Šæ³¨è§£ //æŒ‡æ˜å…·ä½“çš„id @Qualifier("bookDaoImpl") //&lt;property name = "BookDao" ref="bookDaoImpl"&gt; private BookDao bookDao; @Override public void buyOneBook(String account, String isbn) &#123; //1.æŸ¥è¯¢ä¹¦çš„ä»·æ ¼ int price = bookDao.getBookPriceByIsbn(isbn); //2.åˆ¤æ–­ä¼šå‘˜ä½™é¢æ˜¯å¦å……è¶³ int balance = bookDao.getUserBalanceByAccount(account); if (balance &lt; price) &#123; throw new RuntimeException("è´¦å·ä½™é¢ä¸è¶³ï¼Œè¯·å……å€¼"); &#125; //3.ä¼šå‘˜ä¸­çš„ä½™é¢ - ä¹¦ä»·æ ¼ bookDao.updateUserBalance(account, price); //4.åˆ¤æ–­åº“å­˜æ•°é‡æ˜¯å¦å……è¶³ int stock = bookDao.getBookStockByIsbn(isbn); if (stock == 0) &#123; throw new RuntimeException("ä¹¦çš„åº“å­˜æ•°é‡ä¸è¶³"); &#125; //5.åº“å­˜ä¹¦çš„æ•°é‡ - 1 bookDao.updateBookStock(isbn); &#125;&#125; 6.æµ‹è¯•123456789101112131415161718192021222324package com.hs.test;import com.hs.service.OneBookService;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class OneBookServiceTest &#123; private ApplicationContext ac; private OneBookService oneBookService; @Before public void init() &#123; ac = new ClassPathXmlApplicationContext("beans.xml"); oneBookService = ac.getBean("oneBookServiceImpl", OneBookService.class); &#125; @Test public void testBuyOneBookTest() &#123; oneBookService.buyOneBook("wukong", "1001"); &#125;&#125; æ­¤æ—¶å¦‚æœæŠŠæ•°æ®åº“é‡Œ1001çš„åº“å­˜æ”¹ä¸º0ï¼Œç„¶åå†æ‰§è¡Œæµ‹è¯•ï¼Œå°±ä¼šå‘ç°wukongçš„é’±æ‰£äº†ï¼Œä½†æ˜¯æ§åˆ¶å°æŠ¥é”™ï¼Œä¹¦çš„åº“å­˜æ•°é‡ä¸è¶³ï¼Œè¿™æ ·å°±å¼•å…¥äº†äº‹åŠ¡çš„æ¦‚å¿µï¼ï¼ 7.ä»€ä¹ˆæ˜¯äº‹åŠ¡ï¼Ÿ ä¸€ä¸ªå·¥ä½œå•å…ƒç”±å¤šä¸ªåŠ¨ä½œç»„æˆï¼Œåªæœ‰åŠ¨ä½œå…¨éƒ¨æ­£ç¡®çš„æ—¶å€™æ‰èƒ½æ‰§è¡ŒæˆåŠŸï¼Œå¦‚æœæœ‰ä¸€ä¸ªåŠ¨ä½œé”™äº†ï¼Œå…¶ä»–çš„åŠ¨ä½œéƒ½æ˜¯æ— æ•ˆçš„ï¼ˆå›æ»šï¼‰(äº‹åŠ¡å°±æ˜¯ä¸€ç³»åˆ—çš„åŠ¨ä½œï¼Œå®ƒä»¬è¢«å½“åšä¸€ ä¸ªå•ç‹¬çš„å·¥ä½œå•å…ƒ.è¿™äº›åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆï¼Œè¦ä¹ˆå…¨éƒ¨ä¸èµ·ä½œç”¨) äº‹åŠ¡çš„å››ä¸ªå…³é”®å±æ€§(ACID) åŸå­æ€§(atomicity):äº‹åŠ¡æ˜¯ä¸€ä¸€ä¸ªåŸå­æ“ä½œ,ç”±ä¸€ç³»åˆ—åŠ¨ä½œç»„æˆï¼Œäº‹åŠ¡çš„åŸå­æ€§ç¡®ä¿åŠ¨ä½œè¦ä¹ˆå…¨éƒ¨å®Œæˆè¦ä¹ˆå®Œå…¨ä¸èµ·ä½œç”¨ ä¸€è‡´æ€§(consistency):ä¸€æ—¦æ‰€æœ‰äº‹åŠ¡åŠ¨ä½œå®Œæˆï¼Œäº‹åŠ¡å°±è¢«æäº¤ï¼Œæ•°æ®å’Œèµ„æºå°±å¤„äºä¸€ç§æ»¡è¶³ä¸šåŠ¡è§„åˆ™çš„ä¸€-è‡´æ€§çŠ¶æ€ä¸­. éš”ç¦»æ€§(isolation):å¯èƒ½æœ‰è®¸å¤šäº‹åŠ¡ä¼šåŒæ—¶å¤„ç†ç›¸åŒçš„æ•°æ®ï¼Œå› æ­¤æ¯ä¸ªäº‹ç‰©éƒ½åº”è¯¥ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»å¼€æ¥ï¼Œé˜²æ­¢æ•°æ®æŸåã€‚ æŒä¹…æ€§(durability): ä¸€æ—¦äº‹åŠ¡å®Œæˆï¼Œæ— è®ºå‘ç”Ÿä»€ä¹ˆç³»ç»Ÿé”™è¯¯ï¼Œå®ƒçš„ç»“æœéƒ½ä¸åº”è¯¥å—åˆ°å½±å“ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œäº‹åŠ¡çš„ç»“æœè¢«å†™åˆ°æŒä¹…åŒ–å­˜å‚¨å™¨ä¸­ 8.äº‹åŠ¡ç®¡ç†äº‹åŠ¡ç®¡ç†å°±æ˜¯ç®¡ç†äº‹åŠ¡ï¼Œç”¨æ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§. 9.äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯å¯¹äº‹åŠ¡ç®¡ç†çš„å®ç°ï¼Œæ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ï¼ˆæ•°æ®åº“â€”&gt;æ•°æ®æºï¼‰ï¼ŒMyBatisä½¿ç”¨çš„æ˜¯ç¬¬ä¸€ç§ 10.åœ¨XMLé…ç½®äº‹åŠ¡ï¼Œå¯åŠ¨äº‹åŠ¡æ³¨è§£123456789101112&lt;!--5.é…ç½®äº‹åŠ¡ç®¡ç†å™¨--&gt;&lt;bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt; &lt;property name="dataSource" ref="druidDataSource"/&gt;&lt;/bean&gt;&lt;!--6.å¯åŠ¨äº‹åŠ¡æ³¨è§£ï¼šå‘ŠçŸ¥è¯¥æ–¹æ³•æ˜¯äº‹åŠ¡æ–¹æ³•(ä¸€ä¸ªé”™ï¼Œå…¶ä»–å…¨éƒ¨é”™)ï¼Œè€Œä¸æ˜¯æ™®é€šæ–¹æ³• transaction-manager="transactionManager"å¯ä»¥çœç•¥--&gt;&lt;tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/&gt;&lt;!--æ“ä½œæ•°æ®åº“äº†çš„xmlç‰ˆæœ¬,æ²¡æ³¨é‡Šçš„æ˜¯æ³¨è§£ç‰ˆæœ¬--&gt;&lt;!--&lt;bean id="bookDaoImpl" class="com.hs.dao.BookDaoImpl"&gt; &lt;property name="jdbcTemplate" ref="jdbcTemplate"/&gt;&lt;/bean&gt;--&gt; åœ¨æ–¹æ³•å‰é¢åŠ å…¥æ³¨è§£@Transactionalï¼Œæˆ–è€…ç±»å‰é¢åŠ è¿™ä¸ªæ³¨è§£ï¼Œå‘Šä¹‹è¿™ä¸ªç±»çš„æ–¹æ³•éƒ½æ˜¯äº‹åŠ¡æ–¹æ³• 12//ç‚¹çŸ³æˆé‡‘ï¼Œæ ‡è¯†è¿™ä¸ªæ–¹æ³•æ˜¯äº‹åŠ¡æ–¹æ³•@Transactional å†buyOneBookæ–¹æ³•å‰é¢åŠ å…¥è¿™ä¸ªæ³¨è§£ï¼Œå†ç»§ç»­æµ‹è¯•ï¼Œå°±ä¼šå‘ç°ï¼ŒæŠ¥ä¹¦åº“å­˜ä¸è¶³ï¼Œä½†æ˜¯wukongçš„é’±æ²¡æœ‰æ‰£ã€‚ 11.@Transactionalçš„å±æ€§12345//@Transactional //@Transactional(readOnly = true) //åªè¯»ï¼Œä¸€èˆ¬åªåšæŸ¥è¯¢æ“ä½œä½¿ç”¨ //@Transactional(noRollbackForClassName = "RuntimeException") //é‡è§è¿™ä¸ªå¼‚å¸¸ï¼Œæ•°æ®å°±ä¸ä¼šå›æ»š// @Transactional(propagation = Propagation.REQUIRES_NEW)// @Transactional(propagation = Propagation.REQUIRED) 12.äº‹åŠ¡çš„ä¼ æ’­æ€§åœ¨ä¸Šé¢çš„æ¡ä»¶ä¸‹ï¼Œæ–°å¢åŠ å¦‚æœä¹°å¤šæœ¬ä¹¦è¿™ä¸ªåŠŸèƒ½ äº‹åŠ¡çš„ä¼ æ’­æ€§ï¼šå½“ä½ äº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨çš„æ—¶å€™ï¼Œéœ€è¦æ£€æŸ¥å…¶äº‹åŠ¡çš„ä¼ æ’­æ€§ å¯èƒ½å»¶ç»­è°ƒç”¨æ–¹æ³•çš„äº‹åŠ¡ ä¹Ÿå¯èƒ½å¼€å¯æ–°çš„äº‹åŠ¡ ä¹°å¤šæœ¬ä¹¦çš„æ¥å£ï¼š MoreBookService.java 1234567891011package com.hs.service;public interface MoreBookService &#123; /** * ä¹°å¤šæœ¬ä¹¦ * String... æ˜¯å¯å˜é•¿åº¦å‚æ•°åˆ—è¡¨ï¼Œå¯ä»¥å­˜å¤šä¸ª * @param account * @param isbns */ void buyMoreBook(String account, String... isbns);&#125; MoreBookServiceImpl.java 12345678910111213141516171819202122package com.hs.service;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.transaction.annotation.Transactional;@Servicepublic class MoreBookServiceImpl implements MoreBookService &#123; @Autowired private OneBookService oneBookService; @Transactional //åŒ…å«åœ¨è¿™é‡Œé¢çš„éƒ½æ˜¯äº‹åŠ¡æ–¹æ³•,äº‹åŠ¡çš„ä¼ æ’­æ€§ @Override public void buyMoreBook(String account, String... isbns) &#123; if (isbns != null) &#123; for (String isbn : isbns) &#123; oneBookService.buyOneBook(account,isbn); &#125; &#125; &#125;&#125; buyMoreBookè¿™ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œè°ƒç”¨äº†buyOneBookè¿™ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œç„¶åæ£€æŸ¥buyOneBookè¿™ä¸ªäº‹åŠ¡æ–¹æ³•çš„ä¼ æ’­æ€§ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸Šé¢å†™@Transactionalï¼Œé»˜è®¤ä¸ºå»¶ç»­è°ƒç”¨æ–¹æ³•çš„äº‹åŠ¡ï¼Œä¸‹é¢çš„æ³¨è§£åœ¨è¢«è°ƒç”¨çš„äº‹åŠ¡æ–¹æ³•ä¸Šå†™ 12//@Transactional(propagation = Propagation.REQUIRES_NEW) //æœ¬æ–¹æ³•å»¶ç»­è°ƒç”¨æ–¹æ³•çš„äº‹åŠ¡// @Transactional(propagation = Propagation.REQUIRED) //æœ¬æ–¹æ³•å¼€å¯ä¸€ä¸ªæ–°çš„äº‹åŠ¡ æµ‹è¯• 123456789101112131415161718192021222324package com.hs.test;import com.hs.service.MoreBookService;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class MoreBookServiceTest &#123; private ApplicationContext ac; private MoreBookService moreBookService; @Before public void init() &#123; ac = new ClassPathXmlApplicationContext("beans.xml"); moreBookService = ac.getBean("moreBookServiceImpl", MoreBookService.class); &#125; @Test public void testBuyMoreBookMethod() &#123; moreBookService.buyMoreBook("wukong","1003","1001"); &#125;&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆåä¸‰ï¼‰JdbcTemplateå·¥å…·ç±»çš„ä½¿ç”¨]]></title>
    <url>%2F2018%2F09%2F03%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%B8%89%EF%BC%89JdbcTemplate%E5%B7%A5%E5%85%B7%E7%B1%BB%E7%9A%84%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[JdbcTemplateå°±æ˜¯Springæ¡†æ¶ç»™æˆ‘ä»¬å°è£…å¥½çš„ç®€å•å¯¹æ•°æ®åº“æ“ä½œçš„å·¥å…·ç±»ï¼Œè¿”å›Mapæ•°æ®ï¼Œè¿”å›List_Mapæ•°æ®ï¼Œè¿”å›ä¸€ä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›ä¸€ä¸ªList&lt;å¯¹è±¡&gt;ï¼Œæ·»åŠ ä¿®æ”¹åˆ é™¤ æºç è·å–github [TOC] 1.ä»‹ç»JdbcTemplateå·¥å…·ç±»Springæ˜¯ä¸€ä¸ªIoCå’ŒAOPçš„å®¹å™¨æ¡†æ¶ï¼Œå¹¶ä¸”å®ƒæ˜¯ä¸€ç«™å¼å¼€æºæ¡†æ¶ ORMæ˜¯æˆ‘ä»¬å­¦è¿‡çš„MyBatisï¼ŒJdbcTemplateå°±æ˜¯Springæ¡†æ¶ç»™æˆ‘ä»¬å°è£…å¥½çš„ç®€å•å¯¹æ•°æ®åº“æ“ä½œçš„å·¥å…·ç±»ï¼Œéœ€è¦è¿™ä¸ªspring-jdbc.jar 2.sqlæ–‡ä»¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116SET FOREIGN_KEY_CHECKS=0;-------- Table structure for oa_user------DROP TABLE IF EXISTS `oa_user`;CREATE TABLE `oa_user` ( `user_id` int(11) NOT NULL AUTO_INCREMENT, `user_name` varchar(255) DEFAULT NULL, `sex` varchar(255) DEFAULT NULL, `money` decimal(7,2) DEFAULT NULL, `birthday` date DEFAULT NULL, PRIMARY KEY (`user_id`)) ENGINE=InnoDB AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4;-------- Records of oa_user------INSERT INTO `oa_user` VALUES (&apos;1&apos;, &apos;æ‚Ÿç©º&apos;, &apos;ç”·&apos;, &apos;888.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;2&apos;, &apos;å…«æˆ’&apos;, &apos;ç”·&apos;, &apos;999.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;3&apos;, &apos;å¤©è“¬å…ƒå¸…&apos;, &apos;å¥³&apos;, &apos;1000.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;4&apos;, &apos;æ‚Ÿèƒ½&apos;, &apos;ç”·&apos;, &apos;666.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;5&apos;, &apos;æ³•æ‚Ÿæ³•&apos;, &apos;å¥³&apos;, &apos;544.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;6&apos;, &apos;æ‚Ÿ&apos;, &apos;å¥³&apos;, &apos;562.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;7&apos;, &apos;æ‚Ÿ&apos;, &apos;å¥³&apos;, &apos;562.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;14&apos;, &apos;å«¦å¨¥&apos;, &apos;å¥³&apos;, &apos;1213.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;15&apos;, &apos;æœˆå…”&apos;, &apos;å¥³&apos;, &apos;2113.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;16&apos;, &apos;å’Œå°š&apos;, &apos;ç”·&apos;, &apos;455.00&apos;, &apos;2018-08-05&apos;);INSERT INTO `oa_user` VALUES (&apos;18&apos;, &apos;æ²™åƒ§&apos;, &apos;ç”·&apos;, &apos;455.00&apos;, &apos;2018-08-05&apos;);INSERT INTO `oa_user` VALUES (&apos;19&apos;, &apos;å”åƒ§&apos;, &apos;ç”·&apos;, &apos;220.00&apos;, &apos;2018-08-09&apos;);INSERT INTO `oa_user` VALUES (&apos;20&apos;, &apos;å”åƒ§&apos;, &apos;ç”·&apos;, &apos;220.00&apos;, &apos;2018-08-09&apos;);-------- Table structure for skill------DROP TABLE IF EXISTS `skill`;CREATE TABLE `skill` ( `skill_id` int(11) NOT NULL AUTO_INCREMENT, `skill_name` varchar(255) DEFAULT NULL, `num` int(11) DEFAULT NULL, `fk_teacher_id` int(11) DEFAULT NULL, PRIMARY KEY (`skill_id`)) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4;-------- Records of skill------INSERT INTO `skill` VALUES (&apos;2&apos;, &apos;JS&apos;, &apos;75&apos;, null);INSERT INTO `skill` VALUES (&apos;7&apos;, &apos;CSS&apos;, &apos;66&apos;, null);INSERT INTO `skill` VALUES (&apos;8&apos;, &apos;java&apos;, &apos;66&apos;, null);INSERT INTO `skill` VALUES (&apos;9&apos;, &apos;vue&apos;, &apos;56&apos;, &apos;9999&apos;);-------- Table structure for sys_role------DROP TABLE IF EXISTS `sys_role`;CREATE TABLE `sys_role` ( `role_id` int(11) NOT NULL AUTO_INCREMENT, `role_name` varchar(32) DEFAULT NULL, `role_key` varchar(32) DEFAULT NULL, `status` int(1) DEFAULT &apos;1&apos; COMMENT &apos;1å¯ç”¨ -1ç¦ç”¨&apos;, PRIMARY KEY (`role_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;-------- Records of sys_role------INSERT INTO `sys_role` VALUES (&apos;-100&apos;, &apos;è¶…çº§ç®¡ç†å‘˜&apos;, &apos;ADMIN&apos;, &apos;1&apos;);-------- Table structure for sys_user------DROP TABLE IF EXISTS `sys_user`;CREATE TABLE `sys_user` ( `user_id` int(11) NOT NULL AUTO_INCREMENT, `account` varchar(32) NOT NULL, `password` varchar(128) NOT NULL, `user_name` varchar(32) DEFAULT &apos;&apos;, `status` int(1) NOT NULL DEFAULT &apos;1&apos; COMMENT &apos;1å¯ç”¨ -1åˆ é™¤ 2ç¦ç”¨&apos;, `login_time` datetime DEFAULT CURRENT_TIMESTAMP, `ip` varchar(128) DEFAULT NULL, `fk_role_id` int(11) DEFAULT NULL, PRIMARY KEY (`user_id`), KEY `fk_role_id` (`fk_role_id`), CONSTRAINT `sys_user_ibfk_1` FOREIGN KEY (`fk_role_id`) REFERENCES `sys_role` (`role_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;-------- Records of sys_user------INSERT INTO `sys_user` VALUES (&apos;-999&apos;, &apos;super&apos;, &apos;super&apos;, &apos;å”åƒ§&apos;, &apos;1&apos;, &apos;2018-07-28 18:47:39&apos;, null, &apos;-100&apos;);INSERT INTO `sys_user` VALUES (&apos;-888&apos;, &apos;admin&apos;, &apos;admin&apos;, &apos;æ‚Ÿç©º&apos;, &apos;1&apos;, &apos;2018-07-03 18:48:21&apos;, null, &apos;-100&apos;); 3.å®ä¾‹åŒ–è¯¥å·¥å…·ç±»1234&lt;bean class="org.springframework.jdbc.core.JdbcTemplate" &gt; &lt;property name="dataSource" èµ‹å€¼/&gt; ------&lt;/bean&gt; 4.é…ç½®æ•°æ®æºæ•°æ®æºå°±æ˜¯è¿æ¥æ•°æ®ï¼Œè€Œä»¥åå·¥ä½œå½“ä¸­æˆ‘ä»¬æ¨èä½¿ç”¨â€œè¿æ¥æ± â€ï¼Œ ä»€ä¹ˆæ˜¯è¿æ¥æ± ï¼Ÿæˆ‘çš„ç†è§£ä¸ºé¢„å…ˆå»ºç«‹å¥½ä¸€å †Connectionï¼Œä½¿ç”¨æ—¶å€™ä»æ± ä¸­è·å–ï¼Œä¸é€‚åº”ä¸æ˜¯é”€æ¯è€Œæ˜¯æŠŠè¿æ¥å†æ¬¡æ”¾å›åˆ°æ± ä¸­ è¿æ¥æ± çš„å·¥ä½œåŸç†ï¼ŸJavaä»£ç å¦‚ä½•å®ç°â€“&gt;Map/List å­˜Connection å¼€æºçš„è¿æ¥æ± æœ‰å“ªäº›ï¼ŸC3p0ã€dbcpã€å¾·é²ä¼Šdruid(é˜¿é‡Œå·´å·´çš„) 12345678910111213141516&lt;!-- destroy-method="close"é”€æ¯çš„æ–¹æ³•--&gt;&lt;!--4.é…ç½®æ•°æ®æº--&gt;&lt;bean id="druidDataSource" class="com.alibaba.druid.pool.DruidDataSource" destroy-method="close"&gt; &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt; &lt;property name="url" value="jdbc:mysql://localhost:3306/cy42_mss"/&gt; &lt;property name="username" value="root"/&gt; &lt;property name="password" value="root"/&gt;&lt;/bean&gt;&lt;!--5.é…ç½®å·¥å…·ç±»JdbcTemplate--&gt;&lt;bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate"&gt; &lt;!--setteræ³¨å…¥æ–¹å¼--&gt; &lt;property name="dataSource" ref="druidDataSource"/&gt; &lt;!--æ„é€ å‡½æ•°èµ‹å€¼--&gt; &lt;!--&lt;constructor-arg name="dataSource" ref="druidDataSource"/&gt;--&gt;&lt;/bean&gt; 5.User.java1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465package com.hs.model;import java.math.BigDecimal;import java.util.Date;public class User &#123; private Integer user_id; private String user_name; private String sex; //é’±ç”¨BigDecimal private BigDecimal money; private Date birthday; public BigDecimal getMoney() &#123; return money; &#125; public void setMoney(BigDecimal money) &#123; this.money = money; &#125; public Date getBirthday() &#123; return birthday; &#125; public void setBirthday(Date birthday) &#123; this.birthday = birthday; &#125; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; @Override public String toString() &#123; return "User&#123;" + "user_id=" + user_id + ", user_name='" + user_name + '\'' + ", sex='" + sex + '\'' + ", money=" + money + ", birthday=" + birthday + '&#125;'; &#125;&#125; 6.æŸ¥è¯¢æ“ä½œ(é¢„å¤„ç†)1.è¿”å›Mapæ•°æ®12345678910111213141516171819202122232425262728293031323334353637383940package com.hs.test;import com.hs.model.User;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;import org.springframework.jdbc.core.BeanPropertyRowMapper;import org.springframework.jdbc.core.JdbcTemplate;import org.springframework.jdbc.core.RowMapper;import java.sql.ResultSet;import java.sql.SQLException;import java.util.Date;import java.util.List;import java.util.Map;public class JdbcTemplateTest &#123; private ApplicationContext ac; private JdbcTemplate jdbcTemplate; @Before public void init() &#123; ac = new ClassPathXmlApplicationContext("beans.xml"); jdbcTemplate = ac.getBean("jdbcTemplate", JdbcTemplate.class); &#125; /** * è¿”å›Mapæ•°æ® */ @Test public void test01() &#123; /*String sql = "select * from oa_user where user_id = 3"; Map&lt;String, Object&gt; map = this.jdbcTemplate.queryForMap(sql);*/ String sql = "select * from oa_user where user_id = ?"; Map&lt;String, Object&gt; map = jdbcTemplate.queryForMap(sql, 2); System.out.println(map); &#125;&#125; 2.è¿”å›List_Mapæ•°æ®12345678/** * è¿”å›List_Mapæ•°æ® */@Testpublic void test02() &#123; String sql = "select * from oa_user"; System.out.println(jdbcTemplate.queryForList(sql));&#125; 3.è¿”å›ä¸€ä¸ªå€¼123456789/** * è¿”å›ä¸€ä¸ªå€¼ */@Testpublic void test03() &#123; String sql = "select count(*) from oa_user"; System.out.println(jdbcTemplate.queryForObject(sql, Integer.class));&#125; 4.è¿”å›ä¸€ä¸ªå¯¹è±¡1234567891011121314151617181920212223/** * è¿”å›ä¸€ä¸ªå¯¹è±¡ */@Testpublic void test04() &#123; String sql = "select * from oa_user where user_id = ?"; User user = jdbcTemplate.queryForObject(sql, /*åŒ¿åå†…éƒ¨ç±»*/new RowMapper&lt;User&gt;() &#123; @Override public User mapRow(ResultSet rs, int rowNum) throws SQLException &#123; User user = new User(); user.setUser_id(rs.getInt("user_id")); user.setUser_name(rs.getString("User_name")); user.setSex(rs.getString("sex")); user.setMoney(rs.getBigDecimal("money")); user.setBirthday((Date) rs.getObject("birthday")); return user; &#125; &#125;, 2); System.out.println(user);&#125; 5.è¿”å›ä¸€ä¸ªList&lt;å¯¹è±¡&gt;123456789/** * è¿”å›ä¸€ä¸ªList&lt;å¯¹è±¡&gt; */@Testpublic void test05() &#123; String sql = "select * from oa_user where user_name like concat('%',?,'%')"; List&lt;User&gt; userList = jdbcTemplate.query(sql,/*å¤„ç†ä¸€æ¡ä¸€æ¡çš„æ•°æ®*/new UserRowMapper(), "æ²™åƒ§"); System.out.println(userList);&#125; æŠŠåŒ¿åå†…éƒ¨ç±»æå‡ºæ¥ 12345678910111213141516171819/** * å¯¹äºå¤–é¢é‚£ä¸ªç±»æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå¤–é¢é‚£ä¸ªç±»å¯¹äºè¿™ä¸ªç±»æ¥è¯´ï¼Œæ˜¯å¤–éƒ¨ç±» * ç™¾åº¦ä»€ä¹ˆæ˜¯å†…éƒ¨ç±»å’Œç‰¹ç§ï¼Ÿ * privateä½¿è¿™ä¸ªç±»åªèƒ½è¢«è¿™ä¸ªç±»ä½¿ç”¨ */private class UserRowMapper implements RowMapper&lt;User&gt; &#123; @Override public User mapRow(ResultSet rs, int rowNum) throws SQLException &#123; System.out.println("---------"); User user = new User(); user.setUser_id(rs.getInt("user_id")); user.setUser_name(rs.getString("User_name")); user.setSex(rs.getString("sex")); user.setMoney(rs.getBigDecimal("money")); user.setBirthday((Date) rs.getObject("birthday")); return user; &#125;&#125; 6.è¿”å›ä¸€ä¸ªList&lt;å¯¹è±¡&gt;â€”â€”è‡ªåŠ¨æ˜ å°„ï¼Œç±»å±æ€§å’ŒæŸ¥è¯¢çš„å­—æ®µåå­—ä¸€æ ·123456789/** * è¿”å›ä¸€ä¸ªList&lt;å¯¹è±¡&gt;â€”â€”è‡ªåŠ¨æ˜ å°„ï¼Œç±»å±æ€§å’ŒæŸ¥è¯¢çš„å­—æ®µåå­—ä¸€æ · */@Testpublic void test06() &#123; String sql = "select * from oa_user where user_name like concat('%',?,'%')"; List&lt;User&gt; userList = jdbcTemplate.query(sql,/*å¤„ç†ä¸€æ¡ä¸€æ¡çš„æ•°æ®ï¼Œï¼Œï¼Œ&lt;User&gt;å¯ä»¥ä¸ç”¨å†™*/new BeanPropertyRowMapper&lt;User&gt;(User.class), "æ²™åƒ§"); System.out.println(userList);&#125; 7.æ·»åŠ ä¿®æ”¹åˆ é™¤1234567891011121314/** * æ·»åŠ ä¿®æ”¹åˆ é™¤ */@Testpublic void test07() &#123; String sql1 = "insert into oa_user(user_name,sex,money,birthday) values(?,?,?,?)"; String sql2 = "update oa_user set user_name=?,sex=? where user_id = ?"; String sql3 = "delete from oa_user where user_id = ?"; int num1 = jdbcTemplate.update(sql1, "å”åƒ§", "ç”·", 220.00, "2018-8-9"); int num2 = jdbcTemplate.update(sql2, "å’Œå°š", "ç”·", 16); int num3 = jdbcTemplate.update(sql3, 17); System.out.println(num1+"--"+num2+"---"+num3);&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆåäºŒï¼‰AOPçš„XMLæ–¹å¼cglibä»£ç†-é‡ç‚¹æŒæ¡]]></title>
    <url>%2F2018%2F09%2F03%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89AOP%E7%9A%84XML%E6%96%B9%E5%BC%8Fcglib%E4%BB%A3%E7%90%86-%E9%87%8D%E7%82%B9%E6%8E%8C%E6%8F%A1%2F</url>
    <content type="text"><![CDATA[åˆ‡ç‚¹ï¼Œåˆ‡é¢ï¼Œå¦‚ä½•å®šä¹‰åˆ‡ç‚¹ï¼Œå‰ç½®ã€åç½®ã€æ”¾å›ã€å¼‚å¸¸ã€ç¯ç»•é€šçŸ¥çš„XMLç‰ˆ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ï¼ˆjaråŒ…è·Ÿä¸Šä¸ªä¸€æ ·ï¼‰ 2.æ ¸å¿ƒä¸šåŠ¡ä»£ç 1234567891011121314package com.hs.service;/** * å¯¹å¤–æä¾›çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå®Œæˆäº†åŠ æ³•/å‡æ³•/ä¹˜æ³•è¿ç®— */public interface ArithmeticService &#123; int add(int x, int y); int sub(int x, int y); int mul(int x, int y); int div(int x, int y);&#125; 1234567891011121314151617181920212223242526272829303132333435package com.hs.service.impl;import com.hs.service.ArithmeticService;import org.springframework.stereotype.Service;/** * æ ¸å¿ƒä»£ç  */@Servicepublic class ArithmeticServiceImpl implements ArithmeticService &#123; @Override public int add(int x, int y) &#123; //æ ¸å¿ƒä»£ç  int result = x + y; return result; &#125; @Override public int sub(int x, int y) &#123; int result = x - y; return result; &#125; @Override public int mul(int x, int y) &#123; int result = x * y; return result; &#125; @Override public int div(int x, int y) &#123; int result = x / y; return result; &#125;&#125; 3.åˆ‡é¢1234567891011121314151617181920212223242526272829303132333435363738394041424344454647package com.hs.service.aspect;import org.aspectj.lang.JoinPoint;import java.util.Arrays;//@Component//@Aspect //æ ‡è®°è¿™æ˜¯åˆ‡é¢public class Logger &#123; public void test01() &#123; System.out.println("æµ‹è¯•å‡ºorderå±æ€§çš„ä½œç”¨"); &#125; //1.å‰ç½®é€šçŸ¥ public void test05(JoinPoint jp) &#123; //è·å–get System.out.println("==å‰ç½®é€šçŸ¥=="); System.out.println(Arrays.asList(jp.getArgs())); System.out.println(jp.getSignature().getName()); System.out.println(jp.getTarget().getClass().getName()); System.out.println("==å‰ç½®é€šçŸ¥=="); &#125; //2.åç½®é€šçŸ¥ public void test06(JoinPoint jp) &#123; System.out.println("==åç½®å¢å¼º=="); System.out.println(Arrays.asList(jp.getArgs())); System.out.println(jp.getSignature().getName()); System.out.println(jp.getTarget().getClass().getName()); System.out.println("==åç½®å¢å¼º=="); &#125; //3.è¿”å›é€šçŸ¥ public void test07(JoinPoint jp, int hs) &#123; System.out.println("==è¿”å›é€šçŸ¥=="); System.out.println("ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œæ­£ç¡®çš„è¿è¡Œç»“æœä¸º==&gt;" + hs); System.out.println("==è¿”å›é€šçŸ¥=="); &#125; //4.å¼‚å¸¸é€šçŸ¥ public void test08(JoinPoint jp, ArithmeticException hs) &#123; System.out.println("==å¼‚å¸¸é€šçŸ¥=="); System.out.println("ç¨‹åºè¿è¡Œé”™è¯¯==&gt;" + hs); System.out.println("==å¼‚å¸¸é€šçŸ¥=="); &#125;&#125; 4.XMLé‡Œåˆ‡ç‚¹ï¼Œåˆ‡é¢1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.3.xsd"&gt; &lt;!--1.å¯åŠ¨Springæ³¨è§£--&gt; &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt; &lt;!--2.æ‰«æ--&gt; &lt;context:component-scan base-package="com.hs"/&gt; &lt;!--Springæä¾›äº†å¤šç§AOPçš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯æˆ‘ä»¬åªç”¨ç¬¬ä¸‰æ–¹çš„AOPæ ‡å‡†--&gt; &lt;!--3.å¯åŠ¨AOPæ³¨è§£ï¼šfalseæ˜¯ä½¿ç”¨é»˜è®¤çš„javaä»£ç†ï¼Œtrueæ˜¯ä½¿ç”¨CGLIBä»£ç†--&gt; &lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt; &lt;!--4.AOPçš„XMLé…ç½®æ–¹å¼,falseæ˜¯ä½¿ç”¨é»˜è®¤çš„javaä»£ç†ï¼Œtrueæ˜¯ä½¿ç”¨CGLIBä»£ç†--&gt; &lt;!--å®ä¾‹åŒ–é‚£ä¸ªç±»ï¼Œåœ¨åˆ‡é¢å¼•ç”¨çš„æ—¶å€™å¥½ç”¨--&gt; &lt;bean id="logger" class="com.hs.service.aspect.Logger"/&gt; &lt;bean id="logger111" class="com.hs.service.aspect.Logger"/&gt; &lt;aop:config proxy-target-class="true"&gt; &lt;!--å®šä¹‰åˆ‡ç‚¹ï¼Œå¯ä»¥æŠŠåˆ‡ç‚¹æ”¾åœ¨å¤–é¢ä½œä¸ºå…¬å…±çš„ï¼Œæ³¨æ„pointcut aspectçš„é¡ºåºï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„@PointCut(value = "execution(* com.hs..service.*Service.*(..))")--&gt; &lt;aop:pointcut id="servicePointCut" expression="execution(* com.hs..service.*Service.*(..))"/&gt; &lt;!--å®šä¹‰åˆ‡é¢ï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„@Aspect,order,å®šä¹‰åˆ‡é¢çš„æ‰§è¡Œé¡ºåºï¼Œä¸å†™é»˜è®¤ä¸ºä»ä¸Šåˆ°ä¸‹æ‰§è¡Œ--&gt; &lt;aop:aspect ref="logger111" order="2"&gt; &lt;!--å®šä¹‰åˆ‡ç‚¹ï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„@PointCut(value = "execution(* com.hs..service.*Service.*(..))")--&gt; &lt;!--&lt;aop:pointcut id="servicePointCut" expression="execution(* com.hs..service.*Service.*(..))"/&gt;--&gt; &lt;aop:before method="test01" pointcut-ref="servicePointCut"/&gt; &lt;/aop:aspect&gt; &lt;!--å®šä¹‰åˆ‡é¢ï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„@Aspect--&gt; &lt;aop:aspect ref="logger" order="1"&gt; &lt;!--å®šä¹‰åˆ‡ç‚¹ï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„@PointCut(value = "execution(* com.hs..service.*Service.*(..))")--&gt; &lt;!--&lt;aop:pointcut id="servicePointCut" expression="execution(* com.hs..service.*Service.*(..))"/&gt;--&gt; &lt;aop:before method="test05" pointcut-ref="servicePointCut"/&gt; &lt;/aop:aspect&gt; &lt;/aop:config&gt;&lt;/beans&gt; é¦–å…ˆå¾—å®ä¾‹åŒ– 1&lt;bean id="logger" class="com.hs.service.aspect.Logger"/&gt; åˆ‡ç‚¹ï¼š 1&lt;aop:pointcut id="servicePointCut" expression="execution(* com.hs..service.*Service.*(..))"/&gt; åˆ‡é¢ï¼š 12345&lt;aop:aspect ref="logger111" order="2"&gt; &lt;!--å®šä¹‰åˆ‡ç‚¹ï¼Œå¯¹åº”æ³¨è§£ç‰ˆçš„@PointCut(value = "execution(* com.hs..service.*Service.*(..))")--&gt; &lt;!--&lt;aop:pointcut id="servicePointCut" expression="execution(* com.hs..service.*Service.*(..))"/&gt;--&gt; &lt;aop:before method="test01" pointcut-ref="servicePointCut"/&gt;&lt;/aop:aspect&gt; æµ‹è¯•ï¼š 123456789101112131415161718192021222324package com.hs.test;import com.hs.service.ArithmeticService;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class ArithmeticServiceTest &#123; private ArithmeticService arithmeticService; private ApplicationContext ac; @Before public void init() &#123; this.ac = new ClassPathXmlApplicationContext("beans.xml"); this.arithmeticService = this.ac.getBean("arithmeticServiceImpl", ArithmeticService.class); &#125; @Test public void testAddMethod() &#123; int result = this.arithmeticService.div(2,1); System.out.println("è¿è¡Œçš„ç»“æœï¼š"+ result); &#125;&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆåä¸€ï¼‰AOPçš„æ³¨è§£æ–¹å¼cglibä»£ç†]]></title>
    <url>%2F2018%2F09%2F03%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89AOP%E7%9A%84%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8Fcglib%E4%BB%A3%E7%90%86%2F</url>
    <content type="text"><![CDATA[JDKåŠ¨æ€ä»£ç†ä¸CGLibåŠ¨æ€ä»£ç†å‡æ˜¯å®ç°Spring AOPçš„åŸºç¡€ï¼Œåˆ‡ç‚¹ï¼Œåˆ‡é¢ï¼Œå¦‚ä½•å®šä¹‰åˆ‡ç‚¹ï¼Œå‰ç½®ã€åç½®ã€æ”¾å›ã€å¼‚å¸¸ã€ç¯ç»•é€šçŸ¥ æºç è·å–github [TOC] 1.åˆ‡ç‚¹ã€åˆ‡é¢ çº¢è‰²çš„åœ°æ–¹å°±æ˜¯åˆ‡é¢ï¼Œå¢åŠ é¢å¤–çš„åŠŸèƒ½ è¿æ¥ç‚¹+å¢åŠ åŠŸèƒ½çš„ä½ç½® = åˆ‡ç‚¹ 2.é¡¹ç›®ç»“æ„ 3.jaråŒ…123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aop&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-expression&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-tx --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!--æ–°å¢çš„jar--&gt; &lt;!-- https://mvnrepository.com/artifact/aopalliance/aopalliance --&gt; &lt;dependency&gt; &lt;groupId&gt;aopalliance&lt;/groupId&gt; &lt;artifactId&gt;aopalliance&lt;/artifactId&gt; &lt;version&gt;1.0&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjrt --&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt; &lt;version&gt;1.8.13&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver --&gt; &lt;dependency&gt; &lt;groupId&gt;org.aspectj&lt;/groupId&gt; &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt; &lt;version&gt;1.8.6&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 4.æ ¸å¿ƒé…ç½®æ–‡ä»¶beans.xml123456789101112131415161718192021&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.3.xsd"&gt; &lt;!--1.å¯åŠ¨Springæ³¨è§£--&gt; &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt; &lt;!--2.æ‰«æ--&gt; &lt;context:component-scan base-package="com.hs"/&gt; &lt;!--Springæä¾›äº†å¤šç§AOPçš„å®ç°æ–¹å¼ï¼Œä½†æ˜¯æˆ‘ä»¬åªç”¨ç¬¬ä¸‰æ–¹çš„AOPæ ‡å‡†æ–¹å¼--&gt; &lt;!--3.å¯åŠ¨AOPæ³¨è§£ï¼Œfalseæ˜¯ä½¿ç”¨é»˜è®¤çš„javaä»£ç†ï¼Œtrueæ˜¯ä½¿ç”¨CGLIBä»£ç†--&gt; &lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;&lt;/beans&gt; 5.æ ¸å¿ƒä»£ç 1234567891011121314package com.hs.service;/** * å¯¹å¤–æä¾›çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå®Œæˆäº†åŠ æ³•/å‡æ³•/ä¹˜æ³•è¿ç®— */public interface ArithmeticService &#123; int add(int x, int y); int sub(int x, int y); int mul(int x, int y); int div(int x, int y);&#125; 1234567891011121314151617181920212223242526272829303132333435package com.hs.service.impl;import com.hs.service.ArithmeticService;import org.springframework.stereotype.Service;/** * æ ¸å¿ƒä»£ç  */@Servicepublic class ArithmeticServiceImpl implements ArithmeticService &#123; @Override public int add(int x, int y) &#123; //æ ¸å¿ƒä»£ç  int result = x + y; return result; &#125; @Override public int sub(int x, int y) &#123; int result = x - y; return result; &#125; @Override public int mul(int x, int y) &#123; int result = x * y; return result; &#125; @Override public int div(int x, int y) &#123; int result = x / y; return result; &#125;&#125; 6.å®šä¹‰åˆ‡é¢12345678910111213141516171819202122package com.hs.service.aspect;import org.aspectj.lang.JoinPoint;import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.*;import org.springframework.stereotype.Component;import java.util.Arrays;@Component@Aspect //æ ‡è®°è¿™æ˜¯åˆ‡é¢public class Logger &#123; //åœ¨ä½ è¿è¡Œæ–¹æ³•ä¹‹å‰æ‰§è¡Œï¼Œå¹¶ä¸”ç›‘æ§çš„æ˜¯æ¥å£çš„æ‰§è¡ŒAddæ–¹æ³•ï¼Œvalueå¯ä»¥çœç•¥ @Before(value = "execution(int com.hs.service.ArithmeticService.add(int ,int))") //è¿™å¥è¯çš„æ„æ€ï¼Œ //æ‰§è¡Œè¿”å›ç±»å‹ä¸ºintï¼Œcom.hs.service.ArithmeticServiceæ¥å£ä¸‹çš„addæ–¹æ³•ï¼Œä¼ é€’çš„ä¸¤ä¸ªå‚æ•°ç±»å‹ä¸ºintï¼Œint //ç®€å•ç†è§£ä¸ºï¼Œæ¥å£é‡Œå†™çš„æ–¹æ³•ï¼Œåªæ˜¯å°‘äº†å˜é‡å€¼ int add(int x, int y); public void test01() &#123; System.out.println("@Beforeåœ¨ç¨‹åºä¹‹å‰è¿è¡Œ"); &#125;&#125; æµ‹è¯• 123456789101112131415161718192021222324package com.hs.test;import com.hs.service.ArithmeticService;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class ArithmeticServiceTest &#123; private ArithmeticService arithmeticService; private ApplicationContext ac; @Before public void init() &#123; this.ac = new ClassPathXmlApplicationContext("beans.xml"); this.arithmeticService = this.ac.getBean("arithmeticServiceImpl", ArithmeticService.class); &#125; @Test public void testAddMethod() &#123; int result = this.arithmeticService.add(2,1); System.out.println("è¿è¡Œçš„ç»“æœï¼š"+ result); &#125;&#125; æ§åˆ¶å°è¾“å‡ºï¼š @Beforeåœ¨ç¨‹åºä¹‹å‰è¿è¡Œè¿è¡Œçš„ç»“æœï¼š3 7.å¦‚ä½•å®šä¹‰æ³¨è§£åˆ‡ç‚¹è¯´æ˜1.ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦1234@Before(value = "execution(int com.hs.service.ArithmeticService.add(int ,int)) or execution(int com.hs.service.ArithmeticService.sub(int ,int))")public void test02() &#123; System.out.println("æˆ‘å¯ä»¥ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦ &amp;&amp;(and) ||(or)");&#125; 2.ä½¿ç”¨é€šé…ç¬¦â€”â€”æ¨è12345678910111213/** * æ¯”è¾ƒæ¨è * åœ¨executionè¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼Œä½†æ˜¯è¯·æ³¨æ„ä»»æ„çš„è¡¨è¾¾å¼æ˜¯ .. * ç¬¬ä¸€ä¸ª*ä½ç½®ï¼šä»£è¡¨è¿”å›ä»»æ„çš„æ•°æ®ç±»å‹ * ..è¡¨ç¤ºä»»æ„çš„æ„æ€ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹‹å‰å­¦ä¹ çš„** * ç¬¬äºŒä¸ª* ç›‘æ§çš„ä»¥Serviceç»“å°¾çš„ç±»(æ¥å£) * ç¬¬ä¸‰ä¸ª* ç›‘æ§æ¥å£æˆ–è€…ç±»ä¸‹çš„æ‰€æœ‰çš„æ–¹æ³• * ..æ ‡è¯†ä»»æ„ä¸ªå‚æ•°ç±»å‹æˆ–è€…å‚æ•°çš„ä¸ªæ•° */@Before(value = "execution(* com.hs..*Service.*(..))")public void test03() &#123; System.out.println("æˆ‘å¯ä»¥ä½¿ç”¨é€šé…ç¬¦");&#125; 3.å¦‚ä½•å®šä¹‰åˆ‡ç‚¹1234567891011121314151617//å¦‚ä½•å®šä¹‰åˆ‡ç‚¹(å¯ä»¥éšæ„ç»„åˆ)@Pointcut(value = "execution(int com.hs.service.ArithmeticService.add(int ,int))")public void addPointCut() &#123; &#125; //åˆ‡ç‚¹çš„åç§°æ˜¯â€œaddPointCut()â€@Pointcut(value = "execution(int com.hs.service.ArithmeticService.sub(int ,int))")public void subPointCut() &#123; &#125; //åˆ‡ç‚¹çš„åç§°æ˜¯â€œsubPointCut()â€@Pointcut(value = "execution(int com.hs.service.ArithmeticService.mul(int ,int))")public void mulPointCut() &#123; &#125; //åˆ‡ç‚¹çš„åç§°æ˜¯â€œmulPointCut()â€@Pointcut(value = "addPointCut() || mulPointCut()")public void addAndMulPointCut() &#123; &#125; //åˆ‡ç‚¹çš„åç§°æ˜¯â€œaddAndMulPointCut()â€@Pointcut(value = "execution(* com.hs..service.*Service.*(..))") public void allMethodPointCut()&#123;&#125;//@Before å«å‰ç½®é€šçŸ¥ï¼Œä¹Ÿå«å‰ç½®å¢å¼º@Before(value = "addAndMulPointCut()")public void test04() &#123; System.out.println("å¦‚ä½•å®šä¹‰åˆ‡ç‚¹");&#125; 8.å‰ç½®é€šçŸ¥ï¼šä¸ç®¡ç¨‹åºæ˜¯å¦æ­£ç¡®éƒ½ä¼šæ‰§è¡Œ1234567891011//1.å‰ç½®é€šçŸ¥(å¢å¼º)ç‰¹ç‚¹ï¼šä¸ç®¡ç¨‹åºæ˜¯å¦æ­£ç¡®éƒ½ä¼šæ‰§è¡Œ @Before(value = "allMethodPointCut()") public void test05(JoinPoint jp) &#123; System.out.println("==å‰ç½®é€šçŸ¥=="); //è·å–get System.out.println(Arrays.asList(jp.getArgs())); System.out.println(jp.getSignature().getName()); System.out.println(jp.getTarget().getClass().getName()); System.out.println("==å‰ç½®é€šçŸ¥=="); &#125; 9.åç½®é€šçŸ¥ï¼šä¸ç®¡ç¨‹åºæ˜¯å¦æ­£ç¡®éƒ½ä¼šæ‰§è¡Œ1234567891011//2.åç½®é€šçŸ¥(å¢å¼º)ç‰¹ç‚¹ï¼šä¸ç®¡ç¨‹åºæ˜¯å¦æ­£ç¡®éƒ½ä¼šæ‰§è¡Œ@After(value = "allMethodPointCut()")public void test06(JoinPoint jp) &#123; //è·å–get System.out.println("==åç½®å¢å¼º=="); System.out.println(Arrays.asList(jp.getArgs())); System.out.println(jp.getSignature().getName()); System.out.println(jp.getTarget().getClass().getName()); System.out.println("==åç½®å¢å¼º==");&#125; 10.è¿”å›é€šçŸ¥:åªæœ‰ç¨‹åºæ˜¯æ­£ç¡®çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥è·å–è¿è¡Œåçš„æ•°æ®1234567//3.è¿”å›é€šçŸ¥(å¢å¼º):åªæœ‰ç¨‹åºæ˜¯æ­£ç¡®çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥è·å–è¿è¡Œåçš„æ•°æ®@AfterReturning(value = "allMethodPointCut()",returning = "hs")public void test07(JoinPoint jp,int hs) &#123; System.out.println("==è¿”å›é€šçŸ¥=="); System.out.println("ç¨‹åºæ­£å¸¸è¿è¡Œï¼Œæ­£ç¡®çš„è¿è¡Œç»“æœä¸º==&gt;"+hs); System.out.println("==è¿”å›é€šçŸ¥==");&#125; 11.å¼‚å¸¸é€šçŸ¥ï¼šåªæœ‰ç¨‹åºæ˜¯é”™è¯¯çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ1234567//4.å¼‚å¸¸é€šçŸ¥(å¢å¼º)ï¼šåªæœ‰ç¨‹åºæ˜¯é”™è¯¯çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œï¼Œ@AfterThrowing(value = "allMethodPointCut()",throwing = "hs")public void test08(JoinPoint jp,ArithmeticException hs) &#123; System.out.println("==å¼‚å¸¸é€šçŸ¥=="); System.out.println("ç¨‹åºè¿è¡Œé”™è¯¯==&gt;"+hs); System.out.println("==å¼‚å¸¸é€šçŸ¥==");&#125; 12.ç¯ç»•é€šçŸ¥123456789101112131415//5.ç¯ç»•é€šçŸ¥@Around("allMethodPointCut()")public Object test09(ProceedingJoinPoint pjp) &#123; System.out.println("å†™æŸä¸ªåŠŸèƒ½ï¼Œå‰ç½®é€šçŸ¥"); Object result = null; try &#123; result = pjp.proceed(); //æ‰§è¡Œç¨‹åºè¿”å›è¿è¡Œçš„ç»“æœ System.out.println("å†™æŸä¸ªåŠŸèƒ½ï¼Œè¿”å›é€šçŸ¥"); &#125; catch (Throwable throwable) &#123; throwable.printStackTrace(); System.out.println("å†™æŸä¸ªåŠŸèƒ½ï¼Œå¼‚å¸¸é€šçŸ¥"); &#125; System.out.println("å†™æŸä¸ªåŠŸèƒ½ï¼Œåç½®é€šçŸ¥"); return result;&#125; æµ‹è¯• 123456789101112131415161718192021222324package com.hs.test;import com.hs.service.ArithmeticService;import org.junit.Before;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class ArithmeticServiceTest &#123; private ArithmeticService arithmeticService; private ApplicationContext ac; @Before public void init() &#123; this.ac = new ClassPathXmlApplicationContext("beans.xml"); this.arithmeticService = this.ac.getBean("arithmeticServiceImpl", ArithmeticService.class); &#125; @Test public void testAddMethod() &#123; int result = this.arithmeticService.add(2,1); System.out.println("è¿è¡Œçš„ç»“æœï¼š"+ result); &#125;&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆåï¼‰AOPé™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç†è¯´æ˜]]></title>
    <url>%2F2018%2F09%2F03%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%EF%BC%89AOP%E9%9D%99%E6%80%81%E4%BB%A3%E7%90%86%E5%92%8C%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E8%AF%B4%E6%98%8E%2F</url>
    <content type="text"><![CDATA[å®ä¾‹åˆ†æï¼ŒAOPçš„é™æ€ä»£ç†å’ŒåŠ¨æ€ä»£ç† æºç è·å–github [TOC] 1.ä»€ä¹ˆæ˜¯AOPï¼ŸAspect Oriented Programming with Spring é¢å‘åˆ‡é¢ï¼ˆæ–¹é¢ï¼‰ç¼–ç¨‹ é¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä¸€ä¸ªè¡¥å……è€Œå·² ç™½è¯ï¼šæˆ‘çš„ç†è§£â€”-&gt;åœ¨ä¸æ”¹å˜åŸæ¥çš„ä»£ç çš„åŸºç¡€ä¸Šå¢å¼ºï¼ˆå¢åŠ ï¼‰æ–°çš„åŠŸèƒ½ 2.ä»£ç ç»“æ„ 3.æƒ…æ™¯æè¿°å¼•å‘é™æ€ä»£ç†å¦‚æœç°åœ¨è®©ä½ å®Œæˆä¸€ä¸ª2ä¸ªæ•°çš„å››åˆ™è¿ç®— æ ¸å¿ƒä¸šåŠ¡å®Œæˆ 1234567891011121314package com.hs.service;/** * å¯¹å¤–æä¾›çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå®Œæˆäº†åŠ æ³•/å‡æ³•/ä¹˜æ³•/é™¤æ³•è¿ç®— */public interface ArithmeticService &#123; int add(int x, int y); int sub(int x, int y); int mul(int x, int y); int div(int x, int y);&#125; 12345678910111213141516171819202122232425262728293031package com.hs.service;/** * æ ¸å¿ƒä»£ç  */public class ArithmeticServiceImpl implements ArithmeticService &#123; @Override public int add(int x, int y) &#123; //æ ¸å¿ƒä»£ç  int result = x + y; return result; &#125; @Override public int sub(int x, int y) &#123; int result = x - y; return result; &#125; @Override public int mul(int x, int y) &#123; int result = x * y; return result; &#125; @Override public int div(int x, int y) &#123; int result = x / y; return result; &#125;&#125; å®Œæˆäº†ï¼Œå’Œå°šâ€”&gt;æŠ€æœ¯ç»ç†â€”&gt;å®šä¹‰æ¥å£ï¼Œæ‚Ÿç©ºç¨‹åºå‘˜â€”&gt;æ¥å£å®ç°ç±» äº¤å·¥å®¢æˆ·é¾™ç‹ï¼Œé¾™ç‹éœ€è¦æ˜¾ç¤ºä¼ é€’æ•°æ®çš„ä¿¡æ¯åŠŸèƒ½â€”&gt;å’Œå°šâ€”&gt;æ‚Ÿç©ºå®Œæˆå®¢æˆ·éœ€æ±‚ï¼Œä½†æ˜¯ä¸‡ä¸€å¦‚æœåˆä¸è¦è¿™ä¸ªåŠŸèƒ½å‘¢ï¼Œç°åœ¨å¼•å‡ºé™æ€ä»£ç†ï¼Œåœ¨æ ¸å¿ƒä»£ç çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„åŠŸèƒ½ 123456789101112131415161718192021222324252627282930313233343536package com.hs.service;/** * æ–°å¢åŠ çš„åŠŸèƒ½,é‡‡ç”¨é™æ€ä»£ç† */public class ArithmeticServiceLogImpl implements ArithmeticService &#123; //å£°æ˜ä¸€ä¸ªæ ¸å¿ƒä»£ç ç±»çš„å˜é‡ï¼Œä¸ºäº†åé¢æ–¹ä¾¿è°ƒç”¨æ ¸å¿ƒä»£ç çš„åŠŸèƒ½ private ArithmeticServiceImpl asc = new ArithmeticServiceImpl(); @Override public int add(int x, int y) &#123; //åå¢åŠ çš„æŸä¸ªåŠŸèƒ½ System.out.println("åŠ æ³•ä¼ é€’çš„å‚æ•°===&gt;x="+x+",y="+y);// ç„¶åè°ƒç”¨æ ¸å¿ƒä»£ç çš„åŠŸèƒ½ return asc.add(2, 3); &#125; @Override public int sub(int x, int y) &#123; System.out.println("å‡æ³•ä¼ é€’çš„å‚æ•°===&gt;x="+x+",y="+y); return asc.sub(2, 3); &#125; @Override public int mul(int x, int y) &#123; System.out.println("ä¹˜æ³•ä¼ é€’çš„å‚æ•°===&gt;x="+x+",y="+y); return asc.mul(2, 3); &#125; @Override public int div(int x, int y) &#123; System.out.println("é™¤æ³•ä¼ é€’çš„å‚æ•°===&gt;x="+x+",y="+y); return asc.mul(2, 3); &#125;&#125; æµ‹è¯•ï¼š 12345678910111213141516171819202122232425package com.hs.test;import com.hs.proxy.ArithmeticServiceProxy;import com.hs.service.ArithmeticService;import com.hs.service.ArithmeticServiceImpl;import org.junit.Before;import org.junit.Test;import java.lang.reflect.Proxy;public class ArithmeticServiceTest &#123; private ArithmeticService arithmeticService; @Before //åœ¨æ¯ä¸ªå•å…ƒæµ‹è¯•è¿è¡Œä¹‹å‰éƒ½è¦è¿›è¡Œè¿™ä¸ªæ–¹æ³• public void init() &#123; this.arithmeticService = new ArithmeticServiceLogImpl();//new ArithmeticServiceImpl(); //æƒ³ç”¨å“ªä¸ªåŠŸèƒ½å°±å®ä¾‹åŒ–å“ªä¸ªç±» &#125; @Test public void testAddMethod() &#123; int result = this.arithmeticService.add(2, 3); System.out.println(result); &#125;&#125; 4.åŠ¨æ€ä»£ç†æ¥å£å’Œæ ¸å¿ƒä»£ç ä¸å˜ï¼Œ ä»£ç†ç±»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839package com.hs.proxy;import com.hs.service.ArithmeticService;import java.lang.reflect.InvocationHandler;import java.lang.reflect.Method;import java.util.Arrays;/** * ä»£ç†ç±» */public class ArithmeticServiceProxy implements InvocationHandler &#123; //å®šä¹‰ä¸€ä¸ªæ¥å£å˜é‡ private ArithmeticService arithmeticService; public ArithmeticServiceProxy(ArithmeticService arithmeticService) &#123; this.arithmeticService = arithmeticService; &#125; @Override public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123; //å†™äº†æŸä¸ªåŠŸèƒ½ï¼Œä¸ç®¡ç¨‹åºæœ‰æ²¡æœ‰é”™è¯¯éƒ½æ‰§è¡Œ System.out.println("åœ¨è¿è¡Œæ–¹æ³•[" + method.getName() + "]ä¹‹å‰æ‰§è¡Œï¼Œä¼ é€’çš„å‚æ•°ä¸º" + Arrays.asList(args)); Object result = null; try &#123; result = method.invoke(this.arithmeticService, args); //å†™äº†æŸä¸ªåŠŸèƒ½ï¼Œåªæœ‰ç¨‹åºæ²¡æœ‰é”™è¯¯æ‰æ‰§è¡Œ System.out.println("è¿è¡Œæ–¹æ³•æˆåŠŸï¼Œç»“æœä¸ºï¼š"+result); &#125; catch (Exception e) &#123; e.printStackTrace(); //å†™äº†æŸä¸ªåŠŸèƒ½ï¼Œç¨‹åºæœ‰é”™è¯¯çš„æ—¶å€™æ‰æ‰§è¡Œ System.out.println("æ‰§è¡Œçš„æ–¹æ³•é”™è¯¯"); &#125; //å†™äº†æŸä¸ªåŠŸèƒ½ï¼Œä¸ç®¡ç¨‹åºæœ‰æ²¡æœ‰é”™è¯¯éƒ½æ‰§è¡Œ System.out.println("åœ¨è¿è¡Œæ–¹æ³•ä¹‹åæ‰§è¡Œ"); return result; &#125;&#125; æµ‹è¯• 1234567891011121314151617181920212223242526272829303132package com.hs.test;import com.hs.proxy.ArithmeticServiceProxy;import com.hs.service.ArithmeticService;import com.hs.service.ArithmeticServiceImpl;import org.junit.Before;import org.junit.Test;import java.lang.reflect.Proxy;public class ArithmeticServiceTest &#123; private ArithmeticService arithmeticService; @Before //å†æ¯ä¸ªå•å…ƒæµ‹è¯•è¿è¡Œä¹‹å‰éƒ½è¦è¿›è¡Œè¿™ä¸ªæ–¹æ³• public void init() &#123; this.arithmeticService = new ArithmeticServiceImpl(); //æƒ³ç”¨å“ªä¸ªåŠŸèƒ½å°±å®ä¾‹åŒ–å“ªä¸ª &#125; /** * åŠ¨æ€ä»£ç† */ @Test public void test01() &#123; //å®ä¾‹åŒ–ä»£ç†ç±» ArithmeticServiceProxy asp = new ArithmeticServiceProxy(this.arithmeticService);// å›ºå®šå†™æ³• ArithmeticService as = (ArithmeticService) Proxy.newProxyInstance(ArithmeticServiceImpl.class.getClassLoader(), ArithmeticServiceImpl.class.getInterfaces(), asp); int result = as.div(10, 1); System.out.println(result); &#125;&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆä¹ï¼‰æ¨¡æ‹Ÿå®é™…å¼€å‘è¿‡ç¨‹çš„è°ƒç”¨è¿‡ç¨‹æ³¨è§£ç‰ˆ-å®˜æ–¹æ¨èç‰ˆ]]></title>
    <url>%2F2018%2F09%2F02%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B9%9D%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E6%B3%A8%E8%A7%A3%E7%89%88-%E5%AE%98%E6%96%B9%E6%8E%A8%E8%8D%90%E7%89%88%2F</url>
    <content type="text"><![CDATA[ç”¨@Repositoryã€@Service å’Œ @Constrollerï¼Œä»£æ›¿@Componentï¼ŒçŸ¥åè§æ„ï¼ŒçŸ¥é“æ˜¯å“ªä¸€å±‚ï¼Œ@Autowiredä»£æ›¿@Resourceã€‚ æºç è·å–github [TOC] 1.@Repositoryã€@Service å’Œ @Constrollerä»£æ›¿@Component @Repositoryï¼šæŒä¹…åŒ–å±‚ã€æ•°æ®è®¿é—®å±‚ã€ä¹Ÿå°±æ˜¯daoå±‚ï¼Œå†™åœ¨è¿™ä¸Šé¢ï¼ŒåŠŸèƒ½è·Ÿ@Componentï¼Œåªæ˜¯ä¸ºäº†çŸ¥åè§æ„ @Serviceï¼šå†™åœ¨Serviceå±‚ï¼Œä¸šåŠ¡é€»è¾‘å±‚ @Controllerï¼šå†™åœ¨æ§åˆ¶å±‚ï¼Œä¹Ÿå°±æ˜¯SpringMvcé‚£å±‚ 2.@Autowiredä»£æ›¿@Resource @Autowiredæ˜¯Springè‡ªå·±çš„ï¼Œ@Resourceä¸æ˜¯Springçš„ é¢è¯•é¢˜ï¼š@Resourceå’Œ@Autowiredçš„åŒºåˆ«ï¼š @Resourceå…ˆæŒ‰åç§°å†æŒ‰ç…§ç±»å‹æŸ¥æ‰¾ @Autowiredå…ˆæŒ‰ç±»å‹å†æŒ‰ç…§åç§°æŸ¥æ‰¾ @Qualifier(â€œbookDaoImplâ€)//æŒ‡æ˜IDçš„åå­— 3.é¡¹ç›®ç»“æ„(jaråŒ…ä¸€æ ·) 4.æ ¸å¿ƒé…ç½®æ–‡ä»¶beans.xml12345678910111213141516171819&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.3.xsd"&gt; &lt;!--1.å¯åŠ¨Springæ³¨è§£--&gt; &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt; &lt;!--2.æ‰«æ--&gt; &lt;context:component-scan base-package="com.hs"/&gt;&lt;/beans&gt; 5.daoå±‚UserDao.java 12345package com.hs.dao;public interface UserDao &#123; void add();&#125; UserDaoImpl.java 1234567891011121314package com.hs.dao.impl;import com.hs.dao.UserDao;import org.springframework.stereotype.Repository;//@Component//(value = "userDao") //ç›¸å½“äº&lt;bean id="userDaoImpl" class="com.hs.dao.impl.UserDaoImpl"/&gt;@Repository //è·Ÿä¸Šé¢æ„æ€ä¸€æ ·ï¼Œåªæ˜¯ä¸ºäº†çŸ¥åè§æ„public class UserDaoImpl implements UserDao &#123; @Override public void add() &#123; System.out.println("UserDaoå±‚çš„å®ç°ç±»---&gt;ADD"); &#125;&#125; 6.Serviceå±‚UserService.java 123456package com.hs.service;public interface UserService &#123; void add();&#125; UserServiceImpl.java 12345678910111213141516171819202122232425262728293031323334package com.hs.service.impl;import com.hs.dao.UserDao;import com.hs.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Qualifier;import org.springframework.stereotype.Service;//@Component //ç›¸å½“äº&lt;bean id="userServiceImpl" class="com.hs.service.impl.UserServiceImpl"&gt;@Service //è·Ÿä¸Šé¢æ„æ€ä¸€æ ·ï¼Œåªæ˜¯ä¸ºäº†çŸ¥åè§æ„public class UserServiceImpl implements UserService &#123; private UserDao userDao; public UserDao getUserDao() &#123; return userDao; &#125; //é¢è¯•é¢˜ï¼šResourceå’ŒAutowiredçš„åŒºåˆ« //@Resourceå…ˆæŒ‰åç§°å†æŒ‰ç…§ç±»å‹æŸ¥æ‰¾ //@Autowiredå…ˆæŒ‰ç±»å‹å†æŒ‰ç…§åç§°æŸ¥æ‰¾ @Autowired //æŒ‡æ˜idåå­— @Qualifier(value = "userDaoImpl") public void setUserDao(UserDao userDao) &#123; this.userDao = userDao; &#125; @Override public void add() &#123; System.out.println("UserServiceå±‚çš„å®ç°ç±»---&gt;ADD"); this.userDao.add(); &#125;&#125; 7.Controllerå±‚UserController.java 1234567891011121314151617181920212223package com.hs.web;import com.hs.service.UserService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Controller;//@Component //ç›¸å½“äº&lt;bean id="userController" class="com.hs.web.UserController"/&gt;@Controller //è·Ÿä¸Šé¢æ„æ€ä¸€æ ·ï¼Œåªæ˜¯ä¸ºäº†çŸ¥åè§æ„public class UserController &#123; @Autowired private UserService userService; public UserService getUserService() &#123; return userService; &#125; public void add() &#123; System.out.println("UserControllerå±‚---&gt;ADD"); this.userService.add(); &#125;&#125; 8.æµ‹è¯•123456789101112131415package com.hs.test;import com.hs.web.UserController;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class MethodTest &#123; @Test public void test01() &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext("beans.xml"); UserController controller = applicationContext.getBean("userController", UserController.class); controller.add(); &#125;&#125; æ§åˆ¶å°è¾“å‡ºï¼š UserControllerå±‚â€”&gt;ADDUserServiceå±‚çš„å®ç°ç±»â€”&gt;ADDUserDaoå±‚çš„å®ç°ç±»â€”&gt;ADD]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰æ¨¡æ‹Ÿå®é™…å¼€å‘è¿‡ç¨‹çš„è°ƒç”¨è¿‡ç¨‹æ³¨è§£ç‰ˆ-ä¼ ç»Ÿæ–¹å¼]]></title>
    <url>%2F2018%2F09%2F02%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AB%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%E6%B3%A8%E8%A7%A3%E7%89%88-%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[ä¼ ç»Ÿçš„@Componentå’Œ@Resource(ç­‰ä»·äºXMLç‰ˆsetteræ³¨å…¥)ä½¿ç”¨è¯´æ˜ @Componentæ˜¯ä¸ªæ³›åŒ–æ¦‚å¿µï¼Œå¯ä»¥ç”¨åœ¨ä»»ä½•å±‚æ¬¡ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„(jaråŒä¸Š) 2.æ ¸å¿ƒé…ç½®æ–‡ä»¶beans.xml12345678910111213141516171819&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xmlns:p="http://www.springframework.org/schema/p" xmlns:util="http://www.springframework.org/schema/util" xmlns:aop="http://www.springframework.org/schema/aop" xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.3.xsd http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.3.xsd"&gt; &lt;!--1.å¯åŠ¨Springæ³¨è§£--&gt; &lt;context:annotation-config&gt;&lt;/context:annotation-config&gt; &lt;!--2.æ‰«æ--&gt; &lt;context:component-scan base-package="com.hs"/&gt;&lt;/beans&gt; 3.daoå±‚userDao.java 12345package com.hs.dao;public interface UserDao &#123; void add();&#125; UserDaoImpl.java 12345678910111213package com.hs.dao.impl;import com.hs.dao.UserDao;import org.springframework.stereotype.Component;@Component//(value = "userDao") //ç›¸å½“äº&lt;bean id="userDaoImpl" class="com.hs.dao.impl.UserDaoImpl"/&gt;public class UserDaoImpl implements UserDao &#123; @Override public void add() &#123; System.out.println("UserDaoå±‚çš„å®ç°ç±»---&gt;ADD"); &#125;&#125; 4.Serviceå±‚UserService.java 1234567package com.hs.service;public interface UserService &#123; void add();&#125; UserServiceImpl.java 123456789101112131415161718192021222324252627282930313233package com.hs.service.impl;import com.hs.dao.UserDao;import com.hs.service.UserService;import org.springframework.stereotype.Component;import javax.annotation.Resource;@Component //ç›¸å½“äº&lt;bean id="userServiceImpl" class="com.hs.service.impl.UserServiceImpl"&gt;public class UserServiceImpl implements UserService &#123; private UserDao userDao; public UserDao getUserDao() &#123; return userDao; &#125; /*ç›¸å½“äº&lt;property name="userDao"&gt; &lt;ref bean="userDaoImpl"/&gt; &lt;/property&gt;*/ @Resource(name = "userDaoImpl") //ä¸‹é¢çš„æŸ¥æ‰¾é¡ºåº å…ˆæŒ‰ç…§åå­—è¿›è¡Œæœç´¢(æ²¡æœ‰å†™åå­—é»˜è®¤å°±æ˜¯setåé¢é‚£ä¸ªåå­—) å†æŒ‰ç…§ç±»å‹è¿›è¡Œæœç´¢(UserDaoçš„å®ç°ç±») //@Resource public void setUserDao(UserDao userDao) &#123; this.userDao = userDao; &#125; @Override public void add() &#123; System.out.println("UserServiceå±‚çš„å®ç°ç±»---&gt;ADD"); this.userDao.add(); &#125;&#125; çŸ¥è¯†ç‚¹ï¼š@Resourceæ³¨è§£ å…ˆæŒ‰åç§°æœç´¢ï¼Œå†æŒ‰ç…§ç±»å‹æœç´¢ æ˜¯javaxä¸‹çš„ï¼Œä¸æ˜¯Springè‡ªå¸¦çš„ åé¢ä¼šæœ‰Springè‡ªå¸¦çš„æ³¨è§£@Autowiredæ¨è 5.Controllerå±‚UserController.java 12345678910111213141516171819202122232425262728package com.hs.web;import com.hs.service.UserService;import org.springframework.stereotype.Component;import javax.annotation.Resource;@Component //ç›¸å½“äº&lt;bean id="userController" class="com.hs.web.UserController"/&gt;public class UserController &#123; //ç®€å†™æ–¹å¼ï¼Œå†™ä¸ªå°±ä¸ç”¨å†™setæ–¹æ³•äº† //å¦‚æœä½ æ‰€åœ¨çš„å…¬å¸ç”¨äº†æµ‹è¯•æ¡†æ¶(ä¸æ˜¯æˆ‘ç°åœ¨ç”¨çš„å•å…ƒæµ‹è¯•æ¡†æ¶)ï¼Œé‚£ä¹ˆä¸å»ºè®®ä½¿ç”¨ç®€å†™æ–¹å¼ï¼Œå¯¹æµ‹è¯•æœ‰å½±å“ //@Resource(name = "userServiceImpl") private UserService userService; public UserService getUserService() &#123; return userService; &#125; @Resource(name = "userServiceImpl") //ç›¸å½“äºp:userService-ref="userServiceImpl" public void setUserService(UserService userService) &#123; this.userService = userService; &#125; public void add() &#123; System.out.println("UserControllerå±‚---&gt;ADD"); this.userService.add(); &#125;&#125; 6.æµ‹è¯•123456789101112131415package com.hs.test;import com.hs.web.UserController;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class MethodTest &#123; @Test public void test01() &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext("beans.xml"); UserController controller = applicationContext.getBean("userController", UserController.class); controller.add(); &#125;&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰æ¨¡æ‹Ÿå®é™…å¼€å‘è¿‡ç¨‹çš„è°ƒç”¨è¿‡ç¨‹XMLç‰ˆ-Setteræ–¹å¼æ³¨å…¥]]></title>
    <url>%2F2018%2F09%2F02%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%83%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8BXML%E7%89%88-Setter%E6%96%B9%E5%BC%8F%E6%B3%A8%E5%85%A5%2F</url>
    <content type="text"><![CDATA[æ¨¡æ‹Ÿå®é™…å¼€å‘è¿‡ç¨‹çš„è°ƒç”¨è¿‡ç¨‹XMLç‰ˆ-Setteræ–¹å¼æ³¨å…¥ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ 2.jaråŒ…è·Ÿä¸Šä¸ªä¸€æ ·3.é‡å†™setæ–¹æ³•UserServiceImpl.java 12345private UserDao userDao;public void setUserDao(UserDao userDao) &#123; this.userDao = userDao;&#125; beans.xml 1234567&lt;bean id="userDaoImpl" class="com.hs.dao.impl.UserDaoImpl"/&gt;&lt;!--ç›¸å½“äºuserDao = new userDaoImpl()--&gt;&lt;bean id="userServiceImpl" class="com.hs.service.impl.UserServiceImpl"&gt; &lt;property name="userDao"&gt; &lt;ref bean="userDaoImpl"/&gt; &lt;/property&gt;&lt;/bean&gt; åœ¨setæ–¹æ³•é‡Œä»£æ›¿å®Œæˆäº†ï¼Œprivate UserDao userDao = new userDaoImpl(); UserController.java 12345private UserService userService;public void setUserService(UserService userService) &#123; this.userService = userService;&#125; beans.xml 1234567891011&lt;bean id="userServiceImpl" class="com.hs.service.impl.UserServiceImpl"&gt; &lt;property name="userDao"&gt; &lt;ref bean="userDaoImpl"/&gt; &lt;/property&gt;&lt;/bean&gt;&lt;!--å…ˆUserController = new UserController() å†userService = new userServiceImpl();--&gt;&lt;bean id="userController" class="com.hs.web.UserController" p:userService-ref="userServiceImpl"&gt; &lt;!--&lt;property name="userService" ref="userServiceImpl"/&gt;--&gt;&lt;/bean&gt; åœ¨setæ–¹æ³•é‡Œä»£æ›¿å®Œæˆäº†private UserService userService = new userServiceImpl(); 4.æµ‹è¯•123456789101112131415package com.hs.test;import com.hs.web.UserController;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class MethodTest &#123; @Test public void test01() &#123; ApplicationContext applicationContext = new ClassPathXmlApplicationContext("beans.xml"); UserController controller = applicationContext.getBean("userController", UserController.class); controller.add(); &#125;&#125; æ§åˆ¶å°è¾“å‡ºï¼š UserControllerå±‚â€”&gt;ADDUserServiceå±‚çš„å®ç°ç±»â€”&gt;ADDUserDaoå±‚çš„å®ç°ç±»â€”&gt;ADD]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰æ¨¡æ‹Ÿå®é™…å¼€å‘è¿‡ç¨‹çš„è°ƒç”¨è¿‡ç¨‹XMLç‰ˆ-æ„é€ å‡½æ•°æ³¨å…¥]]></title>
    <url>%2F2018%2F09%2F02%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E8%BF%87%E7%A8%8B%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8BXML%E7%89%88-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B3%A8%E5%85%A5%2F</url>
    <content type="text"><![CDATA[ç”¨Springçš„XMLç‰ˆçš„æ„é€ å‡½æ•°æ³¨å…¥å®Œæˆè¿™ä¸ªè¿‡ç¨‹ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ 2.jaråŒ…12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aop&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-expression&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-tx --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 3.ä»£æ›¿private UserDao userDao = new userDaoImpl();UserServiceImpl.java 12345678910111213141516171819202122package com.hs.service.impl;import com.hs.dao.UserDao;import com.hs.service.UserService;public class UserServiceImpl implements UserService &#123; private UserDao userDao; public UserServiceImpl() &#123; &#125; public UserServiceImpl(UserDao userDao) &#123; this.userDao = userDao; &#125; @Override public void add() &#123; System.out.println("UserServiceå±‚çš„å®ç°ç±»---&gt;ADD"); userDao.add(); &#125;&#125; beans.xml 1234567&lt;!--å®ä¾‹åŒ–--&gt;&lt;bean id="userDaoImpl" class="com.hs.dao.impl.UserDaoImpl"&gt;&lt;/bean&gt;&lt;!--é€šè¿‡æ„é€ å‡½æ•°å®ä¾‹åŒ–--&gt;&lt;bean id="userServiceImpl" class="com.hs.service.impl.UserServiceImpl"&gt; &lt;constructor-arg name="userDao" ref="userDaoImpl"/&gt;&lt;/bean&gt; è¿™ä¸¤æ®µä»£ç ç›¸å½“äºï¼Œå®Œæˆäº†private UserDao userDao = new userDaoImpl(); 4.ä»£æ›¿private UserService userService = new userServiceImpl();UserController.java 1234567891011121314151617181920package com.hs.web;import com.hs.service.UserService;public class UserController &#123; private UserService userService; public UserController() &#123; &#125; public UserController(UserService userService) &#123; this.userService = userService; &#125; public void add() &#123; System.out.println("UserControllerå±‚---&gt;ADD"); userService.add(); &#125;&#125; beans.xml 12345678&lt;bean id="userServiceImpl" class="com.hs.service.impl.UserServiceImpl"&gt; &lt;constructor-arg name="userDao" ref="userDaoImpl"/&gt;&lt;/bean&gt;&lt;bean id="userController" class="com.hs.web.UserController"&gt; &lt;constructor-arg name="userService"&gt; &lt;ref bean="userServiceImpl"/&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; è¿™ä¸¤æ®µä»£ç ç›¸å½“äºï¼Œå®Œæˆäº†private UserService userService = new userServiceImpl(); 5.ä»£æ›¿UserController userController = new UserController();æµ‹è¯• 12345678910111213141516171819package com.hs.test;import com.hs.web.UserController;import org.junit.Test;import org.springframework.context.ApplicationContext;import org.springframework.context.support.ClassPathXmlApplicationContext;public class MethodTest &#123; @Test public void test01() &#123; // 1.è¯»å–é…ç½®æ–‡ä»¶ ApplicationContext applicationContext = new ClassPathXmlApplicationContext("beans.xml"); //è·å–xmlç‰ˆæœ¬é‡Œçš„UserController userController = new UserController(); UserController userController = applicationContext.getBean("userController", UserController.class); userController.add(); &#125;&#125; æ§åˆ¶å°è¾“å‡ºï¼š UserControllerå±‚â€”&gt;ADDUserServiceå±‚çš„å®ç°ç±»â€”&gt;ADDUserDaoå±‚çš„å®ç°ç±»â€”&gt;ADD]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰æ¨¡æ‹Ÿå®é™…å¼€å‘çš„è°ƒç”¨è¿‡ç¨‹]]></title>
    <url>%2F2018%2F09%2F02%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89%E6%A8%A1%E6%8B%9F%E5%AE%9E%E9%99%85%E5%BC%80%E5%8F%91%E7%9A%84%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ç”¨ä¼ ç»Ÿæ–¹å¼(ä»¥å‰çš„çŸ¥è¯†)æ¥æ¨¡æ‹Ÿå®é™…å¼€å‘çš„è°ƒç”¨è¿‡ç¨‹ã€‚ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ 2.jaråŒ…12345678&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 3.daoå±‚UserDao.java 12345package com.hs.dao;public interface UserDao &#123; void add();&#125; UserDaoImpl.java 1234567891011package com.hs.dao.impl;import com.hs.dao.UserDao;public class UserDaoImpl implements UserDao &#123; @Override public void add() &#123; System.out.println("UserDaoå±‚çš„å®ç°ç±»---&gt;ADD"); &#125;&#125; 4.Serviceå±‚UserService.java 123456package com.hs.service;public interface UserService &#123; void add();&#125; UserServiceImpl.java 12345678910111213141516package com.hs.service.impl;import com.hs.dao.UserDao;import com.hs.dao.impl.UserDaoImpl;import com.hs.service.UserService;public class UserServiceImpl implements UserService &#123; //å»ºç«‹è”ç³»ï¼ˆä¸€å…±æœ‰ä¸‰ç§æ–¹å¼ï¼‰ private UserDao userDao = new UserDaoImpl(); @Override public void add() &#123; System.out.println("UserServiceå±‚çš„å®ç°ç±»---&gt;ADD"); this.userDao.add(); &#125;&#125; 5.Controllerå±‚UserController.java 123456789101112131415package com.hs.web;import com.hs.service.UserService;import com.hs.service.impl.UserServiceImpl;public class UserController &#123; //å»ºç«‹è”ç³» private UserService userService = new UserServiceImpl(); public void add() &#123; System.out.println("UserControllerå±‚---&gt;ADD"); this.userService.add(); &#125;&#125; 6.æµ‹è¯•12345678910111213141516package com.hs.test;import com.hs.web.UserController;import org.junit.Test;public class MethodTest &#123; /** * æµ‹è¯•ä¼ ç»Ÿè°ƒç”¨è¿‡ç¨‹ */ @Test public void test01() &#123; UserController userController = new UserController(); userController.add(); &#125;&#125; æ§åˆ¶å°è¾“å‡ºï¼š UserControllerå±‚â€”&gt;ADDUserServiceå±‚çš„å®ç°ç±»â€”&gt;ADDUserDaoå±‚çš„å®ç°ç±»â€”&gt;ADD ç¨‹åºå°±æ˜¯ä¸€å±‚ä¸€å±‚è°ƒç”¨ï¼Œå…ˆè°ƒç”¨Controllerå±‚â€”&gt;Serviceå±‚â€”&gt;Daoå±‚]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰Springçš„æ³¨å…¥æ–¹å¼-Setteræ–¹å¼æ¨è]]></title>
    <url>%2F2018%2F08%2F23%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89Spring%E7%9A%84%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F-Setter%E6%96%B9%E5%BC%8F%E6%8E%A8%E8%8D%90%2F</url>
    <content type="text"><![CDATA[Setteræ³¨å…¥çš„3ç§æ–¹å¼ï¼Œè¯»å–å±æ€§æ–‡ä»¶å–å€¼ï¼Œèµ‹å€¼ï¼šæ™®é€šå€¼ã€æ•°ç»„ï¼Œlistï¼Œsetã€Mapå’ŒPropertiesã€è‡ªå®šä¹‰ç±»å‹ã€æ¥å£å®ç°ç±»(æ¥å£å›è°ƒ) æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ modelé‡Œçš„å†…å®¹è·Ÿä¸Šç¯‡ä¸€æ ·ï¼Œå†å†™getã€setæ–¹æ³•ã€toStringæ–¹æ³•å³å¯ï¼Œpom.xmlè§å‰å‡ ç¯‡ 2.Setteræ³¨å…¥çš„3ç§æ–¹å¼Setteræ³¨å…¥æ–¹å¼ï¼Œå¿…é¡»è¦æä¾›setteræ–¹æ³•ï¼Œå¹¶ä¸”æœ‰ä¸‰ç§æ–¹å¼:æ ‡å‡†æ–¹å¼ï¼Œç¼©å†™ï¼Œpæ–¹å¼(ä¹Ÿæœ‰pæ–¹å¼å¼•ç”¨) 3.æ™®é€šå€¼èµ‹å€¼beans.xml 12345678&lt;!--Setteræ³¨å…¥æ–¹å¼ï¼Œå¿…é¡»è¦æä¾›setteræ–¹æ³•ï¼Œå¹¶ä¸”æœ‰ä¸‰ç§æ–¹å¼:æ ‡å‡†æ–¹å¼ï¼Œç¼©å†™ï¼Œpæ–¹å¼(ä¹Ÿæœ‰pæ–¹å¼å¼•ç”¨)--&gt;&lt;bean id="user01" class="com.hs.model.User" p:user_name="å…«æˆ’"&gt; &lt;!--è¿™ä¸ªnameçš„å€¼ä¸æ˜¯å±æ€§å€¼ï¼Œæ˜¯setteræ–¹æ³•åé¢çš„å€¼é¦–å­—æ¯å°å†™--&gt; &lt;property name="user_id"&gt; &lt;value&gt;100&lt;/value&gt; &lt;/property&gt; &lt;!--&lt;property name="user_name" value="æ‚Ÿç©º"/&gt;--&gt;&lt;/bean&gt; 4.åŠ è½½å±æ€§æ–‡ä»¶jdbc.properties 1234jdbc.mysql.driver=com.mysql.jdbc.Driverjdbc.mysql.url=jdbc:mysql://localhost:3306/cy42_mssjdbc.mysql.username=rootjdbc.mysql.password=root beans.xml 12&lt;!--3.è¯»å–å±æ€§æ–‡ä»¶ï¼ï¼$&#123;key&#125;è·å–å€¼--&gt;&lt;context:property-placeholder location="classpath:jdbc.properties"/&gt; 5.æ•°ç»„ã€listã€mapã€setã€propertiesbeans.xml 123456789101112131415161718192021222324252627282930313233343536373839&lt;bean id="user01" class="com.hs.model.User" p:hobbySet-ref="hobbySetRef"&gt; &lt;property name="hobbyArray"&gt; &lt;!--è¿™é‡Œé¢çš„æ ‡ç­¾ï¼Œèµ‹å€¼è·Ÿæ„é€ å‡½æ•°åˆå§‹åŒ–ä¸€æ ·çš„--&gt; &lt;array&gt; &lt;value&gt;ç¯®çƒ&lt;/value&gt; &lt;value&gt;è¶³çƒ&lt;/value&gt; &lt;value&gt;çœ‹ä¹¦&lt;/value&gt; &lt;value&gt;éŸ³ä¹&lt;/value&gt; &lt;/array&gt;&lt;/property&gt;&lt;!--å¯ä»¥é‡‡ç”¨æ„é€ å‡½æ•°åˆå§‹åŒ–ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨util:list--&gt;&lt;property name="hobbyList" ref="hobbyListRef"/&gt;&lt;property name="map" ref="mapRef"/&gt;&lt;property name="properties"&gt; &lt;props&gt; &lt;prop key="class"&gt;$&#123;jdbc.mysql.driver&#125;&lt;/prop&gt; &lt;/props&gt;&lt;/property&gt;&lt;/bean&gt;&lt;!--è¿™äº›utilï¼Œä¸ä¼šå’‹ç”¨å¯ä»¥ç™¾åº¦ï¼Œutil:xxx,list-classå¯ä»¥ä¸ç”¨å†™--&gt;&lt;util:list id="hobbyListRef" list-class="java.util.ArrayList"&gt; &lt;value&gt;ç¯®çƒ&lt;/value&gt; &lt;value&gt;è¶³çƒ&lt;/value&gt; &lt;value&gt;çœ‹ä¹¦&lt;/value&gt; &lt;value&gt;éŸ³ä¹&lt;/value&gt;&lt;/util:list&gt;&lt;util:set id="hobbySetRef"&gt; &lt;value&gt;ç¯®çƒ&lt;/value&gt; &lt;value&gt;è¶³çƒ&lt;/value&gt; &lt;value&gt;çœ‹ä¹¦&lt;/value&gt; &lt;value&gt;éŸ³ä¹&lt;/value&gt;&lt;/util:set&gt;&lt;util:map id="mapRef"&gt; &lt;entry key="class" value="è®¡ç®—æœº"/&gt; &lt;entry key="name"&gt; &lt;value&gt;å’Œå°š&lt;/value&gt; &lt;/entry&gt;&lt;/util:map&gt; 6.è‡ªå®šä¹‰ç±»å‹beans.xml 1234567&lt;bean id="user01" class="com.hs.model.User"&gt; &lt;property name="hsRole" ref="role"/&gt;&lt;/bean&gt;&lt;bean id="role" class="com.hs.model.Role"&gt; &lt;property name="role_name" value="è¶…çº§ç®¡ç†å‘˜"/&gt;&lt;/bean&gt; 7.æ¥å£å®ç°ç±»(æ¥å£å›è°ƒ)(ä»¥åç»å¸¸ç”¨ï¼ï¼)12&lt;bean id="user01" class="com.hs.model.User" p:hsTest-ref="testImpl"&gt;&lt;/bean&gt;&lt;bean id="testImpl" class="com.hs.model.ITestImpl"/&gt; 8.æµ‹è¯•1234567891011/** * æµ‹è¯• */@Testpublic void test01() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user01",User.class); System.out.println(user); user.getHsTest().print();&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰Springçš„æ³¨å…¥æ–¹å¼-æ„é€ å‡½æ•°æ³¨å…¥]]></title>
    <url>%2F2018%2F08%2F23%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89Spring%E7%9A%84%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E6%B3%A8%E5%85%A5%2F</url>
    <content type="text"><![CDATA[åœ¨ç±»åå‰é¢åŠ @Componentè¿›è¡Œå®ä¾‹åŒ–ç±»ã€åœ¨beans.xmlä¸­ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–å¯¹è±¡â€”â€”æ™®é€šå€¼ã€æ•°ç»„ï¼Œlistï¼Œsetã€Mapå’ŒPropertiesã€è‡ªå®šä¹‰ç±»å‹å®ä¾‹åŒ–ã€ç»™è‡ªå®šä¹‰ç±»å‹åˆå§‹åŒ–æ•°æ®ã€ç»™è‡ªå®šä¹‰ç±»å‹åˆå§‹åŒ–æ•°æ®â€”â€”æ¨èå¼•ç”¨æ–¹å¼ã€æ¥å£æ³¨å…¥å®ç°ç±»(å®ç°æ¥å£å›è°ƒ)é‡ç‚¹å•Šï¼ï¼ï¼ SpringMvcSSMæ¡†æ¶æºç è·å–github[TOC]### 1.ç›®å½•ç»“æ„(éœ€è¦çš„jaråŒ…å‡åœ¨ç¯å¢ƒæ­å»ºä¸­æœ‰)### 2.åœ¨ç±»åå‰é¢åŠ @Componentè¿›è¡Œå®ä¾‹åŒ–ç±»@Component//(value = â€œhsUserâ€) //ç›¸å½“äº (value = â€œhsUserâ€)å°±æ˜¯id=hsUserbeans.xml123456789101112131415&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"&gt; &lt;!--1.å¯åŠ¨Springæ³¨è§£--&gt; &lt;context:annotation-config/&gt; &lt;!--2.æ‰«ææ³¨è§£--&gt; &lt;context:component-scan base-package="com.hs"/&gt; &lt;/beans&gt; User.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145package com.hs.model;import org.springframework.stereotype.Component;import java.util.*;@Component//(value = "hsUser") //ç›¸å½“äº&lt;bean class="com.hs.model.User" id="user"/&gt; (value = "hsUser")å°±æ˜¯id=hsUserpublic class User &#123; private String user_name; private Integer user_id; private String[] hobbyArray; private List&lt;String&gt; hobbyList; private Set&lt;String&gt; hobbySet; private Map&lt;String, Object&gt; map; private Properties properties; //Map&lt;string,string&gt; private Role hsRole; //è¿™æ˜¯è‡ªå®šä¹‰ç±»å‹ private ITest hsTest; //å®šä¹‰æ¥å£å˜é‡ /** * è¿™é‡Œé€šè¿‡bean.xmlæ„é€ å‡½æ•°åˆå§‹åŒ– * 1.ITestImpl testImpl = new ITestImpl(); * 2.hsTest = testImpl * 3.ITest hsTest = new ITestImpl(); * å…¸å‹çš„æ¥å£å›è°ƒå˜› * @param hsTest */ public User(ITest hsTest) &#123; this.hsTest = hsTest; &#125; public User(Role hsRole) &#123; this.hsRole = hsRole; &#125; private User() &#123; &#125; public User(Map&lt;String, Object&gt; map, Properties properties) &#123; this.map = map; this.properties = properties; &#125; public User(Integer user_id, String user_name) &#123; this.user_name = user_name; this.user_id = user_id; &#125; public User(String user_name, Integer user_id, String[] hobbyArray, List&lt;String&gt; hobbyList, Set&lt;String&gt; hobbySet) &#123; this.user_name = user_name; this.user_id = user_id; this.hobbyArray = hobbyArray; this.hobbyList = hobbyList; this.hobbySet = hobbySet; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String[] getHobbyArray() &#123; return hobbyArray; &#125; public void setHobbyArray(String[] hobbyArray) &#123; this.hobbyArray = hobbyArray; &#125; public List&lt;String&gt; getHobbyList() &#123; return hobbyList; &#125; public void setHobbyList(List&lt;String&gt; hobbyList) &#123; this.hobbyList = hobbyList; &#125; public Set&lt;String&gt; getHobbySet() &#123; return hobbySet; &#125; public void setHobbySet(Set&lt;String&gt; hobbySet) &#123; this.hobbySet = hobbySet; &#125; public Map&lt;String, Object&gt; getMap() &#123; return map; &#125; public void setMap(Map&lt;String, Object&gt; map) &#123; this.map = map; &#125; public Properties getProperties() &#123; return properties; &#125; public void setProperties(Properties properties) &#123; this.properties = properties; &#125; public Role getHsRole() &#123; return hsRole; &#125; public void setHsRole(Role hsRole) &#123; this.hsRole = hsRole; &#125; public ITest getHsTest() &#123; return hsTest; &#125; public void setHsTest(ITest hsTest) &#123; this.hsTest = hsTest; &#125; @Override public String toString() &#123; return "User&#123;" + "user_name='" + user_name + '\'' + ", user_id=" + user_id + ", hobbyArray=" + Arrays.toString(hobbyArray) + ", hobbyList=" + hobbyList + ", hobbySet=" + hobbySet + ", map=" + map + ", properties=" + properties + ", hsRole=" + hsRole + ", hsTest=" + hsTest + '&#125;'; &#125;&#125; ConstructorObjectTest.java 12345678910/** * æµ‹è¯•åœ¨ç±»åå‰é¢åŠ @Componentè¿›è¡Œå®ä¾‹åŒ–ç±» */@Testpublic void test01() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user",User.class); System.out.println(user);&#125; 3.åœ¨beans.xmlä¸­ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–å¯¹è±¡â€”â€”æ™®é€šå€¼åœ¨springä¸­å®ä¾‹åŒ–å¯¹è±¡ï¼ŒæŠŠç±»çš„æ„é€ å‡½æ•°è®¾ç½®æˆprivateï¼Œä¾ç„¶å¯ä»¥è¢«å®ä¾‹åŒ–ï¼Œåœ¨javaä¸­å°±ä¸èƒ½è¢«å®ä¾‹åŒ– åªè¦è§åˆ°æ ‡ç­¾å°±æ˜¯å®ä¾‹åŒ–ã€‚ã€‚ã€‚ User.java 1234public User(Integer user_id, String user_name) &#123; this.user_name = user_name; this.user_id = user_id; &#125; beans.xml 123456789101112&lt;!--User ç±»é€šè¿‡æ„é€ å‡½æ•°å®ä¾‹åŒ–--&gt;&lt;bean id="user01" class="com.hs.model.User"&gt; &lt;!--index=""(å¯ä»¥çœç•¥)æ˜¯è®¾ç½®å‚æ•°çš„ç´¢å¼•(0å¼€å§‹)ï¼Œæ˜¯ç¬¬å‡ ä¸ª typeå¯ä»¥ä¸ç”¨å†™ nameå°±æ˜¯æ„é€ å‡½æ•°çš„å‚æ•°å€¼ï¼Œvalueå°±æ˜¯èµ‹çš„å€¼--&gt; &lt;!--ç¿»è¯‘constructorï¼šæ„é€ å‡½æ•°--&gt; &lt;constructor-arg name="user_id" value="100" index="0" type="java.lang.Integer"/&gt; &lt;constructor-arg name="user_name" index="1"&gt; &lt;value&gt;æ‚Ÿç©º&lt;/value&gt; &lt;!--ä¸Šé¢æ˜¯ç®€å†™--&gt; &lt;!--è®¾ç½®ç©ºæ˜¯&lt;null/&gt;--&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; ConstructorObjectTest.java 12345678910/** * æµ‹è¯•åœ¨beans.xmlä¸­ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–å¯¹è±¡â€”â€”æ™®é€šå€¼ */@Testpublic void test02() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user01",User.class); System.out.println(user);&#125; 4.æ„é€ å‡½æ•°å®ä¾‹åŒ–æ•°ç»„ï¼Œlistï¼ŒsetUser.java 1234567public User(String user_name, Integer user_id, String[] hobbyArray, List&lt;String&gt; hobbyList, Set&lt;String&gt; hobbySet) &#123; this.user_name = user_name; this.user_id = user_id; this.hobbyArray = hobbyArray; this.hobbyList = hobbyList; this.hobbySet = hobbySet;&#125; beans.xml 1234567891011121314151617181920212223242526272829&lt;!--æ„é€ å‡½æ•°å®ä¾‹åŒ–æ•°ç»„ï¼Œlistï¼Œset--&gt;&lt;bean id="user02" class="com.hs.model.User"&gt; &lt;constructor-arg name="user_name" value="å…«æˆ’" index="0"/&gt; &lt;constructor-arg name="user_id" value="200" index="1"/&gt; &lt;constructor-arg name="hobbyArray" index="2"&gt; &lt;array&gt; &lt;value&gt;ç¯®çƒ&lt;/value&gt; &lt;value&gt;è¶³çƒ&lt;/value&gt; &lt;value&gt;çœ‹ä¹¦&lt;/value&gt; &lt;value&gt;éŸ³ä¹&lt;/value&gt; &lt;/array&gt; &lt;/constructor-arg&gt; &lt;constructor-arg name="hobbyList"&gt; &lt;list&gt; &lt;value&gt;ç¯®çƒ&lt;/value&gt; &lt;value&gt;è¶³çƒ&lt;/value&gt; &lt;value&gt;çœ‹ä¹¦&lt;/value&gt; &lt;value&gt;éŸ³ä¹&lt;/value&gt; &lt;/list&gt; &lt;/constructor-arg&gt; &lt;constructor-arg name="hobbySet"&gt; &lt;set&gt; &lt;value&gt;ç¯®çƒ&lt;/value&gt; &lt;value&gt;è¶³çƒ&lt;/value&gt; &lt;value&gt;çœ‹ä¹¦&lt;/value&gt; &lt;value&gt;éŸ³ä¹&lt;/value&gt; &lt;/set&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; ConstructorObjectTest.java 12345678910/** * æµ‹è¯•åœ¨beans.xmlä¸­ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–å¯¹è±¡â€”â€”æ•°ç»„ï¼Œlistï¼Œset */@Testpublic void test03() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user02",User.class); System.out.println(user);&#125; 5.æ„é€ å‡½æ•°å®ä¾‹åŒ–Mapå’ŒPropertiesUser.java 1234public User(Map&lt;String, Object&gt; map, Properties properties) &#123; this.map = map; this.properties = properties;&#125; beans.xml 12345678910111213141516171819&lt;!--æ„é€ å‡½æ•°å®ä¾‹åŒ–Mapï¼ŒProperties--&gt;&lt;bean id="user03" class="com.hs.model.User"&gt; &lt;constructor-arg name="map"&gt; &lt;map&gt; &lt;entry key="hs"&gt; &lt;value&gt;å’Œå°š&lt;/value&gt; &lt;/entry&gt; &lt;!--ç¼©å†™--&gt; &lt;entry key="name" value="æ‚Ÿç©º"/&gt; &lt;/map&gt; &lt;/constructor-arg&gt; &lt;constructor-arg name="properties"&gt; &lt;props&gt; &lt;!--ç»™Propertiesèµ‹å€¼--&gt; &lt;prop key="age"&gt;100&lt;/prop&gt; &lt;prop key="RuntimeExceiption"&gt;error&lt;/prop&gt; &lt;/props&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; æµ‹è¯• 12345678910/** * æµ‹è¯•åœ¨beans.xmlä¸­ç”¨æ„é€ å‡½æ•°å®ä¾‹åŒ–å¯¹è±¡â€”â€”Mapå’ŒProperties */@Testpublic void test04() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user03",User.class); System.out.println(user);&#125; 6.åˆå§‹åŒ–è‡ªå®šä¹‰ç±»å‹Role.java 12345678910111213141516171819202122232425262728package com.hs.model;public class Role &#123; private String role_name; public Role() &#123; &#125; public Role(String role_name) &#123; this.role_name = role_name; &#125; public String getRole_name() &#123; return role_name; &#125; public void setRole_name(String role_name) &#123; this.role_name = role_name; &#125; @Override public String toString() &#123; return "Role&#123;" + "role_name='" + role_name + '\'' + '&#125;'; &#125;&#125; User.java 1private Role hsRole; //è¿™æ˜¯è‡ªå®šä¹‰ç±»å‹ beans.xml 123456&lt;!--æ„é€ å‡½æ•°åˆå§‹åŒ–è‡ªå®šä¹‰ç±»å‹--&gt;&lt;bean id="user04" class="com.hs.model.User"&gt; &lt;constructor-arg name="hsRole"&gt; &lt;bean id="role1" class="com.hs.model.Role"/&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; æµ‹è¯• 12345678910111213/** * è‡ªå®šä¹‰ç±»å‹å®ä¾‹åŒ–ï¼Œç»™Userç±»ä¸­çš„Roleç±»çš„å˜é‡ï¼Œè¿›è¡Œå®ä¾‹åŒ–æ“ä½œ */@Testpublic void test05() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user04",User.class); System.out.println(user); //ä¸‹é¢è¿™ä¸ªè¯æ˜Userç±»çš„é‚£ä¸ªbean Role role,èŒƒå›´åªèƒ½åœ¨Useré‡Œ /*Role role1 = ac.getBean("role1", Role.class); System.out.println(role1);*/&#125; 7.æ„é€ å‡½æ•°å®ä¾‹åŒ–è‡ªå®šä¹‰ç±»å‹Role.java 123public Role(String role_name) &#123; this.role_name = role_name;&#125; User.java 123public User(Role hsRole) &#123; this.hsRole = hsRole;&#125; beans.xml 12345678&lt;!--æ„é€ å‡½æ•°å®ä¾‹åŒ–è‡ªå®šä¹‰ç±»å‹--&gt;&lt;bean id="user05" class="com.hs.model.User"&gt; &lt;constructor-arg name="hsRole"&gt; &lt;bean class="com.hs.model.Role"&gt; &lt;constructor-arg name="role_name" value="è¶…çº§ç®¡ç†å‘˜"/&gt; &lt;/bean&gt; &lt;/constructor-arg&gt;&lt;/bean&gt; æµ‹è¯• 12345678910/** * ç»™è‡ªå®šä¹‰ç±»å‹åˆå§‹åŒ–æ•°æ® */ @Test public void test06() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user05",User.class); System.out.println(user); &#125; 8.æ¨èå¼•ç”¨æ–¹å¼â€”â€”æ„é€ å‡½æ•°å®ä¾‹åŒ–è‡ªå®šä¹‰ç±»å‹beans.xml 1234567891011&lt;!--æ„é€ å‡½æ•°å®ä¾‹åŒ–è‡ªå®šä¹‰ç±»å‹â€”â€”æ¨èå¼•ç”¨æ–¹å¼--&gt;&lt;bean id="user06" class="com.hs.model.User"&gt; &lt;!--&lt;constructor-arg name="hsRole"&gt; &amp;lt;!&amp;ndash;å¼•ç”¨beanï¼Œä¸‹é¢ç®€å†™&amp;ndash;&amp;gt; &lt;ref bean="role2"/&gt; &lt;/constructor-arg&gt;--&gt; &lt;constructor-arg name="hsRole" ref="role2"/&gt;&lt;/bean&gt;&lt;bean id="role2" class="com.hs.model.Role"&gt; &lt;constructor-arg name="role_name" value="å¼•ç”¨æ–¹å¼æ¨è"/&gt;&lt;/bean&gt; æµ‹è¯• 123456789101112/** * ç»™è‡ªå®šä¹‰ç±»å‹åˆå§‹åŒ–æ•°æ®â€”â€”æ¨èå¼•ç”¨æ–¹å¼ */@Testpublic void test07() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user06",User.class); System.out.println(user); Role role = ac.getBean("role2", Role.class); System.out.println(role);&#125; 9.æ„é€ å‡½æ•°å®ç°æ¥å£å›è°ƒï¼Œæ¥å£æ³¨å…¥å®ç°ç±»ï¼ˆé‡ç‚¹ï¼ï¼ï¼ï¼‰ITest.java 123456package com.hs.model;public interface ITest &#123; void print();&#125; ITestImpl.java 123456789package com.hs.model;public class ITestImpl implements ITest &#123; @Override public void print() &#123; System.out.println("Hello Word!!"); &#125;&#125; User.java 1234567891011121314private ITest hsTest; //å®šä¹‰æ¥å£å˜é‡/** * è¿™é‡Œé€šè¿‡bean.xmlæ„é€ å‡½æ•°åˆå§‹åŒ– * 1.ITestImpl testImpl = new ITestImpl(); * 2.hsTest = testImpl * 3.ITest hsTest = new ITestImpl(); * å…¸å‹çš„æ¥å£å›è°ƒå˜› * @param hsTest */public User(ITest hsTest) &#123; this.hsTest = hsTest;&#125; beans.xml 1234567891011&lt;!--å®ç°æ¥å£å›è°ƒï¼Œæ¥å£æ³¨å…¥å®ç°ç±»--&gt;&lt;!-- è¿™é‡Œé€šè¿‡bean.xmlæ„é€ å‡½æ•°åˆå§‹åŒ– 1.ITestImpl testImpl = new ITestImpl(); 2.hsTest = testImpl --&gt;&lt;bean id="user07" class="com.hs.model.User"&gt; &lt;constructor-arg name="hsTest"&gt; &lt;ref bean="testImpl"/&gt; &lt;/constructor-arg&gt;&lt;/bean&gt;&lt;!--ITestImpl testImpl = new ITestImpl();--&gt;&lt;bean id="testImpl" class="com.hs.model.ITestImpl"/&gt; æµ‹è¯• 12345678910/** * æ¥å£æ³¨å…¥å®ç°ç±»ï¼Œå®ç°æ¥å£å›è°ƒ */@Testpublic void test08() &#123; ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user = ac.getBean("user07",User.class); user.getHsTest().print();&#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰Springçš„ç¯å¢ƒæ­å»º]]></title>
    <url>%2F2018%2F08%2F23%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89Spring%E7%9A%84%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[Springä¸ªäººæ¦‚è¿°ï¼Œæ ¸å¿ƒé…ç½®æ–‡ä»¶(.xml)é‡Œçš„beanæ ‡ç­¾ä»€ä¹ˆæ—¶å€™è¢«å®ä¾‹åŒ–ï¼Œè·å–å¯¹è±¡çš„ä¸¤ç§æ–¹å¼ï¼ŒBeançš„èŒƒå›´è¯´æ˜ï¼Œbeans.xmlå°±æ˜¯springæ¡†æ¶æä¾›çš„å®¹å™¨(ç®¡ç†Bean Beanå°±æ˜¯å¯¹è±¡ å¿…é¡»é€šè¿‡ç±» ç±»å¿…é¡»å¯èƒ½è¿›è¡Œå®ä¾‹åŒ–) æºç è·å–github [TOC] 1.Springä¸ªäººæ¦‚è¿° Springæ˜¯è½»é‡çº§åˆ«å¼€æºçš„æ¡†æ¶(é‡é‡çº§åˆ«EJB)ï¼Œè§£å†³å¹¶å‘ä¹Ÿæ¯”è¾ƒä¼˜ç§€ é‡ç‚¹ï¼šSpringæ˜¯ä¸€ä¸ª IoC(DI) å’Œ AOP çš„ å®¹å™¨æ¡†æ¶ï¼ˆJAVAEEæ¡†æ¶çš„é›†åˆï¼‰:å®ƒä¸»è¦æ˜¯ç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸä½¿ç”¨ XMLå®Œæˆå¯¹Beançš„å®ä¾‹åŒ– æ³¨è§£ä¹Ÿæ˜¯å®Œæˆå¯¹Beançš„å®ä¾‹åŒ–æ“ä½œ Springæ˜¯ä¸€ç«™å¼æœåŠ¡ ä»€ä¹ˆæ˜¯IoCï¼Ÿ æ§åˆ¶åè½¬ï¼šæ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼Œç¼©å†™ä¸ºIoCï¼‰ï¼Œæ˜¯é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­çš„ä¸€ç§è®¾è®¡åŸåˆ™ï¼Œå¯ä»¥ç”¨æ¥å‡ä½è®¡ç®—æœºä»£ç ä¹‹é—´çš„è€¦åˆåº¦ã€‚å…¶ä¸­æœ€å¸¸è§çš„æ–¹å¼å«åšä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼Œç®€ç§°DIï¼‰ï¼Œè¿˜æœ‰ä¸€ç§æ–¹å¼å«â€œä¾èµ–æŸ¥æ‰¾â€ï¼ˆDependency Lookupï¼‰ã€‚é€šè¿‡æ§åˆ¶åè½¬ï¼Œå¯¹è±¡åœ¨è¢«åˆ›å»ºçš„æ—¶å€™ï¼Œç”±ä¸€ä¸ªè°ƒæ§ç³»ç»Ÿå†…æ‰€æœ‰å¯¹è±¡çš„å¤–ç•Œå®ä½“ï¼Œå°†å…¶æ‰€ä¾èµ–çš„å¯¹è±¡çš„å¼•ç”¨ä¼ é€’ç»™å®ƒã€‚ä¹Ÿå¯ä»¥è¯´ï¼Œä¾èµ–è¢«æ³¨å…¥åˆ°å¯¹è±¡ä¸­ã€‚ æ³¨å…¥æ–¹å¼ï¼šhttps://zhidao.baidu.com/question/489516951.html ä¸¾ä¾‹å­è¯´æ˜æ§åˆ¶åè½¬ | å’Œå°šæ˜¯ä¸€ä¸ªç¼–å‰§å†™å‰§æœ¬ï¼Œå½“æˆ‘å†™è¯¥å‰§æœ¬çš„æ—¶å€™ï¼Œæˆ‘å¹¶ä¸éœ€è¦è€ƒè™‘è°åˆé€‚æ¼”ï¼Œä½†æ˜¯æˆ‘åº”è¯¥æœ‰æƒåˆ©å†³å®šè°æ¥æ¼” || â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” || å¯¼æ¼”å‡ºç°ï¼Œç¼–å‰§å°†é€‰äººç‰©çš„æƒåˆ©ç§»äº¤å‡ºå»ï¼Œæ§åˆ¶æƒç§»äº¤å‡ºå» || å‡ºå“äººå‡ºç°ï¼Œå¯¼æ¼”å°†é€‰äººç‰©çš„æƒåˆ©ç§»äº¤å‡ºå»ï¼Œæ§åˆ¶æƒç§»äº¤å‡ºå» || ç‚¹é¤ || æœ€å¼€å§‹ï¼šè‡ªå·±å»é£Ÿå ‚ï¼Œè‡ªå·±å»æ‰“èœï¼Œè‡ªå·±åƒ || å¤–å–å‡ºç°ï¼šåªæ˜¯éœ€è¦å‘é€ä¸€ä¸ªè¯·æ±‚å‘ŠçŸ¥å¤–å–å°å“¥ï¼Œæˆ‘æƒ³åƒä»€ä¹ˆï¼Œé‚£ä¹ˆå¤–å–å°å“¥ä¸ºæˆ‘ä»¬æœåŠ¡ï¼Œå°†éœ€è¦çš„èœå–å›æ¥ç»™æˆ‘ä»¬å“å° || javaä½“ç° || å®¹å™¨æ¡†æ¶(Beançš„ç”Ÿå‘½å‘¨æœŸåˆ›å»º ä½¿ç”¨ é”€æ¯) || ç®¡ç†Beanï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºå¯¹è±¡(ä¹Ÿå°±æ˜¯æ³¨å…¥)(å°±ä¸ç”¨æˆ‘ä»¬è‡ªå·±newåˆ›å»ºå¯¹è±¡äº†) | 2.é¡¹ç›®ç»“æ„ 3.Springç¯å¢ƒæ­å»ºæ¡†æ¶æµç¨‹éƒ½æ˜¯ï¼šå…ˆæ‰¾jaråŒ…=&gt;å…¥å£æ–‡ä»¶(æ ¸å¿ƒé…ç½®æ–‡ä»¶beans.xmlå®˜æ–¹æ¨èçš„åå­—æ˜¯applicationContext.xml)=&gt;ä½¿ç”¨APIè°ƒç”¨è¿‡ç¨‹=&gt;æµ‹è¯• 4.jaråŒ…pom.xmlåŠ å…¥ä¾èµ– 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aop --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aop&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-aspects --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-beans --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-beans&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context-support --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-core --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-expression --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-expression&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-tx --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-tx&lt;/artifactId&gt; &lt;version&gt;4.3.6.RELEASE&lt;/version&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 5.æ ¸å¿ƒé…ç½®æ–‡ä»¶(å…¥å£)User.java 123456789101112131415161718192021222324package com.hs.model;public class User &#123; private String user_name; private Integer user_id; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125;&#125; beans.xml 1234567891011121314151617&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; &lt;!--beans.xmlå°±æ˜¯springæ¡†æ¶æä¾›çš„å®¹å™¨--&gt; &lt;!--ç®¡ç†Bean Beanå°±æ˜¯å¯¹è±¡ å¿…é¡»é€šè¿‡ç±» ç±»å¿…é¡»å¯èƒ½è¿›è¡Œå®ä¾‹åŒ–--&gt; &lt;!--ä¸‹é¢é‚£ä¸ªä»£ç ç›¸å½“äº javaä»£ç  HashMap map1 = new HashMap(); HashMapjavaå†…ç½®çš„ç±» --&gt; &lt;!--&lt;bean id="map1" class="java.util.HashMap"&gt;&lt;/bean&gt;--&gt; &lt;!--static User u1 = new User();åªæœ‰ä¸€ä¸ªnewå¯¹è±¡ï¼ŒBeançš„èŒƒå›´è¯´æ˜â€”â€”scope="singleton"é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼,scopeå¯ä»¥ä¸ç”¨å†™--&gt; &lt;bean id="u1" class="com.hs.model.User" scope="singleton"/&gt; &lt;!--User u2 = new User(); prototypeå¤šä¾‹æ¨¡å¼ï¼Œéœ€è¦å¯¹è±¡å°±newä¸€ä¸ªï¼Œæ¯ä¸ªä¸åŒ--&gt; &lt;bean id="u2" class="com.hs.model.User" scope="prototype"/&gt;&lt;/beans&gt; 6.ä½¿ç”¨APIè°ƒç”¨è¿‡ç¨‹è·å–å¯¹è±¡ä¸¤ç§æ–¹å¼ï¼š 12User user = (User) ac.getBean("u1");User user = ac.getBean("u1", User.class); ObjectTest.java è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ == å‘ç°äº†Beanæ ‡ç­¾å°±ä¼šå¯¹classå¯¹åº”çš„ç±»è¿›è¡Œå®ä¾‹åŒ–æ“ä½œ ApplicationContext ac = new ClassPathXmlApplicationContext(â€œbeans.xmlâ€); 123456789101112131415/** * åŒä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å¯¹è±¡æ¯”è¾ƒ */ @Test public void test01() &#123;// 1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ == å‘ç°äº†Beanæ ‡ç­¾å°±ä¼šå¯¹classå¯¹åº”çš„ç±»è¿›è¡Œå®ä¾‹åŒ–æ“ä½œ ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml");// u1å°±æ˜¯beanæ ‡ç­¾é‡Œçš„idçš„åå­— User user1 = ac.getBean("u1", User.class); User user2 = ac.getBean("u2", User.class); System.out.println(user1); System.out.println(user2); System.out.println(user1==user2); //false System.out.println(user1.equals(user2)); //false &#125; 7.beançš„èŒƒå›´è¯´æ˜ObjectTest.java 12345678910111213141516171819202122232425262728293031/** * Beançš„èŒƒå›´è¯´æ˜â€”â€”é»˜è®¤ä¸ºå•ä¾‹æ¨¡å¼ */ @Test public void test02() &#123;// 1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ == å‘ç°äº†Beanæ ‡ç­¾å°±ä¼šå¯¹classå¯¹åº”çš„ç±»è¿›è¡Œå®ä¾‹åŒ–æ“ä½œ ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user1 = ac.getBean("u1", User.class); User user2 = ac.getBean("u1", User.class); System.out.println(user1); System.out.println(user2); System.out.println(user1==user2); //true System.out.println(user1.equals(user2)); //true &#125; /** * Beançš„èŒƒå›´è¯´æ˜â€”â€”è®¾ç½®å¤šä¾‹æ¨¡å¼ */ @Test public void test03() &#123;// 1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ == å‘ç°äº†Beanæ ‡ç­¾å°±ä¼šå¯¹classå¯¹åº”çš„ç±»è¿›è¡Œå®ä¾‹åŒ–æ“ä½œ ApplicationContext ac = new ClassPathXmlApplicationContext("beans.xml"); User user1 = ac.getBean("u2", User.class); User user2 = ac.getBean("u2", User.class); System.out.println(user1); System.out.println(user2); System.out.println(user1==user2); //false System.out.println(user1.equals(user2)); //false &#125;]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ideaåˆ›å»ºmavené¡¹ç›®]]></title>
    <url>%2F2018%2F08%2F22%2Fidea%E5%88%9B%E5%BB%BAmaven%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆè¦ç”¨mavenå‘¢ï¼Œä¸€æ–¹é¢jaråŒ…æ–¹ä¾¿ï¼Œå¦ä¸€æ–¹é¢ä»¥åå·¥ä½œä¸­è‚¯å®šè¦ç”¨åˆ°ï¼Œç°åœ¨å°±å…ˆå­¦ä¹ å­¦ä¹ ï¼Œç„¶åè‡ªå·±ä¹Ÿåœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šçš„æ•™ç¨‹ï¼Œæ¯ä¸ªæ•™ç¨‹éƒ½å„æœ‰ç‰¹ç‚¹ï¼Œç„¶åæˆ‘è‡ªå·±å°±ç»™è‡ªå·±æ€»ç»“äº†ä¸€ä¸ªæ•™ç¨‹ï¼Œåšä¸€ä¸ªè®°å½•ã€‚ 1.ç”¨æ¨¡æ¿å¿«é€Ÿåˆ›å»ºJava SEå·¥ç¨‹ ç„¶åå‡ºç°GroupIDå’ŒArtifactIDå¡«å†™ï¼Œè¿™ä¸¤ä¸ªæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ GroupIDå’ŒArtifactIDçš„æ„æ€ è½¬è½½ï¼šhttps://blog.csdn.net/qq_30137611/article/details/76762070 GroupIdå’ŒArtifactIdè¢«ç»Ÿç§°ä¸ºâ€œåæ ‡â€æ˜¯ä¸ºäº†ä¿è¯é¡¹ç›®å”¯ä¸€æ€§è€Œæå‡ºçš„ï¼Œå¦‚æœä½ è¦æŠŠä½ é¡¹ç›®å¼„åˆ°mavenæœ¬åœ°ä»“åº“å»ï¼Œä½ æƒ³è¦æ‰¾åˆ°ä½ çš„é¡¹ç›®å°±å¿…é¡»æ ¹æ®è¿™ä¸¤ä¸ªidå»æŸ¥æ‰¾ã€‚ GroupIdä¸€èˆ¬åˆ†ä¸ºå¤šä¸ªæ®µï¼Œè¿™é‡Œæˆ‘åªè¯´ä¸¤æ®µï¼Œç¬¬ä¸€æ®µä¸ºåŸŸï¼Œç¬¬äºŒæ®µä¸ºå…¬å¸åç§°ã€‚åŸŸåˆåˆ†ä¸ºorgã€comã€cnç­‰ç­‰è®¸å¤šï¼Œå…¶ä¸­orgä¸ºéè¥åˆ©ç»„ç»‡ï¼Œcomä¸ºå•†ä¸šç»„ç»‡ã€‚ä¸¾ä¸ªapacheå…¬å¸çš„tomcaté¡¹ç›®ä¾‹å­ï¼šè¿™ä¸ªé¡¹ç›®çš„GroupIdæ˜¯org.apacheï¼Œå®ƒçš„åŸŸæ˜¯orgï¼ˆå› ä¸ºtomcatæ˜¯éè¥åˆ©é¡¹ç›®ï¼‰ï¼Œå…¬å¸åç§°æ˜¯apacheï¼ŒArtifactIdæ˜¯tomcatã€‚ æ¯”å¦‚æˆ‘åˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæˆ‘ä¸€èˆ¬ä¼šå°†GroupIdè®¾ç½®ä¸ºcn.mhtï¼Œcnè¡¨ç¤ºåŸŸä¸ºä¸­å›½ï¼Œmhtæ˜¯æˆ‘ä¸ªäººå§“åç¼©å†™ï¼ŒArtifactIdè®¾ç½®ä¸ºtestProjï¼Œè¡¨ç¤ºä½ è¿™ä¸ªé¡¹ç›®çš„åç§°æ˜¯testProjï¼Œä¾ç…§è¿™ä¸ªè®¾ç½®ï¼Œåœ¨ä½ åˆ›å»ºMavenå·¥ç¨‹åï¼Œæ–°å»ºåŒ…çš„æ—¶å€™ï¼ŒåŒ…ç»“æ„æœ€å¥½æ˜¯cn.zr.testProjæ‰“å¤´çš„ï¼Œå¦‚æœæœ‰ä¸ªStudentDao[Daoå±‚çš„]ï¼Œå®ƒçš„å…¨è·¯å¾„å°±æ˜¯cn.zr.testProj.dao.StudentDao ç„¶åæˆ‘è‡ªå·±çš„ï¼ŒGroupIdä¸€èˆ¬å°±å†™com.hs ç„¶ånextä¼šå‡ºç°è¿™ä¸ªï¼Œuser setting file å°±æ˜¯ä½ è‡ªå·±mavençš„é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œlocal repositoryå°±æ˜¯ä½ è‡ªå·±è®¾ç½®çš„æœ¬åœ°ä»“åº“è·¯å¾„ æ–°å»ºå¥½çš„ç›®å½•ç»“æ„éƒ½ä»€ä¹ˆæ„æ€ç„¶åä¸€ç›´nextï¼Œè¿™é‡Œä¼šä¸€ç›´åŠ è½½ä½ ä¾èµ–çš„åŒ…èµ„æºï¼Œè¿™é‡Œç‚¹ç®­å¤´çš„åœ°æ–¹ æ–°å»ºå¥½çš„é¡¹ç›®ï¼Œç»“æ„å°±æ˜¯è¿™æ ·ï¼Œè·Ÿä¸ç”¨mavenåˆ›å»ºçš„ç›®å½•ç»“æ„å®Œå…¨ä¸ä¸€æ ·ï¼Œæœ‰ç‚¹éš¾å—ï¼Œç„¶åè‡ªå·±ç™¾åº¦äº†ä¸€å¤§å †æ•™ç¨‹å§ï¼Œè‡ªå·±ä¹Ÿè®°å½•ä¸€ä¸‹ï¼Œcom.hsä¸‹çš„éƒ½æ˜¯å¿«é€Ÿæ¨¡æ¿çš„æµ‹è¯•ä»£ç ï¼Œå¯ä»¥åˆ äº† src/main/java é¡¹ç›®çš„javaæºä»£ç  src/main/resources é¡¹ç›®çš„èµ„æºï¼Œæ¯”å¦‚SSMæ¡†æ¶çš„æ ¸å¿ƒæ–‡ä»¶ï¼Œpropertyæ–‡ä»¶ src/test/java é¡¹ç›®çš„æµ‹è¯•ç±»ï¼Œ src/test/resources æµ‹è¯•ä½¿ç”¨çš„èµ„æº pom.xml å°±æ˜¯ä½ å†™ä¾èµ–åŒ…çš„åœ°æ–¹ ç„¶åä½ å°±ä¼šå‘ç°ï¼Œåˆ›å»ºå¥½çš„ç»“æœæ²¡æœ‰resourcesç›®å½•ï¼Œè¿™ä¸ªå°±éœ€è¦è‡ªå·±åˆ›å»ºäº†ï¼Œé¦–å…ˆè‡ªå·±åœ¨javaåŒçº§å±‚çº§ï¼Œåˆ›å»ºä¸€ä¸ªresourcesæ–‡ä»¶å¤¹ï¼ŒteståŒç†è¿™æ · 2.ç”¨æ¨¡æ¿å¿«é€Ÿåˆ›å»ºJava EEå·¥ç¨‹ ç„¶åä¼šåŒæ ·å‡ºç°ä¸Šé¢çš„å‡ æ­¥ 3.ä¸ç”¨å¿«é€Ÿæ¨¡æ¿ç”Ÿæˆå·¥ç¨‹æŠŠç”Ÿæˆçš„å›¾é‡Œçš„ï¼Œæ–¹æ¡†é‡Œçš„âˆšï¼Œä¸è¦å‹¾é€‰å°±å¯ä»¥äº†ã€‚]]></content>
      <categories>
        <category>idea</category>
      </categories>
      <tags>
        <tag>idea</tag>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Springå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰JavaåŸºç¡€çŸ¥è¯†å¤ä¹ ]]></title>
    <url>%2F2018%2F08%2F22%2FSpring%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89Java%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0%2F</url>
    <content type="text"><![CDATA[å¯¹è±¡çš„åˆ›å»ºæ–¹å¼ã€è·å–å¯¹è±¡å¹¶ä¸”è¿›è¡Œæ¯”è¾ƒã€==å’Œequalsçš„åŒºåˆ«ã€å•ä¾‹æ¨¡å¼(é¥¿æ±‰å’Œæ‡’æ±‰)ã€å¯¹è±¡çš„åˆå§‹åŒ–æ•°æ®æ“ä½œã€æ•°ç»„çš„æ•°æ®åˆå§‹åŒ–æ“ä½œæœ‰å‡ ç§ã€å„ä¸ªç±»å‹çš„åˆå§‹å€¼æ˜¯ä»€ä¹ˆï¼ŒUser u1 = new User();è¿™å¥è¯åŒ…å«çš„çŸ¥è¯†ç‚¹ã€æ— å‚æ„é€ å‡½æ•°å’Œæœ‰å‚æ„é€ å‡½æ•° æºç è·å–github å­¦ä¹ springçš„æ—¶å€™ï¼Œéƒ½æ˜¯ç”¨çš„mavené¡¹ç›®å­¦ä¹ ï¼Œideaå¦‚ä½•åˆ›å»ºmavené¡¹ç›®æ•™ç¨‹ï¼Œä¼ é€é—¨ [TOC] 1.é¡¹ç›®ç»“æ„ 2.éœ€è¦çš„jaråŒ…123456&lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.11&lt;/version&gt; &lt;scope&gt;test&lt;/scope&gt;&lt;/dependency&gt; 3.å¯¹è±¡çš„åˆ›å»ºæ–¹å¼ ä½¿ç”¨newå…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡ ä½¿ç”¨Class_forNameå®ä¾‹åŒ–å¯¹è±¡ User.java 123456789101112131415161718192021222324package com.hs.model;public class User &#123; private String user_name; private Integer user_id; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125;&#125; CreateObject.java 123456789101112131415161718192021222324252627282930313233package com.hs.test;import com.hs.model.User;import org.junit.Test;/** * å¯¹è±¡çš„åˆ›å»ºæ–¹å¼ */public class CreateObject &#123; /** * ä½¿ç”¨newå…³é”®å­—å®ä¾‹åŒ–å¯¹è±¡ */ @Test public void test01() &#123; User u = new User(); System.out.println(u); &#125; /** * ä½¿ç”¨Class_forNameå®ä¾‹åŒ–å¯¹è±¡ * @throws ClassNotFoundException * @throws IllegalAccessException * @throws InstantiationException */ @Test public void test02() throws ClassNotFoundException, IllegalAccessException, InstantiationException &#123; User u = (User) Class.forName("com.hs.model.User").newInstance(); //com.hs.model.Userä¸ºç±»çš„å…¨è·¯å¾„ï¼ŒnewInstance()å®ä¾‹åŒ–å¯¹è±¡ System.out.println(u); u.setUser_name("æ‚Ÿç©º"); System.out.println(u.getUser_name()); &#125;&#125; 4.è·å–å¯¹è±¡å¹¶ä¸”è¿›è¡Œæ¯”è¾ƒ new ä¸€æ¬¡ï¼Œå°±äº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ–°çš„ å¯¹è±¡æ¯æ¬¡éƒ½å¯ä»¥æ˜¯ä¸€æ ·çš„ã€åŒä¸€ä¸ªå®ä¾‹ GetObject.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162package com.hs.test;import com.hs.model.User;import org.junit.Test;/** * è·å–å¯¹è±¡å¹¶ä¸”è¿›è¡Œæ¯”è¾ƒ */public class GetObject &#123; /** * è€ƒæŸ¥çŸ¥è¯†ç‚¹ï¼Œå¯¹è±¡æ¯æ¬¡éƒ½å¯ä»¥æ˜¯æ–°çš„ */ @Test public void test01() &#123; User u1 = this.getUser(); User u2 = this.getUser(); System.out.println(u1); System.out.println(u2); System.out.println(u1 == u2); //ç»“æœæ˜¯false System.out.println(u1.equals(u2)); //ç»“æœæ˜¯false //ç™¾åº¦==å’Œequalsæ¯”è¾ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å†…å­˜åœ°å€ï¼Œå¦‚æœå¯¹è±¡(éƒ½æ˜¯ç»§æ‰¿äº†object(é‡Œé¢æœ‰equalsæ–¹æ³•))é‡Œé‡å†™equalsï¼Œåˆæ˜¯ä»€ä¹ˆç»“æœï¼Œ &#125; public User getUser() &#123; //new ä¸€æ¬¡ï¼Œå°±äº§ç”Ÿä¸€ä¸ªæ–°çš„å¯¹è±¡(å†…å­˜åœ°å€ä¸ä¸€æ ·)ï¼Œä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œéƒ½æ˜¯æ–°çš„ return new User(); &#125; /** * è€ƒæŸ¥çŸ¥è¯†ç‚¹ï¼Œå¯¹è±¡æ¯æ¬¡éƒ½å¯ä»¥æ˜¯ä¸€æ ·çš„ã€åŒä¸€ä¸ªå®ä¾‹ */ @Test public void test02() &#123; User u1 = this.getUser02(); User u2 = this.getUser02(); System.out.println(u1); System.out.println(u2); System.out.println(u1 == u2); //ç»“æœæ˜¯true System.out.println(u1.equals(u2)); //ç»“æœæ˜¯true //ç™¾åº¦==å’Œequalsæ¯”è¾ƒçš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å†…å­˜åœ°å€ï¼Œå¦‚æœå¯¹è±¡(éƒ½æ˜¯ç»§æ‰¿äº†object(é‡Œé¢æœ‰equalsæ–¹æ³•))é‡Œé‡å†™equalsï¼Œåˆæ˜¯ä»€ä¹ˆç»“æœï¼Œ u1.setUser_name("æ‚Ÿç©º"); System.out.println(u2.getUser_name()); //è¾“å‡ºæ‚Ÿç©ºï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿè®¾è®¡åˆ°ä¸€ä¸ªå«å¼•ç”¨ä¼ é€’çš„ &#125; private static User u1 = new User(); //è®¾è®¡æ¨¡å¼-å•ä¾‹çš„è®¾è®¡ é¥¿æ±‰(ä¸ç®¡ä½ ç”¨ä¸ç”¨ï¼Œæˆ‘éƒ½å…ˆåˆ›å»ºå¥½),åŠ äº†ä¸€ä¸ªstaticï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå…±äº«æ•°æ® public User getUser02() &#123; return this.u1; &#125; //æ‡’æ±‰(ä½ ç”¨æˆ‘æ‰åˆ›å»º)---çº¿ç¨‹ä¸å®‰å…¨ /*private static User u2; public User getUser002() &#123; if (u2 == null) &#123; u2 = new User(); &#125; return this.u2; &#125;*/&#125; 5.==å’Œequalsçš„åŒºåˆ« ==æ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®ä¾‹æ˜¯ä¸æ˜¯æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ equalsæ˜¯åˆ¤æ–­ä¸¤ä¸ªå˜é‡æˆ–å®ä¾‹æ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´çš„å€¼æ˜¯ä¸æ˜¯ç›¸åŒ ==æ˜¯æŒ‡å¯¹å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒ equals()æ˜¯å¯¹å­—ç¬¦ä¸²çš„å†…å®¹è¿›è¡Œæ¯”è¾ƒ ==æŒ‡å¼•ç”¨æ˜¯å¦ç›¸åŒ equals()æŒ‡çš„æ˜¯å€¼æ˜¯å¦ç›¸åŒ å¦‚æœå¯¹è±¡(éƒ½æ˜¯ç»§æ‰¿äº†object(é‡Œé¢æœ‰equalsæ–¹æ³•))é‡Œé‡å†™equalsäº†ï¼Œåˆæ˜¯ä¸åŒç»“æœ 6.å•ä¾‹æ¨¡å¼-è®¾è®¡æ¨¡å¼ é¥¿æ±‰:ä¸ç®¡ä½ ç”¨ä¸ç”¨ï¼Œæˆ‘éƒ½å…ˆåˆ›å»ºå¥½ 1private static User u1 = new User(); //åŠ äº†ä¸€ä¸ªstaticï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå…±äº«æ•°æ® æ‡’æ±‰ï¼šä½ ç”¨æˆ‘æ‰åˆ›å»ºï¼Œçº¿ç¨‹ä¸å®‰å…¨ 1234567private static User u2; public User getUser002() &#123; if (u2 == null) &#123; u2 = new User(); &#125; return this.u2; &#125; 7.å¯¹è±¡çš„åˆå§‹åŒ–æ•°æ®æ“ä½œ æ„é€ å‡½æ•°â€”åˆå§‹åŒ–æ•°æ® Setteræ–¹æ³• å¦‚æœå¯¹è±¡çš„å±æ€§ä¸æ˜¯privateï¼Œå¯ä»¥å®ä¾‹åŒ–å¯¹è±¡.å±æ€§=xxèµ‹å€¼ InitObject.java 12345678910111213141516171819202122232425262728293031/** * æ„é€ å‡½æ•°â€”åˆå§‹åŒ–æ•°æ® */@Testpublic void test01() &#123; User u1 = new User(); /*è¿™ä¸€å¥è¯è®¾è®¡åˆ°çš„çŸ¥è¯†ç‚¹ï¼š new å¼€è¾Ÿä¸€å—å †å†…å­˜ç©ºé—´ User(); æ„é€ å‡½æ•° 1.åˆ›å»ºå¯¹è±¡ 2.å¯¹æ•°æ®è¿›è¡Œåˆå§‹åŒ–æ“ä½œ u1: åœ¨æ ˆå†…å­˜ä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡æŒ‡å‘äº†å †å†…å­˜ç©ºé—´ * */ /*æ„é€ å‡½æ•°çŸ¥è¯†ç‚¹ï¼š 1.é»˜è®¤æœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•° 2.è‹¥å†™äº†ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼Œè¦†ç›–äº†é»˜è®¤çš„æ— å‚ï¼Œç›´æ¥new User()æŠ¥é”™ 3.ç¬¬2ç‚¹è§£å†³åŠæ³•å°±æ˜¯ï¼Œå†å†™ä¸€æ¬¡æ— å‚æ„é€ å‡½æ•° 4.æ¯ä¸ªæ„é€ å‡½æ•°é»˜è®¤ä¸€ä¸ªsuper(),ä¸å†™ä¹Ÿæœ‰ï¼Œå¹¶ä¸”å¾—åœ¨é¦–è¡Œ * */ System.out.println(u1.getUser_name()); //åˆå§‹åŒ–çš„æ•°æ®ä¸ºç©º&#125;/** * setteræ–¹æ³•åˆå§‹åŒ–æ•°æ®ï¼Œå…¶å®å¦‚æœå±æ€§ä¸privateï¼Œå¯ä»¥ç›´æ¥å¯¹è±¡çš„å˜é‡.å±æ€§èµ‹å€¼ */@Testpublic void test02() &#123; User u1 = new User(); u1.setUser_id(200); u1.setUser_name("å…«æˆ’");&#125; 8.æ•°ç»„çš„åˆå§‹åŒ–æ“ä½œæœ‰å‡ ç§ åŠ¨æ€åˆå§‹åŒ– é™æ€åˆå§‹åŒ– InitObject.java 12345678910Testpublic void test03() &#123; //åŠ¨æ€åˆå§‹åŒ– int[] arr = new int[3]; //char[] arr = new char[3]; System.out.println(arr[2]); //é™æ€åˆå§‹åŒ– boolean[] arr2 = &#123;false, true, true&#125;; //ä¸‹é¢çš„é‚£ç§ç®€å†™ boolean[] arr3 = new boolean[]&#123;false, true, true&#125;;&#125; 9.æ•°ç»„å„ä¸ªç±»å‹çš„åˆå§‹å€¼(é»˜è®¤å€¼) ç±»å‹ é»˜è®¤å€¼ int 0 short 0 byte 0 float 0.0f double 0.0d long 0L boolean false char â€˜/uooooâ€™(å°±æ˜¯ä¸€ä¸ªç©ºç™½çš„) String null 10.User u1 = new User();è¿™å¥è¯åŒ…å«çš„çŸ¥è¯†ç‚¹ new å¼€è¾Ÿä¸€å—å †å†…å­˜ç©ºé—´ User(); æ„é€ å‡½æ•°1.åˆ›å»ºå¯¹è±¡ 2.å¯¹æ•°æ®è¿›è¡Œåˆå§‹åŒ–æ“ä½œ u1: åœ¨æ ˆå†…å­˜ä¸­å®šä¹‰äº†ä¸€ä¸ªå˜é‡æŒ‡å‘äº†å †å†…å­˜ç©ºé—´ 11.æ— å‚æ„é€ å‡½æ•°å’Œæœ‰å‚æ„é€ å‡½æ•° é»˜è®¤æœ‰ä¸€ä¸ªæ— å‚æ„é€ å‡½æ•° è‹¥å†™äº†ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•°ï¼Œè¦†ç›–äº†é»˜è®¤çš„æ— å‚ï¼Œç›´æ¥new User()æŠ¥é”™ ç¬¬2ç‚¹è§£å†³åŠæ³•å°±æ˜¯ï¼Œå†å†™ä¸€æ¬¡æ— å‚æ„é€ å‡½æ•° æ¯ä¸ªæ„é€ å‡½æ•°é»˜è®¤ä¸€ä¸ªsuper(),ä¸å†™ä¹Ÿæœ‰ï¼Œå¹¶ä¸”å¾—åœ¨é¦–è¡Œ]]></content>
      <categories>
        <category>Springå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>Spring</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆåäºŒï¼‰è¸©è¿‡çš„å‘ï¼ˆ400ã€500å¼‚å¸¸ï¼‰]]></title>
    <url>%2F2018%2F08%2F21%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%BA%8C%EF%BC%89%E8%B8%A9%E8%BF%87%E7%9A%84%E5%9D%91%EF%BC%88400%E3%80%81500%E5%BC%82%E5%B8%B8%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ä¸€äº›ç»å¸¸é‡è§çš„æŠ¥400ã€500çš„é”™è¯¯ï¼Œå¦‚æœè¦ç”¨åˆ°HttpServletRequestè¿™äº›åŒ…çš„ï¼Œideaä¸­springmvcæ–‡ä»¶ä¸Šä¼ çš„æ–‡ä»¶ä¼šåœ¨outé‡Œè·¯å¾„æœ‰ï¼Œä¿®æ”¹é¡¹ç›®åå­—ï¼Œè¿è¡ŒæŠ¥é”™ 1.400å¼‚å¸¸1.å½“ä½ ä¸ä¼ é€’è¦å»æ•°æ®çš„æ—¶å€™,é‚£ä¹ˆä¼šæŠ¥400é”™è¯¯ï¼Œæ²¡æœ‰ä¼ é€’hs=tomcatçš„æ•°æ® 2.åå°æ¥æ”¶æ•°æ®ï¼Œæ•°æ®ç±»å‹è½¬æ¢å¤±è´¥æ¥æ”¶çš„æ•°æ®ç±»å‹æ˜¯Integerï¼Œä½†æ˜¯ä¼ è¿‡å»çš„æ˜¯å­—ç¬¦ä¸² 2.500å¼‚å¸¸å½“ä½ ä¿®æ”¹ä¸€ä¸ªé¡¹ç›®çš„åå­—ï¼Œç„¶åè¿è¡Œçš„æ—¶å€™ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼Œåªéœ€è¦æŠŠouté‡Œçš„ç¼“å­˜åˆ æ‰ï¼Œç„¶åä»æ–°è¿è¡Œå³å¯ 3.æ˜ å°„è·¯å¾„ç›¸åŒçš„ æ¨¡æ£±ä¸¤å¯é”™è¯¯ï¼Œcontrolleré‡Œæœ‰ä¸¤ä¸ªç›¸åŒçš„æ˜ å°„è·¯å¾„ï¼Œ/cy42/test03å­˜åœ¨åœ¨ä¸¤ä¸ªæ–¹æ³•é‡Œ 4.cannot resolve symbol â€˜HttpServletRequestâ€™IDEAå¼‚å¸¸ cannot resolve symbol â€˜HttpServletRequestâ€™,æ‰¾ä¸åˆ°HttpServletRequestè¿™äº›åŒ…ï¼Œåœ¨ideaä¸­éœ€è¦æ·»åŠ tomcatçš„Librariesï¼Œeclipseä¸éœ€ç”¨ 5.tomcatæ§åˆ¶å° localhost log ç­‰æ„æ€ 6.éƒ¨ç½²é¡¹ç›®åˆ°tomcatçš„æ—¶å€™ï¼Œå‘ç°æ²¡æœ‰ä½ çš„é¡¹ç›®å¤åˆ¶äº†ä¸€ä¸ªmoduleï¼Œå‘ç°éƒ¨ç½²é¡¹ç›®åˆ°tomcatï¼Œç„¶åæ²¡æœ‰ä½ çš„é¡¹ç›®ï¼Œè¿™æ ·è§£å†³ éƒ¨ç½²é¡¹ç›®çš„åŒºåˆ« 7.é¡¹ç›®å‘½åçš„æ—¶å€™ä¸èƒ½ç”¨ç‚¹å¯¼å…¥é¡¹ç›®çš„æ—¶å€™ä¼šå‡ºç°è¿™ä¸ªæƒ…å†µï¼Œç‚¹ä»£è¡¨å±‚çº§æ–‡ä»¶]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆåä¸€ï¼‰è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ä¸“é¢˜]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%E4%B8%80%EF%BC%89%E8%BF%87%E6%BB%A4%E5%99%A8%E5%92%8C%E6%8B%A6%E6%88%AA%E5%99%A8%E4%B8%93%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æ‹¦æˆªå™¨å°±æ˜¯è¿‡æ»¤å™¨çš„ä¸€ç§, æ‹¦æˆªå™¨æœ‰ä¸”åªèƒ½æ‹¦æˆªControllerå±‚(Servlet) ï¼Œæœ¬æ–‡å®ç°ä¸€ä¸ªç™»å½•æ‹¦æˆªå™¨ï¼Œæ²¡æœ‰ç™»å½•å°±ä¸èƒ½è®¿é—®ç™»å½•ä¹‹åçš„é¡µé¢ã€‚è¿‡æ»¤å™¨ï¼šä¾èµ–äºservletå®¹å™¨ã€‚åœ¨å®ç°ä¸ŠåŸºäºå‡½æ•°å›è°ƒï¼Œå¯ä»¥å¯¹å‡ ä¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨å®ä¾‹åªèƒ½åœ¨å®¹å™¨åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ã€‚ä½¿ç”¨è¿‡æ»¤å™¨çš„ç›®çš„æ˜¯ç”¨æ¥åšä¸€äº›è¿‡æ»¤æ“ä½œï¼Œè·å–æˆ‘ä»¬æƒ³è¦è·å–çš„æ•°æ®ï¼Œæ¯”å¦‚ï¼šåœ¨è¿‡æ»¤å™¨ä¸­ä¿®æ”¹å­—ç¬¦ç¼–ç ï¼›åœ¨è¿‡æ»¤å™¨ä¸­ä¿®æ”¹HttpServletRequestçš„ä¸€äº›å‚æ•°ï¼ŒåŒ…æ‹¬ï¼šè¿‡æ»¤ä½ä¿—æ–‡å­—ã€å±é™©å­—ç¬¦ç­‰ æºç è·å–github [TOC] 1.é¡¹ç›®ç»“æ„ 2.æ‹¦æˆªå™¨Java Webé˜¶æ®µå­¦ä¹ è¿‡æ»¤å™¨ å®ç°javax.servlet.Filteræ¥å£ è¿‡æ»¤å™¨æ˜¯åœ¨æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™å°±å¯¹é½è¿›è¡Œå®ä¾‹åŒ–æ“ä½œ,å¦‚æœä½ çš„è¿‡æ»¤å™¨é”™è¯¯,é‚£ä¹ˆæœåŠ¡å°†æ— æ³•å¯åŠ¨,æ‰€ä»¥æ•´ä¸ªç¨‹åºæ— æ³•è¿è¡Œ init åˆå§‹åŒ–æ•°æ® doFilter(ServletRequest req , ServletResponse resp, ChainFilter chain) å¼ºåˆ¶ç±»å‹è½¬æ¢ HttpServletRequest request = (HttpServletRequest)req; å…³é”®çš„ä»£ç  chain.doFilter(req,resp); è®¿é—®ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨æˆ–è€…èµ„æº destroy æœåŠ¡å™¨å…³é—­ åœ¨web.xmlä¸­é…ç½® 123456789&lt;filter&gt; &lt;filter-name&gt; &lt;filter-class&gt; &lt;init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;url-patterns&gt;è¿‡æ»¤çš„è·¯å¾„,æˆ‘ä»¬è‡ªå·±å¯ä»¥è®¾ç½®è§„åˆ™ *.jsp *.html /*&lt;/url-patterns&gt; &lt;servlet-name&gt;servletè¿‡æ»¤å™¨åå­—&lt;/servlet-name&gt;&lt;/filter-mapping&gt; æ‹¦æˆªå™¨ : ç†è§£ä¸º æ‹¦æˆªå™¨å°±æ˜¯è¿‡æ»¤å™¨çš„ä¸€ç§, æ‹¦æˆªå™¨æœ‰ä¸”åªèƒ½æ‹¦æˆªControllerå±‚(Servlet) @Controllerçš„æ³¨è§£å±‚æ¬¡ 3.å¦‚ä½•å»ºç«‹æ‹¦æˆªå™¨1.æ–°å»ºä¸€ä¸ªç±»MyInterceptor.java 1234567891011121314151617181920212223242526package com.hs.interceptor;import org.springframework.web.servlet.HandlerInterceptor;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;///ä¸€èˆ¬æƒ…å†µä¸‹,æˆ‘ä»¬åªæ˜¯å…³å¿ƒpreHandleæ–¹æ³•å³å¯public class MyInterceptor implements HandlerInterceptor &#123; @Override public boolean preHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o) throws Exception &#123; System.out.println("preHandle:è®¿é—®Controllerä¹‹å‰æ‰§è¡Œ");// return false; //é˜»æ­¢è®¿é—®ä¸‹ä¸€ä¸ª return true; //è®¿é—®ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨æˆ–èµ„æº &#125; @Override public void postHandle(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, ModelAndView modelAndView) throws Exception &#123; System.out.println("postHandle:è®¿é—®åˆ°æ­£ç¡®çš„è§†å›¾ä¹‹å‰"); &#125; @Override public void afterCompletion(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Object o, Exception e) throws Exception &#123; System.out.println("afterCompletion:JSPé¡µé¢åŠ è½½å®Œæ¯•ä¹‹åæ‰§è¡Œ"); &#125;&#125; 2.é…ç½®æ–‡ä»¶åœ¨springmvc.xmlä¸­åŠ å…¥ 12345678910111213&lt;!--7.é…ç½®è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨--&gt;&lt;mvc:interceptors&gt; &lt;!--ä¸‹é¢è¿™ä¸ªå¯ä»¥æœ‰å¤šä¸ª--&gt; &lt;mvc:interceptor&gt; &lt;!--æ‹¦æˆªçš„è·¯å¾„ï¼Œç±»ä¼¼url-patterns--&gt; &lt;mvc:mapping path="/sys/**"/&gt; &lt;mvc:mapping path="/vip/**"/&gt; &lt;!--æ’é™¤è·¯å¾„ï¼Œä»¥ä¸‹è·¯å¾„ä¸ç»è¿‡æ‹¦æˆªå™¨å¤„ç†--&gt; &lt;mvc:exclude-mapping path="/vip/test02/"/&gt; &lt;!--ä½¿ç”¨å“ªä¸ªæ‹¦æˆªå™¨å¤„ç†--&gt; &lt;bean class="com.hs.interceptor.MyInterceptor"/&gt; &lt;/mvc:interceptor&gt;&lt;/mvc:interceptors&gt; 3.æ–°å»ºcontrollerDemoController.java 123456789101112131415161718192021package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;@Controllerpublic class DemoController &#123; @GetMapping("/sys/test01") public String test01() &#123; System.out.println("Controllerå±‚test01æ–¹æ³•"); return "jsp/result01"; &#125; @GetMapping("/vip/test02") public String test02() &#123; System.out.println("Controllerå±‚test02æ–¹æ³•"); return "jsp/result02"; &#125;&#125; 4.é¡µé¢ä»£ç result01.jsp 12345678910&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;% System.out.println("JSP-result01é¡µé¢");%&gt;&lt;h2&gt;resulet01.jsp&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt; result02.jsp 12345678910&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;% System.out.println("JSP-result02é¡µé¢");%&gt;&lt;h2&gt;resulet02.jsp&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt; æµ‹è¯•ï¼Œåœ¨æµè§ˆå™¨ç½‘å€æ ä¾æ¬¡è¾“å…¥/sys/test01ï¼Œ/vip/test02ï¼ŒæŸ¥çœ‹æ§åˆ¶å°è¾“å‡º 4.å®ç°ä¸€ä¸ªç™»å½•æ‹¦æˆªå™¨é…ç½®springmvc.xml123456&lt;!--ç™»å½•è®¾ç½®çš„æ‹¦æˆªå™¨--&gt;&lt;mvc:interceptor&gt; &lt;mvc:mapping path="/sys/**"/&gt; &lt;mvc:exclude-mapping path="/sys/login"/&gt; &lt;bean class="com.hs.interceptor.LoginInterceptor"/&gt;&lt;/mvc:interceptor&gt; LoginController.java12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.bind.annotation.RequestMapping;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpSession;@Controller@RequestMapping("/sys")public class LoginController &#123; /** * åœ¨åœ°å€æ è¾“å…¥/sys/login è¿›è¡Œè¯·æ±‚è½¬å‘è·³è½¬é¡µé¢ * * @return */ @GetMapping("/login") public String login() &#123; return "jsp/login"; &#125; /** * è¡¨å•æäº¤éªŒè¯ï¼Œå­˜å…¥session * * @param account * @param request * @return */ @PostMapping("/login") public String login(String account,HttpServletRequest request)&#123; System.out.println(account); HttpSession session = request.getSession(); if("admin".equals(account))&#123; session.setAttribute("session_user", account); //redirecté‡å®šå‘è·³åˆ°å¦å¤–ä¸€ä¸ªcontrolleré‡Œ return "redirect:/sys/main"; &#125; return "jsp/login"; &#125; /** * ç™»å½•æˆåŠŸé‡å®šå‘åˆ°è¿™ä¸ªcontrollerï¼Œç„¶åè¿™ä¸ªcontrollerè¯·æ±‚è½¬å‘åˆ°ä¸€ä¸ªé¡µé¢ * @return */ @GetMapping("/main") public String main()&#123; return "jsp/result01"; &#125;&#125; login.jsp1234&lt;form action="login" method="post"&gt; &lt;input type="text" name="account"&gt; &lt;button&gt;ç™»å½•&lt;/button&gt;&lt;/form&gt; è¿™é‡Œæœ‰ä¸€ä¸ªå¾ˆå¤§çš„å‘ï¼Œè‡ªå·±çº ç»“äº†å¾ˆä¹…ï¼Œactionçš„è·¯å¾„é—®é¢˜ï¼ï¼ï¼ å¦‚æœå†™sys/loginæ˜¯ç»å¯¹è·¯å¾„ï¼Œloginç›¸å¯¹è·¯å¾„ï¼Œå› ä¸ºè¯·æ±‚è½¬å‘åˆ°login.jsp,ä½†æ˜¯ç½‘å€æ è¿˜æ˜¯åœ¨sysè¿™å±‚ï¼Œè¡¨å•æäº¤è¦åˆ°loginé‚£ä¸ªï¼Œè¦ä¸ç„¶å°±ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¦ä¸ç„¶å°±æ˜¯ç»å¯¹è·¯å¾„ï¼Œç›¸å¯¹ç›´æ¥loginå°±è¡Œï¼Œç»å¯¹è·¯å¾„å°±æ˜¯è¦è¿™æ ·å†™ 123456789101112131415161718192021222324252627282930313233&lt;%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%&gt;&lt;% //é¡¹ç›®çš„å‘å¸ƒè·¯å¾„ï¼Œä¾‹å¦‚: /rabc String path = request.getContextPath(); /* å…¨è·¯å¾„ï¼Œå½¢å¼å¦‚ä¸‹: http://127.0.0.1:8001/rbac/ request.getScheme() â€”â€”&gt; http è·å–åè®® request.getServerName() --&gt; 127.0.0.1 è·å–æœåŠ¡å request.getServerPort() --&gt; 8001 è·å–ç«¯å£å· path --&gt; /rbac è·å–è®¿é—®çš„è·¯å¾„ è·¯ */ String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";%&gt;&lt;%-- &lt;base/&gt;æ ‡ç­¾è§£å†³è·¯å¾„é—®é¢˜ å‚è€ƒæ–‡ç« :http://www.cnblogs.com/muqianying/archive/2012/03/16/2400280.html--%&gt;&lt;!DOCTYPE HTML&gt;&lt;html&gt;&lt;head&gt; &lt;base href="&lt;%=basePath%&gt;"&gt; &lt;meta charset="UTF-8"&gt; &lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;ç™»å½•&lt;/h2&gt;&lt;%--actionçš„è·¯å¾„é—®é¢˜ï¼Œsys/loginç»å¯¹è·¯å¾„ï¼Œloginç›¸å¯¹è·¯å¾„ï¼Œå› ä¸ºè¯·æ±‚è½¬å‘åˆ°login.jsp,ä½†æ˜¯ç½‘å€æ è¿˜æ˜¯åœ¨sysè¿™å±‚ï¼Œè¡¨å•æäº¤è¦åˆ°loginé‚£ä¸ªï¼Œè¦ä¸ç„¶å°±ç”¨ç›¸å¯¹è·¯å¾„ï¼Œè¦ä¸ç„¶å°±æ˜¯ç»å¯¹è·¯å¾„ï¼Œç›¸å¯¹ç›´æ¥loginå°±è¡Œï¼Œç»å¯¹å°±æ˜¯è¿™æ ·ä¸Šé¢é‚£ä¸€å¤§å †--%&gt;&lt;form action="sys/login" method="post"&gt; &lt;input type="text" name="account"&gt; &lt;button&gt;ç™»å½•&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; LoginInterceptor.javaï¼Œç™»å½•æ‹¦æˆªå™¨1234567891011121314151617181920212223242526272829303132333435package com.hs.interceptor;import org.springframework.web.servlet.handler.HandlerInterceptorAdapter;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import javax.servlet.http.HttpSession;import java.io.PrintWriter;/** * ç™»å½•æ‹¦æˆªå™¨ */public class LoginInterceptor extends HandlerInterceptorAdapter &#123; @Override public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123; //1.è·å–HttpSession HttpSession session = request.getSession(); //2.åˆ¤æ–­æ˜¯å¦ç™»å½• if (session.getAttribute("session_user") == null) &#123; //3.é˜²æ­¢æµè§ˆå™¨çš„åé€€åŠŸèƒ½ response.setContentType("text/html;charset=UTF-8"); PrintWriter out = response.getWriter(); out.write("&lt;script&gt;"); out.write("alert('æ‚¨è¿˜æ²¡æœ‰ç™»å½•è¿‡è¯¥ç³»ç»Ÿï¼Œè¯·ç™»å½•ï¼ï¼ï¼');"); out.write("window.top.location.href='"+request.getContextPath()+"/sys/login'"); out.write("&lt;/script&gt;"); out.flush(); out.close(); return false; &#125; return true; &#125;&#125;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆåï¼‰å¼‚å¸¸å¤„ç†ä¸“é¢˜]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%8D%81%EF%BC%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E4%B8%93%E9%A2%98%2F</url>
    <content type="text"><![CDATA[é‡è§å¼‚å¸¸è·³è½¬åˆ°è‡ªå·±è®¾ç½®çš„é¡µé¢ï¼Œæ³¨è§£æ–¹å¼å¤„ç†å±€éƒ¨å¼‚å¸¸ï¼Œç›‘å¬Controllerç±»çš„å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œspringmvcé…ç½®ç»Ÿä¸€çš„ç®€å•å¼‚å¸¸å¤„ç†ï¼Œç›‘å¬æ‰€æœ‰çš„é¡µé¢å¼‚å¸¸ æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.å±€éƒ¨å¼‚å¸¸å¤„ç†ExceptionDemoController.java 1234567891011121314151617181920212223242526272829303132333435package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.servlet.ModelAndView;/** * ç»å…¸å¼‚å¸¸å¤„ç†_æ³¨è§£æ–¹å¼ */@Controllerpublic class ExceptionDemoController &#123; @GetMapping("/ex01") public String test01() &#123; int i = 10 / 0; //ä¼šæŠ¥è¿™ä¸ªé”™è¯¯Request processing failed; nested exception is java.lang.ArithmeticException: / by zero return "jsp/result"; &#125; /** * æ³¨è§£æ–¹å¼ï¼Œå¤„ç†å¼‚å¸¸ï¼Œç¨‹åºé‡è§è¿™ä¸ªå¼‚å¸¸ï¼Œå°±ä¼šæ‰§è¡Œæ³¨è§£é‡Œçš„å†…å®¹ï¼Œ *ä½œç”¨èŒƒå›´åªæœ‰æœ¬ç±»æœ‰æ•ˆï¼ï¼ï¼ * @return */ //é‡Œé¢å¯ä»¥å†™å¤šä¸ªå¼‚å¸¸ï¼Œç”¨,éš”å¼€ï¼Œï¼Œï¼Œå…¶å®ä¹Ÿå¯ä»¥æ€»çš„å†™ä¸€ä¸ªå¼‚å¸¸Exception,class @ExceptionHandler(value = &#123;ArithmeticException.class&#125;) public ModelAndView exception01(ArithmeticException ex) &#123; ModelAndView mav = new ModelAndView(); mav.addObject("ex", ex); mav.setViewName("jsp/error"); return mav; &#125;&#125; error.jsp 1234567891011121314151617181920&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;$&#123;requestScope.message&#125;&lt;/h2&gt;&lt;a href="javascript:void(0)" id="debug"&gt;[DEBUG]&lt;/a&gt;&lt;p id="error" style="display: none"&gt; $&#123;requestScope.ex&#125;&lt;/p&gt;&lt;script&gt; window.onload = function () &#123; document.getElementById("debug").onclick = function () &#123; document.getElementById("error").style.display = "block"; &#125; &#125;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 3.@ControllerAdviceç›‘å¬æ‰€æœ‰Controllerç±»çš„å¼‚å¸¸ExceptionAllController.java 1234567891011121314151617181920212223242526272829303132package com.hs.web;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.servlet.ModelAndView;import java.util.HashMap;import java.util.Map;/** * ControllerAdviceè¿™ä¸ªè¡¨ç¤ºç›‘å¬åªè¦æœ‰Controllerçš„ç±»çš„å¼‚å¸¸ï¼ŒåŒæ ·å¦‚æœè‡ªèº«ç±»æœ‰æ³¨è§£ç›‘å¬ï¼Œæ»¡è¶³è°è¿‘å°±è¿è¡Œè°çš„åŸåˆ™ */@ControllerAdvicepublic class ExceptionAllController &#123; /** * ç›‘å¬Controllerç±»çš„å¼‚å¸¸æ–¹å¼ä¸€ * * @param ex * @return */ @ExceptionHandler(value = &#123;Exception.class&#125;) public ModelAndView exception01(Exception ex) &#123; ModelAndView mav = new ModelAndView(); mav.addObject("ex", ex); mav.setViewName("jsp/error02"); return mav; &#125;&#125; ExceptionDemoController.javaæŠŠä¸Šé¢é‚£ä¸ªå±€éƒ¨å¤„ç†å¼‚å¸¸æ³¨é‡Šå°±è¡Œï¼Œ error02.jsp 1234567891011&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;æœ¬é¡µæ˜¯å…¨å±€çš„å¼‚å¸¸ç›‘å¬è·³è½¬é¡µé¢ï¼Œæœ¬æ¬¡ç›‘å¬åˆ°çš„å¼‚å¸¸æ˜¯$&#123;requestScope.ex&#125;&lt;/body&gt;&lt;/html&gt; 4.springmvc.xmlé…ç½®ç®€å•å¤„ç†å¼‚å¸¸springmvc.xmlåŠ å…¥ 12345678910111213141516&lt;!--6.ç»Ÿä¸€çš„ç®€å•å¼‚å¸¸å¤„ç†ï¼Œç›‘å¬æ‰€æœ‰çš„é¡µé¢å¼‚å¸¸--&gt;&lt;bean id="simpleMappingExceptionResolver" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver"&gt; &lt;!--å‡ºç°å¼‚å¸¸ï¼Œé»˜è®¤è·³è½¬çš„é¡µé¢--&gt; &lt;property name="defaultErrorView" value="jsp/error"/&gt; &lt;!--ç±»ä¼¼äºè¿™ä¸ªmav.addObject("ex", ex);--&gt; &lt;property name="exceptionAttribute" value="ex"/&gt; &lt;!--å¼‚å¸¸æ˜ å°„ï¼Œè‹¥å‡ºç°ä¸‹åˆ—å¼‚å¸¸ï¼Œå°±è·³è½¬ç›¸åº”çš„é¡µé¢ï¼Œä¸è·³é»˜è®¤çš„--&gt; &lt;property name="exceptionMappings"&gt; &lt;props&gt; &lt;prop key="ArithmeticException"&gt;jsp/error&lt;/prop&gt; &lt;prop key="ArrayIndexOutOfBoundsException"&gt;jsp/error&lt;/prop&gt; &lt;prop key="RuntimeException"&gt;jsp/error&lt;/prop&gt; &lt;prop key="Exception"&gt;jsp/error&lt;/prop&gt; &lt;/props&gt; &lt;/property&gt;&lt;/bean&gt; 5.è‡ªå®šä¹‰å¤„ç†å¼‚å¸¸ExceptionAllController.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/** * ç›‘å¬Controllerç±»çš„å¼‚å¸¸æ–¹å¼äºŒè‡ªå®šä¹‰å¼‚å¸¸ * @param ex * @param model * @return */ @ExceptionHandler(value = &#123;Exception.class&#125;) public String exception02(Exception ex, Model model) &#123; //åˆ¤æ–­ç±»çš„ç±»å‹ if (ex instanceof ArrayIndexOutOfBoundsException) &#123; model.addAttribute("message", "æ•°ç»„è¶Šç•Œå¼‚å¸¸");//ç»™å®¢æˆ·çœ‹çš„ model.addAttribute("ex", ex);// return "jsp/error"; &#125; if (ex instanceof ArithmeticException) &#123; model.addAttribute("message", "è¿ç®—å¼‚å¸¸"); //ç»™å®¢æˆ·çœ‹çš„ model.addAttribute("ex", ex);// return "jsp/error"; &#125; //å¤„ç†è‡ªå®šä¹‰å¼‚å¸¸ return "jsp/error"; &#125; /** * ç›‘å¬Controllerç±»çš„å¼‚å¸¸æ–¹å¼äºŒè‡ªå®šä¹‰å¼‚å¸¸____è¿”å›jsonæ ¼å¼ * @param ex * @return */ @ExceptionHandler(value = &#123;Exception.class&#125;) @ResponseBody public Map&lt;String,Object&gt; exception03(Exception ex) &#123; Map&lt;String, Object&gt; map = new HashMap&lt;String,Object&gt;(); //åˆ¤æ–­ç±»çš„ç±»å‹ if (ex instanceof ArrayIndexOutOfBoundsException) &#123; map.put("message", "æ•°ç»„è¶Šç•Œå¼‚å¸¸");//ç»™å®¢æˆ·çœ‹çš„ map.put("ex", ex);// return "jsp/error"; &#125; if (ex instanceof ArithmeticException) &#123; map.put("message", "è¿ç®—å¼‚å¸¸"); //ç»™å®¢æˆ·çœ‹çš„ map.put("ex", ex);// return "jsp/error"; &#125; //å¤„ç†è‡ªå®šä¹‰å¼‚å¸¸ return map; &#125; result.jsp 123456789&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;æ²¡æœ‰é‡è§æ³¨è§£é‡Œçš„å¼‚å¸¸ï¼ŒæˆåŠŸè·³è½¬&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆä¹ï¼‰æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B9%9D%EF%BC%89%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½ï¼Œåœ¨ä¸Šä¼ çš„æ“ä½œä¹‹åï¼Œè·³è½¬åˆ°ä¸‹è½½é¡µé¢ æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.ä¸Šä¼ æ“ä½œå•æ–‡ä»¶çš„ä¸Šä¼  formè¡¨å•ä¼ é€’æ•°æ® è¯·æ±‚å¿…é¡»ä¸ºPOSTè¯·æ±‚ ä½¿ç”¨äºŒè¿›åˆ¶æµçš„æ–¹å¼ä¼ é€’æ•°æ® enctype=â€multipart/form-dataâ€ æ–‡ä»¶åŸŸ &lt;input type=â€fileâ€ name=â€myfileâ€/&gt; ä¸Šä¼ çš„å·¥å…·æœ‰ä¸¤ç§ï¼š Servlet3.0 Commons-FileUpload commons-fileupload.jar commons-io.jar ç¬¬ä¸€æ­¥ï¼šé…ç½®è§£æå™¨springmvc.xmlåŠ å…¥ 1234567891011121314&lt;!--5.ä½¿ç”¨ä¸Šä¼ çš„è§£æå™¨ï¼Œå¦‚æœå‘ç°æ˜¯ä¸Šä¼ æ“ä½œï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨è¯¥è§£æå™¨å¸®æˆ‘ä»¬å®Œæˆç›¸åº”çš„æ“ä½œ--&gt;&lt;!--è¯¥IDä¸ºå›ºå®šå€¼--&gt;&lt;bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt; &lt;!--è®¾ç½®ä¸Šä¼ æ–‡ä»¶ç¼–ç --&gt; &lt;!--ç®€å†™æ–¹å¼ æ ‡ç­¾p cæ³¨å…¥ p:defaultEncoding = "UTF-8"--&gt; &lt;property name="defaultEncoding" value="UTF-8"/&gt; &lt;!--è®¾ç½®æ–‡ä»¶ä¸Šä¼ æœ€å¤§å€¼024*200å³200K--&gt; &lt;property name="maxUploadSize" value="20971520"/&gt; &lt;!--ç¼“å­˜ï¼Œè¯»å–æ–‡ä»¶åˆ°å†…å­˜ä¸­æœ€å¤§çš„å­—èŠ‚æ•°ï¼Œå¯ä»¥ä¸è®¾ç½®--&gt; &lt;property name="maxInMemorySize" value="2048"/&gt; &lt;!--å»¶æ—¶æé«˜ä¸Šä¼ æ•ˆç‡ï¼Œä¸€ä¸ªç±»ä¼¼æ‡’åŠ è½½çš„å±æ€§--&gt; &lt;property name="resolveLazily" value="true"/&gt;&lt;/bean&gt; å¦‚æœæ˜¯å›¾ç‰‡èµ„æºï¼Œè¿˜è¦é…ç½®é™æ€èµ„æºæ’é™¤ï¼Œè§ä¹‹å‰çš„ç¬”è®° ç¬¬äºŒæ­¥ï¼šå‰ç«¯é¡µé¢è¡¨å•å’Œå‰å°éªŒè¯file.jsp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;å•æ–‡ä»¶ä¸Šä¼ &lt;/h2&gt;&lt;form action="upload01" method="post" enctype="multipart/form-data" id="uploadForm"&gt; æ ‡é¢˜ï¼š&lt;input type="text" name="title"&gt; æ–‡ä»¶ï¼š&lt;input type="file" name="myfile" id="myfile"&gt;&lt;br&gt; &lt;button&gt;æ–‡ä»¶ä¸Šä¼ &lt;/button&gt;&lt;/form&gt;&lt;script type="text/javascript" src="resource/jquery.js"&gt;&lt;/script&gt;&lt;script type="text/javascript"&gt; $(function () &#123; //å…ƒç´ é€‰æ‹©å™¨ $("button").click(function () &#123; //1.è·å–ä¸Šä¼ æ–‡ä»¶çš„å¯¹è±¡ï¼Œæ˜¯æ•°ç»„ï¼Œè·å–çš„ç¬¬ä¸€ä¸ª var myfile = $("#myfile").prop("files")[0]; //2.åˆ¤æ–­æ–‡ä»¶æ˜¯å¦æœ‰ if (myfile) &#123; //3.è·å–æ–‡ä»¶åç§° var fileName = myfile.name; //4.è·å–æ–‡ä»¶çš„åç¼€åç§° var ext = fileName.substring(fileName.lastIndexOf(".") + 1); //5.è®¾ç½®å…è®¸ä¸Šä¼ çš„æ–‡ä»¶åç¼€åç§° var allowFileTypes = ["jpg", "png", "gif", "jpeg", "dmp", "rar"]; //6.è®¾ç½®ä¸€ä¸ªæ ‡è¯†ï¼Œç”¨æ¥åšåˆ¤æ–­ var flag = false; //å¾ªç¯åˆ¤æ–­ä¸Šä¼ æ ¼å¼æ˜¯å¦æ­£ç¡® for (var i = 0; i &lt; allowFileTypes.length; i++) &#123; if (ext == allowFileTypes[i]) &#123; flag = true; break; &#125; &#125; if (!flag) &#123; alert("æ‚¨ä¸Šä¼ çš„æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®ï¼Œå…è®¸çš„æ ¼å¼ä¸ºï¼š" + allowFileTypes.join(" | ")); return false; &#125; //7.åˆ¤æ–­æ–‡ä»¶çš„å¤§å° if (myfile.size &gt; 20 * 1024 * 1024) &#123; alert("æ‚¨ä¸Šä¼ çš„æ–‡ä»¶è¿‡å¤§ï¼Œè¯·é‡æ–°é€‰æ‹©") &#125; return false; //8.è¡¨å•æäº¤ $&#123;"#uploadForm"&#125;.submit(); &#125; else &#123; alert("è¯·é€‰æ‹©æ‚¨è¦ä¸Šä¼ çš„æ–‡ä»¶"); return false; &#125; &#125;) &#125;)&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç¬¬ä¸‰æ­¥ï¼šåå°å¤„ç†UploadDemoController.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667package com.hs.web;import org.apache.commons.io.FilenameUtils;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.PostMapping;import org.springframework.web.multipart.MultipartFile;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;import java.io.File;import java.io.IOException;import java.util.Date;import java.util.Random;/** * æ–‡ä»¶ä¸Šä¼ æ“ä½œ */@Controllerpublic class UploadDemoController &#123; /** * å•æ–‡ä»¶ä¸Šä¼ _æ ‡å‡†å†™æ³• * * @param title * @param myfile * @param request * @return */ @PostMapping("/upload01") public ModelAndView test01(String title, MultipartFile myfile, HttpServletRequest request) throws IOException &#123; ModelAndView mav = new ModelAndView();// System.out.println(title); //1.è·å–ä¸Šä¼ æ–‡ä»¶çš„åç§° String fileName = myfile.getOriginalFilename(); mav.addObject("fileName", fileName); //2.åˆ¤æ–­æ–‡ä»¶åç§°æ˜¯å¦æœ‰å€¼,isEmptyæ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„length=0ä¸ºtrue if (!fileName.isEmpty()) &#123; //3.è·å–æœåŠ¡å™¨çš„ç»å¯¹è·¯å¾„ String path = request.getServletContext().getRealPath("/upload"); //4.å»ºç«‹è”ç³» File folder = new File(path); //5.åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶å¤¹ if (!folder.exists()) &#123; folder.mkdirs(); //åˆ›å»ºæ–‡ä»¶å¤¹ &#125; //6,è·å–ä¸Šä¼ æ–‡ä»¶çš„åç¼€åç§° String ext = FilenameUtils.getExtension(fileName); //7.åˆ›å»ºæ–°çš„æ–‡ä»¶åç§° //String newFileName = UUID.randomUUID().toString() + "." + ext; //æˆ–è€…ç”¨æ—¶é—´æˆ³åˆ›å»ºåç§° String newFileName = new Date().getTime() + "_" + new Random().nextInt(100000) + "." + ext; mav.addObject("newFileName", newFileName);// System.out.println(newFileName); //8.æ–‡ä»¶ä¸Šä¼ ï¼ŒFile.separatorä¸ºæ–œçº¿ myfile.transferTo(new File(path + File.separator + newFileName)); &#125; mav.addObject("hs", "å’Œå°š"); mav.setViewName("jsp/result"); /*System.out.println("æµ‹è¯•æ˜¯å¦å¯ä»¥è·å–æ­£å¸¸çš„æ•°æ®:"+title); System.out.println("====="); System.out.println("æ–‡ä»¶çš„MIMEç±»å‹ :"+myfile.getContentType()); System.out.println("æ–‡ä»¶NAMEå±æ€§å¯¹åº”çš„å€¼ :"+myfile.getName()); System.out.println("ä¸Šä¼ æ–‡ä»¶çš„åç§° :"+myfile.getOriginalFilename()); System.out.println("ä¸Šä¼ æ–‡ä»¶çš„å¤§å° :"+myfile.getSize());*/ return mav; &#125;&#125; 3.ä¸‹è½½æ“ä½œæ–¹å¼ä¸€ï¼šç›´æ¥è¶…é“¾æ¥æ–¹å¼æ˜¾ç¤ºresult.jsp 12&lt;h2&gt;ç›´æ¥è¶…é“¾æ¥æ–¹å¼æ˜¾ç¤º&lt;/h2&gt;&lt;a href="upload/$&#123;newFileName &#125;"&gt;$&#123;fileName &#125;&lt;/a&gt; æ–¹å¼äºŒï¼šHTML5 ä¸­çš„downloadå±æ€§12&lt;h2&gt;HTML5 ä¸­çš„downloadå±æ€§&lt;/h2&gt;&lt;a href="upload/$&#123;newFileName &#125;" download="$&#123;fileName &#125;"&gt;$&#123;fileName &#125;&lt;/a&gt; æ–¹å¼ä¸‰ï¼šä½¿ç”¨æµçš„æ–¹æ³•â€“åˆ°æ§åˆ¶å±‚å¤„ç†12&lt;h2&gt;ä½¿ç”¨æµçš„æ–¹æ³•--åˆ°æ§åˆ¶å±‚å¤„ç†ï¼Œå‘é€è¯·æ±‚åˆ°æ§åˆ¶å™¨ï¼Œdownload&lt;/h2&gt;&lt;a href="download?newFileName=$&#123;newFileName&#125;&amp;fileName=$&#123;fileName&#125;"&gt;$&#123;fileName &#125;ä¸‹è½½&lt;/a&gt; åœ¨springmvc.xmlå£°æ˜å¤„ç†byteæ•°ç»„ï¼Œåœ¨è§£å†³@ResponseBodyåœ¨IEæµè§ˆå™¨çš„BUGé—®é¢˜ä¸Šé¢ 12&lt;!--è§£å†³ä¸‹è½½çš„æ—¶å€™è½¬æ¢é—®é¢˜,å£°æ˜å¤„ç†byteæ•°ç»„--&gt;&lt;bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/&gt; DownloadDemoController.javaå¤„ç†æµ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package com.hs.web;import org.apache.commons.io.FileUtils;import org.springframework.http.HttpHeaders;import org.springframework.http.HttpStatus;import org.springframework.http.MediaType;import org.springframework.http.ResponseEntity;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import javax.servlet.http.HttpServletRequest;import java.io.File;import java.io.IOException;/** * æ–‡ä»¶ä¸‹è½½æ“ä½œ */@Controllerpublic class DownloadDemoController &#123; /** * æ–‡ä»¶ä¸‹è½½ï¼Œä½¿ç”¨æµçš„æ–¹æ³• * * @param newFileName * @param fileName * @param request * @return * @throws IOException */ @GetMapping("/download") public ResponseEntity&lt;byte[]&gt; test02(String newFileName, String fileName, HttpServletRequest request) throws IOException &#123; //è·å–æœåŠ¡ç«¯çš„ç»å¯¹è·¯å¾„ String path = request.getServletContext().getRealPath("/upload/"); HttpHeaders headers = new HttpHeaders(); //è®¾ç½®ç›¸åº”çš„å†…å®¹ä¸ºæµ headers.setContentType(MediaType.TEXT_EVENT_STREAM); //è®¾ç½®ä¸‹è½½çš„åç§°--å’Œä¸­æ–‡ä¹±ç çš„é—®é¢˜ headers.setContentDispositionFormData("attachment", new String(fileName.getBytes("UTF-8"), "ISO8859-1") ); //æ‰¾åˆ°æ–‡ä»¶ File file = new File(path + File.separator + newFileName); return new ResponseEntity&lt;byte[]&gt;(FileUtils.readFileToByteArray(file),/*å°†æ–‡ä»¶è½¬æ¢ä¸ºbyteæ•°ç»„*/ headers, HttpStatus.CREATED); &#125;&#125;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆå…«ï¼‰æœåŠ¡ç«¯æ•°æ®ä¼ é€’å®¢æˆ·ç«¯æ˜¾ç¤º--åå°ä¼ æ•°æ®åˆ°å‰å°]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AB%EF%BC%89%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%98%BE%E7%A4%BA-%E5%90%8E%E5%8F%B0%E4%BC%A0%E6%95%B0%E6%8D%AE%E5%88%B0%E5%89%8D%E5%8F%B0%2F</url>
    <content type="text"><![CDATA[JavaWebé˜¶æ®µä¼ é€’æ•°æ®ï¼ŒModelAndViewä¼ é€’æ•°æ®ï¼Œå…¶ä»–æ–¹å¼ä¼ é€’æ•°æ®,é€šè¿‡è¯»å–ModelAndViewçš„æºç åˆ†æï¼ŒResponseEntiyè¿”å›JSONæ•°æ® - IEå’Œè°·æ­Œæµè§ˆå™¨æ­£å¸¸ï¼ŒJSONè¿”å›æ—¥æœŸå¤„ç†æ–¹å¼ æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.JavaWebé˜¶æ®µä¼ é€’æ•°æ®ModelAndViewDemoController.java 123456789101112131415161718/** * JavaWebé˜¶æ®µä¼ é€’æ•°æ® * * @param request * @param response * @throws ServletException * @throws IOException */@GetMapping("/server01")@ResponseBody //ä¸å¤„ç†public void test01(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; request.setAttribute("hs", "å’Œå°š"); request.setAttribute("class", "è®¡ç®—æœº"); request.setAttribute("number", 8); //è¯·æ±‚è½¬å‘ä¼ é€’æ•°æ®---è¿™ä¸ªæ²¡æœ‰é€šè¿‡è§†å›¾è§£æå™¨ request.getRequestDispatcher("/WEB-INF/jsp/result01.jsp").forward(request, response);&#125; result01.jsp 123456789101112&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;æ•°æ®è·å–æ–¹å¼&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope.hs&#125;&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope["class"]&#125;&lt;/h2&gt;&lt;h2&gt;$&#123;number&#125; ---é»˜è®¤æƒ…å†µä¸‹æ˜¯ä»pageContext-&gt;request-&gt;session-&gt;applicationä¸‹å¼€å§‹å¯»æ‰¾&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt; 3.ModelAndViewä¼ é€’æ•°æ®â€”æŒ‡æ˜äº†keyå€¼ModelAndViewDemoController.java 123456789101112131415161718/** * é€šè¿‡ModelAndViewä¼ é€’æ•°æ® * * @return */ @GetMapping("/server02") public ModelAndView test02() &#123; ModelAndView mav = new ModelAndView();// mav.addObject() æ²¡æœ‰æŒ‡æ˜KEY //ä¸€æ­¥ä¸€æ­¥çš„è¿½æºç ï¼Œå‘ç°ä¸€ä¸ªModelMapçš„ç±»å®ä¾‹åŒ–å¯¹è±¡.ç”¨å®ƒçš„addAttributeæ–¹æ³•æ·»åŠ ï¼ŒModelMapåˆæ˜¯ç»§æ‰¿äº†HashMap mav.addObject("title", "é€šè¿‡ModelAndViewä¼ é€’æ•°æ®"); mav.addObject("hs", "ä¸­å›½å’Œå°š"); mav.addObject("class", "è®¡ç®—æœºè®¡ç§‘"); mav.addObject("number", 11); mav.setViewName("jsp/result02"); //è¯·æ±‚è½¬å‘ï¼Œé€šè¿‡è§†å›¾è§£æå™¨ return mav; &#125; result02.jsp 123456789101112&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;$&#123;title&#125;&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope.hs&#125; --æŒ‡æ˜èŒƒå›´äº†çš„&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope["class"]&#125;&lt;/h2&gt;&lt;h2&gt;$&#123;number&#125; ---é»˜è®¤æƒ…å†µä¸‹æ˜¯ä»pageContext-&gt;request-&gt;session-&gt;applicationä¸‹å¼€å§‹å¯»æ‰¾&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt; 4.ModelAndViewä¼ é€’æ•°æ®â€”æ²¡æœ‰æŒ‡æ˜keyå€¼ModelAndViewDemoController.java 123456789101112131415161718192021222324252627/** * ä¼ é€’æ•°æ®æ²¡æœ‰æŒ‡æ˜KEY_é»˜è®¤KEYçš„è§„åˆ™ * * @return */ @GetMapping("/server03") public ModelAndView test03() &#123; ModelAndView mav = new ModelAndView(); mav.addObject("integer", 100); mav.addObject(200); mav.addObject("string", "å­—ç¬¦ä¸²"); mav.addObject("æ‚Ÿç©º");// è§„åˆ™ï¼šå®¢æˆ·ç«¯è·å–æ²¡æœ‰åŠ keyçš„æ•°æ®ï¼Œé»˜è®¤keyæ­£å¸¸æ˜¯æ•°æ®å¯¹åº”çš„ç±»å‹çš„é¦–å­—æ¯å°å†™ Integer---integer String---string// ä¸¤ä¸ªkeyä¸€æ ·çš„,åªè®¤æœ€åä¸€ä¸ª// doubleæ˜¯å…³é”®å­—ï¼Œä¸èƒ½$&#123;double&#125;,åªèƒ½$&#123;requestScope["double"] &#125; double a = 123.123; mav.addObject(a); User user = new User(); user.setMydate(new Date()); mav.addObject(user); mav.setViewName("jsp/result03"); //è¯·æ±‚è½¬å‘ï¼Œé€šè¿‡è§†å›¾è§£æå™¨ return mav; &#125; result03.jsp 12345678910111213141516&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt_rt" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;$&#123;requestScope.integer &#125;&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope.string &#125;&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope["double"] &#125;-----å› ä¸ºdoubleæ˜¯å…³é”®å­—ï¼Œæ‰€ä»¥ä¸èƒ½.double&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope.user.mydate &#125;&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope["user"]["mydate"] &#125;&lt;/h2&gt;æ—¥æœŸæ ¼å¼åŒ–&lt;fmt:formatDate value="$&#123;user.mydate &#125;" pattern="yyyy-MM-dd HH:mm:ss"/&gt;&lt;/body&gt;&lt;/html&gt; 5.å…¶ä»–æ–¹å¼ä¼ é€’æ•°æ®,é€šè¿‡è¯»å–ModelAndViewçš„æºç åˆ†æOtherDemoController.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.ui.ModelMap;import org.springframework.web.bind.annotation.GetMapping;import java.util.Map;/** * å…¶ä»–çš„æ–¹å¼ä¼ é€’æ•°æ® */@Controllerpublic class OtherDemoController &#123; /** *å…¶ä»–1--é€šè¿‡Mapåœ¨å½¢å‚ä¸­å®ä¾‹åŒ– * @param map * @return */ @GetMapping("/server04") public String test01(Map&lt;String,Object&gt; map) &#123; map.put("title", "Mapåœ¨å½¢å‚ä¸­å®šä¹‰ï¼Œå¯ä»¥ä¼ é€’æ•°æ®"); map.put("hs", "123"); map.put("class", "12222"); map.put("number", 1111); return "jsp/result04"; //é€šè¿‡è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ &#125; /** * å…¶ä»–2--é€šè¿‡ModelMapåœ¨å½¢å‚ä¸­å®ä¾‹åŒ– * @param modelMap * @return */ @GetMapping("/server05") public String test02(ModelMap modelMap) &#123; modelMap.addAttribute("title", "ModelMapè¿›è¡Œä¼ é€’æ•°æ®"); modelMap.addAttribute("hs", "123"); modelMap.addAttribute("class", "12222"); modelMap.addAttribute("number", 1111); return "jsp/result04"; //é€šè¿‡è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ &#125; /** * å…¶ä»–3--é€šè¿‡Modelæ¥å£ä¼ é€’æ•°æ® * @param model * @return */ @GetMapping("/server06") public String test03(Model model) &#123; model.addAttribute("title", "Modelæ¥å£è¿›è¡Œä¼ é€’æ•°æ®"); model.addAttribute("hs", "123"); model.addAttribute("class", "12222"); model.addAttribute("number", 1111); return "jsp/result04"; //é€šè¿‡è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ &#125;&#125; result04.jsp 123456789101112&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;$&#123;title&#125;&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope.hs&#125; --æŒ‡æ˜èŒƒå›´äº†çš„&lt;/h2&gt;&lt;h2&gt;$&#123;requestScope["class"]&#125;&lt;/h2&gt;&lt;h2&gt;$&#123;number&#125; ---é»˜è®¤æƒ…å†µä¸‹æ˜¯ä»pageContext-&gt;request-&gt;session-&gt;applicationä¸‹å¼€å§‹å¯»æ‰¾&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt; 6.ResponseEntiyè¿”å›JSONæ•°æ® - IEå’Œè°·æ­Œæµè§ˆå™¨æ­£å¸¸JsonDemoController.java 1234567891011121314151617181920212223242526272829303132333435363738/** * JSONæ ¼å¼1ï¼šResponseEntityè¿”å›JSONæ•°æ®æ ¼å¼ * * @return */@GetMapping("/json01")public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; test01() &#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("name", "é©¬è€æ¿"); map.put("sex", "ç”·"); HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.TEXT_HTML); //è®¾ç½®å“åº”æ–¹å¼,åœ¨HTMLé¡µé¢ä¸Šæ˜¾ç¤º return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(map, headers, HttpStatus.CREATED);&#125;/** * JSONæ ¼å¼1ï¼šç”¨Listå­˜å¤šæ¡JSONæ•°æ® * * @return */@GetMapping("/json02")public ResponseEntity&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt; test02() &#123; List&lt;Map&lt;String,Object&gt;&gt; tempList = new ArrayList&lt;Map&lt;String,Object&gt;&gt;(); Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("name", "é©¬è€æ¿"); map.put("sex", "ç”·"); tempList.add(map); map = new HashMap&lt;String, Object&gt;(); map.put("name", "æ‚Ÿç©º"); map.put("sex", "ç”·"); tempList.add(map); HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.TEXT_HTML); return new ResponseEntity&lt;List&lt;Map&lt;String, Object&gt;&gt;&gt;(tempList, headers, HttpStatus.CREATED);&#125; 7.@ResponseBodyæ¨èæ–¹å¼è¿”å›jsonæ•°æ®JsonDemoController.java 123456789101112131415161718192021222324252627282930313233/** * JSONæ ¼å¼3ï¼šç®€å†™æ–¹å¼ * * @return */@GetMapping("/json03")@ResponseBody //æŠŠjavaæ•°æ®è½¬æ¢ä¸ºJSONçš„å­—ç¬¦ä¸² å­˜åœ¨BUG(IEæµè§ˆå™¨ä¸å¥½ä½¿ï¼Œè§£å†³åŠæ³•åœ¨springmvc.xmlé…ç½®)public Map&lt;String, Object&gt; test03() &#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("name", "é©¬è€æ¿"); map.put("sex", "ç”·"); return map;&#125;/** * JSONæ ¼å¼4ï¼šç®€å†™æ–¹å¼ * * @return */@GetMapping("/json04")public @ResponseBody List&lt;Map&lt;String, Object&gt;&gt; test04() &#123; List&lt;Map&lt;String,Object&gt;&gt; tempList = new ArrayList&lt;Map&lt;String,Object&gt;&gt;(); Map&lt;String,Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("name", "é©¬è€æ¿"); map.put("sex", "ç”·"); tempList.add(map); map = new HashMap&lt;String, Object&gt;(); map.put("name", "æ‚Ÿç©º"); map.put("sex", "ç”·"); tempList.add(map); return tempList;&#125; è§£å†³BUGé—®é¢˜åœ¨springmvc.xmlé…ç½® 1234567891011121314151617&lt;!--1.å¯åŠ¨SpringMVCæ³¨è§£--&gt;&lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults="true"&gt; &lt;!--è§£å†³@ResponseBodyåœ¨IEæµè§ˆå™¨çš„BUGé—®é¢˜--&gt; &lt;bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"&gt; &lt;property name="prettyPrint" value="true"/&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;text/html;charset=UTF-8&lt;/value&gt; &lt;value&gt;text/plan;charset=UTF-8&lt;/value&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; 8.JSONè¿”å›æ—¥æœŸå¤„ç†æ–¹å¼JsonDemoController.java 1234567891011/** * å¤„ç†æ—¥æœŸæ ¼å¼ï¼Œéœ€è¦åœ¨userçš„dateå±æ€§ä¸‹åŠ æ³¨è§£,æˆ–è€…springmvcé…ç½®å…¨å±€æ—¥æœŸå¤„ç† * @return */@GetMapping("/json05")@ResponseBodypublic User test05() &#123; User user = new User(); user.setMydate(new Date()); return user;&#125; User.javaä¸‹è®¾ç½® 1234567891011121314151617181920212223242526package com.hs.model;import java.util.Date;public class User &#123; // ç›¸æ”¾å“ªé‡Œå°±æ”¾å“ªé‡Œï¼Œpattern:æ ¼å¼ï¼Œtimezone:æ—¶åŒºï¼Œè¿™æ˜¯è®¾ç½®ä¸œå…«åŒº// @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss") Date mydate; // @JsonFormat(pattern = "yyyy-MM-dd HH:mm:ss",timezone = "GMT+8")// @JsonFormat(pattern = "yyyy-MM-dd",timezone = "GMT+8") public Date getMydate() &#123; return mydate; &#125; public void setMydate(Date mydate) &#123; this.mydate = mydate; &#125; @Override public String toString() &#123; return "User&#123;" + "mydate=" + mydate + '&#125;'; &#125;&#125; springmvc.xmlä¸­é…ç½®å…¨å±€çš„ 12345678910111213141516171819202122232425262728293031&lt;!--1.å¯åŠ¨SpringMVCæ³¨è§£--&gt;&lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults="true"&gt; &lt;!--è§£å†³@ResponseBodyåœ¨IEæµè§ˆå™¨çš„BUGé—®é¢˜--&gt; &lt;bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"&gt; &lt;property name="prettyPrint" value="true"/&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;text/html;charset=UTF-8&lt;/value&gt; &lt;value&gt;text/plan;charset=UTF-8&lt;/value&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;!--è§£å†³Jacksonè½¬æ¢çš„æ—¥æœŸé—®é¢˜ï¼Œä¸€åŠ³æ°¸é€¸çš„åŠæ³•ï¼Œå…¨å±€è®¾ç½®ï¼Œä½†æ˜¯å’ŒæŒä¹…åŒ–ç±»ä¸­çš„æ³¨è§£æ¯”ï¼Œè°è¿‘æ›´é€‰æ‹©è°--&gt; &lt;property name="objectMapper"&gt; &lt;!--propertyï¼šxxxå±æ€§--&gt; &lt;bean class="com.fasterxml.jackson.databind.ObjectMapper"&gt; &lt;!--beanï¼šxxå®ä¾‹åŒ–äº†--&gt; &lt;property name="dateFormat"&gt; &lt;bean class="java.text.SimpleDateFormat"&gt; &lt;!--yyyy-MM-dd HH:mm:ssåªèƒ½è¿™ä¹ˆå†™ï¼Œå¦‚æœä¸æ˜¾ç¤ºå°æ—¶ï¼Œå°±éœ€è¦åœ¨æŒä¹…åŒ–ç±»ä¸­æ³¨è§£è®¾ç½®--&gt; &lt;constructor-arg type="java.lang.String" value="yyyy-MM-dd HH:mm:ss"/&gt; &lt;!--constructor-argï¼šxxæ„é€ å‡½æ•°--&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt;&lt;/mvc:annotation-driven&gt;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰å®¢æˆ·ç«¯æ•°æ®ä¼ é€’ä¸­æ–‡ä¹±ç çš„è§£å†³æ–¹å¼]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%83%EF%BC%89%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[tomcat7ä¸­getå’Œpostè¯·æ±‚ä¸­æ–‡ä¹±ç è§£å†³æ–¹æ¡ˆï¼Œtomcat8ä¸­getè¯·æ±‚ä¸­æ–‡ä¸ä¼šä¹±ç ï¼Œpostè¯·æ±‚ä¼šä¹±ç  æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.tomcat7 getè¯·æ±‚ä¸­æ–‡ä¹±ç â€”ä¼ ç»Ÿæ–¹å¼demo01.jsp 12345&lt;h2&gt;GETè¯·æ±‚ä¸­æ–‡ä¹±ç -ä¼ ç»Ÿæ–¹å¼è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;&lt;form action="client01" method="get"&gt; &lt;input type="text" name="user_name"&gt; &lt;button&gt;GETè¯·æ±‚&lt;/button&gt;&lt;/form&gt; UTFDemoController.java 12345678910111213141516171819 /** * Tomcat7ä¸­GETè¯·æ±‚æ–¹å¼ä¸­æ–‡ä¹±ç -ä¼ ç»Ÿæ–¹å¼è§£å†³æ–¹æ¡ˆ * @param user_name * @return * @throws UnsupportedEncodingException */// @PostMapping("/client01") @GetMapping("/client01") public ModelAndView test01(String user_name) throws UnsupportedEncodingException &#123; //éªŒè¯ç¼–ç æ ¼å¼ //boolean equals = user_name.equals(new String(user_name.getBytes("UTF-8"), "UTF-8")); byte[] a = user_name.getBytes("ISO8859-1"); //ç”¨ç»™å®šçš„ç¼–ç ï¼ŒæŠŠå­—ç¬¦ä¸²ç¼–ç åˆ°byteåºåˆ— String b = new String(a,"UTF-8"); //é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„ç¼–ç è§£ç æŒ‡å®šçš„ byte æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ System.out.println(b); //ç®€å†™// user_name = new String(user_name.getBytes("ISO8859-1"),"UTF-8"); //tomcat8 getè¯·æ±‚é»˜è®¤ä¸ºUTF-8 return null; &#125; 3.tomcat7 getè¯·æ±‚ä¸­æ–‡ä¹±ç â€”ä¿®æ”¹tomcatæœåŠ¡é‡Œçš„sever.xmlæ–‡ä»¶(å…¨å±€ä¿®æ”¹ï¼Œæ¨è)ä¿®æ”¹è¯¥æ–‡ä»¶åï¼Œä¼ ç»Ÿçš„æ–¹å¼æ— æ³•è½¬æ¢æˆåŠŸäº†ï¼Œåœ¨ä½ çš„tomcatæœåŠ¡é‡Œçš„sever.xmlæ–‡ä»¶æ‰¾åˆ°è¿™ä¸ª 1&lt;Connector connectionTimeout=&quot;20000&quot; port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; redirectPort=&quot;8443&quot;/&gt; åŠ å…¥ URIEncoding=â€UTF-8â€ 4.postè¯·æ±‚ä¿®æ”¹web.xmlé…ç½®ç¼–ç è¿‡æ»¤å™¨ 12345678910111213141516171819202122&lt;!--1.è§£å†³POSTè¯·æ±‚çš„ä¸­æ–‡ä¹±ç é—®é¢˜--&gt;&lt;filter&gt; &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt; &lt;!--è®¾ç½®è¿‡æ»¤å™¨çš„ä¸€äº›å˜é‡çš„å€¼--&gt; &lt;init-param&gt; &lt;param-name&gt;encoding&lt;/param-name&gt; &lt;param-value&gt;UTF-8&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceRequestEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt; &lt;init-param&gt; &lt;param-name&gt;forceResponseEncoding&lt;/param-name&gt; &lt;param-value&gt;true&lt;/param-value&gt; &lt;/init-param&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt; &lt;url-pattern&gt;/*&lt;/url-pattern&gt;&lt;/filter-mapping&gt; demo01.jsp 12345&lt;h2&gt;POSTè¯·æ±‚ä¸­æ–‡ä¹±ç -åœ¨web.xmlä¸­é…ç½®è¿‡æ»¤å™¨&lt;/h2&gt;&lt;form action="client03" method="post"&gt; &lt;input type="text" name="user_name"&gt; &lt;button&gt;postè¯·æ±‚&lt;/button&gt;&lt;/form&gt;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰å®¢æˆ·ç«¯æ•°æ®çš„ç±»å‹è½¬æ¢]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%2F</url>
    <content type="text"><![CDATA[åå°æ¥æ”¶å‰å°ä¼ æ¥çš„æ—¥æœŸç±»å‹ï¼Œ@DateTimeFormatæ³¨è§£ç®€å•ä½¿ç”¨ï¼Œè®¤è¯†æ³¨è§£InitBindeï¼Œå¯¹è¦è½¬æ¢çš„å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œå¤„ç†ï¼Œ æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.@DateTimeFormatæ³¨è§£ç®€å•ä½¿ç”¨demo01.jsp 12345678910111213&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;ä¼ é€’æ—¥æœŸçš„å­—ç¬¦ä¸²&lt;/h2&gt;&lt;form action="client01" method="get"&gt; &lt;input type="text" name="mydate"&gt; &lt;button&gt;æ—¥æœŸå­—ç¬¦ä¸²&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; DateDemoController.java 12345678910111213141516/** * æ¥æ”¶æ—¥æœŸç±»å‹çš„å®¢æˆ·ç«¯ä¼ é€’æ•°æ®ï¼Œç®€å†™æ–¹å¼ * æ²¡æœ‰å†™æ³¨è§£ï¼Œå°±å†™ 2018/8/14 15:31:20 * å†™äº†æ³¨è§£å°±æŒ‰ç…§ä»–çš„æ ¼å¼æ¥ï¼Œå¦‚æœæ²¡æœ‰å†™æ—¶é—´ï¼Œä½ è¾“å…¥äº†æ—¶é—´ä¹Ÿä¸ä¼šè®¤ * å¦‚æœä¸€ä¸ªç±»ä¸­ä¹Ÿæœ‰è¿™æ ·çš„å±æ€§ï¼ŒåŒæ—¶æ¥æ”¶è¿™ä¸ªæ—¶é—´ï¼Œæ³¨è§£é‡Œä¹Ÿè¦å†™æ ¼å¼ * * @return */@GetMapping(&quot;/client01&quot;)public ModelAndView test01( @DateTimeFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;) Date mydate, User user) &#123; System.out.println(mydate); System.out.println(user); return null;&#125; User.java 123456789101112131415161718192021222324252627package com.hs.model;import org.springframework.format.annotation.DateTimeFormat;import java.util.Date;public class User &#123;//æ³¨è§£æ”¾å“ªï¼Œæ ¹æ®å…¬å¸è¦æ±‚// @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") Date mydate; public Date getMydate() &#123; return mydate; &#125; @DateTimeFormat(pattern = "yyyy-MM-dd HH:mm:ss") public void setMydate(Date mydate) &#123; this.mydate = mydate; &#125; @Override public String toString() &#123; return "User&#123;" + "mydate=" + mydate + '&#125;'; &#125;&#125; 3.è®¤è¯†æ³¨è§£InitBindeInitBinderDemoController.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package com.hs.web;import com.hs.model.User;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.InitBinder;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.util.Map;/** * è®¤è¯†æ³¨è§£InitBinder */@Controllerpublic class InitBinderDemoController &#123; @GetMapping("/test01") public ModelAndView test01() &#123; System.out.println("test01"); return null; &#125; @GetMapping("/test02") public ModelAndView test02(HttpServletRequest request, HttpServletResponse response) &#123; System.out.println("test02"); return null; &#125; @GetMapping("/test03") public ModelAndView test03(Map&lt;String, Object&gt; map) &#123; System.out.println("test03"); return null; &#125; @GetMapping("/test04") public ModelAndView test04(Integer user_id) &#123; System.out.println("test04"); return null; &#125; @GetMapping("/test05") public ModelAndView test05(String name, Integer user_id) &#123; System.out.println("test05"); return null; &#125; @GetMapping("/test06") public ModelAndView test06(User user) &#123; System.out.println("test06"); return null; &#125; @GetMapping("/test07") public ModelAndView test07(User user, String name) &#123; System.out.println("test07"); return null; &#125; @InitBinder public void init01() &#123; System.out.println("éœ€è¦çŸ¥é“ä»€ä¹ˆæƒ…å†µä¸‹æ‰§è¡Œï¼Ÿ"); &#125;&#125; è¿è¡Œä¹‹åå‘ç°ï¼Œ04ï¼Œ06éƒ½æ˜¯è°ƒç”¨äº†1æ¬¡ï¼Œ05,07è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œå› ä¸ºè¿™äº›çš„å½¢å‚ï¼Œè¢«ä¼ é€’è¿‡æ¥ï¼Œéƒ½è¦è¿›è¡Œè½¬æ¢ï¼Œæ‰€ä»¥å°±è°ƒç”¨äº†@InitBinderæ³¨è§£ï¼šå½“ä¼ é€’è¿‡æ¥çš„æ•°æ®è¦è¿›è¡Œè½¬æ¢çš„æ—¶å€™æ‰è°ƒç”¨ã€‚ 4.å¯¹è¦è½¬æ¢çš„å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œå¤„ç†StringDemoController.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.WebDataBinder;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.InitBinder;import org.springframework.web.servlet.ModelAndView;import java.beans.PropertyEditorSupport;import java.text.DateFormat;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.Date;/** * å¯¹è¦è½¬æ¢çš„å­—ç¬¦ä¸²ç±»å‹è¿›è¡Œå¤„ç† */@Controllerpublic class StringDemoController &#123; @GetMapping("hs01") public ModelAndView test01(Integer user_id) &#123; System.out.println(user_id); return null; &#125; @GetMapping("hs02") public ModelAndView test02(String user_name) &#123; System.out.println(user_name); return null; &#125; @GetMapping("hs03") public ModelAndView test03(String user_name, Integer user_id) &#123; System.out.println(user_name); System.out.println(user_id); return null; &#125; /** * æ—¶é—´æ ¼å¼çš„è½¬æ¢ * * @param date1 * @return */ @GetMapping("hs04") public ModelAndView test04(Date date1) &#123; System.out.println("æ—¥æœŸä¸º" + date1); return null; &#125; @InitBinder public void init01(WebDataBinder binder) &#123; //ç›‘æ§è¦è½¬æ¢(String)çš„æ•°æ®ç±»å‹ binder.registerCustomEditor(String.class, /*åŒ¿åå¯¹è±¡*/new PropertyEditorSupport() &#123; //é‡å†™äº†setAsTextæ–¹æ³• @Override public void setAsText(String text) throws IllegalArgumentException &#123; System.out.println("ä¹‹å‰æ¥æ”¶çš„å€¼----" + text); //å¯¹æ•°æ®é‡æ–°å¤„ç†èµ‹å€¼ï¼Œèµ‹å€¼ç»™å½¢å‚user_name this.setValue("å¯¹æ•°æ®å¤„ç†ä¹‹åçš„å€¼----" + text + "æ‚Ÿç©º"); &#125; &#125;); //ç›‘æ§Integerç±»å‹ binder.registerCustomEditor(Integer.class, new PropertyEditorSupport() &#123; @Override public void setAsText(String text) throws IllegalArgumentException &#123; System.out.println(text); this.setValue("999"); &#125; &#125;); &#125; @InitBinder public void init02(WebDataBinder binder) &#123; binder.registerCustomEditor(Date.class, new PropertyEditorSupport() &#123; @Override public void setAsText(String text) throws IllegalArgumentException &#123; DateFormat df = new SimpleDateFormat("yyyy-MM-dd"); try &#123; Date date = df.parse(text); this.setValue(date); &#125; catch (ParseException e) &#123; e.printStackTrace(); &#125; &#125; &#125;); &#125;&#125; 5.ç”¨åˆ«äººå°è£…å¥½çš„å·¥å…·ç±»å®ç°å„ç§æ—¥æœŸç±»å‹éƒ½å¯ä»¥è½¬æ¢éœ€è¦commons-lang3-3.4.jarè¿™ä¸ªåŒ… DateHelper.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329package com.hs.util;import java.text.ParseException;import java.util.Calendar;import java.util.Date;import org.apache.commons.lang3.time.DateFormatUtils;import org.apache.commons.lang3.time.DateUtils;/** * æ‰©å±•DateUtilsçš„åŸºç¡€ä¸Šæ‰©å±•å±äºè‡ªå·±çš„å·¥å…·ç±» *é€ è½®å­ * @author åˆ˜æ–‡é“­ * @see com.shxt.commons.helper.DateHelper * @since 1.0 */public final class DateHelper extends DateUtils &#123; private final static String[] parsePatterns = &#123;"yyyy-MM-dd", "yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm", "yyyy-MM", "yyyy/MM/dd", "yyyy/MM/dd HH:mm:ss", "yyyy/MM/dd HH:mm", "yyyy/MM", "yyyy.MM.dd", "yyyy.MM.dd HH:mm:ss", "yyyy.MM.dd HH:mm", "yyyy.MM"&#125;; private final static String DEFAULT_DATE_TIME = "yyyy-MM-dd HH:mm:dd"; private final static String DEFAULT_DATE = "yyyy-MM-dd"; private final static String DEFAULT_TIME = "HH:mm:dd"; private final static String DEFAULT_YEAR = "yyyy"; private final static String DEFAULT_MONTH = "MM"; private final static String DEFAULT_DAY = "dd"; private final static String DEFAULT_E = "E"; private static Date nowDate = new Date(); private static Calendar calendar = Calendar.getInstance(); /** * java.util.Dateè½¬æ¢æ ¼å¼ï¼ˆyyyy-MM-ddï¼‰ * * @return String */ public static String getCurrentDate() &#123; return DateHelper.getDefDateTime(DEFAULT_DATE); &#125; /** * java.util.Dateè½¬æ¢æ ¼å¼ï¼ˆHH:mm:ssï¼‰ * * @return String */ public static String getCurrentTime() &#123; return DateHelper.getDefDateTime(DEFAULT_TIME); &#125; /** * java.util.Dateè½¬æ¢æ ¼å¼ï¼ˆyyyy-MM-dd HH:mm:ssï¼‰ * * @return String */ public static String getCurrentDateTime() &#123; return DateHelper.getDefDateTime(DEFAULT_DATE_TIME); &#125; /** * è·å–è‡ªå®šä¹‰æ ¼å¼çš„å½“å‰æ—¥æœŸ * &lt;p&gt; * è·å–ç‰¹å®šæ ¼å¼çš„æ—¥æœŸ * &lt;/p&gt; * * @param pattern é»˜è®¤æ ¼å¼ï¼ˆyyyy-MM-ddï¼‰ å¯ä»¥ä¸ºï¼š"yyyy-MM-dd" "HH:mm:ss" "E" * @return String */ public static String getDefDateTime(String pattern) &#123; return DateFormatUtils.format(nowDate, pattern); &#125; /** * å¾—åˆ°å½“å‰å¹´ä»½å­—ç¬¦ä¸² æ ¼å¼ï¼ˆyyyyï¼‰ * * @return String */ public static String getYear() &#123; return DateHelper.getDefDateTime(DEFAULT_YEAR); &#125; /** * å¾—åˆ°å½“å‰æœˆä»½å­—ç¬¦ä¸² æ ¼å¼ï¼ˆMMï¼‰ * * @return String */ public static String getMonth() &#123; return DateHelper.getDefDateTime(DEFAULT_MONTH); &#125; /** * å¾—åˆ°å½“å¤©å­—ç¬¦ä¸² æ ¼å¼ï¼ˆddï¼‰ * * @return String */ public static String getDay() &#123; return DateHelper.getDefDateTime(DEFAULT_DAY); &#125; /** * å¾—åˆ°å½“å‰æ˜ŸæœŸå­—ç¬¦ä¸² æ ¼å¼ï¼ˆEï¼‰æ˜ŸæœŸå‡  * * @return String */ public static String getWeek() &#123; return DateHelper.getDefDateTime(DEFAULT_E); &#125; /** * è·å–æ—¥æœŸå­—ç¬¦ä¸²,java.util.Dateè½¬åŒ–ä¸ºå­—ç¬¦ä¸² * &lt;p&gt; * ä½¿ç”¨æ ¼å¼åŒ–æ•°æ®, * &lt;/p&gt; * * @param date * @param pattern é»˜è®¤æ ¼å¼ï¼ˆyyyy-MM-ddï¼‰ å¯ä»¥ä¸ºï¼š"yyyy-MM-dd" "HH:mm:ss" "E" * @return String */ public static String formatDate(Date date, String... pattern) &#123; String formatDate = null; if (pattern != null &amp;&amp; pattern.length &gt; 0) &#123; formatDate = DateFormatUtils.format(date, pattern[0].toString().trim()); &#125; else &#123; formatDate = DateFormatUtils.format(date, DEFAULT_DATE); &#125; return formatDate; &#125; /** * æ—¥æœŸå‹å­—ç¬¦ä¸²è½¬åŒ–ä¸ºæ—¥æœŸ æ ¼å¼ * &#123; "yyyy-MM-dd", "yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd HH:mm", * "yyyy/MM/dd", "yyyy/MM/dd HH:mm:ss", "yyyy/MM/dd HH:mm", * "yyyy.MM.dd", "yyyy.MM.dd HH:mm:ss", "yyyy.MM.dd HH:mm" &#125; */ public static Date parseDate(Object date_str) &#123; try &#123; if (date_str == null || String.valueOf(date_str).trim().length() == 0) &#123; return null; &#125; return DateUtils.parseDate(String.valueOf(date_str).trim(), parsePatterns); &#125; catch (ParseException pe) &#123; System.out.println("DateHelper--&gt;parseDateæ–¹æ³•æ ¼å¼åŒ–é”™è¯¯"); return null; &#125; &#125; /** * è·å–è¿‡å»çš„å¤©æ•° * * @param date * @return */ public static long pastDays(Date date) &#123; long t = new Date().getTime() - date.getTime(); return t / (24 * 60 * 60 * 1000); &#125; /** * è·å–è¿‡å»çš„å°æ—¶ * * @param date * @return */ public static long pastHour(Date date) &#123; long t = new Date().getTime() - date.getTime(); return t / (60 * 60 * 1000); &#125; /** * è·å–è¿‡å»çš„åˆ†é’Ÿ * * @param date * @return */ public static long pastMinutes(Date date) &#123; long t = new Date().getTime() - date.getTime(); return t / (60 * 1000); &#125; /** * è½¬æ¢ä¸ºæ—¶é—´ï¼ˆå¤©,æ—¶:åˆ†:ç§’.æ¯«ç§’ï¼‰ * * @param timeMillis * @return */ public static String formatDateTime(long timeMillis) &#123; long day = timeMillis / (24 * 60 * 60 * 1000); long hour = timeMillis / (60 * 60 * 1000) - day * 24; long min = timeMillis / (60 * 1000) - day * 24 * 60 - hour * 60; long s = timeMillis / 1000 - day * 24 * 60 * 60 - hour * 60 * 60 - min * 60; long sss = timeMillis - day * 24 * 60 * 60 * 1000 - hour * 60 * 60 * 1000 - min * 60 * 1000 - s * 1000; return (day &gt; 0 ? day + "," : "") + hour + ":" + min + ":" + s + "." + sss; &#125; /** * è·å–ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•° * * @param before * @param after * @return */ public static double getDistanceOfTwoDate(Date before, Date after) &#123; long beforeTime = before.getTime(); long afterTime = after.getTime(); return (afterTime - beforeTime) / (1000 * 60 * 60 * 24); &#125; /** * è·å–å½“å‰æ—¥æœŸ,ä¸€å‘¨å‰çš„æ—¥æœŸå­—ç¬¦ä¸² * * @return String */ public static String getLastWeek() &#123; long rightnow = calendar.getTimeInMillis(); long aweekbefore = 6 * 24 * 60 * 60 * 1000; return DateFormatUtils.format(rightnow - aweekbefore, DEFAULT_DATE); &#125; /** * è·å–æ ¼å¼åŒ–å½“å‰æœˆç¬¬ä¸€å¤©çš„è¡¨è¾¾å¼ * * @return String */ public static String getFirstDayInMonth() &#123; calendar.set(DateHelper.getYearNUM(), DateHelper.getMonthNUM() - 1, 1);// è®¾ä¸ºå½“å‰æœˆçš„1å· ï¼Œæœˆä»0å¼€å§‹ return DateFormatUtils.format(calendar.getTime(), DEFAULT_DATE); &#125; /** * è·å–æ ¼å¼åŒ–ç»™å®šæœˆ(å‚æ•°ï¼šé€»è¾‘æœˆ)ç¬¬ä¸€å¤©çš„è¡¨è¾¾å¼ï¼Œé‡è½½æ–¹æ³• * * @param month * @return String */ public static String getFirstDayInMonth(int month) &#123; calendar.set(DateHelper.getYearNUM(), month - 1, 1);// è®¾ä¸ºå½“å‰æœˆçš„1å· ï¼Œæœˆä»0å¼€å§‹ return DateFormatUtils.format(calendar.getTime(), DEFAULT_DATE); &#125; /** * è·å–æ ¼å¼åŒ–ç»™å®šæœˆ(å‚æ•°ï¼šé€»è¾‘æœˆ)æœ€åä¸€å¤©çš„è¡¨è¾¾å¼ * * @param month * @return String */ public static String getLastDayInMonth(int month) &#123; calendar.set(DateHelper.getYearNUM(), month, 1); // è®¾æˆä¸‹ä¸ªæœˆçš„ä¸€å·ï¼Œå¾€å‰å‡ä¸€å¤©çš„æ—¶é—´ return DateFormatUtils.format(calendar.getTimeInMillis() - 24 * 60 * 60 * 1000, DEFAULT_DATE); &#125; /** * è·å–æ ¼å¼åŒ–å½“å‰å­£åº¦ç¬¬ä¸€å¤©çš„è¡¨è¾¾å¼ * * @return String */ public static String getFirstDayInQuart() &#123; int month = DateHelper.getMonthNUM(); if (month &gt;= 1 &amp;&amp; month &lt;= 3) &#123; month = 1; &#125; if (month &gt;= 4 &amp;&amp; month &lt;= 6) &#123; month = 4; &#125; if (month &gt;= 7 &amp;&amp; month &lt;= 9) &#123; month = 7; &#125; if (month &gt;= 10 &amp;&amp; month &lt;= 12) &#123; month = 10; &#125; calendar.set(DateHelper.getYearNUM(), month - 1, 1); // å½“å¹´å½“å­£ä¸€å·ï¼Œæœˆä»0å¼€å§‹ return DateFormatUtils.format(calendar.getTime(), DEFAULT_DATE); &#125; /** * @return String è·å–æ ¼å¼åŒ–ä¸€å¹´ç¬¬ä¸€å¤©çš„è¡¨è¾¾å¼ */ public static String getFirstDayInYear() &#123; /** è·å–æ ¼å¼åŒ–ä¸€å¹´ç¬¬ä¸€å¤©çš„è¡¨è¾¾å¼ **/ calendar.set(calendar.get(Calendar.YEAR), 0, 1); // å½“å¹´ç¬¬ä¸€ä¸ªæœˆä¸€å·ï¼Œæœˆä»0å¼€å§‹ return DateFormatUtils.format(calendar.getTime(), DEFAULT_DATE); &#125; /** * @return int è·å¾—å½“å‰å¹´ä»½ */ public static int getYearNUM() &#123; /** è·å¾—å½“å‰å¹´ä»½ */ return calendar.get(Calendar.YEAR); &#125; /** * @return int è·å¾—å½“å‰æœˆä»½ */ public static int getMonthNUM() &#123; /*** è·å¾—å½“å‰æœˆä»½ **/ return calendar.get(Calendar.MONTH) + 1; &#125; /** * @return int è·å¾—å½“å‰å‘¨æ•° */ public static int getWeekNUM() &#123; /*** è·å¾—å½“å‰å‘¨æ•° **/ return calendar.get(Calendar.DAY_OF_WEEK); &#125; /** * @return int å–åˆ°ä¸€å¤©ä¸­çš„å°æ—¶æ•° */ public static int getHoursofDay() &#123; return Calendar.HOUR_OF_DAY; &#125; /** * è·å–æœ€è¿‘ndayså¤©(å«ä»Šå¤©)çš„æ—¥æœŸï¼Œè¿”å›æ—¥æœŸè¡¨è¾¾å¼æ•°ç»„ * * @param ndays * @return String[] */ public static String[] getDaysBackward(int ndays) &#123; String[] daysBackward = new String[ndays]; Calendar lastDate; for (int i = 0; i &lt; ndays; i++) &#123; lastDate = Calendar.getInstance(); lastDate.add(Calendar.DATE, -1 * i); // å‡å»ä¸€å¤©ï¼Œå˜ä¸ºä¸Šæœˆæœ€åä¸€å¤© daysBackward[ndays - 1 - i] = DateFormatUtils.format(lastDate.getTimeInMillis(), DEFAULT_DATE); &#125; return daysBackward; &#125;&#125; DateDemoController.java 12345678910111213141516171819202122/** * ç”¨åˆ«äººå°è£…å¥½çš„æ—¶é—´ç±»å‹è½¬æ¢ç±»ï¼Œé€ è½®å­ * * @param mydate * @return */@GetMapping("/client01")public ModelAndView test01(Date mydate) &#123; System.out.println(mydate); return null;&#125;@InitBinderpublic void initDate(WebDataBinder binder) &#123; binder.registerCustomEditor(Date.class, new PropertyEditorSupport()&#123; @Override public void setAsText(String text) throws IllegalArgumentException &#123; this.setValue(DateHelper.parseDate(text)); &#125; &#125;);&#125; é¡µé¢è¿˜æ˜¯é‚£ä¸ªdemo01.jspé¡µé¢]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰å®¢æˆ·ç«¯æ•°æ®ä¼ é€’çš„ä¸“é¢˜(å‰å°ä¼ æ•°æ®åˆ°åå°)]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92%E7%9A%84%E4%B8%93%E9%A2%98(%E5%89%8D%E5%8F%B0%E4%BC%A0%E6%95%B0%E6%8D%AE%E5%88%B0%E5%90%8E%E5%8F%B0)%2F</url>
    <content type="text"><![CDATA[ç®€å•çš„æ•°æ®ç±»å‹è·å–ï¼Œæ•°ç»„çš„è·å–æ–¹å¼ï¼Œå¯¹è±¡ä¸“é¢˜ï¼Œå ä½ç¬¦ä¼ é€’ç®€å•æ•°æ®ï¼Œå‰å°ä¼ æ¥JSONæ ¼å¼å­—ç¬¦ä¸²å¤„ç†ï¼Œä¸¤ä¸ªå¯¹è±¡å’Œå…³è”å¯¹è±¡ï¼Œä¸åŒå¯¹è±¡çš„åŒå±æ€§è§£å†³æ–¹æ¡ˆï¼ŒMapçš„å†™æ³•(ä¸€èˆ¬åˆ†é¡µæŸ¥è¯¢)ï¼ŒListçš„è·å–(ä¸€èˆ¬æ‰¹é‡æ·»åŠ )ï¼Œjsonä¼ ç»™å‰å°çš„è§£å†³æ–¹æ¡ˆï¼ŒJavaScriptå¯¹è±¡å’ŒJSONæ ¼å¼å­—ç¬¦ä¸²äº’è½¬ï¼Œjavaå¯¹è±¡(è‡ªå®šä¹‰å¯¹è±¡ï¼Œé›†åˆ)å’ŒJSONæ ¼å¼å­—ç¬¦ä¸²äº’è½¬ï¼ŒAjaxä¼ é€’JSON,@RequestBodyä½œç”¨ æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.ç®€å•æ•°æ®ç±»å‹è·å–java webé˜¶æ®µè·å–æ–¹å¼demo01.jsp 12345678910111213141516171819&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;JAVA WEBé˜¶æ®µ æœåŠ¡ç«¯å¦‚ä½•è·å–å®¢æˆ·ç«¯çš„æ•°æ®&lt;/h2&gt;&lt;form action="client01" method="get"&gt; &lt;input type="text" name="user_name"&gt;&lt;br&gt; &lt;input type="checkbox" name="hobby" value="basketball"&gt;ç¯®çƒ &lt;input type="checkbox" name="hobby" value="football"&gt;è¶³çƒ &lt;input type="checkbox" name="hobby" value="book"&gt;çœ‹ä¹¦ &lt;br&gt; &lt;button&gt;ä¼ ç»Ÿæ¨¡å¼&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; SimpleTypeDemoController.java 123456789101112131415/** * javawebå½¢å¼è·å– * * @return */@RequestMapping("/client01")public ModelAndView test01(HttpServletRequest request) &#123; String user_name = request.getParameter("user_name"); String[] hobby = request.getParameterValues("hobby"); System.out.println("å§“å" + user_name); for (String s : hobby) &#123; System.out.print(s + "--"); &#125; return null;&#125; @RequestParamè·å–æ•°æ®demo02.jsp 12345678910111213141516&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;@RequestParamè·å–æ•°æ®&lt;/h2&gt;&lt;form action="client02" method="get"&gt; &lt;%--&lt;input type="text" name="user_name"&gt;&lt;br&gt;--%&gt; &lt;input type="number" name="user_id"&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; è·å–æ•°æ®å†™æ³•,å¯ä»¥è‡ªåŠ¨å®Œæˆç±»å‹è½¬æ¢ï¼Œnameå’Œvalueå±æ€§æ˜¯ç­‰ä»·çš„ SimpleTypeDemoController.java 123456789101112131415/** * é€šè¿‡@RequestParamæ³¨è§£è·å–æ•°æ®ï¼Œæ³¨è§£è¿˜è‡ªåŠ¨è½¬æ¢ç±»å‹,valueå’Œnameä¸€æ · * requiredæ˜¯å¦å¿…é¡»è¦æ¥å—åˆ°è¿™ä¸ªå€¼ï¼Œé»˜è®¤true * defaultValueé»˜è®¤è®¾ç½®ï¼Œå¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°å€¼ï¼Œåˆ™é»˜è®¤è®¾ç½®å€¼ * * @param request * @return */@RequestMapping("/client02")public ModelAndView test02(@RequestParam(value = "user_name", required = false) String name, @RequestParam(name = "user_id", required = false, defaultValue = "1111") Integer id) &#123; System.out.println("å§“å" + name); System.out.println("ID" + id); return null;&#125; @RequestParamè·å–æ•°æ®ç®€å†™æ–¹å¼ åªè¦ä¼ é€’çš„åç§°å’Œå½¢å‚çš„åç§°ä¸¤è€…ä¿æŒä¸€è‡´å³å¯,å¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹required=false demo03.jsp 1234567891011121314151617&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;ç®€å†™æ–¹å¼&lt;/h2&gt;&lt;form action="client03" method="get"&gt; &lt;input type="text" name="user_name"&gt;&lt;br&gt; &lt;input type="number" name="user_id"&gt;&lt;br&gt; &lt;br&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; SimpleTypeDemoController.java 123456789101112/** * ç®€å†™æ–¹å¼ï¼Œä¼ é€’çš„åç§°å’Œæ¥æ”¶çš„å½¢å‚åå­—ä¸€æ ·å°±å¯ä»¥ï¼Œrequiredé»˜è®¤ä¸ºfalse * @param name * @param id * @return */@RequestMapping("/client03")public ModelAndView test03(String user_name,Integer user_id) &#123; System.out.println("å§“å" + user_name); System.out.println("ID" + user_id); return null;&#125; 3.ä¼ é€’æ•°ç»„ä¸“é¢˜è¶…é“¾æ¥ä¼ é€’æ•°ç»„ã€å¤é€‰æ¡†ä¼ é€’æ•°ç»„ã€æ–‡æœ¬æ¡†ä¼ é€’æ•°ç»„ã€å¤šé€‰åˆ—è¡¨ demo04.jsp 1234567891011121314151617181920212223242526272829303132&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;è¶…é“¾æ¥ä¼ é€’æ•°ç»„&lt;/h2&gt;&lt;a href="client04?role_id=100&amp;role_id=200&amp;role_id=300"&gt;ä¼ é€’æ•°ç»„&lt;/a&gt;&lt;h2&gt;å¤é€‰æ¡†ä¼ é€’æ•°ç»„&lt;/h2&gt;&lt;form action="client05"&gt; &lt;input type="checkbox" name="hobby" value="basketball"&gt;ç¯®çƒ &lt;input type="checkbox" name="hobby" value="football"&gt;è¶³çƒ &lt;input type="checkbox" name="hobby" value="book"&gt;çœ‹ä¹¦ &lt;button&gt;ç®€å†™æ–¹å¼&lt;/button&gt;&lt;/form&gt;&lt;h2&gt;æ–‡æœ¬æ¡†ä¼ é€’æ•°ç»„&lt;/h2&gt;&lt;form action="client06"&gt; &lt;input type="text" name="hobby"&gt; &lt;input type="text" name="hobby"&gt; &lt;button&gt;ç®€å†™æ–¹å¼&lt;/button&gt;&lt;/form&gt;&lt;h2&gt;å¤šé€‰åˆ—è¡¨&lt;/h2&gt;&lt;form action="client07"&gt; &lt;select name="hobby" multiple="multiple"&gt; &lt;option value="music"&gt;éŸ³ä¹&lt;/option&gt; &lt;option value="book"&gt;çœ‹ä¹¦&lt;/option&gt; &lt;option value="football"&gt;è¶³çƒ&lt;/option&gt; &lt;/select&gt; &lt;button&gt;ç®€å†™æ–¹å¼&lt;/button&gt;&lt;/form&gt;&lt;/body&gt;&lt;/html&gt; ArrayTypeDemoController.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestParam;import org.springframework.web.servlet.ModelAndView;import java.util.Arrays;/** * æ•°ç»„çš„è·å–æ–¹å¼ */@Controllerpublic class ArrayTypeDemoController &#123; /** * è¶…é“¾æ¥è·å–æ•°ç»„ * * @return */ @GetMapping("/client04") public ModelAndView test01(@RequestParam(name = "role_id") Integer[] roles) &#123; System.out.println(Arrays.asList(roles)); return null; &#125; /** * å¤é€‰æ¡†ä¼ é€’æ•°ç»„ * * @param roles * @return */ @GetMapping("/client05") public ModelAndView test02(String[] hobby) &#123; if (hobby != null) &#123; System.out.println(Arrays.asList(hobby)); &#125; else &#123; System.out.println("æ‚¨æ²¡æœ‰çˆ±å¥½ï¼"); &#125; return null; &#125; /** * æ–‡æœ¬æ¡†ä¼ é€’æ•°æ® * * @param hobby * @return */ @GetMapping("/client06") public ModelAndView test03(String[] hobby) &#123; System.out.println(Arrays.asList(hobby)); return null; &#125; /** * å¤šé€‰åˆ—è¡¨ä¼ é€’æ•°ç»„ * * @param hobby * @return */ @GetMapping("/client07") public ModelAndView test04(String[] hobby) &#123; if (hobby != null) &#123; System.out.println(Arrays.asList(hobby)); &#125; else &#123; System.out.println("æ‚¨æ²¡æœ‰çˆ±å¥½ï¼ï¼"); &#125; return null; &#125;&#125; 4.å¯¹è±¡ä¸“é¢˜User.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package com.hs.model;public class User &#123; private Integer user_id; private String user_name; private String sex; private Role role; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public Role getRole() &#123; return role; &#125; public void setRole(Role role) &#123; this.role = role; &#125; @Override public String toString() &#123; return "User&#123;" + "user_id=" + user_id + ", user_name='" + user_name + '\'' + ", sex='" + sex + '\'' + ", role=" + role + '&#125;'; &#125;&#125; Role.java 123456789101112131415161718192021package com.hs.model;public class Role &#123; private String role_name; public String getRole_name() &#123; return role_name; &#125; public void setRole_name(String role_name) &#123; this.role_name = role_name; &#125; @Override public String toString() &#123; return "Role&#123;" + "role_name='" + role_name + '\'' + '&#125;'; &#125;&#125; Student.java 1234567891011121314151617181920212223242526272829303132333435363738394041package com.hs.model;public class Student &#123; private Integer user_id; private String user_name; private String sex; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; @Override public String toString() &#123; return "Student&#123;" + "user_id=" + user_id + ", user_name='" + user_name + '\'' + ", sex='" + sex + '\'' + '&#125;'; &#125;&#125; ç®€å•å¯¹è±¡å±æ€§åå’Œä¼ é€’åç§°ä¸€è‡´ä¼ é€’çš„åç§°å’Œç±»ä¸­å±æ€§ä¿æŒä¸€è‡´å³å¯,å¦‚æœä¼ é€’çš„æ•°æ®ç±»å‹è½¬æ¢å¤±è´¥ä¼šæŠ¥400é”™è¯¯ é¡µé¢å†…å®¹éƒ½æ˜¯åœ¨demo05.jspï¼Œjavaä»£ç éƒ½åœ¨ModelTypeDemoController.java demo05.jsp 123456&lt;h2&gt;ç®€å•å¯¹è±¡æ•°æ®ä¼ é€’ï¼šä¼ é€’çš„åç§°(name)ä¸ºç±»ä¸­çš„å±æ€§åå­—ä¸€æ ·å³å¯&lt;/h2&gt;&lt;form action=&quot;client08&quot;&gt; å§“åï¼š&lt;input type=&quot;text&quot; name=&quot;user_name&quot;&gt; æ€§åˆ«ï¼š&lt;input type=&quot;text&quot; name=&quot;sex&quot;&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; ModelTypeDemoController.java 12345678910111213/** * ç®€å•å¯¹è±¡ä¼ é€’ * * @return */@GetMapping("/client08")public ModelAndView test01(User user, String user_name, String sex) &#123; System.out.println(user); System.out.println("-----ä¾ç„¶å¯ä»¥ä½¿ç”¨ç®€å•æ–¹å¼----"); System.out.println(user_name); System.out.println(sex); return null;&#125; å¤šä¸ªå¯¹è±¡ä¸€ä¸ªè¡¨å•æœ‰ä¸¤ä¸ªå¯¹è±¡[å¯¹è±¡ä¸­çš„å±æ€§åç§°ä¸ä¸€è‡´ 1234567&lt;h2&gt;å¤šä¸ªå¯¹è±¡&lt;/h2&gt;&lt;form action=&quot;client09&quot;&gt; å§“åï¼š&lt;input type=&quot;text&quot; name=&quot;user_name&quot;&gt; æ€§åˆ«ï¼š&lt;input type=&quot;text&quot; name=&quot;sex&quot;&gt; è§’è‰²åç§°ï¼š&lt;input type=&quot;text&quot; name=&quot;role_name&quot;&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; 1234567891011121314/** * å¤šä¸ªå¯¹è±¡ä¼ é€’ * * @param user * @param role * @return */@GetMapping("/client09")public ModelAndView test02(User user, Role role) &#123; System.out.println(user); System.out.println("-----è§’è‰²----"); System.out.println(role); return null;&#125; å…³è”å¯¹è±¡æ–¹å¼ä¸€ï¼šåå°å¤„ç†1234567&lt;h2&gt;å¤šä¸ªå¯¹è±¡è¿›è¡Œå…³è”æ–¹å¼ä¸€:åå°å¤„ç†&lt;/h2&gt;&lt;form action="client10"&gt; å§“åï¼š&lt;input type="text" name="user_name"&gt; æ€§åˆ«ï¼š&lt;input type="text" name="sex"&gt; è§’è‰²åç§°ï¼š&lt;input type="text" name="role_name"&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; 1234567891011121314/** * å…³è”å¯¹è±¡_æ–¹å¼ä¸€:åå°å¤„ç† * * @param user * @param role * @return */@GetMapping("/client10")public ModelAndView test03(User user, Role role) &#123; //è®¾ç½®å…³è”å…³ç³» user.setRole(role); System.out.println(user); return null;&#125; æ–¹å¼äºŒï¼šå‰å°å¤„ç†ï¼ˆé‡ç‚¹æŒæ¡ï¼‰1234567&lt;h2&gt;å¤šä¸ªå¯¹è±¡è¿›è¡Œå…³è”æ–¹å¼äºŒï¼šå‰å°å¤„ç†&lt;/h2&gt;&lt;form action="client11"&gt; å§“åï¼š&lt;input type="text" name="user_name"&gt; æ€§åˆ«ï¼š&lt;input type="text" name="sex"&gt; è§’è‰²åç§°ï¼š&lt;input type="text" name="role.role_name"&gt;&lt;%--name=ç±»ä¸­.å±æ€§--%&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; 1234567891011/** * å…³è”å¯¹è±¡_æ–¹å¼äºŒï¼šå‰å°å¤„ç† * * @param user * @return */@GetMapping("/client11")public ModelAndView test04(User user) &#123; System.out.println(user); return null;&#125; ä¸åŒå¯¹è±¡åŒå±æ€§ä¼ é€’å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»1234567891011&lt;h2&gt;ä¸åŒå¯¹è±¡åŒå±æ€§ä¼ é€’å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»&lt;/h2&gt;&lt;form action="client12"&gt; &lt;h3&gt;ç”¨æˆ·&lt;/h3&gt; å§“åï¼š&lt;input type="text" name="user.user_name"&gt; æ€§åˆ«ï¼š&lt;input type="text" name="user.sex"&gt; è§’è‰²ä¿¡æ¯ï¼š&lt;input type="text" name="user.role.role_name"&gt; &lt;h3&gt;å­¦ç”Ÿ&lt;/h3&gt; å§“åï¼š&lt;input type="text" name="student.user_name"&gt; æ€§åˆ«ï¼š&lt;input type="text" name="student.sex"&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; 1234567891011/** * ä¸åŒå¯¹è±¡ï¼ŒåŒå±æ€§é—®é¢˜ï¼Œå€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»è§£å†³é—®é¢˜ * * @return */@GetMapping("/client12")public ModelAndView test05(HsModel hsModel) &#123; System.out.println(hsModel.getStudent()); System.out.println(hsModel.getUser()); return null;&#125; ç¬¬ä¸‰æ–¹ç±»HsModel.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354package com.hs.model;import java.util.List;import java.util.Map;public class HsModel &#123; private User user; private Student student; private Map&lt;String,Object&gt; query; private List&lt;Student&gt; studentList; public User getUser() &#123; return user; &#125; public void setUser(User user) &#123; this.user = user; &#125; public Student getStudent() &#123; return student; &#125; public void setStudent(Student student) &#123; this.student = student; &#125; public Map&lt;String, Object&gt; getQuery() &#123; return query; &#125; public void setQuery(Map&lt;String, Object&gt; query) &#123; this.query = query; &#125; public List&lt;Student&gt; getStudentList() &#123; return studentList; &#125; public void setStudentList(List&lt;Student&gt; studentList) &#123; this.studentList = studentList; &#125; @Override public String toString() &#123; return "HsModel&#123;" + "user=" + user + ", student=" + student + ", query=" + query + ", studentList=" + studentList + '&#125;'; &#125;&#125; 5.Mapçš„å†™æ³•demo05.jsp 123456&lt;h2&gt;å¦‚æœæ˜¯Mapå±æ€§ä¹Ÿæ˜¯å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»&lt;/h2&gt;&lt;form action="client13"&gt; å§“åï¼š&lt;input type="text" name="query['user_name']"&lt;%--å±æ€§['éœ€è¦è®¾ç½®çš„keyå€¼']--%&gt;&gt; æ€§åˆ«ï¼š&lt;input type="text" name="query['sex']"&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; MapTypeDemoController.java 123456789101112131415161718192021222324package com.hs.web;import com.hs.model.HsModel;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.servlet.ModelAndView;/** * Map_åˆ†é¡µä¿å­˜æŸ¥è¯¢ */@Controllerpublic class MapTypeDemoController &#123; /** * mapæ¥æ”¶æ•°æ®ï¼Œé€šè¿‡ç¬¬ä¸‰æ–¹ç±» * @param hsModel * @return */ @GetMapping(&quot;/client13&quot;) public ModelAndView test01(HsModel hsModel) &#123; System.out.println(hsModel.getQuery()); return null; &#125;&#125; 6.Listçš„å†™æ³•demo05.jsp 123456789101112&lt;h2&gt;ä¼ é€’Listä¹Ÿæ˜¯å€ŸåŠ©ç¬¬ä¸‰æ–¹ç±»&lt;/h2&gt;&lt;form action="client14"&gt; å§“åï¼š&lt;input type="text" name="studentList[0].user_name"&gt; &lt;%--è®¾ç½®ç¬¬1æ¡æ•°æ®çš„user_name--%&gt; æ€§åˆ«ï¼š&lt;input type="text" name="studentList[0].sex"&gt;&lt;%--è®¾ç½®ç¬¬1æ¡æ•°æ®çš„sex--%&gt; &lt;hr/&gt; å§“åï¼š&lt;input type="text" name="studentList[1].user_name"&gt; &lt;%--è®¾ç½®ç¬¬2æ¡æ•°æ®çš„user_name--%&gt; æ€§åˆ«ï¼š&lt;input type="text" name="studentList[1].sex"&gt; &lt;hr/&gt; å§“åï¼š&lt;input type="text" name="studentList[5].user_name"&gt; &lt;%--è®¾ç½®ç¬¬6æ¡æ•°æ®çš„user_name,åŒæ—¶ä¹Ÿè®¾ç½®äº†è¿™ä¸ªlisté•¿åº¦æ˜¯6--%&gt; æ€§åˆ«ï¼š&lt;input type="text" name="studentList[5].sex"&gt; &lt;button&gt;æäº¤æ•°æ®&lt;/button&gt;&lt;/form&gt; studentList[1].user_name ç±»ä¸­å±æ€§ [ ç´¢å¼• ]. å±æ€§å ListTypeDemoController.java 123456789101112131415161718package com.hs.web;import com.hs.model.HsModel;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.servlet.ModelAndView;/** * Listæ•°æ®_ä¸€èˆ¬åšæ‰¹é‡æ·»åŠ  */@Controllerpublic class ListTypeDemoController &#123; @GetMapping("/client14") public ModelAndView test01(HsModel hsModel) &#123; System.out.println(hsModel.getStudentList()); return null; &#125;&#125; 7.å ä½ç¬¦ä¼ é€’æ•°æ®demo05.jsp 1234&lt;h2&gt;å ä½ç¬¦ä¼ é€’æ•°æ®&lt;/h2&gt;&lt;a href="client15/11110/tomcat?sex=man"&gt;å ä½ç¬¦ä¼ é€’æ•°æ®&lt;/a&gt;&lt;h2&gt;å ä½ç¬¦ä¼ é€’æ•°æ®â€”â€”å¯ä»¥ç›´æ¥ä½¿ç”¨Mapæ¥æ¥æ”¶æ•°æ®&lt;/h2&gt;&lt;a href="client16/123/tomcat?sex=man"&gt;ä½¿ç”¨Mapæ¥æ”¶æ•°æ®&lt;/a&gt; PlaceholderTypeDemoController.java 1234567891011121314151617181920212223242526272829303132333435package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.servlet.ModelAndView;import java.util.Map;/** * å ä½ç¬¦ä¼ é€’ç®€å•æ•°æ® */@Controllerpublic class PlaceholderTypeDemoController &#123; @GetMapping("/client15/&#123;id&#125;/&#123;name&#125;") public ModelAndView test01( @PathVariable("id") int user_id,/*å ä½ç¬¦çš„åå­—å’Œå½¢å‚ä¸ä¸€æ ·ï¼Œåœ¨PathVariableä¸­éœ€è¦å†™å ä½ç¬¦çš„åå­—*/ @PathVariable String name,/*ä¸€æ ·åˆ™å¯ä»¥çœç•¥*/ String sex /*@RequestParamçš„ç®€å†™æ–¹å¼*/ ) &#123; System.out.println(user_id); System.out.println(name); System.out.println(sex); return null; &#125; @GetMapping("/client16/&#123;id&#125;/&#123;name&#125;") public ModelAndView test01( @PathVariable Map&lt;String,Object&gt; map,/*å ä½ç¬¦çš„åå­—ä½œä¸ºkeyå€¼*/ String sex /*@RequestParamçš„ç®€å†™æ–¹å¼*/ ) &#123; System.out.println(map); System.out.println(sex); return null; &#125;&#125; 8.JavaScriptå¯¹è±¡å’ŒJSONäº’è½¬éœ€è¦Jacksonçš„ä¸‰ä¸ªjaråŒ…ï¼šjackson-annotations-2.8.1.jarï¼Œjackson-core-2.8.1.jarï¼Œjackson-databind-2.8.1.jar demo06.jsp(åœ¨æµè§ˆå™¨F12ï¼Œçœ‹consoleè¾“å‡º) 1234567891011121314151617181920212223242526272829303132&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script type=&quot;text/javascript&quot;&gt; //ç»™å¯¹è±¡èµ‹å€¼çš„å‡ ç§æ–¹ å¼ var obj = &#123; user_name: &quot;æ‚Ÿç©º&quot;, sex: &quot;ç”·&quot;, hobby: [&quot;basktball&quot;, &quot;football&quot;], classInfo: &#123; class_name: &quot;è®¡ç®—æœº&quot;, number:8 &#125; &#125;; obj.nickname = &quot;é½å¤©å¤§åœ£&quot;; obj[&quot;age&quot;] = 500; console.log(obj); //1.å°†JavaScriptå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼çš„å­—ç¬¦ä¸² var jsonStr = JSON.stringify(obj); console.log(jsonStr); //2.å°†JSONæ ¼å¼çš„å­—ç¬¦ä¸²è½¬æ¢ä¸ºJavaScriptå¯¹è±¡ var hs = JSON.parse(jsonStr); console.log(hs);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 9.javaå¯¹è±¡å’Œjsonäº’è½¬JSON2JavaTest.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104package com.hs.test;import com.fasterxml.jackson.databind.JavaType;import com.fasterxml.jackson.databind.ObjectMapper;import com.hs.model.Role;import com.hs.model.User;import org.junit.Test;import java.io.IOException;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;public class JSON2JavaTest &#123; /** * Javaå¯¹è±¡å’ŒJSONå­—ç¬¦ä¸²çš„äº’ç›¸è½¬æ¢ */ @Test public void test01() throws IOException &#123; Map&lt;String,Object&gt; map = new HashMap&lt;&gt;(); map.put("user_name","æ‚Ÿç©º"); map.put("age", 500); map.put("hobby",/*é™æ€åˆå§‹åŒ–æ•°æ®*/ new String[]&#123;"music","book"&#125;); System.out.println("è½¬æ¢ä¹‹å‰çš„Map:"+map); //1.javaå¯¹è±¡è½¬JSONæ ¼å¼çš„å­—ç¬¦ä¸² ObjectMapper objectMapper = new ObjectMapper(); String jsonString = objectMapper.writeValueAsString(map); System.out.println("javaå¯¹è±¡è½¬JSONæ ¼å¼çš„å­—ç¬¦ä¸²:"+jsonString); //2.JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡ Map&lt;String, Object&gt; hsMap = objectMapper.readValue(jsonString, Map.class); System.out.println("JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºjavaå¯¹è±¡:"+hsMap); &#125; /** * javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸²__è‡ªå®šä¹‰å¯¹è±¡äº’ç›¸è½¬æ¢ * @throws Exception */ @Test public void test02() throws Exception &#123; User user = new User(); user.setUser_id(100); user.setUser_name("å…«æˆ’"); user.setSex("ç”·"); Role role = new Role(); role.setRole_name("è¶…çº§ç®¡ç†å‘˜"); //å»ºç«‹è”ç³» user.setRole(role); System.out.println("è½¬æ¢ä¹‹å‰çš„User:"+user); //1.javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸² ObjectMapper objectMapper = new ObjectMapper(); String jsonString = objectMapper.writeValueAsString(user); System.out.println("javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸²:"+jsonString); //2.jsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡ User hsUser = objectMapper.readValue(jsonString, User.class); System.out.println("jsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡:"+hsUser); &#125; /** * javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸²__é›†åˆ * @throws Exception */ @Test public void test03() throws Exception &#123; List&lt;User&gt; userList = new ArrayList&lt;&gt;(); User user = new User(); user.setUser_id(100); user.setUser_name("å…«æˆ’"); user.setSex("ç”·"); Role role = new Role(); role.setRole_name("è¶…çº§ç®¡ç†å‘˜"); user.setRole(role); userList.add(user); user = new User(); user.setUser_id(100); user.setUser_name("æ‚Ÿç©º"); user.setSex("ç”·"); role = new Role(); role.setRole_name("ç®¡ç†å‘˜"); user.setRole(role); userList.add(user); System.out.println("è½¬æ¢ä¹‹å‰çš„List&lt;User&gt;:"+userList); //1.javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸² ObjectMapper objectMapper = new ObjectMapper(); String jsonString = objectMapper.writeValueAsString(userList); System.out.println("javaå¯¹è±¡è½¬jsonå­—ç¬¦ä¸²:"+jsonString); //2.jsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡ System.out.println("ç»„æˆçš„List&lt;Map&gt;:"+objectMapper.readValue(jsonString, List.class)); //ç»„æˆçš„æ˜¯List&lt;Map&gt; JavaType t = objectMapper.getTypeFactory().constructParametricType(List.class, User.class); List&lt;User&gt; tempList = objectMapper.readValue(jsonString, t); System.out.println("jsonå­—ç¬¦ä¸²è½¬javaå¯¹è±¡:"+tempList); &#125;&#125; 10.å‰å°ä¼ ç»™åå°jsonï¼Œç„¶åè¿”å›ç»™å‰å°jsondemo07.jsp 1234567891011121314151617181920212223242526272829303132333435&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script type="text/javascript" src="resource/jquery.js"&gt;&lt;/script&gt;&lt;script type="text/javascript"&gt; $(function () &#123; var obj = &#123; user_id:888, user_name:"æ‚Ÿç©º", sex:"ç”·", role:&#123; role_name:"è¶…çº§ç®¡ç†å‘˜" &#125; &#125;; //1.JavaScriptå¯¹è±¡è½¬æ¢jsonæ ¼å¼å­—ç¬¦ä¸² var jsonStr = JSON.stringify(obj); //2.å°†è¯¥å­—ç¬¦ä¸²ä¼ é€’åˆ°controller /*$.get("json01",&#123;hs:jsonStr&#125;,function (data) &#123; //dateæ˜¯åå°è¿”å›äº†ä¸€ä¸ªJSONæ ¼å¼çš„å­—ç¬¦ä¸² alert(data); //alert(data)å¼¹å‡ºè¿™ä¸ªå­—ç¬¦ä¸²å…¨éƒ¨ï¼Œä¸‹é¢é‚£ä¸ªæ˜¯æŠŠjsonå¯¹è±¡è½¬æ¢ä¸ºJavaScriptå­—ç¬¦ä¸²å¥½å–å€¼ &#125;)*/ $.get("json01",&#123;hs:jsonStr&#125;,function (data) &#123; //dataè½¬æ¢ä¸€ã€æˆ–è€…åŠ "json" // alert(JSON.parse(data); alert(data); //å–è¿™ä¸ªJavaScriptå­—ç¬¦ä¸²çš„æŸä¸ªå€¼ alert(data.role.role_name); &#125;,"json") &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; JSONTypeDemoController.java 1234567891011121314151617181920public class JSONTypeDemoController &#123; /** * æ•´ä¸ªæµç¨‹æ˜¯ï¼Œå‰å°JavaScriptè½¬æ¢jsonï¼ŒæŠŠjsonä¼ ç»™åå°ï¼Œåå°å†è½¬æ¢ä¸ºjavaå¯¹è±¡ï¼Œè¿›è¡Œä¿®æ”¹ç­‰æ“ä½œï¼Œ * ç„¶åè¿™ä¸ªå¯¹è±¡å†é€šè¿‡æ³¨è§£@ResponseBodyè½¬æ¢ä¸ºå‰å°dataæ¥æ”¶åˆ°çš„JSONæ ¼å¼çš„å­—ç¬¦ä¸² * @param hs * @return * @throws IOException */ @GetMapping("json01") @ResponseBody public User json01(String hs) throws IOException &#123; System.out.println(hs); //å°†å‰å°ä¼ è¿‡æ¥çš„jsonæ ¼å¼å¯¹è±¡è½¬æ¢ä¸ºjavaå¯¹è±¡ ObjectMapper objectMapper = new ObjectMapper(); User user = objectMapper.readValue(hs, User.class); user.setSex("å¥³"); return user; &#125; å¦‚ä½•åªæ˜¯å•çº¯çš„å†™äº†ä¸Šé¢ä»£ç ï¼Œè¿è¡Œï¼Œä¼šå‘ç°alertï¼Œä¸ä¼šå‡ºç°æ•°æ®ï¼Œè¿™æ˜¯ä¸€ä¸ªbugé—®é¢˜ï¼Œéœ€è¦è§£å†³ï¼Œå¾€å‰å°ä¼ å…¥jsonçš„ï¼Œéƒ½éœ€è¦é…ç½®è¿™ä¸ªï¼Œåœ¨springmvc.xmlä¸­åŠ å…¥ 123456789101112131415161718192021&lt;!--1.å¯åŠ¨SpringMVCæ³¨è§£--&gt;&lt;mvc:annotation-driven&gt; &lt;mvc:message-converters register-defaults="true"&gt; &lt;!--è§£å†³ä¸‹è½½çš„æ—¶å€™è½¬æ¢é—®é¢˜--&gt; &lt;bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter"/&gt; &lt;!--è§£å†³@ResponseBodyåœ¨IEæµè§ˆå™¨çš„BUGé—®é¢˜--&gt; &lt;bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"&gt; &lt;property name="prettyPrint" value="true"/&gt; &lt;property name="supportedMediaTypes"&gt; &lt;list&gt; &lt;value&gt;text/html;charset=UTF-8&lt;/value&gt; &lt;value&gt;text/plan;charset=UTF-8&lt;/value&gt; &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt; &lt;/list&gt; &lt;/property&gt; &lt;/bean&gt; &lt;/mvc:message-converters&gt; 11.Ajaxä¼ é€’JSONå’Œ@RequestBodyçš„ä½œç”¨ï¼ˆå¼ºçƒˆæ¨èä½¿ç”¨è¿™ç§ï¼‰demo08.jsp 12345678910111213141516171819202122232425262728293031323334353637&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;script type="text/javascript" src="resource/jquery.js"&gt;&lt;/script&gt;&lt;script type="text/javascript"&gt; $(function () &#123; var obj = &#123; user_id:888, user_name:"æ‚Ÿç©º", sex:"ç”·", role:&#123; role_name:"è¶…çº§ç®¡ç†å‘˜" &#125; &#125;; //1.JavaScriptå¯¹è±¡è½¬æ¢jsonæ ¼å¼å­—ç¬¦ä¸² var jsonStr = JSON.stringify(obj); //2.ä½¿ç”¨åŸç”Ÿçš„æ–¹å¼ $.ajax(&#123; type:"POST",//å¿…é¡»ä¸ºPOSTè¯·æ±‚ï¼Œå¦‚æœä½ è¦ä¼ é€’JSONå­—ç¬¦ä¸² url:"json02", data:jsonStr, dataType:"json", //è§£æè¿”å›æ¥çš„dataæ•°æ®çš„ç±»å‹ contentType: "application/json;charset=UTF-8", processData:false, success:function (data) &#123; alert(data); &#125; &#125;); &#125;);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; JSONTypeDemoController.java 1234567891011121314/** * é€šè¿‡ajaxä¼ é€’è¿‡æ¥æ•°æ®ï¼Œ@RequestBodyç›¸å½“äºå®Œæˆäº†ä¸Šé¢çš„ * ObjectMapper objectMapper = new ObjectMapper(); * User user = objectMapper.readValue(hs, User.class); * è¿™ä¸¤æ­¥ï¼Œä½†æ˜¯å‰ææ˜¯ä¼ è¿‡æ¥çš„å­—æ®µåå’Œuserç±»çš„å±æ€§åä¸€æ ·ï¼Œæ‰èƒ½æ­£å¸¸è½¬æ¢ * @param user * @return */@PostMapping("/json02")@ResponseBodypublic User json02(@RequestBody User user) &#123; user.setUser_name("å…«æˆ’"); return user;&#125;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰æ§åˆ¶å™¨å½¢å‚å’Œè¿”å›ç±»å‹]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E6%8E%A7%E5%88%B6%E5%99%A8%E5%BD%A2%E5%8F%82%E5%92%8C%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[æ§åˆ¶å™¨é‡Œå½¢å‚çš„è¯´æ˜ï¼šç±»å¯ä»¥è¢«å®ä¾‹åŒ–ã€‚å…³äºè¿”å›å€¼ç±»å‹è¯´æ˜ï¼šModelAndView å®˜æ–¹ä½¿ç”¨æ–¹å¼(ä¼ å€¼ï¼Œè·³è½¬é¡µé¢)ï¼Œvoidç±»å‹(ç›´æ¥è¾“å‡ºé¡µé¢)ï¼ŒStringç±»å‹(ä¹Ÿå¯ä»¥è·³è½¬é¡µé¢)ï¼Œä»»æ„æ•°æ®ç±»å‹(ä¸»è¦JSONæ•°æ®å¤„ç†) æºç è·å–github 1.é¡¹ç›®ç»“æ„ éœ€è¦æ·»åŠ tomcatçš„ä¾èµ–ï¼Œè¦ä¸ç„¶æ²¡æœ‰HttpServletRequestç­‰ç±»ï¼Œeclipseä¸ç”¨ 2.User.java12345678910111213141516171819202122232425262728293031package com.hs.model;public class User &#123; private Integer role_id; private String name; public Integer getRole_id() &#123; return role_id; &#125; public void setRole_id(Integer role_id) &#123; this.role_id = role_id; &#125; public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; @Override public String toString() &#123; return "User&#123;" + "role_id=" + role_id + ", name='" + name + '\'' + '&#125;'; &#125;&#125; 3.å½¢å‚çš„è¯´æ˜:å¯ä»¥è¢«å®ä¾‹åŒ–FormalDemoController.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package com.hs.web;import com.hs.model.User;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.servlet.ModelAndView;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.util.ArrayList;import java.util.Map;/** * æ§åˆ¶å™¨ä¸­çš„å½¢å‚æµ‹è¯• */@Controllerpublic class FormalDemoController &#123; /** * æŸ¥çœ‹ServletAPI * åœ¨å½¢å‚ä¸­çš„ç±»é»˜è®¤æƒ…å†µä¸‹æ˜¯å¯ä»¥è¿›è¡Œå®ä¾‹åŒ–çš„ * @return */ @RequestMapping(path = "/test01", method = RequestMethod.GET) public ModelAndView test01(HttpServletRequest request, HttpServletResponse response) &#123; //æ”¾åœ¨å½¢å‚è¢«å®ä¾‹åŒ–äº† System.out.println(request); System.out.println(response); return null; &#125; @RequestMapping(path = "/test02", method = RequestMethod.GET) public ModelAndView test02(Map&lt;String, Object&gt; map) &#123; //é»˜è®¤å®ä¾‹åŒ–çš„HashMap System.out.println(map); return null; &#125; @RequestMapping(path = "/test03", method = RequestMethod.GET) public ModelAndView test03(String[] hobby) &#123; //æ²¡æœ‰å®ä¾‹åŒ– System.out.println(hobby); return null; &#125; @RequestMapping(path = "/test04", method = RequestMethod.GET) public ModelAndView test04(User user) &#123; //å®ä¾‹åŒ–äº† System.out.println(user); return null; &#125; @RequestMapping(path = "/test05", method = RequestMethod.GET) public ModelAndView test05(ArrayList&lt;String&gt; list) &#123; //Listé»˜è®¤ä¸ä¼šè¢«å®ä¾‹åŒ– System.out.println(list); return null; &#125; //ä»€ä¹ˆæ—¶å€™ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹å’ŒåŒ…è£…ç±» //1.å½“ä½ ç¡®å®šæ•°æ®ä¸€å®šå­˜åœ¨çš„æ—¶å€™ï¼Œè¯·ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ //2.å¦‚æœæ•°æ®å¯èƒ½ä¸å­˜åœ¨ï¼Œæ¨èä½¿ç”¨åŒ…è£…ç±»ï¼Œæ¨èå®ä½“BeanæŒä¹…åŒ–ç±»åå°½é‡ä½¿ç”¨åŒ…è£…ç±» @RequestMapping(path = "/test06", method = RequestMethod.GET) public ModelAndView test06(int role_id) &#123; //æŠ¥é”™æ˜¯å› ä¸ºrole_idä¸ºnull,intä¸èƒ½æœ‰null System.out.println(role_id); return null; &#125; @RequestMapping(path = "/test07", method = RequestMethod.GET) public ModelAndView test07(Integer role_id) &#123; System.out.println(role_id); return null; &#125;&#125; 4.result.jsp123456789&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;æµ‹è¯•&lt;/body&gt;&lt;/html&gt; 5.æ§åˆ¶å™¨ä¸­çš„æ•°æ®è¿”å›ç±»å‹ ä»»æ„æ•°æ®ç±»å‹è¯´æ˜ JSONæ ¼å¼ FastJSON,ä½†æ˜¯SpringMVCæ˜¯æ”¯æŒè¯¥FastJSONçš„,ä½†æ˜¯æˆ‘ä»¬éœ€è¦é¢å¤–é…ç½®ä¿¡æ¯ SpringMVCé»˜è®¤æ”¯æŒçš„JSONæ•°æ®çš„è½¬å‘ç¬¬ä¸‰åº“ä¸ºJackson FastJSON/Jackson/Gson/JSONç­‰åº“,ç›®çš„éƒ½æ˜¯ å°†JSONæ•°æ®è½¬æ¢ä¸ºJavaå¯¹è±¡ Javaå¯¹è±¡è½¬æ¢ä¸ºJSONæ ¼å¼å­—ç¬¦ä¸² ReturnTypeDemoController.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169package com.hs.web;import com.fasterxml.jackson.databind.ObjectMapper;import com.hs.model.User;import org.springframework.http.HttpHeaders;import org.springframework.http.HttpStatus;import org.springframework.http.MediaType;import org.springframework.http.ResponseEntity;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.servlet.ModelAndView;import javax.servlet.ServletException;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.IOException;import java.io.PrintWriter;import java.util.HashMap;import java.util.Map;/** * æ§åˆ¶å™¨ä¸­çš„æ•°æ®è¿”å›ç±»å‹ */@Controllerpublic class ReturnTypeDemoController &#123; // @RequestMapping(path = "/hs01",method = &#123;RequestMethod.GET,RequestMethod.POST&#125;)// ç®€å†™ @GetMapping("/hs01")// @PostMapping// @PutMapping................ public ModelAndView test01() &#123; ModelAndView mav = new ModelAndView(); mav.setViewName("jsp/result"); return mav; &#125; @GetMapping("/hs02") public void test02() &#123; System.out.println("voidæƒ…å†µä¸€ï¼šé»˜è®¤æƒ…å†µä¸‹æ˜¯æŒ‰ç…§è·¯å¾„è¿›è¡Œè¯·æ±‚è½¬å‘çš„çš„æŸ¥æ‰¾é¡µé¢è®¿é—®çš„æ˜¯hs02.jsp"); &#125; /** * é€šè¿‡servletçš„è·³è½¬æ–¹å¼_ä¸ªäººä¸æ¨è */ @GetMapping("/hs03") public void test03(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123; request.getRequestDispatcher("/WEB-INF/jsp/result.jsp").forward(request, response); &#125; /** * ç›´æ¥è¾“å‡ºé¡µé¢ */ @GetMapping("/hs04") public void test04(HttpServletResponse response) throws IOException &#123; response.setContentType("text/html;charset=UTF-8"); PrintWriter out = response.getWriter(); out.write("&lt;h1 style='color:blue'&gt;å’Œå°š&lt;/h1&gt;"); out.flush(); out.close(); &#125; /** * é»˜è®¤æƒ…å†µä¸‹å°±æ˜¯è¯·æ±‚è½¬å‘æŸ¥æ‰¾é¡µé¢ * å…ˆjspè¯·æ±‚è½¬å‘è§£æå™¨ï¼Œå†æ‰¾jsp/resulté¡µé¢ * * @return */ @GetMapping("/hs05") public String test05() &#123; return "jsp/result"; &#125; /** * ä¹Ÿå¯ä»¥è®¾ç½®é‡å®šå‘ */ @GetMapping("/hs06") public String test06() &#123; return "redirect:/hs05"; &#125; /** * è¾“å‡ºå†…å®¹_å¦‚ä½•å¤„ç†,éœ€è¦è®¾ç½®ç¼–ç é€šè¿‡è¿‡æ»¤å™¨ */ @GetMapping("/hs07") public ResponseEntity&lt;String&gt; test07() &#123; HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.TEXT_HTML); //è®¾ç½®å“åº”çš„å†…å®¹æ ¼å¼ String content = "&lt;h1 style='color:blue'&gt;æ²™åƒ§222&lt;/h1&gt;"; return new ResponseEntity&lt;String&gt;(content, headers, HttpStatus.CREATED); &#125; /** * è¾“å‡ºå†…å®¹_ç®€å†™æ–¹å¼ */ @GetMapping(path = "/hs08",produces = "text/html;charset=UTF-8") //è®¾ç½®å“åº”çš„å†…å®¹æ ¼å¼å’Œç¼–ç ï¼Œåé¢é…ç½®è¿‡æ»¤å™¨å°±å¯ä»¥ä¸å†™è¯¥ä»£ç äº† @ResponseBody //é’ˆå¯¹äºä½ è¿”å›çš„æ•°æ®çš„ç±»å‹è¿›è¡Œè½¬æ¢ï¼Œå¯ä»¥è½¬æ¢ä»»æ„ç±»å‹ï¼Œä½†æ˜¯éœ€è¦ç¬¬ä¸‰æ–¹åº“çš„æ”¯æŒ public String test08() &#123; return "&lt;h1 style='color:blue'&gt;æ²™åƒ§222&lt;/h1&gt;"; &#125; ///=================è¿”å›ä»»æ„æ•°æ®ç±»å‹[æœåŠ¡ç«¯è¿”å›æ•°æ®]======================= /** * ä¼ ç»Ÿæ¨¡å¼ç›´æ¥è¾“å‡ºJSONæ•°æ® */ @GetMapping("/hs09") public void test09(HttpServletResponse response) throws IOException &#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("hs","å’Œå°š"); map.put("class", "è®¡ç®—æœº"); map.put("flag", true); response.setContentType("text/html;charset=UTF-8"); PrintWriter out = response.getWriter(); ObjectMapper objectMapper = new ObjectMapper(); String jsonStr = objectMapper.writeValueAsString(map); out.write(jsonStr); out.flush(); out.close(); &#125; /** * é€šè¿‡JackJsonè¿”å›Jsonæ•°æ® * @return */ @RequestMapping("/hs10") public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; test10() &#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("hs","111"); map.put("class", "2222"); map.put("flag", true); HttpHeaders headers = new HttpHeaders(); headers.setContentType(MediaType.TEXT_HTML); return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(map, headers, HttpStatus.CREATED); &#125; /** * é€šè¿‡ResponseBodyå¤„ç†æ•°æ® * @return */ @RequestMapping("/hs11") @ResponseBody //å¯¹è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä¸æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡Jacksonè½¬æ¢æˆjsonæ ¼å¼å­—ç¬¦ä¸² //é—ç•™é—®é¢˜ï¼šåœ¨IEæµè§ˆå™¨è¯¥æ³¨è§£æœ‰BUG public Map&lt;String, Object&gt; test11() &#123; Map&lt;String, Object&gt; map = new HashMap&lt;&gt;(); map.put("hs","å’Œå°š"); map.put("class", "è®¡ç®—æœº"); map.put("flag", true); return map; &#125; /** * é€šè¿‡ResponseBodyå¤„ç†æ•°æ® * è‡ªå®šä¹‰çš„ç±»å‹ * @return */ @RequestMapping("/hs12") @ResponseBody //å¯¹è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œå¦‚æœä¸æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡Jacksonè½¬æ¢æˆjsonæ ¼å¼å­—ç¬¦ä¸² public User test12() &#123; User user = new User(); user.setRole_id(19999); user.setName("å’Œå°š"); return user; &#125;&#125; ä¸ªäººè§‰å¾—ï¼Œhs01ã€hs05ã€hs11ã€hs12æ¯”è¾ƒå¸¸ç”¨ï¼Œ@ResponseBody çœŸçš„å¾ˆå¼ºå¤§]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰é™æ€èµ„æºæ’é™¤æ–¹æ¡ˆ]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%8E%92%E9%99%A4%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[å¯¹äºé™æ€èµ„æº(å›¾ç‰‡ï¼Œcssï¼Œjs)è¿™äº›è¯·æ±‚ï¼Œè®©ä»–ä»¬ä¸ç»è¿‡DispatcherServlet(è¿™ä¸ªå†å»æ‰¾ç›¸åº”çš„æ§åˆ¶å™¨) æºç è·å–github 1.é¡¹ç›®ç»“æ„ é‚£ä¸ªtest.jpg,éšæ„è‡ªå·±æ‰¾ä¸€å¼ å›¾ç‰‡ 2.è§£å†³æ–¹å¼ä¸€ï¼šæ¨èæ–¹å¼demo01.jsp 12345678910&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;æ˜¾ç¤ºå›¾ç‰‡&lt;/h2&gt;&lt;img src="test.jpg" alt=""&gt;&lt;/body&gt;&lt;/html&gt; æ­¤æ—¶ä¸ºäº†è®¿é—®åŒè·¯å¾„ä¸‹çš„test.jspå›¾ç‰‡ï¼Œä½†æ˜¯å¦‚æœç›´æ¥è®¿é—®ï¼Œå›¾ç‰‡ä¸ä¼šå‡ºæ¥ï¼Œé‚£æ˜¯å› ä¸ºè¯·æ±‚ä¼šç»è¿‡DispatcherServletå¤„ç†ï¼Œæ‰¾åˆ°ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç°åœ¨ä¸ºäº†è®©é™æ€èµ„æºä¸ç»è¿‡DispatcherServletã€‚è¿™æ ·å°±èƒ½æ˜¾ç¤ºå‡ºæ¥ åœ¨web.xmlä¸­åŠ å…¥ 123&lt;!--4.é™æ€èµ„æº(å›¾ç‰‡ã€jsã€cssä¹‹ç±»çš„)(è®©è¿™äº›èµ„æºä¸ç»è¿‡DispatcherServletå¤„ç†)çš„å¤„ç†æ–¹å¼ä¸€ æ¨èæ–¹å¼--&gt;&lt;mvc:default-servlet-handler default-servlet-name=&quot;default&quot;/&gt; 3.è§£å†³æ–¹å¼äºŒï¼šæ˜ å°„æ–¹å¼demo01.jsp 1234567891011&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h2&gt;æ˜¾ç¤ºå›¾ç‰‡&lt;/h2&gt;&lt;%--&lt;img src="test.jpg" alt=""&gt;--%&gt;&lt;img src="image/test.jpg" alt=""&gt;&lt;/body&gt;&lt;/html&gt; åœ¨web.xmlä¸­åŠ å…¥ 123456&lt;!--4.é™æ€èµ„æº(å›¾ç‰‡ã€jsã€cssä¹‹ç±»çš„)(è®©è¿™äº›èµ„æºä¸ç»è¿‡DispatcherServletå¤„ç†)çš„å¤„ç†æ–¹å¼ä¸€ æ¨èæ–¹å¼--&gt;&lt;!--&lt;mvc:default-servlet-handler default-servlet-name="default"/&gt;--&gt;&lt;!--4.é™æ€èµ„æºçš„å¤„ç†æ–¹å¼äºŒ(å¯ä»¥å†™å¤šä¸ªï¼Œä»ä¸Šè€Œä¸‹æ‰¾ï¼Œæ‰¾åˆ°å°±ä¸å†æ‰¾) æ˜ å°„æ–¹å¼(mappingä¸­/image/åé¢çš„æ•°æ®ï¼Œé»˜è®¤ä¼šè¿½åŠ åˆ°WEB-INF/åé¢ï¼Œå»/WEB-INF/ä¸‹é¢å»æ‰¾èµ„æºåŠ è½½å‡ºæ¥)--&gt;&lt;mvc:resources mapping="/image/**" location="/WEB-INF/"/&gt;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰@RequestMappingä¸“é¢˜]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89-RequestMapping%E4%B8%93%E9%A2%98%2F</url>
    <content type="text"><![CDATA[å…³äºæ˜ å°„è·¯å¾„çš„å®šä¹‰æ–¹å¼(å¤šè·¯å¾„ï¼Œé€šé…ç¬¦ï¼Œå ä½ç¬¦ä¼ é€’æ•°æ®)ï¼Œæ§åˆ¶ä¼ é€’çš„å‚æ•°ï¼Œè¯·æ±‚æ–¹å¼(get,post,delete,put,patch) æºç è·å–github 1.é¡¹ç›®ç»“æ„ 2.è¯»å–è‡ªå®šä¹‰æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åç§°å’Œä½ç½®web.xml 123456789101112131415161718192021&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" version="3.1"&gt; &lt;servlet&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;init-param&gt; &lt;!--è‡ªå®šä¹‰çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„åå­—å’Œä½ç½®--&gt; &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt; &lt;param-value&gt;/WEB-INF/springmvc.xml&lt;/param-value&gt; &lt;/init-param&gt; &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; &lt;/servlet&gt; &lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt; &lt;/servlet-mapping&gt;&lt;/web-app&gt; 3.æ˜ å°„æ–‡ä»¶çš„@RequestMappingè·¯å¾„æ–¹å¼å¤šè·¯å¾„è®¿é—®ï¼Œä¸€ä¸ªè·¯å¾„è®¿é—®ï¼Œä½¿ç”¨é€šé…ç¬¦ï¼Œå ä½ç¬¦ä¼ é€’æ•°æ® PathDemoController.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.servlet.ModelAndView;/** * æ˜ å°„è·¯å¾„çš„å®šä¹‰æ–¹å¼ */@Controller//(value = "hsController") //è¿™å°±æ˜¯ç»™controllerå–çš„åå­—ï¼Œé»˜è®¤æ˜¯ç±»åé¦–å­—æ¯å°å†™@RequestMapping("/cy42") //è¿™ä¸ªæ˜¯è®¾ç½®æœ¬ç±»æ€»çš„è·¯å¾„,æ¯”å¦‚ä½ è®¿é—®è¿™ä¸ªç±»çš„test01ï¼Œç½‘å€æ å°±è¦å†™localhost:8080/mvc/cy42/test01public class PathDemoController &#123; @RequestMapping(path = &#123;"/test01","/test02"&#125;) public ModelAndView test01() &#123; System.out.println("å¤šè·¯å¾„è®¿é—®ï¼Œç”¨æ•°ç»„è¿™æ ·è®¾ç½®"); return null; &#125; @RequestMapping(path = "/test03") public ModelAndView test03() &#123; System.out.println("ä¸€ä¸ªè·¯å¾„"); return null; &#125; @RequestMapping("/test04") public ModelAndView test04() &#123; System.out.println("åªæœ‰ä¸€ä¸ªè·¯å¾„å±æ€§çš„å€¼ï¼Œå¯ä»¥çœç•¥"); return null; &#125; //1.åœ¨æ˜ å°„è·¯å¾„ä¸­å¯ä»¥é€‚åº”é€šé…ç¬¦ * //A.è°æè¿°çš„æ¸…æ¥šå°±æ‰¾è° eg:/test01 æ‰¾/test01 //B.é€šé…ç¬¦ä½¿ç”¨çš„å¾ˆå°‘ @RequestMapping("/*") public ModelAndView test05() &#123; System.out.println("å¯ä»¥ä½¿ç”¨é€šé…ç¬¦"); return null; &#125; @RequestMapping("/**") public ModelAndView test06() &#123; System.out.println("ä»»æ„å±‚æ¬¡"); return null; &#125; //ä½¿ç”¨å ä½ç¬¦ï¼Œä¸€èˆ¬åªæ˜¯ä¼ é€’ä¸»é”®å’Œç®€å•çš„å­—ç¬¦ä¸² // å®ŒæˆRESTé£æ ¼çš„è·¯å¾„ï¼Œä¼˜å…ˆçº§æ¯”é€šé…ç¬¦é«˜ @RequestMapping("/&#123;user_id&#125;") //user_idæ¥æ”¶è¾“å…¥çš„è·¯å¾„å€¼ public ModelAndView test06(@PathVariable("user_id") String id) &#123; //ä½¿ç”¨æ³¨è§£ï¼ŒæŠŠuser_idæ¥æ”¶åˆ°çš„å€¼èµ‹ç»™id System.out.println("ä½¿ç”¨å ä½ç¬¦,"+id); System.out.println(id); return null; &#125;&#125; åœ¨æµè§ˆå™¨ç½‘å€æ è¾“å…¥localhost:8080/mvc/cy42/xxè®¿é—®è¿™äº›è·¯å¾„ï¼Œå ä½ç¬¦è®¿é—®å°±æ˜¯localhost:8080/mvc/xxx,ç„¶åuser_idå°±æ¥æ”¶åˆ°äº†ä½ çš„xxxå€¼ 4.åœ¨ç½‘å€æ ä¼ é€’å‚æ•°(paramså±æ€§)ParamsDemoController.java 12345678910111213141516171819202122232425package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.servlet.ModelAndView;/**æ§åˆ¶ä¼ é€’çš„å‚æ•° * å¦‚æœæ²¡æœ‰ä¼ é€’å‚æ•°ä¼šæŠ¥400çš„é”™è¯¯ */@Controller@RequestMapping("/vip")public class ParamsDemoController &#123; @RequestMapping(path = "/param01",params = "hs=tomcat") public ModelAndView test01() &#123; System.out.println("ä½ å¿…é¡»è¦ä¼ é€’ä¸€ä¸‹å½¢å¼çš„æ•°æ®é‡Œæ»¡è¶³paramsé‡Œçš„æ•°æ®ï¼Œeg:param01?hs=tomcat&amp;id=100"); return null; &#125; @RequestMapping(path = "/param02",params = &#123;"hs!=tomcat","method=add"&#125;) public ModelAndView test02() &#123; System.out.println("!=,hs!=tomcatæ˜¯æŒ‡ï¼Œåªè¦ä¸è¾“å…¥hs=tomcatï¼Œå…¶ä»–çš„éƒ½æ»¡è¶³"); return null; &#125;&#125; 5.è¯·æ±‚æ–¹å¼web.xml åœ¨HTMLé¡µé¢,è¯·æ±‚æ–¹å¼æœ‰å‡ ç§? GET: GETåœ¨åœ°å€æ èƒ½çœ‹åˆ°æ•°æ® POST: åœ¨åœ°å€æ ä¸èƒ½çœ‹åˆ°æ•°æ® æœ‰ä¸”åªæœ‰è¿™ä¸¤ç§è¯·æ±‚ï¼ï¼ ä½†æ˜¯SpirngMvcæ”¯æŒæœ‰8ç§è¯·æ±‚æ–¹å¼ å®˜æ–¹æ–‡æ¡£ï¼š HTTP Method Conversion A key principle of REST is the use of the Uniform Interface. This means that all resources (URLs) can be manipulated using the same four HTTP methods: GET, PUT, POST, and DELETE. For each method, the HTTP specification defines the exact semantics. For instance, a GET should always be a safe operation, meaning that is has no side effects, and a PUT or DELETE should be idempotent, meaning that you can repeat these operations over and over again, but the end result should be the same. While HTTP defines these four methods,HTML only supports two: GET and POST.Fortunately, there are two possible workarounds: ç¬¬ä¸€ç§: you can either use JavaScript to do your PUT or DELETE,[ä¸æ¨è,å› ä¸ºæœ‰ä¸€äº›æµè§ˆå™¨ä¸ä¸æ”¯æŒPUT/DELETE IE6/7/8] ç¬¬äºŒç§æ–¹å¼æ­¥éª¤å¦‚ä¸‹ï¼š ç¬¬ä¸€æ­¥: éœ€è¦ä½¿ç”¨POSTè¯·æ±‚ä¸ºçœŸæ­£çš„è¯·æ±‚æ–¹å¼or simply do a POST with the â€˜realâ€™ methodç¬¬äºŒæ­¥: è¡¨å•å½“ä¸­éœ€è¦è‡ªå·±è®¾ç½®ä¸€ä¸ªéšè—çš„&lt;input&gt;æ ‡ç­¾as an additional parameter (modeled as a hidden input field in an HTML form).ç¬¬ä¸‰æ­¥: web.xmlä¸­é…ç½®è¿‡æ»¤å™¨ This latter trick is what Springâ€™s HiddenHttpMethodFilter does. This filter is a plain Servlet Filter (Servletè¿‡æ»¤å™¨) /* è·¯å¾„è¿‡æ»¤å™¨ åå­—Servletè¿‡æ»¤å™¨and therefore it can be used in combination with any web framework (not just Spring MVC). Simply add this filter to your web.xml, and a POST withç¬¬å››æ­¥: ä½ çš„&lt;input name=â€_methodâ€ value=â€GET|POST|DELETE|PUTâ€(ä¸åŒºåˆ†å¤§å°å†™)&gt;a hidden _method parameter will be converted into the corresponding HTTP method request. ä¸‹é¢ä»£ç åŠ åœ¨ web.xml 123456789101112&lt;!--httpçš„è¯·æ±‚è½¬æ¢è¿‡æ»¤å™¨è¿‡æ»¤å™¨ä½¿htmlä¸­æ”¯æŒé™¤äº†getã€postï¼Œçš„å…¶ä»–è¯·æ±‚putï¼Œdeleteï¼Œpatch--&gt;&lt;filter&gt; &lt;filter-name&gt;httpMethodFilter&lt;/filter-name&gt; &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt; &lt;filter-name&gt;httpMethodFilter&lt;/filter-name&gt; &lt;!--è®¾ç½®éœ€è¦è¿‡æ»¤çš„Servletçš„åå­—ï¼Œå°±æ˜¯ä¸‹é¢é‚£ä¸ªservlet--&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;&lt;/filter-mapping&gt; 6.è¯·æ±‚æ–¹å¼controllerMethodDemoController.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RequestMethod;import org.springframework.web.servlet.ModelAndView;/** * è¯·æ±‚æ–¹å¼ */@Controller@RequestMapping("/http")public class MethodDemoController &#123; @RequestMapping(path = "/user", method = RequestMethod.GET) public ModelAndView GET() &#123; System.out.println("GETè¯·æ±‚ï¼šåªèƒ½åšæŸ¥è¯¢æ“ä½œ"); return null; &#125; @RequestMapping(path = "/user", method = RequestMethod.POST) public ModelAndView POST() &#123; System.out.println("POSTè¯·æ±‚ï¼šæ·»åŠ æ“ä½œ"); return null; &#125; @RequestMapping(path = "/user", method = RequestMethod.DELETE) public ModelAndView DELETE() &#123; System.out.println("DELETEè¯·æ±‚ï¼šåˆ é™¤æ“ä½œ"); return null; &#125; @RequestMapping(path = "/user", method = RequestMethod.PUT) public ModelAndView PUT() &#123; System.out.println("PUTè¯·æ±‚ï¼šæ›´æ–°æ“ä½œ[ç­‰å¹‚(ä¹Ÿå°±æ˜¯å…¨éƒ¨æ›´æ–°)]"); return null; &#125; @RequestMapping(path = "/user", method = RequestMethod.PATCH) public ModelAndView PATCH() &#123; System.out.println("PATCHè¯·æ±‚ï¼šæ›´æ–°æ“ä½œ[ä¸ç­‰å¹‚]"); return null; &#125;&#125; 7.è¯·æ±‚æ–¹å¼é¡µé¢ä»£ç request.jsp 1234567891011121314151617181920212223242526272829303132333435363738&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;%-- ä¸ºäº†æ”¯æŒå…¶ä»–çš„è¯·æ±‚æ–¹å¼ï¼ŒæŠŠmethodéƒ½æ”¹ä¸ºpostï¼Œç„¶ååŠ å…¥ä¸€ä¸ª &lt;input type="hidden" name="_method" value="get|post|put|delete|patch"&gt; valueä¸åˆ†å¤§å°å†™ï¼Œname=xxxå›ºå®š--%&gt; &lt;h2&gt;getè¯·æ±‚&lt;/h2&gt; &lt;form action="http/user" method="post"&gt; &lt;button&gt;getè¯·æ±‚&lt;/button&gt; &lt;input type="hidden" name="_method" value="get"&gt; &lt;/form&gt; &lt;h2&gt;postè¯·æ±‚&lt;/h2&gt; &lt;form action="http/user" method="post"&gt; &lt;button&gt;postè¯·æ±‚&lt;/button&gt; &lt;input type="hidden" name="_method" value="post"&gt; &lt;/form&gt; &lt;h2&gt;deleteè¯·æ±‚&lt;/h2&gt; &lt;form action="http/user" method="post"&gt; &lt;button&gt;deleteè¯·æ±‚&lt;/button&gt; &lt;input type="hidden" name="_method" value="delete"&gt; &lt;/form&gt; &lt;h2&gt;putè¯·æ±‚&lt;/h2&gt; &lt;form action="http/user" method="post"&gt; &lt;button&gt;putè¯·æ±‚&lt;/button&gt; &lt;input type="hidden" name="_method" value="put"&gt; &lt;/form&gt; &lt;h2&gt;patchè¯·æ±‚&lt;/h2&gt; &lt;form action="http/user" method="post"&gt; &lt;button&gt;patchè¯·æ±‚&lt;/button&gt; &lt;input type="hidden" name="_method" value="patch"&gt; &lt;/form&gt;&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SpringMvcå­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰SpringMvcç¯å¢ƒæ­å»º]]></title>
    <url>%2F2018%2F08%2F20%2FSpringMvc%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89SpringMvc%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[è®²è¿°ï¼Œspringmvcæ¦‚è¿°ï¼ŒåŸç†ï¼Œç¯å¢ƒçš„æ­å»ºï¼Œcontroller(è¯·æ±‚è½¬å‘/é‡å®šå‘)è·³è½¬åˆ°é¡µé¢ï¼Œcontrollerè·³åˆ°å¦å¤–ä¸€ä¸ªcontrollerï¼Œé…ç½®æ ¸å¿ƒçš„DispatcherServletï¼Œé…ç½®é»˜è®¤çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œjspè¯·æ±‚è½¬å‘çš„è§†å›¾è§£æå™¨ã€‚ æºç è·å–github 1.SpringMvcæ¦‚è¿°SpringMVC æ˜¯éš¶å±äºSpringæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ¨¡å—è€Œå·² è®©æ§åˆ¶å±‚æ›´åŠ çš„ç®€å• SpringMVCæ˜¯WEBå±‚æ¡†æ¶ SpringMVCçš„æ¦‚è¿°(å®˜æ–¹æ–‡æ¡£é¡µé¢æœç´¢the web) Introduction to Spring Web MVC framework The Spring Web model-view-controller (MVC) framework is designed around a DispatcherServlet (ç¿»è¯‘ï¼šè®¾è®¡å›´ç»•ç€DispatcherServletï¼Œæ„æ€æ˜¯æˆ‘éœ€è¦é…ç½®ä¸€ä¸ªServlet)that dispatches requests to handlers, with configurable handler mappings(å¯ä»¥è®¾ç½®ä¸€ä¸ªæ˜ å°„), view resolution, locale, time zone and theme resolution as well as support for uploading files(æ”¯æŒä¸Šä¼ æ–‡ä»¶). The default handler is based on the @Controller and @RequestMapping annotations(é»˜è®¤æƒ…å†µä¸‹æ”¯æŒäº†@Controllerå’Œ@RequestMappingä¸¤ä¸ªæ³¨è§£),å¯¹æ¯”æˆ‘ä¹‹å‰å­¦çš„servletï¼š ä¹‹å‰çš„ï¼š@WebServlet(â€œ/sys/userâ€)é€šè¿‡æˆ‘ä»¬è®¾ç½®çš„æ˜ å°„è·¯å¾„/sys/userä¼šè®¿é—®åˆ°Servlet @Controller å°±ç›¸å½“äºå‘ŠçŸ¥ä½ çš„è¿™ä¸ªç±»ä¸ºæ§åˆ¶å™¨ @RequestMappingæ˜¯ç”¨æ¥è®¾ç½®æ˜ å°„çš„è·¯å¾„ offering a wide range of flexible handling methods. With the introduction of Spring 3.0, the @Controller mechanism also allows you to create RESTful [ç™¾åº¦ï¼Œè¿™æ˜¯ä¸€ä¸ªé£æ ¼ï¼Œè±†ç“£å°±æ˜¯ç”¨çš„è¿™ç§é£æ ¼] Web sites and applications, through the @PathVariable annotation and other features. æ‰€æœ‰çš„è¯·æ±‚éƒ½è¦ç»è¿‡å‰ç«¯æ§åˆ¶å™¨å¤„ç†ï¼Œç„¶åç”±å®ƒå†³å®šæ‰¾åˆ°ä¸‹ä¸€ä¸ªcontrolleræ˜¯è°ï¼Œç„¶åè¿™ä¸ªcontrolleråˆå“åº”å›å»DispatcherServletï¼Œè§†å›¾è§£æå™¨å†³å®šä½¿ç”¨å“ªä¸ªæ¨¡æ¿ï¼Œæœ€ç»ˆå“åº”æˆHTMLã€‚ 2.ç¨‹åºç»“æ„ åœ¨ideaä¸­æ–°å»ºä¸€ä¸ªjavaeeé¡¹ç›®ï¼Œå…¶ä¸­éœ€è¦jaråŒ…ï¼Œå¯ä»¥åœ¨mavenä»“åº“ä¸­ä¸‹è½½ 3.ideaé…ç½®tomcatæ·»åŠ tomcat æ‰¾åˆ°ä½ è‡ªå·±çš„tomcatè·¯å¾„ï¼Œç„¶åç‚¹okæ·»åŠ å¥½ä½ çš„tomcatï¼Œç„¶åç‚¹okï¼Œ æŠŠä½ éœ€è¦éƒ¨ç½²åˆ°tomcatçš„webæœåŠ¡ï¼Œæ·»åŠ è¿›å»ï¼Œæ—è¾¹é‚£ä¸ªApplication context æ˜¯ä½ è®¿é—®è¿™ä¸ªé¡¹ç›®çš„åå­—ï¼Œæ¯”å¦‚/mvcï¼Œè®¿é—®è·¯å¾„å°±æ˜¯localhost:8080/mvc,ä¸‹é¢http portæ˜¯è®¿é—®çš„ç«¯å£å·ï¼Œç„¶åæœ‰ä¸ªæ˜¯è®¾ç½®æ‰“å¼€çš„æµè§ˆå™¨ï¼Œç„¶åå°±okäº†ï¼Œæœ€åç‚¹è¿è¡Œé”®ï¼Œå°±å¯ä»¥è¿è¡Œ 4.é…ç½®æ ¸å¿ƒçš„DispatcherServletåœ¨web.xmlä¸­åŠ å…¥ 1234567891011121314151617181920&lt;servlet&gt; &lt;!--é»˜è®¤çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt; &lt;!-- æœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™å°±å¯¹DispatcherServletè¿›è¡Œå®ä¾‹åŒ–æ“ä½œ --&gt; &lt;!-- å€¼è¶Šå°ï¼Œè¶Šè¢«è¶Šä¼˜å…ˆå®ä¾‹åŒ– --&gt; &lt;load-on-startup&gt;2&lt;/load-on-startup&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt; &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt; &lt;!-- / æ‰€æœ‰çš„èµ„æºè®¿é—®éƒ½éœ€è¦ç»è¿‡ DispatcherServletå¤„ç† è·¯å¾„ href src..... åŒºåˆ† /* å’Œ / --&gt; &lt;url-pattern&gt;/&lt;/url-pattern&gt;&lt;/servlet-mapping&gt; 5.é…ç½®é»˜è®¤çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ‰€åœ¨ä½ç½®å’Œåç§° Upon (initåˆå§‹åŒ–)initialization of a DispatcherServlet, Spring MVC looks for a file named *[servlet-name]-servlet.xml*(DispatcherServletåˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¼šæ‰¾ä¸€ä¸ªè¿™ä¸ªæ ¼å¼çš„æ–‡ä»¶) åœ¨DispatcherServletä¸­ï¼Œæˆ‘ä»¬å†™äº†è¿™ä¸ªspringmvcï¼Œå°±ä¼šæ‰¾springmvc-servlet.xmlè¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨WEB-INFä¸‹ in the WEB-INF directory of your web application and creates the beans defined there, overriding the definitions of any beans defined with the same name in the global scope. springmvc-servlet.xml 123456789101112131415161718192021&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:mvc="http://www.springframework.org/schema/mvc" xmlns:context="http://www.springframework.org/schema/context" xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd"&gt; &lt;!--1.å¯åŠ¨SpringMvcæ³¨è§£--&gt; &lt;mvc:annotation-driven/&gt; &lt;!--2.æ‰«æcontroller--&gt; &lt;!--å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ * com.*.web å¯ä»¥è¯†åˆ«ï¼šcom.hs.web com.sd.web com.sdsa.web ä½†æ˜¯ä¸èƒ½è¯†åˆ«com.hs.sd.web è®¿é—®ä»»æ„ä¸€å±‚ com.**.web å¯ä»¥è¯†åˆ«com.web com.hs.web com.sad.asd.asd.web --&gt; &lt;context:component-scan base-package="com.hs.**.web"/&gt;&lt;/beans&gt; 6.Controlleræ–‡ä»¶SkipDemoController.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061package com.hs.web;import org.springframework.stereotype.Controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.servlet.ModelAndView;import org.springframework.web.servlet.view.UrlBasedViewResolver;/** * è·³è½¬ä¸“é¢˜ï¼šè¯·æ±‚è½¬å‘ï¼Œé‡å®šå‘ï¼Œä¸€ä¸ªcontrollerè·³åˆ°å¦å¤–ä¸€ä¸ªcontroller */@Controllerpublic class SkipDemoController &#123; //è®¾ç½®æ˜ å°„çš„è·¯å¾„ //å½“æˆ‘åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ http://127.0.0.1:8080/mvc/hs01 @RequestMapping("/hs01") /*ä»Controllerè·³è½¬åˆ°jsp_é»˜è®¤æ˜¯è¯·æ±‚è½¬å‘ è¯·æ±‚è½¬å‘ï¼Œé¡µé¢ä¸è·³è½¬ï¼Œå¯ä»¥è®¿é—®WEB-INFè·¯å¾„ä¸‹çš„ä¸œè¥¿*/ public ModelAndView test01()&#123; ModelAndView nav = new ModelAndView(); nav.setViewName("/WEB-INF/jsp/result01.jsp"); return nav; &#125; /*ä»Controllerè·³è½¬åˆ°jsp_é»˜è®¤æ˜¯è¯·æ±‚è½¬å‘ è¯·æ±‚è½¬å‘ï¼Œé¡µé¢ä¸è·³è½¬ï¼Œå¯ä»¥è®¿é—®WEB-INFè·¯å¾„ä¸‹çš„ä¸œè¥¿*/ @RequestMapping("/hs011") public ModelAndView test011()&#123; ModelAndView nav = new ModelAndView(); nav.setViewName("jsp/result01"); //å¦‚æœè®¾ç½®äº†jspè¯·æ±‚è½¬å‘çš„è§†å›¾è§£æå™¨ return nav; &#125; @RequestMapping("/hs02") /*ä»Controllerè·³è½¬åˆ°jsp_é‡å®šå‘ ä½†æ˜¯å®˜æ–¹ä¸æ¨èç›´æ¥é‡å®šå‘åˆ°jspé¡µé¢ é‡å®šå‘ï¼Œé¡µé¢è·³è½¬ï¼Œä¸å¯ä»¥è®¿é—®WEB-INFè·¯å¾„ä¸‹çš„ä¸œè¥¿*/ public ModelAndView test02()&#123; ModelAndView nav = new ModelAndView(); nav.setViewName("redirect:/test01.jsp"); return nav; &#125; /**ä»Controllerè·³è½¬åˆ°Controller_è¯·æ±‚è½¬å‘ * å½“é…ç½®äº†JSPçš„è¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨åä»Controllerè·³è½¬åˆ°å¦å¤–ä¸€ä¸ªControllerï¼Œ * å¿…é¡»æŒ‡æ˜å‰ç¼€ï¼šforward/redirect * @return */ @RequestMapping("/hs03") public ModelAndView test03() &#123; ModelAndView nav = new ModelAndView(); nav.setViewName("forward:/hs011"); //è¿™ä¸ªå†™forwardçš„åŸå› æ˜¯ï¼Œé¿å…jspè¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ï¼ŒæŠŠhs011è§£ææˆäº†jspé¡µé¢UrlBasedViewResolver.FORWARD_URL_PREFIX=forward// nav.setViewName("/hs01"); return nav; &#125; /*ä»Controllerè·³è½¬åˆ°Controller_é‡å®šå‘*/ @RequestMapping("/hs04") public ModelAndView test04() &#123; ModelAndView nav = new ModelAndView(); nav.setViewName(UrlBasedViewResolver.REDIRECT_URL_PREFIX+"/hs01"); //UrlBasedViewResolver.REDIRECT_URL_PREFIX == redirect: return nav; &#125;&#125; 7.è§†å›¾è§£æå™¨åœ¨springmvc-servlet.xmlçš„&lt;context:component-scan base-package=â€com.hs.**.webâ€/&gt;åé¢åŠ  12345678910111213 &lt;!--jspè¯·æ±‚è½¬å‘è§†å›¾è§£æå™¨ è¯·æ±‚è½¬å‘jspé¡µé¢çš„æ—¶å€™ï¼Œåœ¨è·¯å¾„ä¸ŠåŠ å…¥å‰ç¼€å’Œåç¼€--&gt;&lt;!--ä¸‹é¢ç›¸å½“äº InternalResourceViewResolver internalResourceViewResolver = new InternalResourceViewResolver()--&gt;&lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt; &lt;!--å‰ç¼€--&gt; &lt;!--ç›¸å½“äºsetPrefix("/WEB-INF/")--&gt; &lt;property name="prefix" value="/WEB-INF/"/&gt; &lt;!--åç¼€--&gt; &lt;property name="suffix" value=".jsp"/&gt; &lt;!--æ”¯æŒJSTL--&gt; &lt;property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/&gt;&lt;/bean&gt; 8.é¡µé¢ä»£ç result01.jsp 123456789&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;hello word&lt;/body&gt;&lt;/html&gt; test01.jsp 123456789&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Title&lt;/title&gt;&lt;/head&gt;&lt;body&gt;æµ‹è¯•&lt;/body&gt;&lt;/html&gt;]]></content>
      <categories>
        <category>SpringMvcå­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
        <tag>SpringMvc</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ideaé…ç½®githubå¹¶ä¸Šä¼ é¡¹ç›®]]></title>
    <url>%2F2018%2F08%2F19%2Fidea%E9%85%8D%E7%BD%AEgithub%E5%B9%B6%E4%B8%8A%E4%BC%A0%E9%A1%B9%E7%9B%AE%2F</url>
    <content type="text"><![CDATA[æ„Ÿè§‰è‡ªå·±ä¹‹å‰å†™çš„å­¦ä¹ ç¬”è®°ï¼Œæ ¹æœ¬ä¸å«ç¬”è®°ï¼Œåªæ˜¯ä¸ºäº†æŠŠä»£ç æ”¾ä¸Šå»è€Œå·²ï¼Œç„¶åè‡ªå·±ä¹Ÿå­¦ä¹ äº†å…¶ä»–çš„å¾ˆå¤šå­¦ä¹ åšå®¢çš„å†™æ³•ï¼Œå†™å°‘é‡çš„ä»£ç è¿›å»ï¼Œå†é…ä¸Šç›¸åº”çš„æ–‡å­—è¯´æ˜ï¼Œç„¶åæŠŠå…¨éƒ¨æºç æ”¾åœ¨githubä¸Šï¼Œæˆ‘è§‰å¾—æˆ‘è‡ªå·±ä¹Ÿå€Ÿé‰´è¿™æ ·å†™å­¦ä¹ åšå®¢ï¼Œç„¶åä»Šå¤©å­¦ä¹ äº†ideaé…ç½®githubï¼Œç„¶åä¸Šä¼ é¡¹ç›®ï¼Œè‡ªå·±ä¹Ÿç™¾åº¦äº†è®¸å¤šæ•™ç¨‹ï¼Œä½†æ˜¯å„ç§éƒ½ä¸ä¸€æ ·ï¼Œè‡ªå·±å°±æ…å’•äº†ä¸€ç•ªï¼Œæœ‰äº†å±äºè‡ªå·±çš„æ•™ç¨‹ï¼Œåšä¸ªè®°å½•å§ã€‚ 1.ä»€ä¹ˆæ˜¯gitå­¦ä¹ æ•™ç¨‹ï¼šå»–é›ªå³°çš„gitæ•™ç¨‹â€”-https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000 2.ä¸‹è½½å®‰è£…gitä¸‹è½½é“¾æ¥ï¼šhttps://git-scm.com/ 3.æ³¨å†Œä¸€ä¸ªgithubgithubå®˜ç½‘ï¼šhttps://github.com/ 4.githubåˆ›å»ºä¸€ä¸ªä»“åº“ 5.ideaé…ç½®github æ‰“å¼€è‡ªå·±çš„é¡¹ç›® åœ¨settingé‡Œæ‰¾åˆ°gitå®‰è£…çš„æ–‡ä»¶ï¼Œç„¶åç‚¹testï¼Œå‡ºç°æˆåŠŸï¼Œæ³¨æ„æ˜¯binä¸‹çš„git.exe è®¾ç½®è‡ªå·±çš„githubè´¦å·å¯†ç ï¼Œ 6.ideaä¸Šä¼ é¡¹ç›®åˆ°github åˆ›å»ºæœ¬åœ°gitä»“åº“ï¼Œç„¶åé€‰æ‹©ä½ è¦ä¸Šä¼ çš„é¡¹ç›®åœ¨æ§åˆ¶å°å¯ä»¥çœ‹è§ç›¸åº”çš„gitæŒ‡ä»¤æ­¤æ—¶ä½ é€‰æ‹©çš„é¡¹ç›®çš„å†…å®¹åå­—å…¨éƒ¨å˜è‰² é€‰æ‹©ä¸ä¸Šä¼ åˆ°githubçš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ï¼Œç¬¬ä¸€ä¸ªä¸ºæ–‡ä»¶ï¼Œç¬¬äºŒä¸ªä¸ºæ–‡ä»¶å¤¹æˆ–è€…åœ¨commitçš„æ—¶å€™é€‰æ‹©éœ€è¦ä¸Šä¼ çš„ä¸œè¥¿æˆ–è€…ä¸ä¸Šä¼ çš„ä¸œè¥¿ commitåˆ°æœ¬åœ°ä»“åº“ è¿™é‡Œå°±æ˜¯commité€‰æ‹©æ§åˆ¶å°å‡ºç°ç›¸åº”çš„gitæŒ‡ä»¤ pushåˆ°è¿œç¨‹ä»“åº“githubä¸Šç„¶åurlè¾“å…¥åˆšæ‰å¤åˆ¶çš„githubä»“åº“åœ°å€ï¼Œnameæ˜¯å•¥æˆ‘ä¹Ÿä¸çŸ¥é“è¿™é‡Œç®­å¤´æ‰€æŒ‡çš„æ˜¯ä¸ŠåºŠåˆ°å“ªä¸ªåˆ†æ”¯çš„åå­—ï¼Œç‚¹å‡»å®ƒï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹åˆ†æ”¯çš„åå­—ï¼Œç„¶åå°±pushåˆ°ç›¸åº”çš„åˆ†æ”¯ï¼Œæ§åˆ¶å°å‡ºç°ç›¸åº”çš„gitæŒ‡ä»¤ pushæˆåŠŸ githubé¡µé¢ä¸Šæ˜¾ç¤º 7.å¦‚æœä»£ç ä¿®æ”¹äº†å†æäº¤é‡å¤ä¸Šé¢çš„ç¬¬3æ­¥å¼€å§‹ï¼Œ ç„¶ågithubé¡µé¢å°±æ˜¯è¿™æ ·çš„ 8.å…³é—­è¿™ä¸ªé¡¹ç›®çš„ç‰ˆæœ¬æ§åˆ¶ 9.è‡ªå·±åœ¨ç½‘ä¸Šçœ‹çš„ä¸€äº›ä¸é”™æ•™ç¨‹ https://www.cnblogs.com/jinjiyese153/p/6796668.html https://www.cnblogs.com/jinjiyese153/p/6796668.html https://my.oschina.net/u/2608182/blog/745178]]></content>
      <categories>
        <category>idea</category>
      </categories>
      <tags>
        <tag>idea</tag>
        <tag>github</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆä¸ƒï¼‰é‡è§çš„å‘]]></title>
    <url>%2F2018%2F08%2F06%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%83%EF%BC%89%E9%81%87%E8%A7%81%E7%9A%84%E5%9D%91%2F</url>
    <content type="text"><![CDATA[åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œé‡è§æ•°æ®åº“ä¸­ä¸­æ–‡ä¹±ç ï¼Œmybatiså¸¸è§çš„å¼‚å¸¸å’Œå¦‚ä½•è°ƒè¯•ï¼Œideaä¸çŸ¥é“å¦‚ä½•åˆ›å»ºxmlæ–‡ä»¶ï¼Œideaä¸­projectå’Œmoduleçš„å…³ç³»ï¼Œå¦‚ä½•æŠŠä¸€ä¸ªmoduleå¤åˆ¶æˆå¦å¤–ä¸€ä¸ªmoduleï¼Œæ¯æ¬¡ä¸€ä¸ªæ–°çš„mybatisé¡¹ç›®ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹è®°å¾—è¦ä¿®æ”¹ æºç è·å–github 1.è§£å†³æ•°æ®åº“ä¸­æ–‡ä¹±ç é—®é¢˜ æ–¹æ³•ä¸€(æ¨è)ï¼šæŠŠæ•°æ®åº“çš„é…ç½®æ–‡ä»¶ç¼–ç è®¾ç½®æˆUTF-8æˆ–utf8mb4ï¼Œä¸¤è€…åŒºåˆ«å°±æ˜¯UTF-8æœ€å¤§ä¸‰å­—èŠ‚ï¼Œåè€…æœ€å¤§å››å­—èŠ‚ æ“ä½œï¼š ä¹‹å‰è‡ªå·±åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€äº›æ•™ç¨‹è¯´åœ¨mysqlçš„å®‰è£…ç›®å½•ä¸‹ä¸€ä¸ªé…ç½®æ–‡ä»¶é‡Œä¿®æ”¹ï¼Œç»“æœè‡ªå·±æ‰¾äº†åŠå¤©äº†ï¼Œéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œç„¶åç”¨everythingæœç´¢ï¼Œæ‰¾åˆ°äº†é…ç½®æ–‡ä»¶ï¼Œç»“æœä¸æ˜¯å®‰è£…ç›®å½•ä¸‹â€¦â€¦ æ‰¾åˆ°å¦‚ä¸‹æ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œç”¨everythingæœç´¢ åœ¨æœ€åæ·»åŠ ä¸‹é¢ä»£ç  è‹¥è¦è®¾ç½®æˆutf-8ï¼ŒæŠŠutf8mb4ä¿®æ”¹æˆutf-8å³å¯ 123456789[client] default-character-set = utf8mb4 [mysql] default-character-set = utf8mb4 [mysqld] character-set-client-handshake = FALSE character-set-server = utf8mb4 collation-server = utf8mb4_unicode_ci init_connect=&apos;SET NAMES utf8mb4&apos; ä¿å­˜æ–‡ä»¶ï¼Œé‡å¯mysqlæœåŠ¡ æ–¹æ³•äºŒï¼šåœ¨æ¯æ¬¡è¿æ¥æ•°æ®åº“çš„urlæœ€åé¢åŠ å…¥ 1?useUnicode=true&amp;characterEncoding=UTF-8 2.mybatiså¸¸è§çš„å¼‚å¸¸ æ§åˆ¶å°æˆ–è€…å…¶ä»–ä½ç½®æŠ¥MyBatisUtilså·¥å…·ç±»çš„å¼‚å¸¸ 95%ä»¥ä¸Šï¼šæ˜¯æ˜ å°„æ–‡ä»¶ä½ å†™é”™äº† 5%ï¼šæ˜¯æ ¸å¿ƒé…ç½®æ–‡ä»¶å†™é”™äº† å› ä¸ºmybatis-config.xmlæ˜¯å…¥å£ï¼Œä¼šåŠ è½½å¾ˆå¤šçš„æ˜ å°„æ–‡ä»¶ï¼ŒæŠŠä»–ä»¬èåˆåœ¨ä¸€èµ·ï¼Œå¦‚æœå…¶ä¸­æœ‰ä»»ä½•ä¸€ä¸ªæ˜ å°„æ–‡ä»¶å‡ºé”™ï¼Œæ‰€æœ‰çš„å®šåˆ¶çš„SQLè¯­å¥éƒ½å°†æ— æ³•è¿è¡Œ å¦‚ä½•è°ƒè¯•ï¼Ÿ æŠŠè‡ªå·±çš„ï¼Œï¼Œï¼Œè¿™ä¸€è¡Œä»£ç æ³¨é‡Šæ‰ï¼Œç„¶åå†è¿è¡Œçœ‹æ§åˆ¶å°ï¼Œé”™è¯¯ä»ä¸‹å¾€ä¸Šçœ‹ï¼ŒCaused byxx 3.ideaå¦‚ä½•åˆ›å»ºxmlæ–‡ä»¶ 1&lt;?xml version="1.0" encoding="UTF-8"?&gt; 4.ideaä¸­projectå’Œmoduleçš„å…³ç³»ä¹‹å‰åˆšç”¨ideaï¼Œä»¥ä¸ºä¸€ä¸ªprojectï¼Œå°±æ˜¯ä¸€ä¸ªé¡¹ç›®ï¼Œç»“æœå¹¶ä¸æ˜¯ 5.å¦‚ä½•æŠŠä¸€ä¸ªmoduleå¤åˆ¶æˆå¦å¤–ä¸€ä¸ªmoduleç›´æ¥åƒeclipseé‚£æ ·å¤åˆ¶ä¸€ä¸ªmoduleï¼Œå›¾æ ‡åªä¼šè¿™æ ·ï¼š è¿™ä¸æ˜¯ä¸€ä¸ªmoduleï¼Œè¦è®©ä»–å˜æˆmoduleï¼Œå¦‚ä¸‹æ“ä½œï¼š 6.ä¸€ä¸ªæ–°çš„mybatisé¡¹ç›®é‡ç‚¹ä¸€äº›åœ°æ–¹éœ€è¦ä¿®æ”¹æˆ–è€…æ·»åŠ  æ ¸å¿ƒé…ç½®æ–‡ä»¶çš„æ˜ å°„æ–‡ä»¶é‡Œ æ—¥å¿—æ¡†æ¶é‡Œå†™ä¸Šä½ çš„å‘½åç©ºé—´ åˆ°æ­¤ï¼Œç›®å‰çš„MyBatiså°ç»“åˆ°æ­¤ç»“æŸï¼Œä¸‹ä¸€ä¸ªå­¦ä¹ SpringMvcï¼Œåªå¸Œæœ›è‡ªå·±èƒ½åšæŒä¸‹å»ï¼Œä¸–ç•Œè¯±æƒ‘å¾ˆå¤šï¼Œåªå¸Œæœ›è‡ªå·±èƒ½ä¸€è·¯èµ°ä¸‹å»ï¼ŒåŠ æ²¹ï¼ï¼ï¼]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢å’Œä¼ é€’å¤šä¸ªå‚æ•°]]></title>
    <url>%2F2018%2F08%2F06%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89%E4%B8%80%E5%AF%B9%E5%A4%9A%E7%9A%84%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%E5%92%8C%E4%BC%A0%E9%80%92%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®²è§£ä¸€å¯¹å¤šçš„å…³è”æŸ¥è¯¢ï¼Œä¼ é€’å¤šä¸ªå‚æ•°ã€‚ æºç è·å–github 1.ä¼ é€’å¤šä¸ªå‚æ•° å½“ä½ çš„å½¢å‚ä¼ é€’&gt;1ä¸ªçš„æ—¶å€™ï¼ŒparameterTypeä¸å†™ï¼Œè®©å…¶è‡ªåŠ¨å¤„ç† #{å€¼}ï¼Œé»˜è®¤ä¸ºarg0ï¼Œarg1â€¦..æˆ–param1ï¼Œparam2ï¼Œï¼Œï¼Œ è‹¥åœ¨æ¥å£ä¸­æ³¨è§£äº†@Param(ç›¸å½“äºæŒ‡æ˜äº†keyå€¼)ï¼Œå³ä¹Ÿå¯ä»¥å†™xxxï¼Œé»˜è®¤çš„ä¹Ÿå¯ä»¥å†™ï¼Œç›¸å½“äº3ä¸ªå€¼ 2.ç»“æ„ 3.æ•°æ®åº“å±æ€§æ–‡ä»¶åŒä¹‹å‰ 4.æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!--åŠ è½½å±æ€§æ–‡ä»¶ --&gt; &lt;properties resource="jdbc.properties"/&gt; &lt;!--è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯resultMapé‡Œçš„typeï¼Œé¿å…åŒ…åå·²ä¿®æ”¹ï¼Œåœ¨æ˜ å°„æ–‡ä»¶é‡Œä¿®æ”¹å¤šå¤„åœ°æ–¹--&gt; &lt;typeAliases&gt; &lt;!-- æ–¹å¼ä¸€ã€com.hs.model.Skillè¿™ä¸ªç±»è®¾ç½®äº†åˆ«åhsï¼Œä¹‹åè¦ç”¨è¿™ä¸ªçš„è¯ï¼Œç›´æ¥å†™hs --&gt; &lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt; &lt;!-- æ–¹å¼äºŒã€com.hs.modelè¿™ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥å†™ç±»åï¼Œæ¯”å¦‚ç”¨com.hs.model.Skillï¼Œç›´æ¥å†™Skill --&gt; &lt;package name="com.hs.model"/&gt; &lt;/typeAliases&gt; &lt;!--é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ--&gt; &lt;environments default="development"&gt; &lt;environment id="development"&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨:ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ å…³é”®ä¿¡æ¯ --&gt; &lt;!--æ¡†æ¶ï¼šé»˜è®¤æƒ…å†µä¸‹CUDæ“ä½œéœ€è¦ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ï¼ˆå¦‚åŒåœ¨Navicatä¸­è¡¨ä¸­è¾“å…¥äº†æ•°æ®ï¼Œæ²¡æœ‰ç‚¹é‚£ä¸ªå°âˆšï¼Œå°±æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼Œ ä½†æ˜¯è¾“å…¥insertè¯­å¥ï¼Œå°±è‡ªåŠ¨æäº¤äº‹åŠ¡äº†ï¼‰ --&gt; &lt;transactionManager type="JDBC" /&gt; &lt;!--ä½¿ç”¨çš„æ˜¯è¿æ¥æ± ï¼šç™¾åº¦javaå¦‚ä½•å®è¡Œè¿æ¥æ± çš„åŸç†ï¼Ÿ --&gt; &lt;dataSource type="POOLED"&gt; &lt;property name="driver" value="$&#123;jdbc.mysql.driver&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="url" value="$&#123;jdbc.mysql.url&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="username" value="$&#123;jdbc.mysql.username&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="password" value="$&#123;jdbc.mysql.password&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œä¹Ÿå°±æ˜¯å«sqlè¯­å¥çš„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;!--å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼1ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…ç½®--&gt; &lt;mapper resource="com/hs/model/UserMapper.xml"/&gt; &lt;mapper resource="com/hs/model/RoleMapper.xml"/&gt; &lt;!-- å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼2ï¼Œè‡ªåŠ¨æ‰«æåŒ…å†…çš„Mapperæ¥å£ä¸é…ç½®æ–‡ä»¶ --&gt; &lt;!--&lt;package name="com.hs.model"/&gt;--&gt; &lt;/mappers&gt;&lt;/configuration&gt; 5.æŒä¹…åŒ–ç±»Role.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465package com.hs.model;import java.util.List;public class Role &#123; private Integer role_id; private String role_name; private String role_key; private Integer status; //å…³è”å¯¹è±¡,ä¸€å¯¹å¤šï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ· private List&lt;User&gt; userList; public List&lt;User&gt; getUserList() &#123; return userList; &#125; public void setUserList(List&lt;User&gt; userList) &#123; this.userList = userList; &#125; public Integer getRole_id() &#123; return role_id; &#125; public void setRole_id(Integer role_id) &#123; this.role_id = role_id; &#125; public String getRole_name() &#123; return role_name; &#125; public void setRole_name(String role_name) &#123; this.role_name = role_name; &#125; public String getRole_key() &#123; return role_key; &#125; public void setRole_key(String role_key) &#123; this.role_key = role_key; &#125; public Integer getStatus() &#123; return status; &#125; public void setStatus(Integer status) &#123; this.status = status; &#125; @Override public String toString() &#123; return "Role&#123;" + "role_id=" + role_id + ", role_name='" + role_name + '\'' + ", role_key='" + role_key + '\'' + ", status=" + status + ", userList=" + userList + '&#125;'; &#125;&#125; User.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104package com.hs.model;import java.util.Date;public class User &#123; private Integer user_id; private String account; private String password; private String user_name; private Integer status; private Date login_time; private String ip; private Integer fk_role_id; //å…³è”å¯¹è±¡ ä¸€å¯¹ä¸€æˆ–å¤šå¯¹ä¸€ private Role role; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String getAccount() &#123; return account; &#125; public void setAccount(String account) &#123; this.account = account; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public Integer getStatus() &#123; return status; &#125; public void setStatus(Integer status) &#123; this.status = status; &#125; public Date getLogin_time() &#123; return login_time; &#125; public void setLogin_time(Date login_time) &#123; this.login_time = login_time; &#125; public String getIp() &#123; return ip; &#125; public void setIp(String ip) &#123; this.ip = ip; &#125; public Integer getFk_role_id() &#123; return fk_role_id; &#125; public void setFk_role_id(Integer fk_role_id) &#123; this.fk_role_id = fk_role_id; &#125; public Role getRole() &#123; return role; &#125; public void setRole(Role role) &#123; this.role = role; &#125; @Override public String toString() &#123; return "User&#123;" + "user_id=" + user_id + ", account='" + account + '\'' + ", password='" + password + '\'' + ", user_name='" + user_name + '\'' + ", status=" + status + ", login_time=" + login_time + ", ip='" + ip + '\'' + ", fk_role_id=" + fk_role_id + ", role=" + role + '&#125;'; &#125;&#125; 6.XMLæ˜ å°„æ–‡ä»¶RoleMapper.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.dao.RoleDao"&gt;&lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„r--&gt; &lt;resultMap type="Role" id="BaseResultMapper"&gt; &lt;id column="role_id" property="role_id"/&gt; &lt;result column="role_name" property="role_name"/&gt; &lt;result column="role_key" property="role_key"/&gt; &lt;result column="status" property="status"/&gt; &lt;/resultMap&gt; &lt;sql id="sys_role_columns"&gt; role_id,role_name,role_key,status &lt;/sql&gt; &lt;sql id="sys_role_columns_alias"&gt; $&#123;alias&#125;.role_id,$&#123;alias&#125;.role_name,$&#123;alias&#125;.role_key,$&#123;alias&#125;.status &lt;/sql&gt; &lt;resultMap id="SimpleResultMapper" type="Role" extends="BaseResultMapper"&gt; &lt;!--é…ç½®é›†åˆList&lt;User&gt;,javaTypeä¸€èˆ¬å¯ä»¥ä¸å†™--&gt; &lt;!--åœ¨ç»“æœé›†ä¸­æ‰¾åˆ°role_idè¿™ä¸ªå­—æ®µï¼Œç„¶åä¼ ç»™å‘½åç©ºé—´com.hs.dao.UserDaoä¸‹idä¸ºgetUserByFkçš„è¯­å¥ï¼Œ è¿”å›çš„ç»“æœé›†å­—æ®µä¸ºuserListï¼Œç±»å‹ä¸ºjava.util.Listï¼Œé‡Œé¢è£…çš„ç±»å‹æ˜¯com.he.model.Userè¿™ä¸ªç±»å‹ --&gt; &lt;collection property="userList" javaType="java.util.List" ofType="User" column="role_id" select="com.hs.dao.UserDao.getUserByFk"/&gt; &lt;/resultMap&gt; &lt;select id="getRoleByPk" parameterType="_int" resultMap="SimpleResultMapper"&gt; select &lt;include refid="sys_role_columns"/&gt; from sys_role where role_id = #&#123;role_id&#125; &lt;/select&gt; &lt;resultMap id="JoinResultMapper" type="Role" extends="BaseResultMapper"&gt; &lt;!--é…ç½®é›†åˆï¼ŒæŸ¥è¯¢å‡ºæ¥çš„Useré‡Œçš„ç»“æœé›†æ‰¾com.hs.dao.UserDao.BaseResultMapperå¤„ç†--&gt; &lt;collection property="userList" javaType="list" ofType="com.hs.model.User" resultMap="com.hs.dao.UserDao.BaseResultMapper"/&gt; &lt;!--&lt;id/&gt; &lt;result/&gt;--&gt; &lt;/resultMap&gt; &lt;select id="getRoleByLeftJoin" parameterType="_int" resultMap="JoinResultMapper"&gt; SELECT &lt;include refid="com.hs.dao.UserDao.sys_user_colums_alias"&gt; &lt;property name="alias" value="su"/&gt; &lt;/include&gt; , &lt;include refid="sys_role_columns_alias"&gt; &lt;property name="alias" value="sr"/&gt; &lt;/include&gt; FROM sys_role sr LEFT JOIN sys_user su ON sr.role_id = su.fk_role_id WHERE sr.role_id =#&#123;role_id&#125; &lt;/select&gt;&lt;/mapper&gt; UserMapper.xml 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.dao.UserDao"&gt;&lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„r--&gt; &lt;!--typeç›´æ¥ç”¨çš„åˆ«åæ–¹å¼ï¼Œåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶é‡Œè®¾ç½®äº†çš„--&gt; &lt;resultMap id="BaseResultMapper" type="User"&gt; &lt;id column="user_id" property="user_id" /&gt; &lt;result column="account" property="account" /&gt; &lt;result column="passwrod" property="pasword" /&gt; &lt;result column="user_name" property="user_name" /&gt; &lt;result column="status" property="status" /&gt; &lt;result column="login_time" property="login_time" /&gt; &lt;result column="ip" property="ip" /&gt; &lt;result column="fk_role_id" property="fk_role_id" /&gt; &lt;/resultMap&gt; &lt;resultMap id="SimpleResultMapper" type="User" extends="BaseResultMapper"&gt; &lt;!-- extendsç»§æ‰¿äº†BaseResultMapperï¼ŒåŒjavaç»§æ‰¿ä¸€æ · --&gt; &lt;!--å…³è”å¯¹è±¡--&gt; &lt;!--åœ¨ç»“æœé›†ä¸­æ‰¾åˆ°fk_role_idå­—æ®µï¼Œç„¶åå†ä¼ å€¼ç»™å‘½åç©ºé—´com.hs.dao.RoleDaoä¸‹çš„getRoleByPkè¯­å¥è¿›è¡ŒæŸ¥è¯¢(æ‰¾åˆ°è¦æ‰§è¡Œçš„SQLè¯­å¥)ï¼Œæœ€åè¿”å›roleï¼Œå®ƒçš„ç±»å‹æ˜¯com.hs.model.Role--&gt; &lt;association property="role" javaType="Role" column="fk_role_id" select="com.hs.dao.RoleDao.getRoleByPk"/&gt; &lt;/resultMap&gt; &lt;sql id="sys_user_colums"&gt; user_id,account,password,user_name,status,login_time,ip,fk_role_id &lt;/sql&gt; &lt;sql id="sys_user_colums_alias"&gt; $&#123;alias&#125;.user_id,$&#123;alias&#125;.account,$&#123;alias&#125;.password,$&#123;alias&#125;.user_name,$&#123;alias&#125;.status,$&#123;alias&#125;.login_time,$&#123;alias&#125;.ip,$&#123;alias&#125;.fk_role_id &lt;/sql&gt; &lt;select id="getUserByFk" parameterType="_int" resultMap="BaseResultMapper"&gt; select &lt;include refid="sys_user_colums"/&gt; from sys_user where fk_role_id = #&#123;role_id&#125; &lt;/select&gt; &lt;!--1.å½“ä½ çš„å½¢å‚ä¼ é€’&gt;1ä¸ªçš„æ—¶å€™ï¼ŒparameterTypeä¸å†™ï¼Œè®©å…¶è‡ªåŠ¨å¤„ç† 2.#&#123;å€¼&#125;ï¼Œé»˜è®¤ä¸ºarg0ï¼Œarg1.....æˆ–param1ï¼Œparam2ï¼Œï¼Œï¼Œ è‹¥åœ¨daoæ³¨è§£äº†@xxx(ç›¸å½“äºæŒ‡æ˜äº†keyå€¼)ï¼Œå³ä¹Ÿå¯ä»¥å†™xxxï¼Œé»˜è®¤çš„ä¹Ÿå¯ä»¥å†™ï¼Œç›¸å½“äº3ä¸ªå€¼--&gt; &lt;select id="getUser" resultMap="BaseResultMapper"&gt; select &lt;include refid="sys_user_colums"/&gt; from sys_user where account=#&#123;account&#125; and password=#&#123;password&#125; &lt;/select&gt;&lt;/mapper&gt; 7.æ¥å£RoleDao.java 12345678910111213141516171819202122package com.hs.dao;import com.hs.model.Role;public interface RoleDao &#123; /** * selectæ–¹å¼ï¼Œå…ˆåœ¨roleè¡¨æŸ¥å‡ºä¸»é”®ï¼Œç„¶åä¼ ç»™userè¡¨å½“åšæ¡ä»¶ï¼ŒæŸ¥è¯¢å‡ºuserçš„ä¿¡æ¯ * * @param role_id * @return */ Role getRoleByPk(int role_id); /** * åˆ©ç”¨è¿æ¥æŸ¥è¯¢æ–¹å¼ï¼ŒæŸ¥è¯¢ç»“æœé›† * * @param role_id * @return */ Role getRoleByLeftJoin(int role_id);&#125; UserDao.java 123456789101112131415package com.hs.dao;import com.hs.model.User;import org.apache.ibatis.annotations.Param;public interface UserDao &#123; /** * ä¼ é€’å¤šä¸ªå‚æ•° * 1.å½“ä½ çš„å½¢å‚ä¼ é€’&gt;1ä¸ªçš„æ—¶å€™ï¼ŒparameterTypeä¸å†™ï¼Œè®©å…¶è‡ªåŠ¨å¤„ç† * 2.#&#123;å€¼&#125;ï¼Œé»˜è®¤ä¸ºarg0ï¼Œarg1.....æˆ–param1ï¼Œparam2ï¼Œï¼Œï¼Œ * è‹¥åœ¨daoæ³¨è§£äº†@xxx(ç›¸å½“äºæŒ‡æ˜äº†keyå€¼)ï¼Œå³ä¹Ÿå¯ä»¥å†™xxxï¼Œé»˜è®¤çš„ä¹Ÿå¯ä»¥å†™ï¼Œç›¸å½“äº3ä¸ªå€¼ */ User getUser(@Param("account") String account, @Param("password") String password);&#125; 8.æ—¥å¿—é…ç½®æ–‡ä»¶mybatis-config.xml 12345678910# æ—¥å¿—é…ç½®æ–‡ä»¶Global logging configurationlog4j.rootLogger=ERROR, stdout# MyBatis logging configuration...# å¦‚æœè¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®éœ€è¦é…ç½®ä¸ºå‘½åç©ºé—´log4j.logger.å‘½åç©ºé—´log4j.logger.com.hs.dao.UserDao=TRACElog4j.logger.com.hs.dao.RoleDao=TRACE# Console output...log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n 9.æµ‹è¯•ç±»MyBatisTest.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package com.hs.test;import com.hs.dao.RoleDao;import com.hs.dao.UserDao;import com.hs.util.MyBatisUtils;import org.apache.ibatis.session.SqlSession;import org.junit.Test;/** * æ¥å£ä»£ç†æ¨¡å¼å®ç°æ“ä½œï¼Œåœ¨xxDaoæ¥å£ä¸­ï¼Œå®šä¹‰æ–¹æ³•ï¼š sqlè¯­å¥è¿”å›çš„ç»“æœç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); * ä¸ç”¨å†™å®ç°ç±»ï¼Œç›´æ¥å†™æµ‹è¯•ç±»,å…·ä½“å®ç°è§æµ‹è¯•ç±» * sqlçš„æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´è·Ÿæ¥å£çš„å…¨è·¯å¾„ä¸€è‡´ * å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯listï¼Œå¦‚æœæ˜¯List&lt;Bean&gt;ï¼Œä¹Ÿæ˜¯list */public class MyBatisTest &#123; /** * åˆ©ç”¨selectæ–¹å¼ï¼Œ */ @Test public void getUserByPk()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); RoleDao roleDao = sqlSession.getMapper(RoleDao.class); System.out.println(roleDao.getRoleByPk(-100)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * åˆ©ç”¨è¿æ¥æ–¹å¼æŸ¥è¯¢ */ @Test public void getUserByFk()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); RoleDao roleDao = sqlSession.getMapper(RoleDao.class); System.out.println(roleDao.getRoleByLeftJoin(-100)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ä¼ é€’å¤šä¸ªå‚æ•° */ @Test public void getUser()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); UserDao userDao = sqlSession.getMapper(UserDao.class); String account = "admin"; String password = "admin"; System.out.println(userDao.getUser(account,password)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125;&#125;]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰ä¸€å¯¹ä¸€æˆ–å¤šå¯¹ä¸€çš„å…³è”æŸ¥è¯¢]]></title>
    <url>%2F2018%2F08%2F06%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89%E4%B8%80%E5%AF%B9%E4%B8%80%E6%88%96%E5%A4%9A%E5%AF%B9%E4%B8%80%E7%9A%84%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®²è§£ï¼Œmybatisä¸­ä¸€å¯¹ä¸€ã€å¤šå¯¹ä¸€çš„å…³è”æŸ¥è¯¢ï¼Œç±»åçš„åˆ«åæ–¹å¼åº”ç”¨ æºç è·å–github 1.å…³ç³»å‹æ•°æ®åº“ä¸­è¡¨å’Œè¡¨ä¹‹é—´çš„å…³ç³» ä¸€å¯¹ä¸€ï¼šå¤–é”®å”¯ä¸€ ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ï¼šåªæ˜¯ç«™åœ¨è§’åº¦ä¸åŒè€Œå·²ï¼Œä½†æ˜¯å¤–é”®ä¸€å®šåœ¨å¤šæ–¹ è‡ªèº«ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ å¤–é”®ï¼š é€»è¾‘å…³è” ç‰©ç†å…³è” å¤šå¯¹å¤šï¼šä¸€å®šæ˜¯é€šè¿‡ä¸­é—´è¡¨ç»´æŠ¤ 2.javaç±»ä¸­å¦‚ä½•è¡¨ç¤ºä¸Šè¿°å‡ ç§å…³ç³»UMLï¼šä¾èµ–/å…³è”/ç»„åˆ egï¼šç”¨æˆ·å’Œè§’è‰²çš„å…³ç³» ä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªè§’è‰²ï¼Œä¸€ä¸ªè§’è‰²å¯ä»¥å¤šä¸ªç”¨æˆ· ç”¨æˆ·ID ç”¨æˆ· è§’è‰²ID 100 æ‚Ÿç©º 999 200 å…«æˆ’ 999 æŸ¥è¯¢100çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé‚£ä¹ˆå®ƒä¸€å®šå¯¹ ä¸€ä¸ªè§’è‰²ä¿¡æ¯ List 1234public class User&#123;//å…³è”å¯¹è±¡ public Role role;//ä¸€å¯¹ä¸€,å¤šå¯¹ä¸€ &#125; 123public class Role&#123; private List&lt;User&gt; userList; //ä¸€ä¸ªè§’è‰²é‡Œå¯ä»¥å¯¹åº”å¾ˆå¤šç”¨æˆ·&#125; 3.ä¸‰ç§æ–¹å¼ ä¼ ç»Ÿæ¨¡å¼ï¼šä¸¤ä¸ªSQLè¯­å¥ï¼Œå…ˆåœ¨ä¸€ä¸ªè¡¨æŸ¥å‡ºæ•°æ®ï¼Œç„¶åæŠŠå…¶ä¸­çš„idä½œä¸ºå¦å¤–ä¸€ä¸ªè¡¨çš„whereï¼Œå†æŸ¥æ•°æ® selectæ–¹å¼ï¼šåœ¨æ˜ å°„æ–‡ä»¶ä¸­ï¼Œä¸€ä¸ªæŸ¥å‡ºçš„ç»“æœé›†ä¸­ï¼Œè°ƒç”¨å¦å¤–ä¸€ä¸ªselectè¯­å¥å®ç°æŸ¥è¯¢ è¿æ¥æŸ¥è¯¢ï¼šä¹Ÿå°±æ˜¯SQLè¯­å¥è¿æ¥æŸ¥è¯¢(ä¸ªäººè¿˜æ˜¯å–œæ¬¢è¿™ç§) 4.çŸ¥è¯†å°ç‚¹ é…ç½®å…³è”å¯¹è±¡ç”¨&lt;association&gt;è¿™æ ·æŸ¥å‡ºæ¥çš„å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ é…ç½®é›†åˆå°±ç”¨&lt;collection&gt; 5.ç›®å½•ç»“æ„ 6.æ•°æ®åº“å±æ€§æ–‡ä»¶jdbc.properties 1ä»£ç åŒä¸Šç¯‡ 7.æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml 1234567891011121314151617181920212223242526272829303132333435363738394041&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!--åŠ è½½å±æ€§æ–‡ä»¶ --&gt; &lt;properties resource="jdbc.properties"/&gt; &lt;!--è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯resultMapé‡Œçš„typeï¼Œé¿å…åŒ…åå·²ä¿®æ”¹ï¼Œåœ¨æ˜ å°„æ–‡ä»¶é‡Œä¿®æ”¹å¤šå¤„åœ°æ–¹--&gt; &lt;typeAliases&gt; &lt;!-- æ–¹å¼ä¸€ã€com.hs.model.Skillè¿™ä¸ªç±»è®¾ç½®äº†åˆ«åhsï¼Œä¹‹åè¦ç”¨è¿™ä¸ªçš„è¯ï¼Œç›´æ¥å†™hs --&gt; &lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt; &lt;!-- æ–¹å¼äºŒã€com.hs.modelè¿™ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥å†™ç±»åï¼Œæ¯”å¦‚ç”¨com.hs.model.Skillï¼Œç›´æ¥å†™Skill --&gt; &lt;package name="com.hs.model"/&gt; &lt;/typeAliases&gt; &lt;!--é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ--&gt; &lt;environments default="development"&gt; &lt;environment id="development"&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨:ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ å…³é”®ä¿¡æ¯ --&gt; &lt;!--æ¡†æ¶ï¼šé»˜è®¤æƒ…å†µä¸‹CUDæ“ä½œéœ€è¦ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ï¼ˆå¦‚åŒåœ¨Navicatä¸­è¡¨ä¸­è¾“å…¥äº†æ•°æ®ï¼Œæ²¡æœ‰ç‚¹é‚£ä¸ªå°âˆšï¼Œå°±æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼Œ ä½†æ˜¯è¾“å…¥insertè¯­å¥ï¼Œå°±è‡ªåŠ¨æäº¤äº‹åŠ¡äº†ï¼‰ --&gt; &lt;transactionManager type="JDBC" /&gt; &lt;!--ä½¿ç”¨çš„æ˜¯è¿æ¥æ± ï¼šç™¾åº¦javaå¦‚ä½•å®è¡Œè¿æ¥æ± çš„åŸç†ï¼Ÿ --&gt; &lt;dataSource type="POOLED"&gt; &lt;property name="driver" value="$&#123;jdbc.mysql.driver&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="url" value="$&#123;jdbc.mysql.url&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="username" value="$&#123;jdbc.mysql.username&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="password" value="$&#123;jdbc.mysql.password&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œä¹Ÿå°±æ˜¯å«sqlè¯­å¥çš„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;!--å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼1ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…ç½®--&gt; &lt;mapper resource="com/hs/model/UserMapper.xml"/&gt; &lt;mapper resource="com/hs/model/RoleMapper.xml"/&gt; &lt;!-- å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼2ï¼Œè‡ªåŠ¨æ‰«æåŒ…å†…çš„Mapperæ¥å£ä¸é…ç½®æ–‡ä»¶ --&gt; &lt;!--&lt;package name="com.hs.model"/&gt;--&gt; &lt;/mappers&gt;&lt;/configuration&gt; 8.å°è£…å¥½çš„å·¥å…·ç±»MyBatisUtils.java 1åŒä¸Šç¯‡ 9.æŒä¹…åŒ–ç±»Role.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package com.hs.model;public class Role &#123; private Integer role_id; private String role_name; private String role_key; private Integer status; public Integer getRole_id() &#123; return role_id; &#125; public void setRole_id(Integer role_id) &#123; this.role_id = role_id; &#125; public String getRole_name() &#123; return role_name; &#125; public void setRole_name(String role_name) &#123; this.role_name = role_name; &#125; public String getRole_key() &#123; return role_key; &#125; public void setRole_key(String role_key) &#123; this.role_key = role_key; &#125; public Integer getStatus() &#123; return status; &#125; public void setStatus(Integer status) &#123; this.status = status; &#125; @Override public String toString() &#123; return "Role&#123;" + "role_id=" + role_id + ", role_name='" + role_name + '\'' + ", role_key='" + role_key + '\'' + ", status=" + status + '&#125;'; &#125;&#125; User.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104package com.hs.model;import java.util.Date;public class User &#123; private Integer user_id; private String account; private String password; private String user_name; private Integer status; private Date login_time; private String ip; private Integer fk_role_id; //å…³è”å¯¹è±¡ ä¸€å¯¹ä¸€æˆ–å¤šå¯¹ä¸€ï¼Œä¸€ä¸ªç”¨æˆ·å¯¹åº”ä¸€ä¸ªè§’è‰² private Role role; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String getAccount() &#123; return account; &#125; public void setAccount(String account) &#123; this.account = account; &#125; public String getPassword() &#123; return password; &#125; public void setPassword(String password) &#123; this.password = password; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public Integer getStatus() &#123; return status; &#125; public void setStatus(Integer status) &#123; this.status = status; &#125; public Date getLogin_time() &#123; return login_time; &#125; public void setLogin_time(Date login_time) &#123; this.login_time = login_time; &#125; public String getIp() &#123; return ip; &#125; public void setIp(String ip) &#123; this.ip = ip; &#125; public Integer getFk_role_id() &#123; return fk_role_id; &#125; public void setFk_role_id(Integer fk_role_id) &#123; this.fk_role_id = fk_role_id; &#125; public Role getRole() &#123; return role; &#125; public void setRole(Role role) &#123; this.role = role; &#125; @Override public String toString() &#123; return "User&#123;" + "user_id=" + user_id + ", account='" + account + '\'' + ", password='" + password + '\'' + ", user_name='" + user_name + '\'' + ", status=" + status + ", login_time=" + login_time + ", ip='" + ip + '\'' + ", fk_role_id=" + fk_role_id + ", role=" + role + '&#125;'; &#125;&#125; 10.XMLæ˜ å°„æ–‡ä»¶RoleMapper.xml 123456789101112131415161718192021222324252627&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.dao.RoleDao"&gt;&lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„r--&gt; &lt;!--typeç›´æ¥ç”¨çš„ç±»ååˆ«åæ–¹å¼ï¼Œåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶é‡Œè®¾ç½®äº†çš„--&gt; &lt;resultMap type="Role" id="BaseResultMapper"&gt; &lt;id column="role_id" property="role_id"/&gt; &lt;result column="role_name" property="role_name"/&gt; &lt;result column="role_key" property="role_key"/&gt; &lt;result column="status" property="status"/&gt; &lt;/resultMap&gt; &lt;sql id="sys_role_columns"&gt; role_id,role_name,role_key,status &lt;/sql&gt; &lt;sql id="sys_role_columns_alias"&gt; $&#123;alias&#125;.role_id,$&#123;alias&#125;.role_name,$&#123;alias&#125;.role_key,$&#123;alias&#125;.status &lt;/sql&gt; &lt;select id="getRoleByPk" parameterType="_int" resultMap="BaseResultMapper"&gt; select &lt;include refid="sys_role_columns"/&gt; from sys_role where role_id = #&#123;role_id&#125; &lt;/select&gt;&lt;/mapper&gt; UserMapper.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.dao.UserDao"&gt;&lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„r--&gt; &lt;!--typeç›´æ¥ç”¨çš„ç±»ååˆ«åæ–¹å¼ï¼Œåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶é‡Œè®¾ç½®äº†çš„--&gt; &lt;resultMap id="BaseResultMapper" type="User"&gt; &lt;id column="user_id" property="user_id" /&gt; &lt;result column="account" property="account" /&gt; &lt;result column="passwrod" property="pasword" /&gt; &lt;result column="user_name" property="user_name" /&gt; &lt;result column="status" property="status" /&gt; &lt;result column="login_time" property="login_time" /&gt; &lt;result column="ip" property="ip" /&gt; &lt;result column="fk_role_id" property="fk_role_id" /&gt; &lt;/resultMap&gt; &lt;resultMap id="SimpleResultMapper" type="User" extends="BaseResultMapper"&gt; &lt;!-- extendsç»§æ‰¿äº†BaseResultMapperï¼ŒåŒjavaç»§æ‰¿ä¸€æ · --&gt; &lt;!--é…ç½®å…³è”å¯¹è±¡--&gt; &lt;!--åœ¨ç»“æœé›†ä¸­æ‰¾åˆ°fk_role_idå­—æ®µï¼Œç„¶åå†ä¼ å€¼ç»™å‘½åç©ºé—´com.hs.dao.RoleDaoä¸‹çš„getRoleByPkè¯­å¥è¿›è¡ŒæŸ¥è¯¢(æ‰¾åˆ°è¦æ‰§è¡Œçš„SQLè¯­å¥)ï¼Œæœ€åè¿”å›role(å¯¹è±¡çš„å±æ€§)ï¼Œå®ƒçš„ç±»å‹æ˜¯com.hs.model.Role--&gt; &lt;association property="role" javaType="Role" column="fk_role_id" select="com.hs.dao.RoleDao.getRoleByPk"/&gt; &lt;collection property="" &lt;/resultMap&gt; &lt;sql id="sys_user_colums"&gt; user_id,account,password,user_name,status,login_time,ip,fk_role_id &lt;/sql&gt; &lt;sql id="sys_user_colums_alias"&gt; $&#123;alias&#125;.user_id,$&#123;alias&#125;.account,$&#123;alias&#125;.password,$&#123;alias&#125;.user_name,$&#123;alias&#125;.status,$&#123;alias&#125;.login_time,$&#123;alias&#125;.ip,$&#123;alias&#125;.fk_role_id &lt;/sql&gt; &lt;select id="getUserByPk01" parameterType="_int" resultMap="BaseResultMapper"&gt; select &lt;include refid="sys_user_colums"/&gt; from sys_user where user_id = #&#123;user_id&#125; &lt;/select&gt; &lt;select id="getUserByPk02" parameterType="_int" resultMap="SimpleResultMapper"&gt; select &lt;include refid="sys_user_colums"/&gt; from sys_user where user_id = #&#123;user_id&#125; &lt;/select&gt; &lt;resultMap id="JoinResultMapper" type="User" extends="BaseResultMapper"&gt; &lt;!--å…³è”å¯¹è±¡--&gt; &lt;!--resultMapå¼•ç”¨åˆ«äººçš„ç»“æœé›†(å‘½åç©ºé—´+"."+id)ï¼Œæˆ–è€…è‡ªå·±åœ¨ä¸‹é¢å†™ç»“æœé›†å¤„ç†--&gt; &lt;association property="role" javaType="Role" resultMap="com.hs.dao.RoleDao.BaseResultMapper"&gt; &lt;!-- &lt;id column="role_id" property="role_id"/&gt; &lt;result column="role_name" property="role_name"/&gt; &lt;result column="role_key" property="role_key"/&gt; &lt;result column="status" property="status"/&gt; --&gt; &lt;/association&gt; &lt;/resultMap&gt; &lt;select id="getUserByLeftJoin" parameterType="_int" resultMap="JoinResultMapper"&gt; select &lt;!-- è°ƒç”¨åˆ«åå¼çš„SQLä»£ç ï¼Œç»™aliasèµ‹å€¼ä¸ºu --&gt; &lt;include refid="sys_user_colums_alias"&gt; &lt;property name="alias" value="u"/&gt; &lt;/include&gt; , &lt;include refid="com.hs.dao.RoleDao.sys_role_columns_alias"&gt; &lt;property name="alias" value="r"/&gt; &lt;/include&gt; from sys_user u left join sys_role r on u.fk_role_id = r.role_id where u.user_id = #&#123;user_id&#125; &lt;/select&gt;&lt;/mapper&gt; 11.æ¥å£UserDao.java 123456789101112131415161718192021222324252627package com.hs.dao;import com.hs.model.User;public interface UserDao &#123; /** * é€šè¿‡idæŸ¥è¯¢userè¡¨çš„æ‰€æœ‰ä¿¡æ¯ï¼Œå†ç”¨å®ƒçš„å¤–é”®ä¼ é€’ç»™å¦å¤–ä¸€ä¸ªè¡¨è¿›è¡ŒæŸ¥è¯¢æ•°æ® * @param user_id * @return */ User getUserByPk01(int user_id); /** * ç”¨å…³è”å¯¹è±¡æ–¹å¼ã€selectæ–¹å¼ä»£å–ä¼ ç»Ÿçš„æ¨¡å¼ * @param user_id * @return */ User getUserByPk02(int user_id); /** * åœ¨SQLè¯­å¥å†™è¿æ¥æ–¹å¼çš„æŸ¥è¯¢ * @param user_id * @return */ User getUserByLeftJoin(int user_id);&#125; RoleDao.java 1234567891011121314package com.hs.dao;import com.hs.model.Role;public interface RoleDao &#123; /** * é€šè¿‡role_idæŸ¥è¯¢roleè¡¨ä¿¡æ¯ * @param role_id * @return */ Role getRoleByPk(int role_id);&#125; 12.æµ‹è¯•ç±»MyBatisTest.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677package com.hs.test;import com.hs.dao.RoleDao;import com.hs.dao.UserDao;import com.hs.model.Role;import com.hs.model.User;import com.hs.util.MyBatisUtils;import org.apache.ibatis.session.SqlSession;import org.junit.Test;/** * æ¥å£ä»£ç†æ¨¡å¼å®ç°æ“ä½œï¼Œåœ¨xxDaoæ¥å£ä¸­ï¼Œå®šä¹‰æ–¹æ³•ï¼š sqlè¯­å¥è¿”å›çš„ç»“æœç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); * ä¸ç”¨å†™å®ç°ç±»ï¼Œç›´æ¥å†™æµ‹è¯•ç±»,å…·ä½“å®ç°è§æµ‹è¯•ç±» * sqlçš„æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´è·Ÿæ¥å£çš„å…¨è·¯å¾„ä¸€è‡´ * å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯listï¼Œå¦‚æœæ˜¯List&lt;Bean&gt;ï¼Œä¹Ÿæ˜¯list */public class MyBatisTest &#123; /** * ä¸€å¯¹ä¸€çš„ä¸‰ç§æ–¹å¼ */ /** * æ–¹å¼ä¸€ï¼šåˆ©ç”¨ä¸¤ä¸ªSQLè¯­å¥ï¼Œå…ˆåœ¨useræŸ¥å‡ºå¤–é”®ï¼Œç„¶åå†åœ¨roleè¡¨è¿›è¡ŒæŸ¥è¯¢ */ @Test public void getAllByFk01()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); UserDao userDao = sqlSession.getMapper(UserDao.class); User user = userDao.getUserByPk01(-999);// è·å–å¯¹åº”çš„å¤–é”®ä¿¡æ¯ if (user.getFk_role_id()!=null) &#123; RoleDao roleDao = sqlSession.getMapper(RoleDao.class); Role role = roleDao.getRoleByPk(user.getFk_role_id()); //å»ºç«‹å…³ç³» user.setRole(role); &#125; System.out.println(user); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ç”¨å…³è”å¯¹è±¡æ–¹å¼ã€selectæ–¹å¼ä»£å–ä¼ ç»Ÿçš„æ¨¡å¼ */ @Test public void getAllBySelect()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); UserDao userDao = sqlSession.getMapper(UserDao.class); User user = userDao.getUserByPk02(-999); System.out.println(user); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * SQLè¯­å¥è¿æ¥æ–¹å¼æŸ¥è¯¢ */ @Test public void getUserByLeftJoin()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); UserDao userDao = sqlSession.getMapper(UserDao.class); User user = userDao.getUserByLeftJoin(-999); System.out.println(user); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125;&#125;]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰åŠ¨æ€SQLè¯­å¥ä¸“é¢˜]]></title>
    <url>%2F2018%2F08%2F05%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5%E4%B8%93%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®²è§£åŠ¨æ€çš„SQLæ“ä½œï¼ŒCRUDä¸­ï¼ŒCUDéƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨æäº¤äº‹åŠ¡ï¼ŒåŠ¨æ€çš„æ·»åŠ è¯­å¥ï¼Œæ‰¹é‡åˆ é™¤çš„ä¸‰ç§å¤„ç†æ–¹å¼ï¼Œæå–å…¬å…±çš„sqlä»£ç ï¼Œifæ ‡ç­¾ï¼Œwhereæ ‡ç­¾ï¼Œtrimæ ‡ç­¾ï¼Œsetæ ‡ç­¾ï¼Œchooseæ ‡ç­¾ï¼Œforeachæ ‡ç­¾ï¼Œæ‰¹é‡æ·»åŠ  æºç è·å–github 1.trimæ ‡ç­¾12345&lt;trim prefix="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹" prefixOverrides="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹" suffix="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹" suffixOverrides="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹"&gt; &lt;/trim&gt; 2.setæ ‡ç­¾å½“ä½ å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,åœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥ set å½“ä½ æ”¾ä¸‹æœ‰å†…å®¹çš„æ—¶å€™,æ£€æŸ¥å†…å®¹çš„æœ€åé¢æ˜¯å¦æœ‰é€—å·â€,â€ å¦‚æœå°†å…¶æŠ¹æ‰ 3.whereæ ‡ç­¾ å¦‚æœå‘ç°æ ‡ç­¾å…§æœ‰å†…å®¹,é‚£ä¹ˆä¼šåœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥å…³é”®å­— where å¦‚æœæœ‰å†…å®¹,ä¼šæ£€æŸ¥å†…å®¹çš„æœ€å‰é¢æ˜¯å¦å«æœ‰ ANDç©ºæ ¼ æˆ–è€… ORç©ºæ ¼ ,è‡ªåŠ¨å°†å…¶æŠ¹æ‰ 4.foreachæ ‡ç­¾ å¦‚æœåªä¼ äº†ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ªé›†åˆ collection=â€array æˆ–è€… listâ€ å¦‚æœä¼ çš„æ˜¯ä¸€ä¸ªMapé‡Œè£…äº†list å°±å†™mapçš„keyï¼Œå¦‚æœæ˜¯å¯¹è±¡é‡ŒsetListï¼Œå°±å†™å¯¹è±¡çš„listå±æ€§,è¿™ä¸ªå±æ€§å°±å¯¹åº”ä¸€ä¸ªé›†åˆ itemç›¸å½“äºï¼Œä»–çš„éå†çš„ä¸€ä¸ªå€¼ï¼Œopen=â€å¼€å§‹åŠ å…¥â€ close=â€æœ€ååŠ å…¥â€ separator=â€ä»¥ä»€ä¹ˆé—´éš”â€â€“&gt; 4.chooseæ ‡ç­¾ç±»ä¼¼javaä¸­çš„switch5.ä»£ç ç»“æ„ 6.æ•°æ®åº“é…ç½®æ–‡ä»¶åŒå‰å‡ å¤©ç¬”è®° 7.æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!--åŠ è½½å±æ€§æ–‡ä»¶ --&gt; &lt;properties resource="jdbc.properties"/&gt; &lt;!--è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯resultMapé‡Œçš„typeï¼Œé¿å…åŒ…åå·²ä¿®æ”¹ï¼Œåœ¨æ˜ å°„æ–‡ä»¶é‡Œä¿®æ”¹å¤šå¤„åœ°æ–¹--&gt; &lt;typeAliases&gt; &lt;!-- æ–¹å¼ä¸€ã€com.hs.model.Skillè¿™ä¸ªç±»è®¾ç½®äº†åˆ«åhsï¼Œä¹‹åè¦ç”¨è¿™ä¸ªçš„è¯ï¼Œç›´æ¥å†™hs --&gt; &lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt; &lt;!-- æ–¹å¼äºŒã€com.hs.modelè¿™ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥å†™ç±»åï¼Œæ¯”å¦‚ç”¨com.hs.model.Skillï¼Œç›´æ¥å†™Skill --&gt; &lt;package name="com.hs.model"/&gt; &lt;/typeAliases&gt; &lt;!--é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ--&gt; &lt;environments default="development"&gt; &lt;environment id="development"&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨:ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ å…³é”®ä¿¡æ¯ --&gt; &lt;!--æ¡†æ¶ï¼šé»˜è®¤æƒ…å†µä¸‹CUDæ“ä½œéœ€è¦ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ï¼ˆå¦‚åŒåœ¨Navicatä¸­è¡¨ä¸­è¾“å…¥äº†æ•°æ®ï¼Œæ²¡æœ‰ç‚¹é‚£ä¸ªå°âˆšï¼Œå°±æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼Œ ä½†æ˜¯è¾“å…¥insertè¯­å¥ï¼Œå°±è‡ªåŠ¨æäº¤äº‹åŠ¡äº†ï¼‰ --&gt; &lt;transactionManager type="JDBC" /&gt; &lt;!--ä½¿ç”¨çš„æ˜¯è¿æ¥æ± ï¼šç™¾åº¦javaå¦‚ä½•å®è¡Œè¿æ¥æ± çš„åŸç†ï¼Ÿ --&gt; &lt;dataSource type="POOLED"&gt; &lt;property name="driver" value="$&#123;jdbc.mysql.driver&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="url" value="$&#123;jdbc.mysql.url&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="username" value="$&#123;jdbc.mysql.username&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="password" value="$&#123;jdbc.mysql.password&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œä¹Ÿå°±æ˜¯å«sqlè¯­å¥çš„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;!--å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼1ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…ç½®--&gt; &lt;mapper resource="com/hs/model/UserMapper.xml"/&gt; &lt;!-- å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼2ï¼Œè‡ªåŠ¨æ‰«æåŒ…å†…çš„Mapperæ¥å£ä¸é…ç½®æ–‡ä»¶ --&gt; &lt;!--&lt;package name="com.hs.model"/&gt;--&gt; &lt;/mappers&gt;&lt;/configuration&gt; 8.æŒä¹…åŒ–ç±»User.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364package com.hs.model;import java.util.Date;public class User &#123; /*æœ¬å­—æ®µåå­—è·Ÿæ•°æ®åº“çš„å­—æ®µä¸€æ ·*/ private Integer user_id; private String user_name; private String sex; private Double money; private Date birthday; public Integer getUser_id() &#123; return user_id; &#125; public void setUser_id(Integer user_id) &#123; this.user_id = user_id; &#125; public String getUser_name() &#123; return user_name; &#125; public void setUser_name(String user_name) &#123; this.user_name = user_name; &#125; public String getSex() &#123; return sex; &#125; public void setSex(String sex) &#123; this.sex = sex; &#125; public Double getMoney() &#123; return money; &#125; public void setMoney(Double money) &#123; this.money = money; &#125; public Date getBirthday() &#123; return birthday; &#125; public void setBirthday(Date birthday) &#123; this.birthday = birthday; &#125; @Override public String toString() &#123; return "User&#123;" + "user_id=" + user_id + ", user_name='" + user_name + '\'' + ", sex='" + sex + '\'' + ", money=" + money + ", birthday=" + birthday + '&#125;'; &#125;&#125; 9.æ˜ å°„æ–‡ä»¶UserMapper.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.dao.UserDao"&gt;&lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„r--&gt; &lt;!--è§å¸®åŠ©æ–‡æ¡£http://www.mybatis.org/mybatis-3/zh/dynamic-sql.html--&gt; &lt;resultMap id="BaseResultMap" type="com.hs.model.User"&gt; &lt;id column="user_id" property="user_id"/&gt; &lt;result column="user_name" property="user_name"/&gt; &lt;result column="sex" property="sex"/&gt; &lt;result column="money" property="money"/&gt; &lt;result column="birthday" property="birthday"/&gt; &lt;/resultMap&gt; &lt;!--æå–å…¬å…±çš„SQLä»£ç --&gt; &lt;sql id="oa_user_columns"&gt; user_id,user_name,sex,money,birthday &lt;/sql&gt; &lt;!--åˆ«åæ–¹å¼çš„SQLä»£ç --&gt; &lt;sql id="oa_user_columns_alias"&gt; $&#123;alias&#125;.user_id,$&#123;alias&#125;.user_name,$&#123;alias&#125;.sex,$&#123;alias&#125;.money,$&#123;alias&#125;.birthday &lt;/sql&gt; &lt;!-- A.é€šè¿‡æ’ç­‰å¼å®ŒæˆåŠ¨æ€SQLè¯­å¥ --&gt; &lt;select id="getUserListIf01" parameterType="map" resultMap="BaseResultMap"&gt; select &lt;include refid="oa_user_columns"/&gt; from oa_user where 1=1 &lt;!-- æ’ç­‰å¼ ï¼Œä½†æ˜¯å½±å“æ•ˆç‡--&gt; &lt;if test="name != null &amp;amp;&amp;amp; name != ''"&gt; and user_name like concat('%',#&#123;name&#125;,'%') &lt;/if&gt; &lt;if test="sex != null and sex != ''"&gt; and sex = #&#123;sex&#125; &lt;/if&gt; &lt;!-- è¿™ä¸ªifé‡Œæ²¡æœ‰&amp;&amp;,åªæœ‰&amp;amp;&amp;amp;æˆ–è€…andè¡¨ç¤ºï¼Œ||ä¹Ÿåªæœ‰orè¡¨ç¤º--&gt; &lt;/select&gt; &lt;!-- B.é€šè¿‡whereæ ‡ç­¾å®ŒæˆåŠ¨æ€SQLè¯­å¥ï¼Œæ²¡æœ‰1=1 --&gt; &lt;select id="getUserListIf02" parameterType="map" resultMap="BaseResultMap"&gt; select &lt;include refid="oa_user_columns"/&gt; from oa_user &lt;where&gt; &lt;if test="name != null &amp;amp;&amp;amp; name != ''"&gt; and user_name like concat('%',#&#123;name&#125;,'%') &lt;/if&gt; &lt;if test="sex != null and sex != ''"&gt; and sex = #&#123;sex&#125; &lt;/if&gt; &lt;!-- è¿™ä¸ªifé‡Œæ²¡æœ‰&amp;&amp;,åªæœ‰&amp;amp;&amp;amp;æˆ–è€…andè¡¨ç¤ºï¼Œ||ä¹Ÿåªæœ‰orè¡¨ç¤º--&gt; &lt;/where&gt; &lt;/select&gt; &lt;!-- C.trimæ ‡ç­¾å®ç°&lt;trim prefix="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹" prefixOverrides="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹" suffix="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹" suffixOverrides="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹" --&gt; &lt;select id="getUserListIf03" parameterType="map" resultMap="BaseResultMap"&gt; select &lt;include refid="oa_user_columns"/&gt; from oa_user &lt;trim prefix="where " prefixOverrides="and || or"&gt; &lt;if test="name != null &amp;amp;&amp;amp; name != ''"&gt; and user_name like concat('%',#&#123;name&#125;,'%') &lt;/if&gt; &lt;if test="sex != null and sex != ''"&gt; and sex = #&#123;sex&#125; &lt;/if&gt; &lt;!-- è§xmlè½¬ä¹‰å­—ç¬¦ è¿™ä¸ªifé‡Œæ²¡æœ‰&amp;&amp;,åªæœ‰&amp;amp;&amp;amp;æˆ–è€…andè¡¨ç¤ºï¼Œ||ä¹Ÿåªæœ‰orè¡¨ç¤º--&gt; &lt;/trim&gt; &lt;/select&gt; &lt;!--åˆ©ç”¨setæ ‡ç­¾ å½“ä½ å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,åœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥ set å½“ä½ å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,æ£€æŸ¥å†…å®¹çš„æœ€åé¢æ˜¯å¦æœ‰é€—å·"," å¦‚æœæœ‰å°†å…¶æŠ¹æ‰ --&gt; &lt;update id="updateUser01ByPk" parameterType="com.hs.model.User"&gt; update oa_user &lt;set&gt; &lt;if test="user_name !=null and user_name != ''"&gt; user_name = #&#123;user_name&#125;, &lt;/if&gt; &lt;if test="sex !=null and sex != ''"&gt; sex = #&#123;sex&#125;, &lt;/if&gt; &lt;if test="money != null"&gt; &lt;!--ä¸æ˜¯å­—ç¬¦ä¸²å°±ä¸è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©º ='' --&gt; money = #&#123;money&#125;, &lt;/if&gt; &lt;/set&gt; where user_id = #&#123;user_id&#125; &lt;/update&gt; &lt;!--åˆ©ç”¨trimæ ‡ç­¾ï¼Œï¼Œï¼Œï¼Œä½†æ˜¯ä¸æ¨è --&gt; &lt;update id="updateUser02ByPk" parameterType="com.hs.model.User"&gt; update oa_user &lt;trim prefix="set" suffixOverrides=","&gt; &lt;if test="user_name !=null and user_name != ''"&gt; user_name = #&#123;user_name&#125;, &lt;/if&gt; &lt;if test="sex !=null and sex != ''"&gt; sex = #&#123;sex&#125;, &lt;/if&gt; &lt;if test="money != null"&gt; &lt;!--ä¸æ˜¯å­—ç¬¦ä¸²å°±ä¸è¦åˆ¤æ–­æ˜¯å¦ä¸ºç©º ='' --&gt; money = #&#123;money&#125;, &lt;/if&gt; &lt;/trim&gt; where user_id = #&#123;user_id&#125; &lt;/update&gt; &lt;!--åˆ©ç”¨chooseæ ‡ç­¾ï¼Œç±»ä¼¼switch--&gt; &lt;select id="getSkillByChoose" parameterType="map" resultMap="BaseResultMap"&gt; select &lt;include refid="oa_user_columns"/&gt; from oa_user where &lt;choose&gt;&lt;!--æ³¨æ„å•åŒå¼•å·,whené‡Œtest='' --&gt; &lt;when test='sex!=null and sex=="ç”·"'&gt; money &gt; 700 &lt;/when&gt; &lt;!--&lt;when test='sex!=null and sex=="å¥³"'&gt; money &amp;lt;= 700 &amp;lt;!&amp;ndash;è§xmlè½¬ä¹‰å­—ç¬¦ å°äºå·(å› ä¸ºå°äºå·&lt;æ˜¯æ ‡ç­¾çš„å¼€å¤´)çš„è§£å†³é—®é¢˜ï¼Œæˆ–è€…è¿™æ ·å†™ &amp;ndash;&amp;gt; &lt;/when&gt;--&gt; &lt;when test='sex!=null and sex="å¥³"'&gt; &lt;![CDATA[ money &lt;= 700 ]]&gt; &lt;/when&gt; &lt;!--é‡Œé¢ä¸èƒ½åŒ…å«æ ‡ç­¾ï¼ŒæŠŠ&lt;ï¼Œä¸å½“åšæ ‡ç­¾çš„å¼€å¤´ --&gt; &lt;otherwise&gt; &lt;!--switchä¸­çš„default--&gt; 1=1 &lt;/otherwise&gt; &lt;/choose&gt; &lt;/select&gt; &lt;!--åé¢ä¸¤ä¸ªå±æ€§ï¼Œå‰è€…å¯ä»¥ä¸ç”¨å†™ï¼Œåè€…æ˜¯ä½¿ç”¨è¯¥å±æ€§ï¼Œæ¥æ”¶è¿™ä¸ªæ–°æ·»åŠ çš„æ•°æ®çš„ä¸»é”®--&gt; &lt;insert id="addSkill01" parameterType="com.hs.model.User" useGeneratedKeys="true" keyProperty="user_id"&gt; insert into oa_user &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt; &lt;if test="user_name !=null and user_name!=''"&gt; user_name, &lt;/if&gt; &lt;if test="sex !=null and sex!=''"&gt; sex, &lt;/if&gt; &lt;if test="money !=null"&gt; money, &lt;/if&gt; &lt;if test="birthday !=null"&gt; birthday, &lt;/if&gt; &lt;/trim&gt; &lt;trim prefix="values(" suffix=")" suffixOverrides=","&gt; &lt;if test="user_name !=null and user_name!=''"&gt; #&#123;user_name&#125;, &lt;/if&gt; &lt;if test="sex !=null and sex!=''"&gt; #&#123;sex&#125;, &lt;/if&gt; &lt;if test="money !=null"&gt; #&#123;money&#125;, &lt;/if&gt; &lt;if test="birthday !=null"&gt; #&#123;birthday&#125;, &lt;/if&gt; &lt;/trim&gt; &lt;/insert&gt; &lt;!--æ•°ç»„åˆ é™¤ï¼Œå¦‚æœæ•°ç»„çš„è¯ï¼Œè¯·ä¸è¦å»è®¾ç½®parameterType,è®©å…¶è‡ªåŠ¨è¯†åˆ« --&gt; &lt;delete id="deleteSkillByArray" &gt; delete from oa_user where user_id in &lt;!--å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œ å¦‚æœåªä¼ äº†ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¸€ä¸ªé›†åˆ collection="array æˆ–è€… list å¦‚æœä¼ çš„æ˜¯ä¸€ä¸ªMapé‡Œè£…äº†list å°±å†™mapçš„keyï¼Œå¦‚æœæ˜¯å¯¹è±¡é‡ŒsetListï¼Œå°±å†™å¯¹è±¡çš„listå±æ€§,è¿™ä¸ªå±æ€§å°±å¯¹åº”ä¸€ä¸ªé›†åˆ itemç›¸å½“äºï¼Œä»–çš„éå†çš„ä¸€ä¸ªå€¼ï¼Œopen="å¼€å§‹åŠ å…¥" close="æœ€ååŠ å…¥" separator="ä»¥ä»€ä¹ˆé—´éš”"--&gt; &lt;foreach collection="array" item="id" open="(" close=")" separator=","&gt; #&#123;id&#125; &lt;/foreach&gt; &lt;/delete&gt; &lt;!--Listé›†åˆåˆ é™¤ --&gt; &lt;delete id="deleteSkillByList" parameterType="list"&gt; delete from oa_user where user_id in &lt;foreach collection="list" item="id" open="(" close=")" separator=","&gt; #&#123;id&#125; &lt;/foreach&gt; &lt;/delete&gt; &lt;delete id="deleteSkillByMap" parameterType="map"&gt; delete from oa_user where user_id in &lt;foreach collection="id_array" item="id" open="(" close=")" separator=","&gt; &lt;!-- ç­‰äºéå†ï¼Œid_arrayå¯¹åº”ä¸€ä¸ªlistï¼Œitemå°±æ˜¯è¿™ä¸ªlisté‡Œçš„å€¼ --&gt; #&#123;id&#125; &lt;/foreach&gt; &lt;/delete&gt; &lt;!--æ‰¹é‡æ·»åŠ --&gt; &lt;insert id="addSkillByAll" parameterType="list"&gt; insert into oa_user(user_name,sex,money) values &lt;foreach collection="list" item="user" separator=","&gt; (#&#123;user.user_name&#125;,#&#123;user.sex&#125;,#&#123;user.money&#125;) &lt;/foreach&gt; &lt;/insert&gt;&lt;/mapper&gt; 10.å°è£…å¥½çš„å·¥å…·ç±»åŒä¹‹å‰çš„ç¬”è®° 11.æ¥å£UserDao.java 12345678910111213141516171819202122232425262728293031package com.hs.dao;import com.hs.model.User;import java.util.List;import java.util.Map;public interface UserDao &#123; List&lt;User&gt; getUserListIf01(Map&lt;String, Object&gt; map); List&lt;User&gt; getUserListIf02(Map&lt;String, Object&gt; map); List&lt;User&gt; getUserListIf03(Map&lt;String, Object&gt; map); int updateUser01ByPk(User user); int updateUser02ByPk(User user); List&lt;User&gt; getSkillByChoose(Map&lt;String, Object&gt; map); int addSkill01(User user); int deleteSkillByArray(int[] array); int deleteSkillByList(List&lt;Integer&gt; list); int deleteSkillByMap(Map&lt;String, Object&gt; map); int addSkillByAll(List&lt;User&gt; list);&#125; 12.æ—¥å¿—æ¡†æ¶é…ç½®log4j.properties.xml 123456789# æ—¥å¿—é…ç½®æ–‡ä»¶Global logging configurationlog4j.rootLogger=ERROR, stdout# MyBatis logging configuration...# å¦‚æœè¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®éœ€è¦é…ç½®ä¸ºå‘½åç©ºé—´log4j.logger.å‘½åç©ºé—´log4j.logger.com.hs.dao.UserDao=TRACE# Console output...log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n 13.æµ‹è¯•ç±»MyBatisTest.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275package com.hs.test;import com.hs.dao.UserDao;import com.hs.model.User;import com.hs.util.MyBatisUtils;import org.apache.ibatis.session.SqlSession;import org.junit.Test;import java.text.DateFormat;import java.text.ParseException;import java.text.SimpleDateFormat;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;/** * æ¥å£ä»£ç†æ¨¡å¼å®ç°æ“ä½œï¼Œåœ¨xxDaoæ¥å£ä¸­ï¼Œå®šä¹‰æ–¹æ³•ï¼š sqlè¯­å¥è¿”å›çš„ç»“æœç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); * ä¸ç”¨å†™å®ç°ç±»ï¼Œç›´æ¥å†™æµ‹è¯•ç±»,å…·ä½“å®ç°è§æµ‹è¯•ç±» * sqlçš„æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´è·Ÿæ¥å£çš„å…¨è·¯å¾„ä¸€è‡´ * å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯listï¼Œå¦‚æœæ˜¯List&lt;Bean&gt;ï¼Œä¹Ÿæ˜¯list */public class MyBatisTest &#123; /** * ifæ ‡ç­¾ï¼Œè¿›è¡Œä¸¤ä¸ªå§“åå’Œæ€§åˆ«çš„æ¡ä»¶æŸ¥è¯¢ï¼Œé€šè¿‡æ’ç­‰å¼å®ŒæˆåŠ¨æ€SQLè¯­å¥ */ @Test public void getUserListIf01() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("name", "æ‚Ÿ"); map.put("sex", "ç”·"); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.getUserListIf01(map)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ifæ ‡ç­¾ï¼Œè¿›è¡Œä¸¤ä¸ªå§“åå’Œæ€§åˆ«çš„æ¡ä»¶æŸ¥è¯¢ï¼Œé€šè¿‡whereæ ‡ç­¾ï¼ˆæ¨èï¼ï¼ï¼ï¼‰ï¼š * å¦‚æœå‘ç°æ ‡ç­¾å…§æœ‰å†…å®¹,é‚£ä¹ˆä¼šåœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥å…³é”®å­— where * å¦‚æœæœ‰å†…å®¹,ä¼šæ£€æŸ¥å†…å®¹çš„æœ€å‰é¢æ˜¯å¦å«æœ‰ ANDç©ºæ ¼ æˆ–è€… ORç©ºæ ¼ ,è‡ªåŠ¨å°†å…¶æŠ¹ */ @Test public void getUserListIf02() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("name", "æ‚Ÿ"); map.put("sex", "ç”·"); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.getUserListIf02(map)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ifæ ‡ç­¾ï¼Œè¿›è¡Œä¸¤ä¸ªå§“åå’Œæ€§åˆ«çš„æ¡ä»¶æŸ¥è¯¢ï¼Œé€šè¿‡trimæ ‡ç­¾ï¼š * &lt;trim * prefix="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹" * prefixOverrides="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€å‰é¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹" * suffix="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢é¢æƒ³åŠ å…¥ä»€ä¹ˆå†…å®¹" * suffixOverrides="å½“å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,ä½ åœ¨å†…å®¹çš„æœ€åé¢æƒ³æŠ¹æ‰ä»€ä¹ˆå†…å®¹" * &gt; &lt;/trim&gt; */ @Test public void getUserListIf03() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("name", "æ‚Ÿ"); map.put("sex", "ç”·"); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.getUserListIf03(map)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * æ›´æ–°æ“ä½œâ€”å˜æ›´æ•°æ®åº“ * åˆ©ç”¨setæ ‡ç­¾ * å½“ä½ å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,åœ¨å†…å®¹çš„æœ€å‰é¢åŠ å…¥ set * å½“ä½ å‘ç°æœ‰å†…å®¹çš„æ—¶å€™,æ£€æŸ¥å†…å®¹çš„æœ€åé¢æ˜¯å¦æœ‰é€—å·"," å¦‚æœæœ‰å°†å…¶æŠ¹æ‰ */ @Test public void updateUser01ByPk() throws ParseException &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); //æ•°æ® User user = new User(); user.setUser_id(3); user.setUser_name("å¤©è“¬å…ƒå¸…"); //æ—¥æœŸçš„è½¬æ¢ String date = "2018-8-3"; DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); user.setBirthday(dateFormat.parse(date)); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.updateUser01ByPk(user)); //é‡ç‚¹ï¼ï¼ï¼ï¼ŒCRUDä¸­ï¼Œé™¤äº†Rï¼ˆæŸ¥è¯¢ï¼‰ï¼Œä¸ç”¨æäº¤äº‹åŠ¡ï¼Œå…¶ä½™å…¨çš„è‡ªå·±æäº¤äº‹åŠ¡ï¼Œä¼ ç»Ÿå’Œæ¥å£æ¨¡å¼æäº¤äº‹åŠ¡éƒ½æ˜¯ä¸€æ ·çš„ sqlSession.commit(); &#125; catch (Exception ex) &#123; ex.printStackTrace(); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * æ›´æ–°æ“ä½œâ€”å˜æ›´æ•°æ®åº“ * åˆ©ç”¨trimæ ‡ç­¾ * * @throws ParseException */ @Test public void updateUser02ByPk() throws ParseException &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); //æ•°æ® User user = new User(); user.setUser_id(3); user.setUser_name("å¤©è“¬å…ƒå¸…"); user.setMoney(1000.0); //æ—¥æœŸçš„è½¬æ¢ String date = "2018-8-3"; DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); user.setBirthday(dateFormat.parse(date)); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.updateUser02ByPk(user)); //é‡ç‚¹ï¼ï¼ï¼ï¼ŒCRUDä¸­ï¼Œé™¤äº†Rï¼ˆæŸ¥è¯¢ï¼‰ï¼Œä¸ç”¨æäº¤äº‹åŠ¡ï¼Œå…¶ä½™å…¨çš„è‡ªå·±æäº¤äº‹åŠ¡ï¼Œä¼ ç»Ÿå’Œæ¥å£æ¨¡å¼æäº¤äº‹åŠ¡éƒ½æ˜¯ä¸€æ ·çš„ sqlSession.commit(); &#125; catch (Exception ex) &#123; ex.printStackTrace(); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * æŸ¥è¯¢é€šè¿‡chooseæ ‡ç­¾ * è§£å†³å°äºå·çš„é—®é¢˜ */ @Test public void getSkillByChoose() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("sex", "å¥³"); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.getSkillByChoose(map)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * æ·»åŠ ä¸€ä¸ªæ•°æ®ï¼Œç„¶åè¿”å›è¿™ä¸ªæ•°æ®è‡ªå¢é•¿çš„ä¸»é”®ä¿¡æ¯ */ @Test public void addSkill01() throws ParseException &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); User user = new User(); user.setUser_name("æ²™åƒ§"); user.setSex("ç”·"); user.setMoney(455.0); String date = "2018-8-5"; DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd"); user.setBirthday(dateFormat.parse(date)); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println("å½±å“è¡Œæ•°"+userDao.addSkill01(user)); sqlSession.commit(); System.out.println("user_id:"+user.getUser_id()); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ä¼ é€’ä¼ é€’æ•°ç»„åˆ é™¤è§„åˆ™ */ @Test public void deleteSkillByArray()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.deleteSkillByArray(new int[]&#123;6,8&#125;)); //é™æ€åˆå§‹åŒ– //äº‹åŠ¡çš„æ‰‹åŠ¨æäº¤ sqlSession.commit(); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ä¼ é€’Listé›†åˆåˆ é™¤è§„åˆ™ */ @Test public void deleteSkillByList()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(); list.add(9); list.add(11); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.deleteSkillByList(list)); //äº‹åŠ¡çš„æ‰‹åŠ¨æäº¤ sqlSession.commit(); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * ä¼ é€’Mapé‡Œè£…liståˆ é™¤è§„åˆ™ */ @Test public void deleteSkillByMap()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); List&lt;Integer&gt; list = new ArrayList&lt;Integer&gt;(); list.add(8); list.add(10); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("id_array",list); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.deleteSkillByMap(map)); //äº‹åŠ¡çš„æ‰‹åŠ¨æäº¤ sqlSession.commit(); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * é€šè¿‡listé‡Œè£…Userå®ç°æ‰¹é‡æ·»åŠ  */ @Test public void addSkillByAll()&#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); List&lt;User&gt; list = new ArrayList&lt;User&gt;(); User user1 = new User(); user1.setUser_name("å«¦å¨¥"); user1.setSex("å¥³"); user1.setMoney(1213.0); User user2 = new User(); user2.setUser_name("æœˆå…”"); user2.setSex("å¥³"); user2.setMoney(2113.0); list.add(user1); list.add(user2); UserDao userDao = sqlSession.getMapper(UserDao.class); System.out.println(userDao.addSkillByAll(list)); sqlSession.commit(); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125;&#125;]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰æ¨¡ç³ŠæŸ¥è¯¢ä¸“é¢˜]]></title>
    <url>%2F2018%2F08%2F05%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E4%B8%93%E9%A2%98%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡è®²è§£ï¼Œç”¨æ¥å£ä»£ç†æ¨¡å¼å®ç°mybatisçš„æ¨¡ç³ŠæŸ¥è¯¢ï¼Œè®²è§£#{}å’Œ${}ä¸¤ä¸ªçš„åŒºåˆ«ï¼ŒXMLæ–‡ä»¶ä¸­äº”ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ä¸å…è®¸ä½¿ç”¨ï¼Œå°äºå·çš„è§£å†³é—®é¢˜ã€‚ æºç è·å–github 1.å…³äºæ¥å£ä»£ç†æ¨¡å¼å’Œä¼ ç»Ÿæ¨¡å¼çš„åŒºåˆ« ä¼ ç»Ÿæ¨¡å¼ï¼šåœ¨ç¬”è®°ï¼ˆäºŒï¼‰å°±æ˜¯é‡‡ç”¨çš„è¿™ä¸ªæ¨¡å¼ï¼š éœ€è¦å†™æ¥å£ï¼Œæ¥å£å®ç°ç±»ï¼Œæµ‹è¯•ç±»ï¼Œ æ˜ å°„æ–‡ä»¶å‘½åç©ºé—´ä¸ºæŒä¹…åŒ–ç±»çš„å…¨è·¯å¾„ æ¥å£ä»£ç†æ¨¡å¼ï¼šæœ¬ç¬”è®°ä¹‹åæ‰€æœ‰é‡‡ç”¨è¿™ä¸ªæ¨¡å¼ï¼š åªéœ€è¦å†™æ¥å£ï¼Œåœ¨æµ‹è¯•ç±»ä¸­è°ƒç”¨ï¼Œæ¥å£ç¼–ç¨‹: ä»€ä¹ˆæ˜¯æ¥å£? ç®€å•ç†è§£:æ¥å£å°±æ˜¯å®šä¹‰è§„èŒƒ æ¥å£è¿”å›ç±»å‹è·Ÿä½ è®¾ç½®çš„resultMapæˆ–è€…resultTypeå¯¹åº”ä¸Šå³å¯,ä½†æ˜¯ä¼šæ ¹æ®ä½ è¿”å›çš„ç±»å‹å®Œæˆselectoneæˆ–è€…selectListæ“ä½œ æ¥å£é‡Œæ–¹æ³•å¦‚ä½•å†™ï¼šsqlè¯­å¥è¿”å›çš„ç»“æœé›†ç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); eg:List getSkillLike02(String name); Listä¸ºSQLè¯­å¥è¿”å›çš„ç»“æœé›†ç±»å‹ï¼ŒgetSkillLike02ä¸ºæ˜ å°„æ–‡ä»¶ä¸­SQLè¯­å¥çš„idï¼ŒString nameæ˜¯ä¼ ç»™æ˜ å°„æ–‡ä»¶çš„å€¼ æ˜ å°„æ–‡ä»¶å‘½åç©ºé—´ä¸ºæ¥å£çš„å…¨è·¯å¾„ å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯Listï¼Œå¦‚æœæ˜¯Listï¼Œä¹Ÿæ˜¯List 2.MyBatisæ¡†æ¶ä¸­è·å–æ•°æ®çš„å½¢å¼æœ‰ä¸¤ç§æ–¹æ¡ˆ #{}å’Œ${}çš„åŒºåˆ«? #{} å–å€¼ï¼š æ–¹æ¡ˆä¸€ï¼š å¦‚æœä½ æ˜¯ä¸€ä¸ªç®€å•çš„æ•°æ®ç±»å‹,é‚£ä¹ˆæˆ‘ä»¬ä½¿ç”¨#{ä»»æ„æ ‡è¯†ç¬¦} æ–¹æ¡ˆäºŒ: å¯¹è±¡æˆ–è€…Map #{å±æ€§æˆ–è€…KEY} å¦‚æœä½¿ç”¨#{}é‚£ä¹ˆå®ƒçš„æ¨¡å¼æ–¹å¼ä¸ºé¢„å¤„ç†æ¨¡å¼ ${} ä½ éœ€è¦å¿…é¡»æŒ‡æ˜KEYæˆ–è€…å±æ€§ å¯¹æ•°æ®ä¸ä¼šè¿›è¡Œè½¬ä¹‰ ç›´æ¥æ‹¼æ¥åˆ°SQLè¯­å¥ä¸Š 3.XMLæ–‡ä»¶ä¸­æœ‰äº”ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ä¸å…è®¸ä½¿ç”¨ æ–¹æ³•ä¸€ï¼šç”¨äº†è½¬ä¹‰å­—ç¬¦æŠŠ&gt;å’Œ&lt;æ›¿æ¢æ‰ï¼Œç„¶åå°±æ²¡æœ‰é—®é¢˜äº†ã€‚ é™„:XMLè½¬ä¹‰å­—ç¬¦ æ–¹æ³•äºŒï¼š å› ä¸ºè¿™ä¸ªæ˜¯xmlæ ¼å¼çš„ï¼Œæ‰€ä»¥ä¸å…è®¸å‡ºç°ç±»ä¼¼â€œ&gt;â€è¿™æ ·çš„å­—ç¬¦ï¼Œä½†æ˜¯éƒ½å¯ä»¥ä½¿ç”¨&lt;![CDATA[ å†…å®¹ ]]&gt;ç¬¦å·è¿›è¡Œè¯´æ˜ï¼Œå°†æ­¤ç±»ç¬¦å·ä¸è¿›è¡Œè§£æ 4.ä»£ç ç»“æ„ 5.æ•°æ®åº“å±æ€§æ–‡ä»¶jdbc.properties 1234jdbc.mysql.driver=com.mysql.jdbc.Driverjdbc.mysql.url=jdbc:mysql://localhost:3306/cy42_mssjdbc.mysql.username=rootjdbc.mysql.password=root 6.æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!--åŠ è½½å±æ€§æ–‡ä»¶ --&gt; &lt;properties resource="jdbc.properties"/&gt; &lt;!--è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯resultMapé‡Œçš„typeï¼Œé¿å…åŒ…åå·²ä¿®æ”¹ï¼Œåœ¨æ˜ å°„æ–‡ä»¶é‡Œä¿®æ”¹å¤šå¤„åœ°æ–¹--&gt; &lt;typeAliases&gt; &lt;!-- æ–¹å¼ä¸€ã€com.hs.model.Skillè¿™ä¸ªç±»è®¾ç½®äº†åˆ«åhsï¼Œä¹‹åè¦ç”¨è¿™ä¸ªçš„è¯ï¼Œç›´æ¥å†™hs --&gt; &lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt; &lt;!-- æ–¹å¼äºŒã€com.hs.modelè¿™ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥å†™ç±»åï¼Œæ¯”å¦‚ç”¨com.hs.model.Skillï¼Œç›´æ¥å†™Skill --&gt; &lt;package name="com.hs.model"/&gt; &lt;/typeAliases&gt; &lt;!--é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ--&gt; &lt;environments default="development"&gt; &lt;environment id="development"&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨:ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ å…³é”®ä¿¡æ¯ --&gt; &lt;!--æ¡†æ¶ï¼šé»˜è®¤æƒ…å†µä¸‹CUDæ“ä½œéœ€è¦ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ï¼ˆå¦‚åŒåœ¨Navicatä¸­è¡¨ä¸­è¾“å…¥äº†æ•°æ®ï¼Œæ²¡æœ‰ç‚¹é‚£ä¸ªå°âˆšï¼Œå°±æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼Œ ä½†æ˜¯è¾“å…¥insertè¯­å¥ï¼Œå°±è‡ªåŠ¨æäº¤äº‹åŠ¡äº†ï¼‰ --&gt; &lt;transactionManager type="JDBC" /&gt; &lt;!--ä½¿ç”¨çš„æ˜¯è¿æ¥æ± ï¼šç™¾åº¦javaå¦‚ä½•å®è¡Œè¿æ¥æ± çš„åŸç†ï¼Ÿ --&gt; &lt;dataSource type="POOLED"&gt; &lt;property name="driver" value="$&#123;jdbc.mysql.driver&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="url" value="$&#123;jdbc.mysql.url&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="username" value="$&#123;jdbc.mysql.username&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="password" value="$&#123;jdbc.mysql.password&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œä¹Ÿå°±æ˜¯å«sqlè¯­å¥çš„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;!--å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼1ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…ç½®--&gt; &lt;mapper resource="com/hs/model/SkillMapper.xml"/&gt; &lt;!-- å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼2ï¼Œè‡ªåŠ¨æ‰«æåŒ…å†…çš„Mapperæ¥å£ä¸é…ç½®æ–‡ä»¶ --&gt; &lt;!--&lt;package name="com.hs.model"/&gt;--&gt; &lt;/mappers&gt;&lt;/configuration&gt; 7.æ¥å£ä»£ç SkillDao.java 12345678910111213141516171819202122232425package com.hs.dao;/** * æ¥å£ä»£ç†æ¨¡å¼å®ç°æ“ä½œï¼Œåœ¨xxDaoæ¥å£ä¸­ï¼Œå®šä¹‰æ–¹æ³•ï¼š sqlè¯­å¥è¿”å›çš„ç»“æœç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); * ä¸ç”¨å†™å®ç°ç±»ï¼Œç›´æ¥å†™æµ‹è¯•ç±»,å…·ä½“å®ç°è§æµ‹è¯•ç±» * sqlçš„æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´è·Ÿæ¥å£çš„å…¨è·¯å¾„ä¸€è‡´ * å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯listï¼Œå¦‚æœæ˜¯List&lt;Bean&gt;ï¼Œä¹Ÿæ˜¯list */import com.hs.model.Skill;import java.util.List;import java.util.Map;public interface SkillDao &#123; List&lt;Skill&gt; getSkillLike01(); List&lt;Skill&gt; getSkillLike02(String name); List&lt;Skill&gt; getSkillLike03(String name); List&lt;Skill&gt; getSkillLike04(Map&lt;String,Object&gt; map); List&lt;Skill&gt; getSkillLike05(Map&lt;String,Object&gt; map);&#125; 8.æŒä¹…åŒ–ç±»Skill.java 12345678910111213141516171819202122232425262728293031323334353637383940package com.hs.model;public class Skill &#123; private Integer skillid; private String skillname; private Integer num; public Integer getSkillid() &#123; return skillid; &#125; public void setSkillid(Integer skillid) &#123; this.skillid = skillid; &#125; public String getSkillname() &#123; return skillname; &#125; public void setSkillname(String skillname) &#123; this.skillname = skillname; &#125; public Integer getNum() &#123; return num; &#125; public void setNum(Integer num) &#123; this.num = num; &#125; @Override public String toString() &#123; return "Skill&#123;" + "skillid=" + skillid + ", skillname='" + skillname + '\'' + ", num=" + num + '&#125;'; &#125;&#125; 9.æ˜ å°„æ–‡ä»¶SkillMapper.xml 12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.dao.SkillDao"&gt; &lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„--&gt; &lt;resultMap id="BaseResultMap" type="com.hs.model.Skill"&gt; &lt;id column="skill_id" property="skillid"/&gt; &lt;!--è‹¥æœ‰ä¸»é”®ï¼Œä¸»é”®ç”¨idæ ‡ç­¾ï¼Œå…¶ä½™ç”¨resultæ ‡ç­¾--&gt; &lt;result column="skill_name" property="skillname"/&gt; &lt;result column="num" property="num"/&gt; &lt;/resultMap&gt; &lt;!--1.æ¨¡ç³Šæ¡ä»¶æŸ¥è¯¢æ˜¯å›ºå®šçš„ï¼Œå†™æ­»åœ¨sqlè¯­å¥é‡Œäº†--&gt; &lt;select id="getSkillLike01" resultMap="BaseResultMap"&gt; select skill_id,skill_name,num from skill where skill_name like '%s%' &lt;/select&gt; &lt;!--2.æ¨¡ç³Šæ¡ä»¶æ˜¯ä¸€ä¸ªç®€å•çš„æ•°æ®ç±»å‹ å½“ä½ ä¼ é€’çš„ä¸ºä¸€ä¸ªç®€å•çš„æ•°æ®ç±»å‹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡#&#123;ä»»æ„å†™&#125;è¿›è¡Œä¼ å€¼ï¼Œ #&#123;xx&#125;æ˜¯ä¸€ç§é¢„å¤„ç†æ¨¡å¼ï¼Œå…ˆsqlè¯­å¥é‡Œæ˜¯ï¼Ÿ ç„¶åæ¥æ”¶åˆ°å€¼äº†ï¼Œå†å†™è¿›å»,ä¼šç»™ä½ é»˜è®¤åŠ  '',å³ä¸º'#&#123;&#125;' --&gt; &lt;!--Aã€é€šè¿‡javaä»£ç æ‹¼æ¥å­—ç¬¦ä¸²--&gt; &lt;select id="getSkillLike02" parameterType="string" resultMap="BaseResultMap"&gt; select skill_id,skill_name,num from skill where skill_name like #&#123;name&#125; &lt;/select&gt; &lt;!--Bã€é€šè¿‡SQLè¯­å¥å‡½æ•°æ‹¼æ¥å­—ç¬¦ä¸² concatå‡½æ•°æŒ‡å­—ç¬¦ä¸²æ‹¼æ¥ï¼Œ--&gt; &lt;select id="getSkillLike03" parameterType="string" resultMap="BaseResultMap"&gt; select skill_id,skill_name,num from skill where skill_name like concat('%',#&#123;name&#125;,'%') &lt;/select&gt; &lt;!--Cã€é€šè¿‡$&#123;&#125;å®Œæˆæ¨¡ç³ŠæŸ¥è¯¢ï¼ï¼ï¼ä½†æ˜¯ä¸å¤ªæ¨èï¼Œ$&#123;&#125;ä¸ä¼šé»˜è®¤åŠ  '' ï¼Œä¹Ÿä¸æ˜¯é¢„å¤„ç†æ¨¡å¼ï¼Œæ˜¯ç›´æ¥åœ¨æŠŠå€¼å†™åœ¨äº†sqlè¯­å¥ä¸­ï¼Œ ä¸€èˆ¬ç”¨äºorder by $&#123;keyæˆ–è€…å±æ€§&#125;,ä¸€èˆ¬åªæ¥å—mapæˆ–è€…å¯¹è±¡ --&gt; &lt;select id="getSkillLike04" parameterType="map" resultMap="BaseResultMap"&gt; select skill_id,skill_name,num from skill where skill_name like concat('%','$&#123;name&#125;','%') &lt;/select&gt; &lt;!--$&#123;&#125;çš„åº”ç”¨ï¼Œæ’åº--&gt; &lt;select id="getSkillLike05" parameterType="map" resultMap="BaseResultMap"&gt; select * from skill order by skill_id $&#123;fs&#125; &lt;/select&gt;&lt;/mapper&gt; 10.å°è£…å¥½çš„å·¥å…·ç±»MyBatis.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445package com.hs.util;/** * çŸ¥è¯†ç‚¹ï¼š * finalä¿®é¥°ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿ * ä¿®é¥°æ–¹æ³•ï¼šä¸èƒ½è¢«é‡å†™ * ä¿®é¥°å˜é‡ï¼šå¸¸é‡ä¸å¯ç”¨å˜ï¼Œä½†å¦‚æœæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„å€¼å¯ä»¥å˜ * */import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import java.io.IOException;import java.io.InputStream;public class MyBatisUtils &#123; private MyBatisUtils() &#123; &#125; //ä¸å…è®¸å®ä¾‹åŒ– private static final String PATH = "mybatis-config.xml"; private static InputStream inputStream; private static SqlSessionFactory sqlSessionFactory; static &#123; //1.é™æ€ä»£ç å—ï¼Œåªæ˜¯åŠ è½½ä¸€æ¬¡ try &#123; inputStream = Resources.getResourceAsStream(PATH); sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); &#125; catch (IOException e) &#123; e.printStackTrace(); throw new RuntimeException("åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶å¤±è´¥"); &#125; &#125; public static SqlSession getSqlsession() &#123; return sqlSessionFactory.openSession(); &#125; public static void closeSqlSession(SqlSession sqlSession) &#123; if (sqlSession != null) &#123; sqlSession.close(); &#125; &#125;&#125; 11.æ—¥å¿—æ¡†æ¶é…ç½®log4j.properties 123456789# æ—¥å¿—é…ç½®æ–‡ä»¶Global logging configurationlog4j.rootLogger=ERROR, stdout# MyBatis logging configuration...# å¦‚æœè¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®éœ€è¦é…ç½®ä¸ºå‘½åç©ºé—´log4j.logger.å‘½åç©ºé—´log4j.logger.com.hs.dao.SkillDao=TRACE# Console output...log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n 12.æµ‹è¯•ç±»MyBatis.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104package com.hs.test;import com.hs.dao.SkillDao;import com.hs.util.MyBatisUtils;import org.apache.ibatis.session.SqlSession;import org.junit.Test;import java.util.HashMap;import java.util.Map;/** * æ¥å£ä»£ç†æ¨¡å¼å®ç°æ“ä½œï¼Œåœ¨xxDaoæ¥å£ä¸­ï¼Œå®šä¹‰æ–¹æ³•ï¼š sqlè¯­å¥è¿”å›çš„ç»“æœç±»å‹ sqlè¯­å¥çš„id(è¦ä¼ çš„å€¼); * ä¸ç”¨å†™å®ç°ç±»ï¼Œç›´æ¥å†™æµ‹è¯•ç±»,å…·ä½“å®ç°è§æµ‹è¯•ç±» * sqlçš„æ˜ å°„æ–‡ä»¶çš„å‘½åç©ºé—´è·Ÿæ¥å£çš„å…¨è·¯å¾„ä¸€è‡´ * å¯ä»¥æ ¹æ®æ¥å£çš„è¿”å›ç±»å‹è‡ªåŠ¨åˆ¤æ–­ä½¿ç”¨selectOneè¿˜æ˜¯selectList eg:è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡çš„ä¸ºoneï¼Œè¿”å›çš„æ˜¯listçš„å°±æ˜¯listï¼Œå¦‚æœæ˜¯List&lt;Bean&gt;ï¼Œä¹Ÿæ˜¯list */public class MyBatisTest &#123; /** * 1.æ¨¡ç³Šæ¡ä»¶æŸ¥è¯¢æ˜¯å›ºå®šçš„ï¼Œå†™æ­»åœ¨sqlè¯­å¥é‡Œäº† */ @Test public void getSkillLike01() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession();// æ ¹æ®xmlæ˜ å°„æ–‡ä»¶ï¼Œæ¥å£åˆ›å»ºå®ç°ç±»ä»£ç† æœ‰ç‚¹ç±»ä¼¼ä¼ ç»Ÿæ¨¡å¼çš„new UserMapperImpl() SkillDao skillDao = sqlSession.getMapper(SkillDao.class); System.out.println(skillDao.getSkillLike01()); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * 2.é€šè¿‡javaä»£ç æ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ */ @Test public void getSkillLike02() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); String name = "%a%"; SkillDao skillDao = sqlSession.getMapper(SkillDao.class); System.out.println(skillDao.getSkillLike02(name)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * 3.é€šè¿‡sqlè¯­å¥å‡½æ•°æ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ */ @Test public void getSkillLike03() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); String name = "s"; SkillDao skillDao = sqlSession.getMapper(SkillDao.class); System.out.println(skillDao.getSkillLike03(name)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * 4.é€šè¿‡$&#123;&#125;æ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡Œæ¨¡ç³ŠæŸ¥è¯¢ */ @Test public void getSkillLike04() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("name", "s"); SkillDao skillDao = sqlSession.getMapper(SkillDao.class); System.out.println(skillDao.getSkillLike04(map)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; /** * 4.é€šè¿‡$&#123;&#125;è¿›è¡Œæ’åºæ“ä½œ */ @Test public void getSkillLike05() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put("fs", "DESC"); SkillDao skillDao = sqlSession.getMapper(SkillDao.class); System.out.println(skillDao.getSkillLike05(map)); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125;&#125;]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰CRUDæ“ä½œï¼ˆæŸ¥è¯¢æ“ä½œåŸºç¡€ï¼‰]]></title>
    <url>%2F2018%2F08%2F05%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89CRUD%E6%93%8D%E4%BD%9C%EF%BC%88%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80%EF%BC%89%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡ä¸»è¦è®²è§£æŸ¥è¯¢æ“ä½œçš„ç»“æœé›†å¤„ç†ã€æ˜ å°„æ–‡ä»¶é‡Œå‘½åç©ºé—´è®¾ç½®ï¼ŒSQLè¯­å¥ä¸­resultMapï¼ŒresultTypeç­‰å±æ€§æ„æ€ã€MyBatisçš„ä¼ ç»Ÿå’Œæ¥å£ä»£ç†æ¨¡å¼ã€‚ æºç è·å–github 1.æ•´ä½“ç»“æ„ç›®å½• SkillDao.javaæ¥å£å«ä¸€äº›æ–¹æ³• SkillDaoImpl.javaæ˜¯SkillDaoçš„å®ç°ç±» Skill.javaæ˜¯æŒä¹…åŒ–ç±»ï¼ˆå®ä½“Beanï¼‰ SkillMapper.xmlæ˜¯SkillæŒä¹…åŒ–ç±»çš„æ˜ å°„æ–‡ä»¶ï¼ˆå«SQLè¯­å¥æ“ä½œç­‰ï¼‰ MyBatisTest.javaæµ‹è¯•ç±» jdbc.propertiesæ•°æ®åº“çš„å±æ€§æ–‡ä»¶ log4j.propertiesæ—¥å¿—æ¡†æ¶é…ç½®(åœ¨æ§åˆ¶å°æ˜¾ç¤ºsqlè¯­å¥ç­‰ä¿¡æ¯) mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ 2.æ•°æ®åº“å±æ€§æ–‡ä»¶jdbc.properties 1234jdbc.mysql.driver=com.mysql.jdbc.Driverjdbc.mysql.url=jdbc:mysql://localhost:3306/cy42_mssjdbc.mysql.username=rootjdbc.mysql.password=root 3.æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!--åŠ è½½å±æ€§æ–‡ä»¶ --&gt; &lt;properties resource="jdbc.properties"/&gt; &lt;!--è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯resultMapé‡Œçš„typeï¼Œé¿å…åŒ…åå·²ä¿®æ”¹ï¼Œåœ¨æ˜ å°„æ–‡ä»¶é‡Œä¿®æ”¹å¤šå¤„åœ°æ–¹--&gt; &lt;typeAliases&gt; &lt;!-- æ–¹å¼ä¸€ã€com.hs.model.Skillè¿™ä¸ªç±»è®¾ç½®äº†åˆ«åhsï¼Œä¹‹åè¦ç”¨è¿™ä¸ªçš„è¯ï¼Œç›´æ¥å†™hs --&gt; &lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt; &lt;!-- æ–¹å¼äºŒã€com.hs.modelè¿™ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥å†™ç±»åï¼Œæ¯”å¦‚ç”¨com.hs.model.Skillï¼Œç›´æ¥å†™Skill --&gt; &lt;package name="com.hs.model"/&gt; &lt;/typeAliases&gt; &lt;!--é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ--&gt; &lt;environments default="development"&gt; &lt;environment id="development"&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨:ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ å…³é”®ä¿¡æ¯ --&gt; &lt;!--æ¡†æ¶ï¼šé»˜è®¤æƒ…å†µä¸‹CUDæ“ä½œéœ€è¦ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ï¼ˆå¦‚åŒåœ¨Navicatä¸­è¡¨ä¸­è¾“å…¥äº†æ•°æ®ï¼Œæ²¡æœ‰ç‚¹é‚£ä¸ªå°âˆšï¼Œå°±æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼Œ ä½†æ˜¯è¾“å…¥insertè¯­å¥ï¼Œå°±è‡ªåŠ¨æäº¤äº‹åŠ¡äº†ï¼‰ --&gt; &lt;transactionManager type="JDBC" /&gt; &lt;!-- mybatisæä¾›äº†3ç§æ•°æ®æºç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼šPOOLED,UNPOOLED,JNDI --&gt; &lt;!-- POOLED è¡¨ç¤ºæ”¯æŒJDBCæ•°æ®æºè¿æ¥æ±  --&gt; &lt;!-- UNPOOLED è¡¨ç¤ºä¸æ”¯æŒæ•°æ®æºè¿æ¥æ±  --&gt; &lt;!-- JNDI è¡¨ç¤ºæ”¯æŒå¤–éƒ¨æ•°æ®æºè¿æ¥æ±  --&gt; &lt;!--ä½¿ç”¨çš„æ˜¯è¿æ¥æ± ï¼šç™¾åº¦javaå¦‚ä½•å®è¡Œè¿æ¥æ± çš„åŸç†ï¼Ÿ --&gt; &lt;dataSource type="POOLED"&gt; &lt;property name="driver" value="$&#123;jdbc.mysql.driver&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="url" value="$&#123;jdbc.mysql.url&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="username" value="$&#123;jdbc.mysql.username&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="password" value="$&#123;jdbc.mysql.password&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œä¹Ÿå°±æ˜¯å«sqlè¯­å¥çš„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;!--å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼1ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…ç½®--&gt; &lt;mapper resource="com/hs/model/SkillMapper.xml"/&gt; &lt;!-- å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼2ï¼Œè‡ªåŠ¨æ‰«æåŒ…å†…çš„Mapperæ¥å£ä¸é…ç½®æ–‡ä»¶ --&gt; &lt;!--&lt;package name="com.hs.model"/&gt;--&gt; &lt;/mappers&gt;&lt;/configuration&gt; 4.å°è£…å¥½çš„å·¥å…·ç±»MyBatisUtils.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.hs.util;/** * çŸ¥è¯†ç‚¹ï¼š * finalä¿®é¥°ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿ * ä¿®é¥°æ–¹æ³•ï¼šä¸èƒ½è¢«é‡å†™ * ä¿®é¥°å˜é‡ï¼šå¸¸é‡ä¸å¯ç”¨å˜ï¼Œä½†å¦‚æœæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„å€¼å¯ä»¥å˜ * */import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import java.io.IOException;import java.io.InputStream;public class MyBatisUtils &#123; private MyBatisUtils() &#123; &#125; //ä¸å…è®¸å®ä¾‹åŒ– private static final String PATH = "mybatis-config.xml"; private static InputStream inputStream; private static SqlSessionFactory sqlSessionFactory; static &#123; //1.é™æ€ä»£ç å—ï¼Œåªæ˜¯åŠ è½½ä¸€æ¬¡ try &#123; //è¾“å…¥æµ è¯»æ–‡ä»¶ //1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ inputStream = Resources.getResourceAsStream(PATH); //2.åˆ›å»ºSqlSessionå·¥å‚(SqlSessionFactory)ç›¸å½“äºConnection sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); &#125; catch (IOException e) &#123; e.printStackTrace(); throw new RuntimeException("åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶å¤±è´¥"); &#125; &#125; /** * è·å–sqlsession * @return */ public static SqlSession getSqlsession() &#123; //3.è·å–SqlSession ç›¸å½“äºæ‰§è¡ŒSQLè¯­å¥å¯¹è±¡PreparedStamenté¢„å¤„ç†å¯¹è±¡ //***** SqlSessionå®Œæˆæ‰€æœ‰çš„æŒä¹…åŒ–æ“ä½œCRUD return sqlSessionFactory.openSession(); &#125; /** * å…³é—­èµ„æº * @param sqlSession */ public static void closeSqlSession(SqlSession sqlSession) &#123; if (sqlSession != null) &#123; sqlSession.close(); &#125; &#125;&#125; 5.æŒä¹…åŒ–ç±»ä¸ºäº†è®²å‡ºæ¥ä¸€äº›çŸ¥è¯†ç‚¹ï¼ŒæŒä¹…åŒ–ç±»çš„å±æ€§åæ²¡æœ‰å’Œæ•°æ®åº“çš„å­—æ®µåä¸€æ ·ï¼Œæ­£å¸¸åº”è¯¥æ˜¯ä¸€æ ·çš„ Skill.java 12345678910111213141516171819202122232425262728293031323334353637383940package com.hs.model;public class Skill &#123; private Integer skillid; private String skillname; private Integer num; public Integer getSkillid() &#123; return skillid; &#125; public void setSkillid(Integer skillid) &#123; this.skillid = skillid; &#125; public String getSkillname() &#123; return skillname; &#125; public void setSkillname(String skillname) &#123; this.skillname = skillname; &#125; public Integer getNum() &#123; return num; &#125; public void setNum(Integer num) &#123; this.num = num; &#125; @Override public String toString() &#123; return "Skill&#123;" + "skillid=" + skillid + ", skillname='" + skillname + '\'' + ", num=" + num + '&#125;'; &#125;&#125; 6.XMLæ˜ å°„æ–‡ä»¶SQLæ˜ å°„æ–‡ä»¶ç»å¸¸å«ä¸€äº›å…ƒç´  parameterTypeâ€”-æ¥æ”¶çš„å‚æ•°ç±»å‹ï¼Œç®€å†™æ–¹å¼è§mybatiså®˜æ–¹æ–‡æ¡£ä¸­ï¼Œåˆ«åå’Œæ˜ å°„çš„ç±»å‹é‚£å— parameterMapæ²¡æœ‰äººç”¨äº†ï¼ï¼ï¼ï¼ï¼ resultTypeâ€”-è¯­å¥æ‰§è¡Œå®Œæ¯•è¿”å›çš„ç»“æœé›†ç±»å‹ resultMapâ€”-è¯­å¥æ‰§è¡Œå®Œæ¯•è¿”å›çš„ç»“æœé›†ï¼Œè¿™æ˜¯ä¸€ä¸ªæ ‡ç­¾ï¼Œæ‰¾å®ƒå¯¹åº”çš„æ ‡ç­¾ï¼Œå¯¹è¿™ä¸ªç»“æœé›†è¿›è¡Œå¤„ç†ï¼Œé‡Œé¢çš„typeå°±æ˜¯ç›¸åº”çš„è¿”å›ç±»å‹ sqlâ€”-æå–å…¬å…±çš„SQLä»£ç  insertâ€”-æ˜ å°„æ’å…¥è¯­å¥ updateâ€”-æ˜ å°„æ›´æ–°è¯­å¥ deleteâ€”-æ˜ å°„åˆ é™¤è¯­å¥ selectâ€”-æ˜ å°„æŸ¥è¯¢è¯­å¥ SkillMapper.xml 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;&lt;!--namespace=å‘½åç©ºé—´ï¼Œå”¯ä¸€ä¸é‡å¤--&gt;&lt;mapper namespace="com.hs.model.Skill"&gt; &lt;!--å‘½åç©ºé—´è§„åˆ™ä¼ ç»Ÿæ¨¡å¼ï¼šï¼ˆæŒä¹…åŒ–ç±»ï¼ˆå®ä½“åŒ–Beanï¼‰çš„ç±»åå…¨è·¯å¾„com.hs.Skillï¼‰æ¥å£ä»£ç†æ¨¡å¼ï¼šæ¥å£çš„å…¨è·¯å¾„--&gt; &lt;!--æŸ¥è¯¢çš„å­—æ®µï¼Œå¹¶æ²¡æœ‰ä¼˜åŒ–ï¼Œä¸‹ä¸ªä¸“é¢˜è¿›è¡Œä¼˜åŒ–--&gt; &lt;!--å½“ä½ ä¼ é€’çš„æ˜¯â€œä¸€ä¸ªâ€ç®€å•çš„æ•°æ®ç±»å‹çš„å½¢å‚çš„æ—¶å€™ï¼Œé‚£ä¹ˆä½ çš„$&#123;ä»»æ„åå­—&#125;,sqlè¯­å¥åé¢ä¸è¦åŠ  ; --&gt; &lt;select id="getMap01ByPk" parameterType="_int" resultType="map"&gt; select skill_id,skill_name,num from skill where skill_id = #&#123;sadsa&#125; &lt;/select&gt; &lt;select id="getMap02ByPk" parameterType="_int" resultType="map"&gt; select skill_id skillid,skill_name skill_name ,num number from skill where skill_id = #&#123;skill_id&#125; &lt;/select&gt; &lt;!--åªèƒ½å¯¹ç»“æœé›†çš„ç»“æœæ“ä½œè¿›è¡Œå¤„ç†ï¼ŒautoMapping="true"é»˜è®¤æ˜ å°„ï¼Œé»˜è®¤ä¸ºtrueï¼Œé‡å†™å­—æ®µåä¼šè¦†ç›–é»˜è®¤çš„ï¼Œè‹¥falseå°±ä¸ä¼šæ˜ å°„é»˜è®¤å­—æ®µï¼ˆåªæ˜ å°„å‡ºè‡ªå·±å†™çš„åˆ«åï¼‰--&gt; &lt;resultMap id="MapResultMapper" type="map" autoMapping="true"&gt; &lt;result column="skill_id" property="id"/&gt; &lt;!--columnä¸ºç»“æœé›†é‡Œçš„å­—æ®µåï¼Œpropertyä¸ºè‡ªå·±è¦æ˜ å°„(å˜æˆ)çš„å­—æ®µå--&gt; &lt;result column="skill_name" property="name"/&gt; &lt;result column="num" property="number"/&gt; &lt;/resultMap&gt; &lt;select id="getMap03ByPk" parameterType="_int" resultMap="MapResultMapper"&gt; select skill_id,skill_name ,num from skill where skill_id = #&#123;skill_id&#125; &lt;/select&gt; &lt;!--1.åˆ«åæ–¹æ³•ï¼Œå±æ€§å’Œå­—æ®µåä¸€è‡´ï¼Œå¯ä»¥å®Œæˆè‡ªåŠ¨æ˜ å°„--&gt; &lt;select id="getSkill01ByPk" parameterType="int" resultType="com.hs.model.Skill"&gt; select skill_id skillid,skill_name skillname,num from skill where skill_id = #&#123;adsa&#125; &lt;/select&gt; &lt;!--2.resultMapæ ‡ç­¾æ‰¾å¯¹åº”idçš„æ ‡ç­¾ï¼Œåˆ©ç”¨ç»“æœé›†ï¼Œè¿›è¡Œè½¬æ¢ï¼ŒjdbcTypeå’ŒjavaTypeå¯ä»¥ä¸ç”¨å†™ï¼Œåå­—è§jdbcç±»å‹å’ŒJava ç±»å‹å¯¹åº”http://www.mybatis.org/mybatis-3/zh/configuration.html#typeAliases--&gt; &lt;resultMap id="SkillResultMapper" type="com.hs.model.Skill"&gt; &lt;id column="skill_id" jdbcType="INTEGER" property="skillid" javaType="java.lang.Integer"/&gt; &lt;result column="skill_name" jdbcType="VARCHAR" property="skillname" javaType="java.lang.String"/&gt; &lt;result column="num" property="num"/&gt; &lt;/resultMap&gt; &lt;select id="getSkill02ByPk" parameterType="int" resultMap="SkillResultMapper"&gt; select skill_id,skill_name,num from skill where skill_id = #&#123;adsa&#125; &lt;/select&gt; &lt;!--ä¸€æ¡ä¸€æ¡çš„ä¸ºmap--&gt; &lt;select id="getSkillList01ByAll" resultType="map"&gt; select skill_id,skill_name,num from skill &lt;/select&gt; &lt;select id="getSkillList02ByAll" resultMap="SkillResultMapper"&gt; select skill_id,skill_name,num from skill &lt;/select&gt;&lt;/mapper&gt; 7.æ¥å£SkillDao.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.hs.dao;import com.hs.model.Skill;import java.util.List;import java.util.Map;public interface SkillDao &#123; /** * å¤„ç†ç»“æœé›†ä¸ºMapç±»å‹ * @param skillid * @return */ Map&lt;String, Object&gt; getMap01ByPk(int skillid); /** * å¤„ç†ç»“æœé›†ä¸ºMapç±»å‹â€”é€šè¿‡ç»™å­—æ®µå–åˆ«åæ–¹å¼ * @param skillid * @return */ Map&lt;String, Object&gt; getMap02ByPk(int skillid); /** * å¤„ç†ç»“æœé›†ä¸ºMapç±»å‹â€”é€šè¿‡resultMapæ ‡ç­¾å¤„ç† * @param skillid * @return */ Map&lt;String, Object&gt; getMap03ByPk(int skillid); /** * å¤„ç†ç»“æœé›†ä¸ºè‡ªå®šä¹‰çš„ç±»Skillâ€”é€šè¿‡ç»™å­—æ®µå–åˆ«åæ–¹å¼ * @param skillid * @return */ Skill getSkill01ByPk(int skillid); /** * å¤„ç†ç»“æœé›†ä¸ºè‡ªå®šä¹‰çš„ç±»Skillâ€”resultMapæ ‡ç­¾å¤„ç† * @param skillid * @return */ Skill getSkill02ByPk(int skillid); /** * å¤„ç†ç»“æœé›†ä¸ºé›†åˆï¼ˆlistï¼‰ * @param skillid * @return */ List&lt;Map&lt;String, Object&gt;&gt; getSkillList01ByAll(); /** * å¤„ç†ç»“æœé›†ä¸ºé›†åˆï¼ˆlistï¼‰â€”é€šè¿‡resultMap * @param skillid * @return */ List&lt;Map&lt;String, Object&gt;&gt; getSkillList02ByAll();&#125; 8.æ¥å£å®ç°ç±»SkillDaoImpl.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495package com.hs.dao;import com.hs.model.Skill;import com.hs.util.MyBatisUtils;import org.apache.ibatis.session.SqlSession;import java.util.List;import java.util.Map;public class SkillDaoImpl implements SkillDao &#123; /* * å…³é”®æ­¥éª¤ï¼šå®šä½æ‰§è¡ŒSQLè¯­å¥***å¦‚ä½•å®šä½ (namespace+"."+id) * å› ä¸ºå‘½åç©ºé—´æ˜¯Beançš„è·¯å¾„ï¼Œæ‰€ä»¥ä¸‹é¢çš„ å‘½åç©ºé—´.sqlè¯­å¥çš„id === ç±».class.getName()+" ." +id * åé¢å°±æ˜¯è¦ä¼ è¿‡å»çš„å€¼ * */ @Override public Map&lt;String, Object&gt; getMap01ByPk(int skillid) &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); System.out.println(Skill.class.getName()+"----com.he.model.Skill"); //å…³é”®æ­¥éª¤ return sqlSession.selectOne(Skill.class.getName() + ".getMap01ByPk",skillid); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; @Override public Map&lt;String, Object&gt; getMap02ByPk(int skillid) &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); return sqlSession.selectOne(Skill.class.getName() + ".getMap02ByPk",skillid); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; @Override public Map&lt;String, Object&gt; getMap03ByPk(int skillid) &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); return sqlSession.selectOne(Skill.class.getName() + ".getMap03ByPk",skillid); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; @Override public Skill getSkill01ByPk(int skillid) &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); return sqlSession.selectOne(Skill.class.getName() + ".getSkill01ByPk",skillid); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; @Override public Skill getSkill02ByPk(int skillid) &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); return sqlSession.selectOne(Skill.class.getName() + ".getSkill02ByPk",skillid); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; @Override public List&lt;Map&lt;String, Object&gt;&gt; getSkillList01ByAll() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); return sqlSession.selectList(Skill.class.getName() + ".getSkillList01ByAll"); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125; @Override public List&lt;Map&lt;String, Object&gt;&gt; getSkillList02ByAll() &#123; SqlSession sqlSession = null; try &#123; sqlSession = MyBatisUtils.getSqlsession(); return sqlSession.selectList(Skill.class.getName() + ".getSkillList02ByAll"); &#125; finally &#123; MyBatisUtils.closeSqlSession(sqlSession); &#125; &#125;&#125; 9.æ—¥å¿—é…ç½®æ–‡ä»¶log4j.properties 123456789# æ—¥å¿—é…ç½®æ–‡ä»¶Global logging configurationlog4j.rootLogger=ERROR, stdout# MyBatis logging configuration...# å¦‚æœè¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®éœ€è¦é…ç½®ä¸ºå‘½åç©ºé—´log4j.logger.å‘½åç©ºé—´log4j.logger.com.hs.model.Skill=TRACE# Console output...log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n 10.æµ‹è¯•ç±»MyBatisTest.java 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374package com.hs.test;/** * æœ¬æµ‹è¯•å…¨æ˜¯é‡‡ç”¨ä¼ ç»Ÿæ¨¡å¼ï¼šdaoå±‚é‡Œdaoæ¥å£å†™æ–¹æ³•ï¼ŒdaoImplå®ç°æ–¹æ³•ï¼Œç„¶åå†™æµ‹è¯•ç±» */import com.hs.dao.SkillDao;import com.hs.dao.SkillDaoImpl;import org.junit.Test;public class MyBatisTest &#123; /** * å¤„ç†ç»“æœé›†ä¸ºMapç±»å‹ */ @Test public void getMap01ByPk() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getMap01ByPk(2)); &#125; /** * å¤„ç†ç»“æœé›†ä¸ºMapç±»å‹â€”é€šè¿‡ç»™å­—æ®µå–åˆ«åæ–¹å¼ */ @Test public void getMap02ByPk() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getMap02ByPk(2)); &#125; /** * å¤„ç†ç»“æœé›†ä¸ºMapç±»å‹â€”é€šè¿‡resultMapæ ‡ç­¾å¤„ç† */ @Test public void getMap03ByPk() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getMap03ByPk(2)); &#125; /** * å¤„ç†ç»“æœé›†ä¸ºè‡ªå®šä¹‰çš„ç±»Skillâ€”é€šè¿‡ç»™å­—æ®µå–åˆ«åæ–¹å¼ */ @Test public void getSkill01ByPk() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getSkill01ByPk(2)); &#125; /** * å¤„ç†ç»“æœé›†ä¸ºè‡ªå®šä¹‰çš„ç±»Skillâ€”resultMapæ ‡ç­¾å¤„ç† */ @Test public void getSkill02ByPk() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getSkill02ByPk(2)); &#125; /** * å¤„ç†ç»“æœé›†ä¸ºé›†åˆï¼ˆlistï¼‰ */ @Test public void getSkillList01ByAll() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getSkillList01ByAll()); &#125; /** * å¤„ç†ç»“æœé›†ä¸ºé›†åˆï¼ˆlistï¼‰â€”é€šè¿‡resultMap */ @Test public void getSkillList02ByAll() &#123; SkillDao skillDao = new SkillDaoImpl(); //æ¥å£å›è°ƒï¼ˆä¸ªäººç†è§£ï¼Œçˆ¶ç±»å®šä¹‰å˜é‡SkillDao skillDaoï¼Œå­ç±»å®ä¾‹åŒ–ï¼‰ System.out.println(skillDao.getSkillList02ByAll()); &#125;&#125; 11.åœ¨æµ‹è¯•ç±»ä¸­è¿è¡Œç›¸åº”çš„æµ‹è¯•]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MyBatiså­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰mybatisä»‹ç»ã€ç¯å¢ƒæ­å»º]]></title>
    <url>%2F2018%2F08%2F04%2FMyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89mybatis%E4%BB%8B%E7%BB%8D%E3%80%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦è®²ä»€ä¹ˆæ˜¯æ¡†æ¶ã€å¦‚ä½•å­¦ä¹ æ¡†æ¶ã€mybatisä»‹ç»ã€å¦‚ä½•ç”¨ideaæ­å»ºmybatisçš„ç¯å¢ƒ(émaven) æºç è·å–github 1.ä»€ä¹ˆæ˜¯æ¡†æ¶ï¼Ÿä½ å¯ä»¥ç†è§£ä¸ºå°±æ˜¯åˆ«äººå†™å¥½çš„å·¥å…·ç±»ï¼Œä¸ºæˆ‘ä»¬æä¾›ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæœ€åä¸ºäº†æé«˜å¼€å‘æ•ˆç‡ 2.ä¸ºä»€ä¹ˆå­¦ä¹ æ¡†æ¶ï¼Ÿä¸ªäººï¼šå¯¹ä½ åº•å±‚å¼€å‘æ— ä»»ä½•å¸®åŠ©æ„ä¹‰ï¼Œä½†æ˜¯å¦‚æœçœ‹æºç ï¼Œå¯ä»¥å­¦åˆ°å¦‚ä½•è®¾è®¡çš„ å…¬å¸ï¼šæ•ˆç›Šï¼Œæé«˜äº†å¼€å‘æ•ˆç‡ 3.æ€ä¹ˆå»å­¦ä¹ æ¡†æ¶ï¼Ÿéœ€è¦éµå¾ªæ¡†æ¶è§„åˆ™ï¼š æ‰¾åˆ°jaråŒ… classæ–‡ä»¶ï¼ˆjavaæ–‡ä»¶ï¼‰ å…¥å£ï¼šæ ¸å¿ƒé…ç½®æ–‡ä»¶ é€šè¿‡å®˜æ–¹ç»™å®šçš„å¸®åŠ©æ–‡æ¡£ï¼Œä½¿ç”¨å…¶æä¾›APIæ¥å£ æµ‹è¯• åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œæˆ‘å°†å­¦ä¹ ssmæ¡†æ¶ï¼šMyBatis + SpringMvc + Spring æŠŠå®ƒåœ¨æˆ‘å­¦jspï¼Œservleté‚£æ®µæ—¶é—´å­¦çš„mvcæ¨¡å¼ï¼Œå’Œæˆ‘å°†è¦å­¦çš„ssmæ¡†æ¶ï¼Œåšä¸€ä¸ªå°å°çš„æ”¹åŠ¨ï¼š 4.MyBatisæ¡†æ¶æ˜¯ä¸€ä¸ªä»€ä¹ˆæ¡†æ¶ï¼ŸMyBatisæ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶ ä»€ä¹ˆæ˜¯æŒä¹…åŒ–ï¼š ç‹­ä¹‰ï¼šæŠŠæ•°æ®æ°¸ä¹…æ€§çš„ä¿å­˜åˆ°æ•°æ®åº“æˆ–è€…å­˜å‚¨å™¨éƒ½æ˜¯æŒä¹…åŒ– å¹¿ä¹‰ï¼šé’ˆå¯¹äºæ•°æ®åº“æ‰€æœ‰çš„æ“ä½œï¼Œéƒ½æ˜¯æŒä¹…åŒ–æ“ä½œ Createï¼šå¢åŠ  Readï¼šè¯»å–æŸ¥è¯¢ Updateï¼šæ›´æ–° Deleteï¼šåˆ é™¤ MyBatisæ˜¯ä¸€ä¸ªORMæ¡†æ¶ï¼š Objectï¼šå¯¹è±¡ javaå¯¹è±¡ Relationshipï¼šå…³ç³»ï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰ Mappingï¼šæ˜ å°„ 5.ä»€ä¹ˆæ˜¯MyBatisï¼ŸMyBatis æ˜¯æ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ã€‚ MyBatisé¿å…äº†å‡ ä¹æ‰€æœ‰çš„JDBCä»£ç (1.åŠ è½½é©±åŠ¨2.è·å–è¿æ¥3.æ‰§è¡Œè¯­å¥å¯¹è±¡4.å¤„ç†ç»“æœé›†5.å…³é—­èµ„æº)å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†(ResultSet). å°±æ˜¯ä¹‹å‰å­¦ä¹ çš„æ—¶å€™ï¼Œè‡ªå·±å°è£…çš„æ•°æ®Daoï¼Œéœ€è¦è‡ªå·±å¤„ç†æ•°æ®è½¬æ¢æˆè‡ªå·±æƒ³è¦çš„å¯¹è±¡ MyBatiså¯ä»¥å¯¹é…ç½®å’ŒåŸç”ŸMapä½¿ç”¨ç®€å•çš„XMLæˆ–æ³¨è§£ï¼Œå°†æ¥å£å’ŒJavaçš„POJOs(Plain Old Java Objects,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ 6.ideaæ­å»ºMyBatisç¯å¢ƒï¼ˆémavenï¼‰1).æ‰€éœ€è¦çš„jaråŒ…: mybatis-3.4.6.jar mybatisçš„åŒ… mysql-connector-java-5.1.45-bin.jar æ•°æ®åº“è®¿é—® log4j-1.2.17.jar æ—¥å¿—æ¡†æ¶åŒ…(åœ¨æ§åˆ¶å°æ˜¾ç¤ºsqlè¯­å¥ä¿¡æ¯ç­‰) junit-4.12.jar å•å…ƒæµ‹è¯•æ¡†æ¶ hamcrest-core-1.3.jar junit-4.12æ‰€ä¾èµ–çš„åŒ… éƒ½å¯ä»¥åœ¨mavenä»“åº“ä¸­æœç´¢ä¸‹è½½ 2).åˆ›å»ºä¸€ä¸ªjavase project3).åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªlibæ”¾jaråŒ…ï¼Œç„¶åå¯¼å…¥jaråŒ…ï¼šæ•™ç¨‹4).ideaä¸­é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š libæ”¾jaråŒ… com.hs.daoæ”¾æ¥å£ï¼Œå’Œæ¥å£å®ç°ç±»(MyBatisåˆåˆ†ä¸ºä¼ ç»Ÿæ¨¡å¼(éœ€è¦å†™æ¥å£å’Œæ¥å£å®ç°ç±»)å’Œæ¥å£ä»£ç†æ¨¡å¼(åªéœ€è¦å†™æ¥å£)) com.hs.modelæ”¾æŒä¹…åŒ–ç±»(å®ä½“Beanã€æ•°æ®åº“è¡¨å¯¹åº”çš„å¯¹è±¡)ã€XMLæ˜ å°„æ–‡ä»¶(å«SQLè¯­å¥) com.hs.testæ”¾æµ‹è¯•ç±» com.hs.utilæ”¾å°è£…å¥½çš„å·¥å…·ç±» jdbc.propertiesæ”¾è¿æ¥æ•°æ®åº“çš„ä¿¡æ¯ï¼Œåœ¨mybatis-config.xmlä¸­åŠ è½½ log4j.propertiesè¿™æ˜¯æ—¥å¿—æ¡†æ¶é…ç½® mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ 5).ä»£ç å†…å®¹1.åˆ›å»ºæ•°æ®åº“(å«åå‡ ç¯‡æ–‡ç« çš„æ•°æ®è¡¨)cy42_mss.sql 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283DROP TABLE IF EXISTS `oa_user`;CREATE TABLE `oa_user` ( `user_id` int(11) NOT NULL AUTO_INCREMENT, `user_name` varchar(255) DEFAULT NULL, `sex` varchar(255) DEFAULT NULL, `money` decimal(7,2) DEFAULT NULL, `birthday` date DEFAULT NULL, PRIMARY KEY (`user_id`)) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8mb4;-- ------------------------------ Records of oa_user-- ----------------------------INSERT INTO `oa_user` VALUES (&apos;1&apos;, &apos;æ‚Ÿç©º&apos;, &apos;ç”·&apos;, &apos;888.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;2&apos;, &apos;å…«æˆ’&apos;, &apos;ç”·&apos;, &apos;999.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;3&apos;, &apos;å¤©è“¬å…ƒå¸…&apos;, &apos;å¥³&apos;, &apos;1000.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;4&apos;, &apos;æ‚Ÿèƒ½&apos;, &apos;ç”·&apos;, &apos;666.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;5&apos;, &apos;æ³•æ‚Ÿæ³•&apos;, &apos;å¥³&apos;, &apos;544.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;6&apos;, &apos;æ‚Ÿ&apos;, &apos;å¥³&apos;, &apos;562.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;7&apos;, &apos;æ‚Ÿ&apos;, &apos;å¥³&apos;, &apos;562.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;14&apos;, &apos;å«¦å¨¥&apos;, &apos;å¥³&apos;, &apos;1213.00&apos;, null);INSERT INTO `oa_user` VALUES (&apos;15&apos;, &apos;æœˆå…”&apos;, &apos;å¥³&apos;, &apos;2113.00&apos;, null);-- ------------------------------ Table structure for skill-- ----------------------------DROP TABLE IF EXISTS `skill`;CREATE TABLE `skill` ( `skill_id` int(11) NOT NULL AUTO_INCREMENT, `skill_name` varchar(255) DEFAULT NULL, `num` int(11) DEFAULT NULL, `fk_teacher_id` int(11) DEFAULT NULL, PRIMARY KEY (`skill_id`)) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4;-- ------------------------------ Records of skill-- ----------------------------INSERT INTO `skill` VALUES (&apos;2&apos;, &apos;JS&apos;, &apos;75&apos;, null);INSERT INTO `skill` VALUES (&apos;7&apos;, &apos;CSS&apos;, &apos;66&apos;, null);INSERT INTO `skill` VALUES (&apos;8&apos;, &apos;java&apos;, &apos;66&apos;, null);INSERT INTO `skill` VALUES (&apos;9&apos;, &apos;vue&apos;, &apos;56&apos;, &apos;9999&apos;);-- ------------------------------ Table structure for sys_role-- ----------------------------DROP TABLE IF EXISTS `sys_role`;CREATE TABLE `sys_role` ( `role_id` int(11) NOT NULL AUTO_INCREMENT, `role_name` varchar(32) DEFAULT NULL, `role_key` varchar(32) DEFAULT NULL, `status` int(1) DEFAULT &apos;1&apos; COMMENT &apos;1å¯ç”¨ -1ç¦ç”¨&apos;, PRIMARY KEY (`role_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;-- ------------------------------ Records of sys_role-- ----------------------------INSERT INTO `sys_role` VALUES (&apos;-100&apos;, &apos;è¶…çº§ç®¡ç†å‘˜&apos;, &apos;ADMIN&apos;, &apos;1&apos;);-- ------------------------------ Table structure for sys_user-- ----------------------------DROP TABLE IF EXISTS `sys_user`;CREATE TABLE `sys_user` ( `user_id` int(11) NOT NULL AUTO_INCREMENT, `account` varchar(32) NOT NULL, `password` varchar(128) NOT NULL, `user_name` varchar(32) DEFAULT &apos;&apos;, `status` int(1) NOT NULL DEFAULT &apos;1&apos; COMMENT &apos;1å¯ç”¨ -1åˆ é™¤ 2ç¦ç”¨&apos;, `login_time` datetime DEFAULT CURRENT_TIMESTAMP, `ip` varchar(128) DEFAULT NULL, `fk_role_id` int(11) DEFAULT NULL, PRIMARY KEY (`user_id`), KEY `fk_role_id` (`fk_role_id`), CONSTRAINT `sys_user_ibfk_1` FOREIGN KEY (`fk_role_id`) REFERENCES `sys_role` (`role_id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;-- ------------------------------ Records of sys_user-- ----------------------------INSERT INTO `sys_user` VALUES (&apos;-999&apos;, &apos;super&apos;, &apos;super&apos;, &apos;å”åƒ§&apos;, &apos;1&apos;, &apos;2018-07-28 18:47:39&apos;, null, &apos;-100&apos;);INSERT INTO `sys_user` VALUES (&apos;-888&apos;, &apos;admin&apos;, &apos;admin&apos;, &apos;æ‚Ÿç©º&apos;, &apos;1&apos;, &apos;2018-07-03 18:48:21&apos;, null, &apos;-100&apos;); 2.æ•°æ®åº“å±æ€§æ–‡ä»¶ä¸ºäº†è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜ï¼š è‡ªå·±çš„mysqlç¼–ç è¦è®¾ç½®æˆutf-8æˆ–utf8mb4 å¦‚æœmysqlç¼–ç æ²¡æœ‰è®¾ç½®ä»¥ä¸Šçš„ï¼Œéœ€è¦å†urlåé¢åŠ ?useUnicode=true&amp;characterEncoding=UTF-8 jdbc.properties 1234jdbc.mysql.driver=com.mysql.jdbc.Driverjdbc.mysql.url=jdbc:mysql://localhost:3306/cy42_mss?useUnicode=true&amp;characterEncoding=UTF-8jdbc.mysql.username=rootjdbc.mysql.password=root 3.æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml 12345678910111213141516171819202122232425262728293031323334353637383940&lt;?xml version="1.0" encoding="UTF-8" ?&gt;&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;&lt;configuration&gt; &lt;!--åŠ è½½å±æ€§æ–‡ä»¶ --&gt; &lt;properties resource="jdbc.properties"/&gt; &lt;!--è‡ªå®šä¹‰è®¾ç½®ç±»å‹çš„åˆ«åï¼Œä¹Ÿå°±æ˜¯resultMapé‡Œçš„typeï¼Œé¿å…åŒ…åå·²ä¿®æ”¹ï¼Œåœ¨æ˜ å°„æ–‡ä»¶é‡Œä¿®æ”¹å¤šå¤„åœ°æ–¹--&gt; &lt;typeAliases&gt; &lt;!-- æ–¹å¼ä¸€ã€com.hs.model.Skillè¿™ä¸ªç±»è®¾ç½®äº†åˆ«åhsï¼Œä¹‹åè¦ç”¨è¿™ä¸ªçš„è¯ï¼Œç›´æ¥å†™hs --&gt; &lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt; &lt;!-- æ–¹å¼äºŒã€com.hs.modelè¿™ä¸ªåŒ…ä¸‹çš„ç±»ï¼Œè¦ç”¨çš„æ—¶å€™ç›´æ¥å†™ç±»åï¼Œæ¯”å¦‚ç”¨com.hs.model.Skillï¼Œç›´æ¥å†™Skill --&gt; &lt;package name="com.hs.model"/&gt; &lt;/typeAliases&gt; &lt;!--é…ç½®æ•°æ®åº“çš„ç¯å¢ƒ--&gt; &lt;environments default="development"&gt; &lt;environment id="development"&gt; &lt;!--äº‹åŠ¡ç®¡ç†å™¨:ä¿è¯æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§ å…³é”®ä¿¡æ¯ --&gt; &lt;!--æ¡†æ¶ï¼šé»˜è®¤æƒ…å†µä¸‹CUDæ“ä½œéœ€è¦ æ‰‹åŠ¨æäº¤äº‹åŠ¡ ï¼ˆå¦‚åŒåœ¨Navicatä¸­è¡¨ä¸­è¾“å…¥äº†æ•°æ®ï¼Œæ²¡æœ‰ç‚¹é‚£ä¸ªå°âˆšï¼Œå°±æ˜¯æ²¡æœ‰æäº¤äº‹åŠ¡ï¼Œ ä½†æ˜¯è¾“å…¥insertè¯­å¥ï¼Œå°±è‡ªåŠ¨æäº¤äº‹åŠ¡äº†ï¼‰ --&gt; &lt;transactionManager type="JDBC" /&gt; &lt;!--ä½¿ç”¨çš„æ˜¯è¿æ¥æ± ï¼šç™¾åº¦javaå¦‚ä½•å®è¡Œè¿æ¥æ± çš„åŸç†ï¼Ÿ --&gt; &lt;dataSource type="POOLED"&gt; &lt;property name="driver" value="$&#123;jdbc.mysql.driver&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="url" value="$&#123;jdbc.mysql.url&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="username" value="$&#123;jdbc.mysql.username&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;property name="password" value="$&#123;jdbc.mysql.password&#125;" /&gt; &lt;!--è·å–å€¼ï¼Œ$&#123;å±æ€§æ–‡ä»¶é‡Œçš„å˜é‡å&#125;ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å†™å€¼--&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;!--åŠ è½½æ˜ å°„æ–‡ä»¶ ï¼Œä¹Ÿå°±æ˜¯å«sqlè¯­å¥çš„æ–‡ä»¶--&gt; &lt;mappers&gt; &lt;!--å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼1ï¼Œä¸€ä¸ªä¸€ä¸ªçš„é…ç½®--&gt; &lt;mapper resource="com/hs/model/SkillMapper.xml"/&gt; &lt;!-- å‘ŠçŸ¥æ˜ å°„æ–‡ä»¶æ–¹å¼2ï¼Œè‡ªåŠ¨æ‰«æåŒ…å†…çš„Mapperæ¥å£ä¸é…ç½®æ–‡ä»¶ --&gt; &lt;!--&lt;package name="com.hs.model"/&gt;--&gt; &lt;/mappers&gt;&lt;/configuration&gt; 4.daoå±‚SkillDao.java 1å…·ä½“ä»£ç è§ç¬¬äºŒç¯‡ SkillDaoImpl.java 1å…·ä½“ä»£ç è§ç¬¬äºŒç¯‡ 5.modelå±‚Skill.java(æŒä¹…åŒ–ç±»å«å¯¹è±¡çš„å±æ€§ï¼Œgetã€setæ–¹æ³•ã€toStingæ–¹æ³•) 1å…·ä½“ä»£ç è§ç¬¬äºŒç¯‡ SkillMapper.xml(æ˜ å°„æ–‡ä»¶) 1å…·ä½“ä»£ç è§ç¬¬äºŒç¯‡ 6.testå±‚MyBatisTest.java(å†™æµ‹è¯•æ–¹æ³•) 12 7.utilå±‚(å°è£…å¥½çš„å·¥å…·ç±»ã€å¯ä»¥ç›´æ¥è°ƒç”¨)MyBatisUtils.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package com.hs.util;/** * çŸ¥è¯†ç‚¹ï¼š * finalä¿®é¥°ç±»ï¼šä¸èƒ½è¢«ç»§æ‰¿ * ä¿®é¥°æ–¹æ³•ï¼šä¸èƒ½è¢«é‡å†™ * ä¿®é¥°å˜é‡ï¼šå¸¸é‡ä¸å¯ç”¨å˜ï¼Œä½†å¦‚æœæ˜¯å¯¹è±¡ï¼Œå¯¹è±¡é‡Œçš„å€¼å¯ä»¥å˜ * */import org.apache.ibatis.io.Resources;import org.apache.ibatis.session.SqlSession;import org.apache.ibatis.session.SqlSessionFactory;import org.apache.ibatis.session.SqlSessionFactoryBuilder;import java.io.IOException;import java.io.InputStream;public class MyBatisUtils &#123; private MyBatisUtils() &#123; &#125; //ä¸å…è®¸å®ä¾‹åŒ– private static final String PATH = "mybatis-config.xml"; private static InputStream inputStream; private static SqlSessionFactory sqlSessionFactory; static &#123; //1.é™æ€ä»£ç å—ï¼Œåªæ˜¯åŠ è½½ä¸€æ¬¡ try &#123; //è¾“å…¥æµ è¯»æ–‡ä»¶ //1.è¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶ inputStream = Resources.getResourceAsStream(PATH); //2.åˆ›å»ºSqlSessionå·¥å‚(SqlSessionFactory)ç›¸å½“äºConnection sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); &#125; catch (IOException e) &#123; e.printStackTrace(); throw new RuntimeException("åŠ è½½æ ¸å¿ƒé…ç½®æ–‡ä»¶å¤±è´¥"); &#125; &#125; /** * è·å–sqlsession * @return */ public static SqlSession getSqlsession() &#123; //3.è·å–SqlSession ç›¸å½“äºæ‰§è¡ŒSQLè¯­å¥å¯¹è±¡PreparedStamenté¢„å¤„ç†å¯¹è±¡ //***** SqlSessionå®Œæˆæ‰€æœ‰çš„æŒä¹…åŒ–æ“ä½œCRUD return sqlSessionFactory.openSession(); &#125; /** * å…³é—­èµ„æº * @param sqlSession */ public static void closeSqlSession(SqlSession sqlSession) &#123; if (sqlSession != null) &#123; sqlSession.close(); &#125; &#125;&#125; 8.æ—¥å¿—æ¡†æ¶é…ç½®log4j.properties 123456789# æ—¥å¿—é…ç½®æ–‡ä»¶Global logging configurationlog4j.rootLogger=ERROR, stdout# MyBatis logging configuration...# å¦‚æœè¦æ˜¾ç¤ºSQLè¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªä½ç½®éœ€è¦é…ç½®ä¸ºå‘½åç©ºé—´log4j.logger.å‘½åç©ºé—´log4j.logger.com.hs.model.Skill=TRACE# Console output...log4j.appender.stdout=org.apache.log4j.ConsoleAppenderlog4j.appender.stdout.layout=org.apache.log4j.PatternLayoutlog4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n]]></content>
      <categories>
        <category>MyBatiså­¦ä¹ æ€»ç»“</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>SSM</tag>
        <tag>æ¡†æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ideaå¯¼å…¥/ç§»é™¤jaråŒ…æ–¹å¼ï¼ˆä¸‰ç§ï¼‰]]></title>
    <url>%2F2018%2F08%2F04%2Fidea%E5%AF%BC%E5%85%A5-%E7%A7%BB%E9%99%A4jar%E5%8C%85%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%89%E7%A7%8D%EF%BC%89%2F</url>
    <content type="text"><![CDATA[eclipseå¯¼å…¥jaråªéœ€è¦ç®€å•çš„å³é”®addxxxå°±å¯ä»¥ï¼Œæœ¬ç¯‡å…³äºideaå¯¼å…¥jarçš„3ç§æ–¹å¼ï¼Œç”¨GIFå±•ç¤º 1.æ·»åŠ jaråŒ… æ–¹æ³•ä¸€ï¼šæ·»åŠ libç›®å½•ä¸‹çš„æ‰€æœ‰jaråŒ… æ–¹æ³•äºŒï¼šå³é”®jarï¼Œé€‰æ‹©addxxx æ–¹æ³•ä¸‰ï¼šåœ¨æ–¹æ³•ä¸€çš„åŸºç¡€ä¸Šï¼Œç‚¹å‡»libä¸‹é¢çš„ç›¸åº”çš„jaråŒ… 2.åˆ é™¤jaråŒ…]]></content>
      <categories>
        <category>idea</category>
      </categories>
      <tags>
        <tag>ideaçš„jaræ·»åŠ å’Œåˆ é™¤</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[mysqlå¿˜è®°è´¦å·å¯†ç ]]></title>
    <url>%2F2018%2F07%2F24%2Fmysql%E5%BF%98%E8%AE%B0%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%2F</url>
    <content type="text"><![CDATA[å¦‚æœçªç„¶å¿˜è®°äº†mysqlçš„è´¦å·å¯†ç ï¼Œæˆ–è€…æ‹¿ç€åˆ«äººçš„ç”µè„‘å¿˜è®°äº†mysqlçš„è´¦å·å¯†ç è¯¥å’‹åŠï¼Ÿï¼Ÿï¼Ÿ æ‰“å¼€mysql.exeå’Œmysqld.exeæ‰€åœ¨çš„æ–‡ä»¶å¤¹,å¤åˆ¶è·¯å¾„åœ°å€; æ‰“å¼€cmdå‘½ä»¤æç¤ºç¬¦ï¼Œè¿›å…¥ä¸Šä¸€æ­¥mysql.exeæ‰€åœ¨çš„æ–‡ä»¶å¤¹; è¾“å…¥å‘½ä»¤ mysqld â€“skip-grant-tables å›è½¦ï¼Œæ­¤æ—¶å°±è·³è¿‡äº†mysqlçš„ç”¨æˆ·éªŒè¯ã€‚æ³¨æ„è¾“å…¥æ­¤å‘½ä»¤ä¹‹åå‘½ä»¤è¡Œå°±æ— æ³•æ“ä½œäº†ï¼Œæ­¤æ—¶å¯ä»¥å†æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œã€‚ æ³¨æ„ï¼šåœ¨è¾“å…¥æ­¤å‘½ä»¤ä¹‹å‰å…ˆåœ¨ä»»åŠ¡ç®¡ç†å™¨ä¸­ç»“æŸmysqld.exeè¿›ç¨‹ï¼Œç¡®ä¿mysqlæœåŠ¡å™¨ç«¯å·²ç»“æŸè¿è¡Œ; åŒæ ·ä¹Ÿåœ¨æ­¥éª¤2ä¹‹åï¼Œç„¶åç›´æ¥è¾“å…¥mysqlï¼Œä¸éœ€è¦å¸¦ä»»ä½•ç™»å½•å‚æ•°ç›´æ¥å›è½¦å°±å¯ä»¥ç™»é™†ä¸Šæ•°æ®åº“; è¾“å…¥show databases; å¯ä»¥çœ‹åˆ°æ‰€æœ‰æ•°æ®åº“è¯´æ˜æˆåŠŸç™»é™†; å…¶ä¸­mysqlåº“å°±æ˜¯ä¿å­˜ç”¨æˆ·åçš„åœ°æ–¹ã€‚è¾“å…¥ use mysql; é€‰æ‹©mysqlæ•°æ®åº“; è¾“å…¥show tables;æŸ¥çœ‹æ‰€æœ‰è¡¨ï¼Œä¼šå‘ç°æœ‰ä¸ªuserè¡¨ï¼Œè¿™é‡Œå­˜æ”¾çš„å°±æ˜¯ç”¨æˆ·åï¼Œå¯†ç ï¼Œæƒé™ç­‰ç­‰è´¦æˆ·ä¿¡æ¯; è¾“å…¥select user,host,password from user; æ¥æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯; æ›´æ”¹rootå¯†ç ï¼Œè¾“å…¥update user set password=password(â€˜rootâ€™) where user=â€™rootâ€™ and host=â€™localhostâ€™; å†æ¬¡æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯ï¼Œselect user,host,password from user; å¯ä»¥çœ‹åˆ°å¯†ç å·²è¢«ä¿®æ”¹ã€‚]]></content>
      <categories>
        <category>mysql</category>
      </categories>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ideaåˆä½“éªŒå’Œè®¾ç½®]]></title>
    <url>%2F2018%2F07%2F22%2Fidea%E5%88%9D%E4%BD%93%E9%AA%8C%E5%92%8C%E8%AE%BE%E7%BD%AE%2F</url>
    <content type="text"><![CDATA[æ¢äº†ç”µè„‘ï¼Œideaä¹Ÿèƒ½è·‘èµ·æ¥äº†ï¼Œè½¯ä»¶ä¹Ÿéœ€è¦è®¾ç½®å¾ˆå¤šåœ°æ–¹ è®¾ç½®æœ‰å¾ˆå¤šå•Šï¼Œæ¯”å¦‚å­—ä½“ï¼ŒUTF-8ï¼Œjdkï¼Œmavenï¼Œgitï¼ŒjavawebBç«™è§†é¢‘æ•™ç¨‹]]></content>
      <categories>
        <category>idea</category>
      </categories>
      <tags>
        <tag>idea</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hexo+Githubæ­å»ºä¸ªäººåšå®¢ï¼ˆåŠ ä¼˜åŒ–è®¾ç½®ï¼‰]]></title>
    <url>%2F2018%2F07%2F21%2FHexo-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BC%98%E5%8C%96%E8%AE%BE%E7%BD%AE%EF%BC%89%2F</url>
    <content type="text"><![CDATA[å“ˆå“ˆå“ˆå“ˆï¼Œè‡ªå·±çš„åšå®¢ç»ˆäºæ­å¥½äº†ï¼ï¼è¿˜æ˜¯å†™ä¸ªåšå®¢è®°å½•ä¸€ä¸‹è‡ªå·±å¦‚ä½•æ­å»ºçš„å§ é¦–å…ˆæ¥é¦–éŸ³ä¹å‹å‹æƒŠå§ &emsp;&emsp;å…¶å®è‡ªå·±å¾ˆä¹…ä¹‹å‰å°±æƒ³æ­ä¸ªåšå®¢ï¼Œè‡ªå·±å†™ç‚¹ä¸œè¥¿ï¼Œä½†æ˜¯å¯èƒ½å°±è®¤ä¸ºæ­ä¸ªåšå®¢å¾ˆéš¾ï¼Œè‡ªå·±ä¹Ÿæ‡’ï¼Œå°±æ²¡æœ‰æ­å»ºï¼Œç»“æœä»Šå¤©å‘¨å…­ï¼Œæƒ³ç»™è‡ªå·±ä¼‘æ¯ä¼‘æ¯ï¼Œç„¶åæ‰¾äº†æ•™ç¨‹ï¼Œç”¨Github+heroæ­å»ºäº†è¿™ä¸ªåšå®¢ï¼Œä¸€ä¸ªå°æ—¶å°±å¯ä»¥å®Œæˆçš„ï¼Œå…¶å®å¹¶æ²¡æœ‰é‚£ä¹ˆéš¾ï¼Œå‚»ç“œå¼æ“ä½œï¼Œæ­å»ºå®Œä¹‹åï¼Œå‘ç°ä¸€äº›ä¼˜ç¼ºç‚¹ï¼š é‡ç‚¹æ˜¯å…è´¹çš„ï¼Œåªéœ€è¦ä½ æ³¨å†Œä¸€ä¸ªGitHubè´¦å·ï¼Œè‡ªå·±ä¸€å°ç”µè„‘ï¼Œç„¶åå°±ojbkçš„äº‹ã€‚ è‡ªå¸¦å…è´¹çš„åŸŸåï¼Œå¦‚æœè‡ªå·±æœ‰å…¶ä»–éœ€æ±‚ï¼Œä¹Ÿå¯ä»¥è´­ä¹°å…¶ä»–çš„åŸŸåã€‚ ä½†æ˜¯ç”±äºGithubæ˜¯å›½å¤–çš„ï¼Œæ­å»ºçš„åšå®¢æœåŠ¡å™¨æ˜¯åœ¨Githubä¸Šï¼Œæ‰€æœ‰æ²¡æœ‰VPNè®¿é—®ï¼Œæ˜¯å¾ˆæ…¢çš„ æ­å»ºçš„æ•™ç¨‹Bç«™è§†é¢‘æ•™ç¨‹&emsp;&emsp;&emsp;&emsp;çŸ¥ä¹æ–‡å­—æ•™ç¨‹&emsp;&emsp;&emsp;&emsp;ç®€ä¹¦æ–‡å­—æ•™ç¨‹ æ­å»ºæˆåŠŸåä¸»é¢˜ä¼˜åŒ–æ•™ç¨‹Bç«™è§†é¢‘æ•™ç¨‹&emsp;&emsp;&emsp;&emsp;nextä¸»é¢˜å®˜æ–¹æ–‡æ¡£&emsp;&emsp;&emsp;&emsp;CSDNä¸ªæ€§åŒ–è®¾ç½® å†™åšå®¢markdownè¯­æ³•CSDNmarkdownæ–‡å­—æ•™ç¨‹&emsp;&emsp;&emsp;&emsp;ç®€ä¹¦ä½œè€…æ•™ç¨‹&emsp;&emsp;&emsp;&emsp;ç®€ä¹¦å®˜æ–¹æ•™ç¨‹ å‘ç°ä¸€ä¸ªæ¯”è¾ƒè¯¦ç»†çš„å„ç§è®¾ç½®çš„åšå®¢åšå®¢é“¾æ¥ ä¸ºäº†è§£å†³åšå®¢éƒ¨ç½²åœ¨GitHubï¼Œè®¿é—®åšå®¢é€Ÿåº¦æ…¢çš„é—®é¢˜ï¼ŒæŠŠåšå®¢åŒæ—¶éƒ¨ç½²åœ¨codingä¸Šç®€ä¹¦æ•™ç¨‹ è‡ªå·±æ€»ç»“çš„ä¸€äº›ç‚¹æ–°å»ºä¸€ä¸ªåšå®¢æ–‡ç« hexo n æ–‡ç« åå­—tags: - æ ‡ç­¾å ##æ³¨æ„ -åé¢æœ‰ç©ºæ ¼ï¼Œè¿˜æœ‰äº›markdownè¯­å¥åä¹Ÿè¦æœ‰ç©ºæ ¼ï¼Œä¿®æ”¹ä¸»é¢˜æ–‡ä»¶æ—¶ï¼Œ:åé¢ä¹Ÿæœ‰ç©ºæ ¼categories: â€‹ - åˆ†ç±»åå­— â€‹ - å­åˆ†ç±»åå­— å¤´åƒè®¾ç½®æ—‹è½¬æ‰¾åˆ°æœ¬åœ°åšå®¢ç›®å½•ä¸‹themes\next\source\css\common\components\sidebar\sidebar-author.stylåŠ å…¥ï¼š1234567891011121314.site-author-image &#123; display: block; margin: 0 auto; padding: $site-author-image-padding; max-width: $site-author-image-width; height: $site-author-image-height; border: $site-author-image-border-width solid $site-author-image-border-color; opacity: hexo-config('avatar.opacity') is a 'unit' ? hexo-config('avatar.opacity') : 1; border-radius: 50%; transition: 2s all;&#125;.site-author-imageï¼šhover &#123; transform: rotate(360deg);&#125; ä¾§æ çš„éŸ³ä¹è®¾ç½®åœ¨ç½‘æ˜“äº‘éŸ³ä¹æ‰¾åˆ°æ­Œï¼Œç„¶åç‚¹å‡»ç”Ÿæˆå¤–é“¾æ’­æ”¾å™¨ï¼Œå¤åˆ¶ä»£ç åˆ°blog\themes\next\layout_macroçš„sidebar.swigæ–‡ä»¶ï¼Œæ·»åŠ åˆšåˆšå¤åˆ¶çš„å¤–é“¾ä»£ç  ä»£ç é«˜äº®åœ¨markdownä¸­çš„ä¸‰ä¸ªç‚¹ååŠ ä»£ç è¯­è¨€ é¡µé¢å³ä¸Šè§’Githubå›¾æ ‡è®¾ç½®åœ¨è¿™é‡Œæ‰¾åˆ°æƒ³è¦çš„è®¾ç½® http://tholman.com/github-corners/ å¤åˆ¶ä»£ç åˆ°themes\next\layoutæ–‡ä»¶_layout.swig ä¿®æ”¹æ–‡ç« å†…é“¾æ¥æ ·å¼æ–‡ä»¶themes\next\source\css_common\components\post\post.stylä¸‹12345678.post-body p a &#123; color: #0593d3; border-bottom: none; &amp;:hover &#123; color: blue; text-decoration: underline; &#125;&#125; next6.0ä»¥ä¸Šæ–‡å­—å­—æ•°å’Œé˜…è¯»æ—¶é—´ç»Ÿè®¡è§GitHubï¼šhttps://github.com/theme-next/hexo-symbols-count-time åŠ¨æ€èƒŒæ™¯è®¾ç½®åœ¨ä¸»é¢˜æ–‡ä»¶ä¸­ æœç´ canvas å››ä¸ªä¸»é¢˜ next6.0ä»¥ä¸Šç‰ˆæœ¬ï¼ŒåŠ¨ç”»èƒŒæ™¯æ— æ•ˆæœï¼Œè§Githubï¼š1.https://github.com/theme-next/theme-next-canvas-nest2.https://github.com/theme-next/theme-next-threeåœ¨ä¸»é¢˜æ ·å¼é‡Œæœ‰æ³¨é‡Šè¯´æ˜ æ¯æ¬¡æœ¬åœ°å†™å®Œåšå®¢ï¼Œä¸Šä¼ çš„ä»£ç hexo claenhexo ghexo dåœ¨åšå®¢çš„æ ¹ç›®å½•ä¸‹è¿›è¡Œ å¤§æ¦‚å°±å†™è¿™äº›å§ï¼Œåªå¸Œæœ›è‡ªå·±åšå®¢æ­å»ºèµ·æ¥ï¼Œè‡ªå·±è¦å‹¤å¿«çš„å†™ä¸œè¥¿ï¼ï¼ï¼ï¼ï¼ï¼]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>åšå®¢</tag>
      </tags>
  </entry>
</search>
