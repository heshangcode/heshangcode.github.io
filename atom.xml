<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>heshang</title>
  <icon>https://www.gravatar.com/avatar/ff0fad28696a2c137c9f67b2f18f359f</icon>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://heshangcode.coding.me/"/>
  <updated>2018-08-05T09:58:55.856Z</updated>
  <id>http://heshangcode.coding.me/</id>
  
  <author>
    <name>和尚</name>
    <email>914727235@qq.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>MyBatis学习笔记（三）模糊查询专题</title>
    <link href="http://heshangcode.coding.me/2018/08/05/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E4%B8%93%E9%A2%98/"/>
    <id>http://heshangcode.coding.me/2018/08/05/MyBatis学习笔记（三）模糊查询专题/</id>
    <published>2018-08-05T05:33:40.000Z</published>
    <updated>2018-08-05T09:58:55.856Z</updated>
    
    <content type="html"><![CDATA[<p>本文讲解，用接口代理模式实现mybatis的模糊查询，讲解#{}和${}两个的区别，XML文件中五个特殊字符串不允许使用。</p><a id="more"></a><h3 id="1-关于接口代理模式和传统模式的区别"><a href="#1-关于接口代理模式和传统模式的区别" class="headerlink" title="1.关于接口代理模式和传统模式的区别"></a>1.关于接口代理模式和传统模式的区别</h3><ul><li><p>传统模式：在笔记（二）就是采用的这个模式：</p><ol><li>需要写接口，接口实现类，测试类，</li><li>映射文件命名空间为持久化类的全路径</li></ol></li><li><p>接口代理模式：本笔记之后所有采用这个模式：</p><ol><li><p>只需要写接口，在测试类中调用，</p></li><li><p>接口里方法如何写：sql语句返回的结果集类型  sql语句的id(要传的值);</p><ul><li><p>eg:List<skill> getSkillLike02(String name);</skill></p><p>List<skill>为SQL语句返回的结果集类型，getSkillLike02为映射文件中SQL语句的id，String name是传给映射文件的值</skill></p></li></ul></li><li><p>映射文件命名空间为接口的全路径</p></li><li><p>可以根据接口的返回类型自动判断使用selectOne还是selectList </p><ul><li>eg:返回的是一个对象的为one，返回的是list的就是List，如果是List<bean>，也是List</bean></li></ul></li></ol></li></ul><h3 id="2-MyBatis框架中获取数据的形式有两种方案-和-的区别"><a href="#2-MyBatis框架中获取数据的形式有两种方案-和-的区别" class="headerlink" title="2.MyBatis框架中获取数据的形式有两种方案 #{}和${}的区别?"></a>2.MyBatis框架中获取数据的形式有两种方案 #{}和${}的区别?</h3><ul><li>#{}<ul><li>取值：<ul><li>方案一： 如果你是一个简单的数据类型,那么我们使用#{任意标识符}</li><li>方案二: 对象或者Map #{属性或者KEY}</li><li>如果使用#{}那么它的模式方式为预处理模式</li></ul></li></ul></li><li>${}<ul><li>你需要必须指明KEY或者属性</li><li>对数据不会进行转义</li><li>直接拼接到SQL语句上</li></ul></li></ul><h3 id="3-XML文件中有五个特殊字符串不允许使用"><a href="#3-XML文件中有五个特殊字符串不允许使用" class="headerlink" title="3.XML文件中有五个特殊字符串不允许使用"></a>3.XML文件中有五个特殊字符串不允许使用</h3><ol><li><p>方法一：用了转义字符把&gt;和&lt;替换掉，然后就没有问题了。</p><p>附:XML转义字符</p><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftywra5q0bj20p606emxa.jpg" alt=""></p></li><li><p>方法二：</p></li></ol><p>因为这个是xml格式的，所以不允许出现类似“&gt;”这样的字符，但是都可以使用&lt;![CDATA[  内容  ]]&gt;符号进行说明，将此类符号不进行解析</p><h3 id="4-代码结构"><a href="#4-代码结构" class="headerlink" title="4.代码结构"></a>4.代码结构</h3><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftyyubmyd5j20eg0e8441.jpg" alt=""></p><h3 id="5-数据库属性文件"><a href="#5-数据库属性文件" class="headerlink" title="5.数据库属性文件"></a>5.数据库属性文件</h3><p>jdbc.properties</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.mysql.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.mysql.url=jdbc:mysql:<span class="comment">//localhost:3306/cy42_mss</span></span><br><span class="line">jdbc.mysql.username=root</span><br><span class="line">jdbc.mysql.password=root</span><br></pre></td></tr></table></figure><h3 id="6-核心配置文件"><a href="#6-核心配置文件" class="headerlink" title="6.核心配置文件"></a>6.核心配置文件</h3><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--加载属性文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbc.properties"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--自定义设置类型的别名，也就是resultMap里的type，避免包名已修改，在映射文件里修改多处地方--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 方式一、com.hs.model.Skill这个类设置了别名hs，之后要用这个的话，直接写hs --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 方式二、com.hs.model这个包下的类，要用的时候直接写类名，比如用com.hs.model.Skill，直接写Skill --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.hs.model"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据库的环境--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--事务管理器:保证数据的完整性和一致性   关键信息  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--框架：默认情况下CUD操作需要  手动提交事务</span></span><br><span class="line"><span class="comment">（如同在Navicat中表中输入了数据，没有点那个小√，就是没有提交事务，</span></span><br><span class="line"><span class="comment">但是输入insert语句，就自动提交事务了）  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用的是连接池：百度java如何实行连接池的原理？  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.driver&#125;"</span> /&gt;</span>  <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.url&#125;"</span> /&gt;</span>  <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.username&#125;"</span> /&gt;</span> <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.password&#125;"</span> /&gt;</span> <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--加载映射文件 ，也就是含sql语句的文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--告知映射文件方式1，一个一个的配置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/hs/model/SkillMapper.xml"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 告知映射文件方式2，自动扫描包内的Mapper接口与配置文件 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;package name="com.hs.model"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-接口代码"><a href="#7-接口代码" class="headerlink" title="7.接口代码"></a>7.接口代码</h3><p>SkillDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.dao;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接口代理模式实现操作，在xxDao接口中，定义方法：  sql语句返回的结果类型 sql语句的id(要传的值);</span></span><br><span class="line"><span class="comment"> * 不用写实现类，直接写测试类,具体实现见测试类</span></span><br><span class="line"><span class="comment"> * sql的映射文件的命名空间跟接口的全路径一致</span></span><br><span class="line"><span class="comment"> * 可以根据接口的返回类型自动判断使用selectOne还是selectList eg:返回的是一个对象的为one，返回的是list的就是list，如果是List&lt;Bean&gt;，也是list</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> com.hs.model.Skill;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SkillDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Skill&gt; <span class="title">getSkillLike01</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Skill&gt; <span class="title">getSkillLike02</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Skill&gt; <span class="title">getSkillLike03</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Skill&gt; <span class="title">getSkillLike04</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function">List&lt;Skill&gt; <span class="title">getSkillLike05</span><span class="params">(Map&lt;String,Object&gt; map)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-持久化类"><a href="#8-持久化类" class="headerlink" title="8.持久化类"></a>8.持久化类</h3><p>Skill.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Skill</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> Integer skillid;</span><br><span class="line"><span class="keyword">private</span> String skillname;</span><br><span class="line"><span class="keyword">private</span> Integer num;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getSkillid</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> skillid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSkillid</span><span class="params">(Integer skillid)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.skillid = skillid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getSkillname</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> skillname;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSkillname</span><span class="params">(String skillname)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.skillname = skillname;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNum</span><span class="params">(Integer num)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.num = num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Skill&#123;"</span> +</span><br><span class="line"><span class="string">"skillid="</span> + skillid +</span><br><span class="line"><span class="string">", skillname='"</span> + skillname + <span class="string">'\''</span> +</span><br><span class="line"><span class="string">", num="</span> + num +</span><br><span class="line"><span class="string">'&#125;'</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-映射文件"><a href="#9-映射文件" class="headerlink" title="9.映射文件"></a>9.映射文件</h3><p>SkillMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace=命名空间，唯一不重复--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.hs.dao.SkillDao"</span>&gt;</span>  <span class="comment">&lt;!--命名空间规则</span></span><br><span class="line"><span class="comment">传统模式：（持久化类（实体化Bean）的类名全路径com.hs.Skill）</span></span><br><span class="line"><span class="comment">接口代理模式：接口的全路径--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"BaseResultMap"</span> <span class="attr">type</span>=<span class="string">"com.hs.model.Skill"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"skill_id"</span> <span class="attr">property</span>=<span class="string">"skillid"</span>/&gt;</span>    <span class="comment">&lt;!--若有主键，主键用id标签，其余用result标签--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"skill_name"</span> <span class="attr">property</span>=<span class="string">"skillname"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"num"</span> <span class="attr">property</span>=<span class="string">"num"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--1.模糊条件查询是固定的，写死在sql语句里了--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillLike01"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill where skill_name like '%s%'</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--2.模糊条件是一个简单的数据类型</span></span><br><span class="line"><span class="comment">当你传递的为一个简单的数据类型，那么我们可以通过#&#123;任意写&#125;进行传值，  #&#123;xx&#125;是一种预处理模式，先sql语句里是？</span></span><br><span class="line"><span class="comment">然后接收到值了，再写进去,会给你默认加   '',即为'#&#123;&#125;'</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--A、通过java代码拼接字符串--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillLike02"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill where skill_name like #&#123;name&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--B、通过SQL语句函数拼接字符串 concat函数指字符串拼接，--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillLike03"</span> <span class="attr">parameterType</span>=<span class="string">"string"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill where skill_name like concat('%',#&#123;name&#125;,'%')</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--C、通过$&#123;&#125;完成模糊查询！！！但是不太推荐，$&#123;&#125;不会默认加 '' ，也不是预处理模式，是直接在把值写在了sql语句中，</span></span><br><span class="line"><span class="comment">一般用于order by $&#123;key或者属性&#125;,一般只接受map或者对象</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillLike04"</span> <span class="attr">parameterType</span>=<span class="string">"map"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill where skill_name like concat('%','$&#123;name&#125;','%')</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--$&#123;&#125;的应用，排序--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillLike05"</span> <span class="attr">parameterType</span>=<span class="string">"map"</span> <span class="attr">resultMap</span>=<span class="string">"BaseResultMap"</span>&gt;</span></span><br><span class="line">select * from skill order by skill_id $&#123;fs&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="10-封装好的工具类"><a href="#10-封装好的工具类" class="headerlink" title="10.封装好的工具类"></a>10.封装好的工具类</h3><p>MyBatis.java</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">package com.hs.util;</span><br><span class="line">/**</span><br><span class="line"> * 知识点：</span><br><span class="line"> * final修饰类：不能被继承</span><br><span class="line"> * 修饰方法：不能被重写</span><br><span class="line"> * 修饰变量：常量不可用变，但如果是对象，对象里的值可以变</span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">import org.apache.ibatis.io.Resources;</span><br><span class="line">import org.apache.ibatis.session.SqlSession;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line">import org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line">import java.io.IOException;</span><br><span class="line">import java.io.InputStream;</span><br><span class="line"></span><br><span class="line">public class MyBatisUtils &#123;</span><br><span class="line"></span><br><span class="line">private MyBatisUtils() &#123; &#125;  //不允许实例化</span><br><span class="line"></span><br><span class="line">private static final String PATH = "mybatis-config.xml";</span><br><span class="line">private static InputStream inputStream;</span><br><span class="line">private static SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line">static &#123; //1.静态代码块，只是加载一次</span><br><span class="line">try &#123;</span><br><span class="line">inputStream = Resources.getResourceAsStream(PATH);</span><br><span class="line">sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">&#125; catch (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line">throw new RuntimeException("加载核心配置文件失败");</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static SqlSession getSqlsession() &#123;</span><br><span class="line">return sqlSessionFactory.openSession();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public static void closeSqlSession(SqlSession sqlSession) &#123;</span><br><span class="line">if (sqlSession != null) &#123;</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-日志框架配置"><a href="#11-日志框架配置" class="headerlink" title="11.日志框架配置"></a>11.日志框架配置</h3><p>log4j.properties</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 日志配置文件Global logging configuration</span><br><span class="line">log4j.rootLogger=ERROR, stdout</span><br><span class="line"># MyBatis logging configuration...</span><br><span class="line"># 如果要显示SQL语句，那么这个位置需要配置为命名空间log4j.logger.命名空间</span><br><span class="line">log4j.logger.com.hs.dao.SkillDao=TRACE</span><br><span class="line"># Console output...</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%<span class="number">5</span>p [%t] - %m%n</span><br></pre></td></tr></table></figure><h3 id="12-测试类"><a href="#12-测试类" class="headerlink" title="12.测试类"></a>12.测试类</h3><p>MyBatis.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hs.dao.SkillDao;</span><br><span class="line"><span class="keyword">import</span> com.hs.util.MyBatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 接口代理模式实现操作，在xxDao接口中，定义方法：  sql语句返回的结果类型 sql语句的id(要传的值);</span></span><br><span class="line"><span class="comment"> * 不用写实现类，直接写测试类,具体实现见测试类</span></span><br><span class="line"><span class="comment"> * sql的映射文件的命名空间跟接口的全路径一致</span></span><br><span class="line"><span class="comment"> * 可以根据接口的返回类型自动判断使用selectOne还是selectList eg:返回的是一个对象的为one，返回的是list的就是list，如果是List&lt;Bean&gt;，也是list</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1.模糊条件查询是固定的，写死在sql语句里了</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillLike01</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="comment">//根据xml映射文件，接口创建实现类代理   有点类似传统模式的new UserMapperImpl()</span></span><br><span class="line">SkillDao skillDao = sqlSession.getMapper(SkillDao.class);</span><br><span class="line">System.out.println(skillDao.getSkillLike01());</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2.通过java代码拼接字符串进行模糊查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillLike02</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line">String name = <span class="string">"%a%"</span>;</span><br><span class="line">SkillDao skillDao = sqlSession.getMapper(SkillDao.class);</span><br><span class="line">System.out.println(skillDao.getSkillLike02(name));</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3.通过sql语句函数拼接字符串进行模糊查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillLike03</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line">String name = <span class="string">"s"</span>;</span><br><span class="line">SkillDao skillDao = sqlSession.getMapper(SkillDao.class);</span><br><span class="line">System.out.println(skillDao.getSkillLike03(name));</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 4.通过$&#123;&#125;拼接字符串进行模糊查询</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillLike04</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">map.put(<span class="string">"name"</span>, <span class="string">"s"</span>);</span><br><span class="line">SkillDao skillDao = sqlSession.getMapper(SkillDao.class);</span><br><span class="line">System.out.println(skillDao.getSkillLike04(map));</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 4.通过$&#123;&#125;进行排序操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillLike05</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line">Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;String, Object&gt;();</span><br><span class="line">map.put(<span class="string">"fs"</span>, <span class="string">"DESC"</span>);</span><br><span class="line">SkillDao skillDao = sqlSession.getMapper(SkillDao.class);</span><br><span class="line">System.out.println(skillDao.getSkillLike05(map));</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文讲解，用接口代理模式实现mybatis的模糊查询，讲解#{}和${}两个的区别，XML文件中五个特殊字符串不允许使用。&lt;/p&gt;
    
    </summary>
    
      <category term="MyBatis" scheme="http://heshangcode.coding.me/categories/MyBatis/"/>
    
    
      <category term="MyBatis学习总结" scheme="http://heshangcode.coding.me/tags/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis学习笔记（二）CRUD操作（查询操作基础）</title>
    <link href="http://heshangcode.coding.me/2018/08/05/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89CRUD%E6%93%8D%E4%BD%9C%EF%BC%88%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C%E5%9F%BA%E7%A1%80%EF%BC%89/"/>
    <id>http://heshangcode.coding.me/2018/08/05/MyBatis学习笔记（二）CRUD操作（查询操作基础）/</id>
    <published>2018-08-05T04:17:17.000Z</published>
    <updated>2018-08-05T05:33:50.749Z</updated>
    
    <content type="html"><![CDATA[<p>本篇主要讲解查询操作的结果集处理、映射文件里命名空间设置，SQL语句中resultMap，resultType等属性意思、MyBatis的传统和接口代理模式。</p><a id="more"></a><h3 id="1-整体结构目录"><a href="#1-整体结构目录" class="headerlink" title="1.整体结构目录"></a>1.整体结构目录</h3><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftypo25zljj20ff0fztfc.jpg" alt=""></p><ul><li>SkillDao.java接口含一些方法</li><li>SkillDaoImpl.java是SkillDao的实现类</li><li>Skill.java是持久化类（实体Bean）</li><li>SkillMapper.xml是Skill持久化类的映射文件（含SQL语句操作等）</li><li>MyBatisTest.java测试类</li><li>jdbc.properties数据库的属性文件</li><li>log4j.properties日志框架配置(在控制台显示sql语句等信息)</li><li>mybatis-config.xml核心配置文件</li></ul><h3 id="2-数据库属性文件"><a href="#2-数据库属性文件" class="headerlink" title="2.数据库属性文件"></a>2.数据库属性文件</h3><p>jdbc.properties</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.mysql.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.mysql.url=jdbc:mysql:<span class="comment">//localhost:3306/cy42_mss</span></span><br><span class="line">jdbc.mysql.username=root</span><br><span class="line">jdbc.mysql.password=root</span><br></pre></td></tr></table></figure><h3 id="3-核心配置文件"><a href="#3-核心配置文件" class="headerlink" title="3.核心配置文件"></a>3.核心配置文件</h3><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--加载属性文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbc.properties"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--自定义设置类型的别名，也就是resultMap里的type，避免包名已修改，在映射文件里修改多处地方--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 方式一、com.hs.model.Skill这个类设置了别名hs，之后要用这个的话，直接写hs --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 方式二、com.hs.model这个包下的类，要用的时候直接写类名，比如用com.hs.model.Skill，直接写Skill --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.hs.model"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据库的环境--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--事务管理器:保证数据的完整性和一致性   关键信息  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--框架：默认情况下CUD操作需要  手动提交事务</span></span><br><span class="line"><span class="comment">（如同在Navicat中表中输入了数据，没有点那个小√，就是没有提交事务，</span></span><br><span class="line"><span class="comment">但是输入insert语句，就自动提交事务了）  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatis提供了3种数据源类型，分别是：POOLED,UNPOOLED,JNDI --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- POOLED 表示支持JDBC数据源连接池 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- UNPOOLED 表示不支持数据源连接池 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- JNDI 表示支持外部数据源连接池 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用的是连接池：百度java如何实行连接池的原理？  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.driver&#125;"</span> /&gt;</span>  <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.url&#125;"</span> /&gt;</span>  <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.username&#125;"</span> /&gt;</span> <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.password&#125;"</span> /&gt;</span> <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--加载映射文件 ，也就是含sql语句的文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--告知映射文件方式1，一个一个的配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/hs/model/SkillMapper.xml"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 告知映射文件方式2，自动扫描包内的Mapper接口与配置文件 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;package name="com.hs.model"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="4-封装好的工具类"><a href="#4-封装好的工具类" class="headerlink" title="4.封装好的工具类"></a>4.封装好的工具类</h3><p>MyBatisUtils.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.util;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 知识点：</span></span><br><span class="line"><span class="comment"> * final修饰类：不能被继承</span></span><br><span class="line"><span class="comment"> * 修饰方法：不能被重写</span></span><br><span class="line"><span class="comment"> * 修饰变量：常量不可用变，但如果是对象，对象里的值可以变</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">MyBatisUtils</span><span class="params">()</span> </span>&#123; &#125;  <span class="comment">//不允许实例化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PATH = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> InputStream inputStream;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123; <span class="comment">//1.静态代码块，只是加载一次</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//输入流 读文件</span></span><br><span class="line"><span class="comment">//1.读取核心配置文件</span></span><br><span class="line">inputStream = Resources.getResourceAsStream(PATH);</span><br><span class="line"><span class="comment">//2.创建SqlSession工厂(SqlSessionFactory)相当于Connection</span></span><br><span class="line">sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"加载核心配置文件失败"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取sqlsession</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlsession</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//3.获取SqlSession 相当于执行SQL语句对象PreparedStament预处理对象</span></span><br><span class="line"><span class="comment">//***** SqlSession完成所有的持久化操作CRUD</span></span><br><span class="line"><span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭资源</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sqlSession</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeSqlSession</span><span class="params">(SqlSession sqlSession)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (sqlSession != <span class="keyword">null</span>) &#123;</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="5-持久化类"><a href="#5-持久化类" class="headerlink" title="5.持久化类"></a>5.持久化类</h3><p>为了讲出来一些知识点，持久化类的属性名没有和数据库的字段名一样，正常应该是一样的</p><p>Skill.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.model;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Skill</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> Integer skillid;</span><br><span class="line"><span class="keyword">private</span> String skillname;</span><br><span class="line"><span class="keyword">private</span> Integer num;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getSkillid</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> skillid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSkillid</span><span class="params">(Integer skillid)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.skillid = skillid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getSkillname</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> skillname;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSkillname</span><span class="params">(String skillname)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.skillname = skillname;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> Integer <span class="title">getNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNum</span><span class="params">(Integer num)</span> </span>&#123;</span><br><span class="line"><span class="keyword">this</span>.num = num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="string">"Skill&#123;"</span> +</span><br><span class="line"><span class="string">"skillid="</span> + skillid +</span><br><span class="line"><span class="string">", skillname='"</span> + skillname + <span class="string">'\''</span> +</span><br><span class="line"><span class="string">", num="</span> + num +</span><br><span class="line"><span class="string">'&#125;'</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="6-XML映射文件"><a href="#6-XML映射文件" class="headerlink" title="6.XML映射文件"></a>6.XML映射文件</h3><p>SQL映射文件经常含一些元素</p><ul><li>parameterType—-接收的参数类型，简写方式见<a href="http://www.mybatis.org/mybatis-3/zh/configuration.html" target="_blank" rel="noopener">mybatis官方文档中，别名和映射的类型那块</a></li><li><del>parameterMap没有人用了！！！！！</del></li><li>resultType—-语句执行完毕返回的结果集类型</li><li>resultMap—-语句执行完毕返回的结果集，这是一个标签，找它对应的标签，里面的type就是相应的返回类型</li><li>sql—-提取公共的SQL代码</li><li>insert—-映射插入语句</li><li>update—-映射更新语句</li><li>delete—-映射删除语句</li><li>select—-映射查询语句</li></ul><p>SkillMapper.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"><span class="comment">&lt;!--namespace=命名空间，唯一不重复--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.hs.model.Skill"</span>&gt;</span> <span class="comment">&lt;!--命名空间规则</span></span><br><span class="line"><span class="comment">传统模式：（持久化类（实体化Bean）的类名全路径com.hs.Skill）</span></span><br><span class="line"><span class="comment">接口代理模式：接口的全路径--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--查询的字段，并没有优化，下个专题进行优化--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--当你传递的是“一个”简单的数据类型的形参的时候，那么你的$&#123;任意名字&#125;,sql语句后面不要加   ;   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getMap01ByPk"</span> <span class="attr">parameterType</span>=<span class="string">"_int"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill where skill_id = #&#123;sadsa&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getMap02ByPk"</span> <span class="attr">parameterType</span>=<span class="string">"_int"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">select skill_id skillid,skill_name skill_name ,num number from skill where skill_id = #&#123;skill_id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--只能对结果集的结果操作进行处理，autoMapping="true"默认映射，默认为true，重写字段名会覆盖默认的，若false就不会映射默认字段（只映射出自己写的别名）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"MapResultMapper"</span> <span class="attr">type</span>=<span class="string">"map"</span> <span class="attr">autoMapping</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"skill_id"</span> <span class="attr">property</span>=<span class="string">"id"</span>/&gt;</span>   <span class="comment">&lt;!--column为结果集里的字段名，property为自己要映射(变成)的字段名--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"skill_name"</span> <span class="attr">property</span>=<span class="string">"name"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"num"</span> <span class="attr">property</span>=<span class="string">"number"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getMap03ByPk"</span> <span class="attr">parameterType</span>=<span class="string">"_int"</span> <span class="attr">resultMap</span>=<span class="string">"MapResultMapper"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name ,num from skill where skill_id = #&#123;skill_id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--1.别名方法，属性和字段名一致，可以完成自动映射--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkill01ByPk"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultType</span>=<span class="string">"com.hs.model.Skill"</span>&gt;</span></span><br><span class="line">select skill_id skillid,skill_name skillname,num from skill where skill_id = #&#123;adsa&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--2.resultMap标签找对应id的标签，利用结果集，进行转换，jdbcType和javaType可以不用写，名字见jdbc类型和Java 类型对应http://www.mybatis.org/mybatis-3/zh/configuration.html#typeAliases--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">"SkillResultMapper"</span> <span class="attr">type</span>=<span class="string">"com.hs.model.Skill"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">"skill_id"</span> <span class="attr">jdbcType</span>=<span class="string">"INTEGER"</span> <span class="attr">property</span>=<span class="string">"skillid"</span> <span class="attr">javaType</span>=<span class="string">"java.lang.Integer"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"skill_name"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> <span class="attr">property</span>=<span class="string">"skillname"</span> <span class="attr">javaType</span>=<span class="string">"java.lang.String"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">"num"</span> <span class="attr">property</span>=<span class="string">"num"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkill02ByPk"</span> <span class="attr">parameterType</span>=<span class="string">"int"</span> <span class="attr">resultMap</span>=<span class="string">"SkillResultMapper"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill where skill_id = #&#123;adsa&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--一条一条的为map--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillList01ByAll"</span> <span class="attr">resultType</span>=<span class="string">"map"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"getSkillList02ByAll"</span> <span class="attr">resultMap</span>=<span class="string">"SkillResultMapper"</span>&gt;</span></span><br><span class="line">select skill_id,skill_name,num from skill</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="7-接口"><a href="#7-接口" class="headerlink" title="7.接口"></a>7.接口</h3><p>SkillDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hs.model.Skill;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">SkillDao</span> </span>&#123;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为Map类型</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Map&lt;String, Object&gt; <span class="title">getMap01ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span></span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为Map类型—通过给字段取别名方式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Map&lt;String, Object&gt; <span class="title">getMap02ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为Map类型—通过resultMap标签处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Map&lt;String, Object&gt; <span class="title">getMap03ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为自定义的类Skill—通过给字段取别名方式</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Skill <span class="title">getSkill01ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为自定义的类Skill—resultMap标签处理</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">Skill <span class="title">getSkill02ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为集合（list）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; getSkillList01ByAll();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为集合（list）—通过resultMap</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> skillid</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">List&lt;Map&lt;String, Object&gt;&gt; getSkillList02ByAll();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="8-接口实现类"><a href="#8-接口实现类" class="headerlink" title="8.接口实现类"></a>8.接口实现类</h3><p>SkillDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hs.model.Skill;</span><br><span class="line"><span class="keyword">import</span> com.hs.util.MyBatisUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SkillDaoImpl</span> <span class="keyword">implements</span> <span class="title">SkillDao</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* 关键步骤：定位执行SQL语句***如何定位 (namespace+"."+id)</span></span><br><span class="line"><span class="comment">* 因为命名空间是Bean的路径，所以下面的   命名空间.sql语句的id    === 类.class.getName()+" ." +id</span></span><br><span class="line"><span class="comment">* */</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMap01ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line">System.out.println(Skill.class.getName()+<span class="string">"----com.he.model.Skill"</span>);</span><br><span class="line"><span class="comment">//关键步骤</span></span><br><span class="line"><span class="keyword">return</span> sqlSession.selectOne(Skill.class.getName() + <span class="string">".getMap01ByPk"</span>,skillid);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMap02ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="keyword">return</span> sqlSession.selectOne(Skill.class.getName() + <span class="string">".getMap02ByPk"</span>,skillid);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Map&lt;String, Object&gt; <span class="title">getMap03ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="keyword">return</span> sqlSession.selectOne(Skill.class.getName() + <span class="string">".getMap03ByPk"</span>,skillid);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Skill <span class="title">getSkill01ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="keyword">return</span> sqlSession.selectOne(Skill.class.getName() + <span class="string">".getSkill01ByPk"</span>,skillid);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Skill <span class="title">getSkill02ByPk</span><span class="params">(<span class="keyword">int</span> skillid)</span> </span>&#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="keyword">return</span> sqlSession.selectOne(Skill.class.getName() + <span class="string">".getSkill02ByPk"</span>,skillid);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; getSkillList01ByAll() &#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="keyword">return</span> sqlSession.selectList(Skill.class.getName() + <span class="string">".getSkillList01ByAll"</span>);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; getSkillList02ByAll() &#123;</span><br><span class="line">SqlSession sqlSession = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">sqlSession = MyBatisUtils.getSqlsession();</span><br><span class="line"><span class="keyword">return</span> sqlSession.selectList(Skill.class.getName() + <span class="string">".getSkillList02ByAll"</span>);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">MyBatisUtils.closeSqlSession(sqlSession);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="9-日志配置文件"><a href="#9-日志配置文件" class="headerlink" title="9.日志配置文件"></a>9.日志配置文件</h3><p>log4j.properties</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 日志配置文件Global logging configuration</span><br><span class="line">log4j.rootLogger=ERROR, stdout</span><br><span class="line"># MyBatis logging configuration...</span><br><span class="line"># 如果要显示SQL语句，那么这个位置需要配置为命名空间log4j.logger.命名空间</span><br><span class="line">log4j.logger.com.hs.model.Skill=TRACE</span><br><span class="line"># Console output...</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure><h3 id="10-测试类"><a href="#10-测试类" class="headerlink" title="10.测试类"></a>10.测试类</h3><p>MyBatisTest.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.test;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 本测试全是采用传统模式：dao层里dao接口写方法，daoImpl实现方法，然后写测试类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.hs.dao.SkillDao;</span><br><span class="line"><span class="keyword">import</span> com.hs.dao.SkillDaoImpl;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为Map类型</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMap01ByPk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getMap01ByPk(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为Map类型—通过给字段取别名方式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMap02ByPk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getMap02ByPk(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为Map类型—通过resultMap标签处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getMap03ByPk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getMap03ByPk(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为自定义的类Skill—通过给字段取别名方式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkill01ByPk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getSkill01ByPk(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为自定义的类Skill—resultMap标签处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkill02ByPk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getSkill02ByPk(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为集合（list）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillList01ByAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getSkillList01ByAll());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 处理结果集为集合（list）—通过resultMap</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getSkillList02ByAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">SkillDao skillDao = <span class="keyword">new</span> SkillDaoImpl();     <span class="comment">//接口回调（个人理解，父类定义变量SkillDao skillDao，子类实例化）</span></span><br><span class="line">System.out.println(skillDao.getSkillList02ByAll());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="11-在测试类中运行相应的测试"><a href="#11-在测试类中运行相应的测试" class="headerlink" title="11.在测试类中运行相应的测试"></a>11.在测试类中运行相应的测试</h3><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftyr5tb5zsg20uw0dtdn5.gif" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本篇主要讲解查询操作的结果集处理、映射文件里命名空间设置，SQL语句中resultMap，resultType等属性意思、MyBatis的传统和接口代理模式。&lt;/p&gt;
    
    </summary>
    
      <category term="MyBatis" scheme="http://heshangcode.coding.me/categories/MyBatis/"/>
    
    
      <category term="MyBatis学习总结" scheme="http://heshangcode.coding.me/tags/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>MyBatis学习笔记（一）mybatis介绍、环境搭建</title>
    <link href="http://heshangcode.coding.me/2018/08/04/MyBatis%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89mybatis%E4%BB%8B%E7%BB%8D%E3%80%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>http://heshangcode.coding.me/2018/08/04/MyBatis学习笔记（一）mybatis介绍、环境搭建/</id>
    <published>2018-08-04T12:00:10.000Z</published>
    <updated>2018-08-05T04:53:04.867Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要讲什么是框架、如何学习框架、mybatis介绍、如何用idea搭建mybatis的环境(非maven)</p><a id="more"></a> <h1 id="1-什么是框架？"><a href="#1-什么是框架？" class="headerlink" title="1.什么是框架？"></a>1.什么是框架？</h1><p>你可以理解为就是别人写好的工具类，为我们提供一种解决方案，最后为了提高开发效率</p><h1 id="2-为什么学习框架？"><a href="#2-为什么学习框架？" class="headerlink" title="2.为什么学习框架？"></a>2.为什么学习框架？</h1><p>个人：对你底层开发无任何帮助意义，但是如果看源码，可以学到如何设计的</p><p>公司：效益，提高了开发效率</p><h1 id="3-怎么去学习框架？"><a href="#3-怎么去学习框架？" class="headerlink" title="3.怎么去学习框架？"></a>3.怎么去学习框架？</h1><p>需要遵循框架<font color="red"><strong>规则：</strong></font></p><ol><li>找到jar包 class文件（java文件）</li><li>入口：核心配置文件</li><li>通过官方给定的帮助文档，使用其提供API接口</li><li>测试</li></ol><p>在这段时间里，我将学习ssm框架：MyBatis + SpringMvc + Spring</p><p>把它在我学jsp，servlet那段时间学的mvc模式，和我将要学的ssm框架，做一个小小的改动：</p><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftxjez0k6jj211308iq68.jpg" alt=""></p><h1 id="4-MyBatis框架是一个什么框架？"><a href="#4-MyBatis框架是一个什么框架？" class="headerlink" title="4.MyBatis框架是一个什么框架？"></a>4.MyBatis框架是一个什么框架？</h1><p>MyBatis是一个持久层框架</p><ul><li>什么是持久化：<ul><li>狭义：把数据永久性的保存到数据库或者存储器都是持久化</li><li>广义：针对于数据库所有的操作，都是持久化操作<ul><li>Create：增加</li><li>Read：读取查询</li><li>Update：更新</li><li>Delete：删除</li></ul></li></ul></li></ul><p>MyBatis是一个ORM框架：</p><ul><li>Object：对象 java对象</li><li>Relationship：关系（关系型数据库）</li><li>Mapping：映射</li></ul><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftxjoa2ln4j20pm0c5gn8.jpg" alt=""></p><h1 id="5-什么是MyBatis？"><a href="#5-什么是MyBatis？" class="headerlink" title="5.什么是MyBatis？"></a>5.什么是MyBatis？</h1><p>MyBatis 是支持<font color="red">定制化 SQL</font>、存储过程以及<font color="red">高级映射</font>的优秀的<font color="red">持久层框架。</font></p><p>MyBatis避免了几乎所有的<font color="red">JDBC代码(1.加载驱动2.获取连接3.执行语句对象4.处理结果集5.关闭资源)</font>和手动设置参数以及<font color="red">获取结果集(ResultSet).</font></p><ul><li>就是之前学习的时候，自己封装的数据Dao，需要自己处理数据转换成自己想要的对象</li></ul><p>MyBatis可以对配置和<font color="red">原生Map使用简单的XML</font>或注解，将<font color="red">接口</font>和<font color="red">Java的POJOs</font>(Plain Old Java Objects,普通的 Java对象)<font color="red">映射成数据库中的记录。</font></p><h1 id="6-idea搭建MyBatis环境（非maven）"><a href="#6-idea搭建MyBatis环境（非maven）" class="headerlink" title="6.idea搭建MyBatis环境（非maven）"></a>6.idea搭建MyBatis环境（非maven）</h1><h4 id="1-所需要的jar包"><a href="#1-所需要的jar包" class="headerlink" title="1).所需要的jar包:"></a>1).所需要的jar包:</h4><ul><li>mybatis-3.4.6.jar        mybatis的包<br> mysql-connector-java-5.1.45-bin.jar        数据库访问<br>  log4j-1.2.17.jar        日志框架包(在控制台显示sql语句信息等)<br>  junit-4.12.jar        单元测试框架<br>  hamcrest-core-1.3.jar        junit-4.12所依赖的包</li><li>都可以在<a href="http://mvnrepository.com/" target="_blank" rel="noopener">maven仓库</a>中搜索下载</li></ul><h4 id="2-创建一个javase-project"><a href="#2-创建一个javase-project" class="headerlink" title="2).创建一个javase project"></a>2).创建一个javase project</h4><h4 id="3-在项目目录下创建一个lib放jar包，然后导入jar包：教程"><a href="#3-在项目目录下创建一个lib放jar包，然后导入jar包：教程" class="headerlink" title="3).在项目目录下创建一个lib放jar包，然后导入jar包：教程"></a>3).在项目目录下创建一个lib放jar包，然后导入jar包：<a href="http://heshangcode.coding.me/2018/08/04/idea%E5%AF%BC%E5%85%A5-%E7%A7%BB%E9%99%A4jar%E5%8C%85%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%89%E7%A7%8D%EF%BC%89/">教程</a></h4><h4 id="4-idea中项目结构如下："><a href="#4-idea中项目结构如下：" class="headerlink" title="4).idea中项目结构如下："></a>4).idea中项目结构如下：</h4><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftxvvt9m0aj20ac0fxdk7.jpg" alt=""></p><ol><li>lib放jar包</li><li>com.hs.dao放接口，和接口实现类(MyBatis又分为传统模式(需要写接口和接口实现类)和接口代理模式(只需要写接口))</li><li>com.hs.model放持久化类(实体Bean、数据库表对应的对象)、XML映射文件(含SQL语句)</li><li>com.hs.test放测试类</li><li>com.hs.util放封装好的工具类</li><li>jdbc.properties放连接数据库的信息，在mybatis-config.xml中加载</li><li>log4j.properties这是日志框架配置</li><li>mybatis-config.xml核心配置文件</li></ol><h4 id="5-代码内容"><a href="#5-代码内容" class="headerlink" title="5).代码内容"></a>5).代码内容</h4><h5 id="1-创建数据库-含后几篇文章的数据表"><a href="#1-创建数据库-含后几篇文章的数据表" class="headerlink" title="1.创建数据库(含后几篇文章的数据表)"></a>1.创建数据库(含后几篇文章的数据表)</h5><p>cy42_mss.sql</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">DROP TABLE IF EXISTS `oa_user`;</span><br><span class="line">CREATE TABLE `oa_user` (</span><br><span class="line">  `user_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `user_name` varchar(255) DEFAULT NULL,</span><br><span class="line">  `sex` varchar(255) DEFAULT NULL,</span><br><span class="line">  `money` decimal(7,2) DEFAULT NULL,</span><br><span class="line">  `birthday` date DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`user_id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of oa_user</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;1&apos;, &apos;悟空&apos;, &apos;男&apos;, &apos;888.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;2&apos;, &apos;八戒&apos;, &apos;男&apos;, &apos;999.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;3&apos;, &apos;天蓬元帅&apos;, &apos;女&apos;, &apos;1000.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;4&apos;, &apos;悟能&apos;, &apos;男&apos;, &apos;666.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;5&apos;, &apos;法悟法&apos;, &apos;女&apos;, &apos;544.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;6&apos;, &apos;悟&apos;, &apos;女&apos;, &apos;562.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;7&apos;, &apos;悟&apos;, &apos;女&apos;, &apos;562.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;14&apos;, &apos;嫦娥&apos;, &apos;女&apos;, &apos;1213.00&apos;, null);</span><br><span class="line">INSERT INTO `oa_user` VALUES (&apos;15&apos;, &apos;月兔&apos;, &apos;女&apos;, &apos;2113.00&apos;, null);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for skill</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `skill`;</span><br><span class="line">CREATE TABLE `skill` (</span><br><span class="line">  `skill_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `skill_name` varchar(255) DEFAULT NULL,</span><br><span class="line">  `num` int(11) DEFAULT NULL,</span><br><span class="line">  `fk_teacher_id` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`skill_id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=10 DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of skill</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `skill` VALUES (&apos;2&apos;, &apos;JS&apos;, &apos;75&apos;, null);</span><br><span class="line">INSERT INTO `skill` VALUES (&apos;7&apos;, &apos;CSS&apos;, &apos;66&apos;, null);</span><br><span class="line">INSERT INTO `skill` VALUES (&apos;8&apos;, &apos;java&apos;, &apos;66&apos;, null);</span><br><span class="line">INSERT INTO `skill` VALUES (&apos;9&apos;, &apos;vue&apos;, &apos;56&apos;, &apos;9999&apos;);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for sys_role</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `sys_role`;</span><br><span class="line">CREATE TABLE `sys_role` (</span><br><span class="line">  `role_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `role_name` varchar(32) DEFAULT NULL,</span><br><span class="line">  `role_key` varchar(32) DEFAULT NULL,</span><br><span class="line">  `status` int(1) DEFAULT &apos;1&apos; COMMENT &apos;1可用 -1禁用&apos;,</span><br><span class="line">  PRIMARY KEY (`role_id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of sys_role</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `sys_role` VALUES (&apos;-100&apos;, &apos;超级管理员&apos;, &apos;ADMIN&apos;, &apos;1&apos;);</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for sys_user</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `sys_user`;</span><br><span class="line">CREATE TABLE `sys_user` (</span><br><span class="line">  `user_id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `account` varchar(32) NOT NULL,</span><br><span class="line">  `password` varchar(128) NOT NULL,</span><br><span class="line">  `user_name` varchar(32) DEFAULT &apos;&apos;,</span><br><span class="line">  `status` int(1) NOT NULL DEFAULT &apos;1&apos; COMMENT &apos;1可用 -1删除  2禁用&apos;,</span><br><span class="line">  `login_time` datetime DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">  `ip` varchar(128) DEFAULT NULL,</span><br><span class="line">  `fk_role_id` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`user_id`),</span><br><span class="line">  KEY `fk_role_id` (`fk_role_id`),</span><br><span class="line">  CONSTRAINT `sys_user_ibfk_1` FOREIGN KEY (`fk_role_id`) REFERENCES `sys_role` (`role_id`)</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of sys_user</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `sys_user` VALUES (&apos;-999&apos;, &apos;super&apos;, &apos;super&apos;, &apos;唐僧&apos;, &apos;1&apos;, &apos;2018-07-28 18:47:39&apos;, null, &apos;-100&apos;);</span><br><span class="line">INSERT INTO `sys_user` VALUES (&apos;-888&apos;, &apos;admin&apos;, &apos;admin&apos;, &apos;悟空&apos;, &apos;1&apos;, &apos;2018-07-03 18:48:21&apos;, null, &apos;-100&apos;);</span><br></pre></td></tr></table></figure><h5 id="2-数据库属性文件"><a href="#2-数据库属性文件" class="headerlink" title="2.数据库属性文件"></a>2.数据库属性文件</h5><p>为了解决中文乱码问题：</p><ol><li>自己的mysql编码要设置成utf-8或utf8mb4</li><li>如果mysql编码没有设置以上的，需要再url后面加?useUnicode=true&amp;characterEncoding=UTF-8 </li></ol><p>jdbc.properties</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jdbc.mysql.driver=com.mysql.jdbc.Driver</span><br><span class="line">jdbc.mysql.url=jdbc:mysql://localhost:3306/cy42_mss?useUnicode=true&amp;characterEncoding=UTF-8</span><br><span class="line">jdbc.mysql.username=root</span><br><span class="line">jdbc.mysql.password=root</span><br></pre></td></tr></table></figure><h5 id="3-核心配置文件"><a href="#3-核心配置文件" class="headerlink" title="3.核心配置文件"></a>3.核心配置文件</h5><p>mybatis-config.xml</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><br><span class="line"><span class="meta">&lt;!DOCTYPE configuration</span></span><br><span class="line"><span class="meta">PUBLIC "-//mybatis.org//DTD Config 3.0//EN"</span></span><br><span class="line"><span class="meta">"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--加载属性文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">properties</span> <span class="attr">resource</span>=<span class="string">"jdbc.properties"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!--自定义设置类型的别名，也就是resultMap里的type，避免包名已修改，在映射文件里修改多处地方--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">typeAliases</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 方式一、com.hs.model.Skill这个类设置了别名hs，之后要用这个的话，直接写hs --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;typeAlias type="com.hs.model.Skill" alias="hs"/&gt; --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 方式二、com.hs.model这个包下的类，要用的时候直接写类名，比如用com.hs.model.Skill，直接写Skill --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"com.hs.model"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">typeAliases</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--配置数据库的环境--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">"development"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--事务管理器:保证数据的完整性和一致性   关键信息  --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--框架：默认情况下CUD操作需要  手动提交事务</span></span><br><span class="line"><span class="comment">（如同在Navicat中表中输入了数据，没有点那个小√，就是没有提交事务，</span></span><br><span class="line"><span class="comment">但是输入insert语句，就自动提交事务了）  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">"JDBC"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用的是连接池：百度java如何实行连接池的原理？  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">"POOLED"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driver"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.driver&#125;"</span> /&gt;</span>  <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.url&#125;"</span> /&gt;</span>  <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.username&#125;"</span> /&gt;</span> <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;jdbc.mysql.password&#125;"</span> /&gt;</span> <span class="comment">&lt;!--获取值，$&#123;属性文件里的变量名&#125;，也可以直接写值--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--加载映射文件 ，也就是含sql语句的文件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--告知映射文件方式1，一个一个的配置--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">"com/hs/model/SkillMapper.xml"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 告知映射文件方式2，自动扫描包内的Mapper接口与配置文件 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;package name="com.hs.model"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="4-dao层"><a href="#4-dao层" class="headerlink" title="4.dao层"></a>4.dao层</h5><p>SkillDao.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">具体代码见第二篇</span><br></pre></td></tr></table></figure><p>SkillDaoImpl.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">具体代码见第二篇</span><br></pre></td></tr></table></figure><h5 id="5-model层"><a href="#5-model层" class="headerlink" title="5.model层"></a>5.model层</h5><p>Skill.java(持久化类含对象的属性，get、set方法、toSting方法)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">具体代码见第二篇</span><br></pre></td></tr></table></figure><p>SkillMapper.xml(映射文件)</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">具体代码见第二篇</span><br></pre></td></tr></table></figure><h5 id="6-test层"><a href="#6-test层" class="headerlink" title="6.test层"></a>6.test层</h5><p>MyBatisTest.java(写测试方法)</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="7-util层-封装好的工具类、可以直接调用"><a href="#7-util层-封装好的工具类、可以直接调用" class="headerlink" title="7.util层(封装好的工具类、可以直接调用)"></a>7.util层(封装好的工具类、可以直接调用)</h5><p>MyBatisUtils.java</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hs.util;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 知识点：</span></span><br><span class="line"><span class="comment"> * final修饰类：不能被继承</span></span><br><span class="line"><span class="comment"> * 修饰方法：不能被重写</span></span><br><span class="line"><span class="comment"> * 修饰变量：常量不可用变，但如果是对象，对象里的值可以变</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyBatisUtils</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">MyBatisUtils</span><span class="params">()</span> </span>&#123; &#125;  <span class="comment">//不允许实例化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String PATH = <span class="string">"mybatis-config.xml"</span>;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> InputStream inputStream;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> &#123; <span class="comment">//1.静态代码块，只是加载一次</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line"><span class="comment">//输入流 读文件</span></span><br><span class="line"><span class="comment">//1.读取核心配置文件</span></span><br><span class="line">inputStream = Resources.getResourceAsStream(PATH);</span><br><span class="line"><span class="comment">//2.创建SqlSession工厂(SqlSessionFactory)相当于Connection</span></span><br><span class="line">sqlSessionFactory = <span class="keyword">new</span> SqlSessionFactoryBuilder().build(inputStream);</span><br><span class="line">&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">e.printStackTrace();</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"加载核心配置文件失败"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 获取sqlsession</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title">getSqlsession</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//3.获取SqlSession 相当于执行SQL语句对象PreparedStament预处理对象</span></span><br><span class="line"><span class="comment">//***** SqlSession完成所有的持久化操作CRUD</span></span><br><span class="line"><span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 关闭资源</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> sqlSession</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">closeSqlSession</span><span class="params">(SqlSession sqlSession)</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (sqlSession != <span class="keyword">null</span>) &#123;</span><br><span class="line">sqlSession.close();</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="8-日志框架配置"><a href="#8-日志框架配置" class="headerlink" title="8.日志框架配置"></a>8.日志框架配置</h5><p>log4j.properties</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 日志配置文件Global logging configuration</span><br><span class="line">log4j.rootLogger=ERROR, stdout</span><br><span class="line"># MyBatis logging configuration...</span><br><span class="line"># 如果要显示SQL语句，那么这个位置需要配置为命名空间log4j.logger.命名空间</span><br><span class="line">log4j.logger.com.hs.model.Skill=TRACE</span><br><span class="line"># Console output...</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;本文主要讲什么是框架、如何学习框架、mybatis介绍、如何用idea搭建mybatis的环境(非maven)&lt;/p&gt;
    
    </summary>
    
      <category term="MyBatis" scheme="http://heshangcode.coding.me/categories/MyBatis/"/>
    
    
      <category term="MyBatis学习总结" scheme="http://heshangcode.coding.me/tags/MyBatis%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"/>
    
  </entry>
  
  <entry>
    <title>idea导入/移除jar包方式（三种）</title>
    <link href="http://heshangcode.coding.me/2018/08/04/idea%E5%AF%BC%E5%85%A5-%E7%A7%BB%E9%99%A4jar%E5%8C%85%E6%96%B9%E5%BC%8F%EF%BC%88%E4%B8%89%E7%A7%8D%EF%BC%89/"/>
    <id>http://heshangcode.coding.me/2018/08/04/idea导入-移除jar包方式（三种）/</id>
    <published>2018-08-04T10:02:48.000Z</published>
    <updated>2018-08-04T11:02:08.265Z</updated>
    
    <content type="html"><![CDATA[<p>eclipse导入jar只需要简单的右键addxxx就可以，本篇关于idea导入jar的3种方式，用GIF展示</p><a id="more"></a><h3 id="1-添加jar包"><a href="#1-添加jar包" class="headerlink" title="1.添加jar包"></a>1.添加jar包</h3><ul><li><p>方法一：添加lib目录下的所有jar包</p><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftxv86n1e8g20qb0hs4qp.gif" alt=""></p></li><li><p>方法二：右键jar，选择addxxx<img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftxvbzzsmbg20g00lzwm4.gif" alt=""></p></li><li><p>方法三：在方法一的基础上，点击lib下面的相应的jar包</p></li></ul><h3 id="2-删除jar包"><a href="#2-删除jar包" class="headerlink" title="2.删除jar包"></a>2.删除jar包</h3><p><img src="https://ws1.sinaimg.cn/large/c31cbfc9ly1ftxvc2g7r7g20px0hyn2x.gif" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;eclipse导入jar只需要简单的右键addxxx就可以，本篇关于idea导入jar的3种方式，用GIF展示&lt;/p&gt;
    
    </summary>
    
      <category term="idea" scheme="http://heshangcode.coding.me/categories/idea/"/>
    
    
      <category term="idea的jar添加和删除" scheme="http://heshangcode.coding.me/tags/idea%E7%9A%84jar%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4/"/>
    
  </entry>
  
  <entry>
    <title>mysql忘记账号密码</title>
    <link href="http://heshangcode.coding.me/2018/07/24/mysql%E5%BF%98%E8%AE%B0%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81/"/>
    <id>http://heshangcode.coding.me/2018/07/24/mysql忘记账号密码/</id>
    <published>2018-07-24T14:41:12.000Z</published>
    <updated>2018-07-25T02:43:58.564Z</updated>
    
    <content type="html"><![CDATA[<h3 id="如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？"><a href="#如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？" class="headerlink" title="如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？"></a>如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？</h3><a id="more"></a><ol><li><p>打开mysql.exe和mysqld.exe所在的文件夹,复制路径地址; <img src="\images\1.png" alt=""></p></li><li><p>打开cmd命令提示符，进入上一步mysql.exe所在的文件夹; <img src="\images\2.png" alt=""></p></li><li><p>输入命令  mysqld –skip-grant-tables  回车，此时就跳过了mysql的用户验证。注意输入此命令之后<a href="https://www.baidu.com/s?wd=%E5%91%BD%E4%BB%A4%E8%A1%8C&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">命令行</a>就无法操作了，此时可以再打开一个新的<a href="https://www.baidu.com/s?wd=%E5%91%BD%E4%BB%A4%E8%A1%8C&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">命令行</a>。</p><p><font color="red" size="3">注意：</font>在输入此命令之前先在<a href="https://www.baidu.com/s?wd=%E4%BB%BB%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8&amp;tn=SE_PcZhidaonwhc_ngpagmjz&amp;rsv_dl=gh_pc_zhidao" target="_blank" rel="noopener">任务管理器</a>中结束mysqld.exe进程，确保mysql服务器端已结束运行;  <img src="\images\3.png" alt=""></p></li><li><p>同样也在步骤2之后，然后直接输入mysql，不需要带任何登录参数直接回车就可以登陆上数据库; <img src="\images\4.png" alt=""></p></li><li><p>输入show databases;   可以看到所有数据库说明成功登陆; <img src="\images\5.png" alt=""></p></li><li><p>其中mysql库就是保存用户名的地方。输入 use mysql;   选择mysql数据库; <img src="\images\6.png" alt=""></p></li><li><p>输入show tables;查看所有表，会发现有个user表，这里存放的就是用户名，密码，权限等等账户信息; <img src="\images\7.png" alt=""></p></li><li><p>输入select user,host,password from user;   来查看账户信息; <img src="\images\8.png" alt=""></p></li><li><p>更改root密码，输入update user set password=password(‘root’)  where user=’root’ and host=’localhost’; <img src="\images\9.png" alt=""></p></li><li><p>再次查看账户信息，select user,host,password from user;   可以看到密码已被修改。 <img src="\images\10.png" alt=""></p></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？&quot;&gt;&lt;a href=&quot;#如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？&quot; class=&quot;headerlink&quot; title=&quot;如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？&quot;&gt;&lt;/a&gt;如果突然忘记了mysql的账号密码，或者拿着别人的电脑忘记了mysql的账号密码该咋办？？？&lt;/h3&gt;
    
    </summary>
    
      <category term="mysql" scheme="http://heshangcode.coding.me/categories/mysql/"/>
    
    
      <category term="mysql" scheme="http://heshangcode.coding.me/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>idea初体验和设置</title>
    <link href="http://heshangcode.coding.me/2018/07/22/idea%E5%88%9D%E4%BD%93%E9%AA%8C%E5%92%8C%E8%AE%BE%E7%BD%AE/"/>
    <id>http://heshangcode.coding.me/2018/07/22/idea初体验和设置/</id>
    <published>2018-07-22T12:13:03.000Z</published>
    <updated>2018-07-22T12:22:04.387Z</updated>
    
    <content type="html"><![CDATA[<h3 id="换了电脑，idea也能跑起来了，软件也需要设置很多地方"><a href="#换了电脑，idea也能跑起来了，软件也需要设置很多地方" class="headerlink" title="换了电脑，idea也能跑起来了，软件也需要设置很多地方"></a>换了电脑，idea也能跑起来了，软件也需要设置很多地方</h3><a id="more"></a><p>设置有很多啊，比如字体，UTF-8，jdk，maven，git，javaweb<br><a href="https://www.bilibili.com/video/av21735428/" target="_blank" rel="noopener">B站视频教程</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;换了电脑，idea也能跑起来了，软件也需要设置很多地方&quot;&gt;&lt;a href=&quot;#换了电脑，idea也能跑起来了，软件也需要设置很多地方&quot; class=&quot;headerlink&quot; title=&quot;换了电脑，idea也能跑起来了，软件也需要设置很多地方&quot;&gt;&lt;/a&gt;换了电脑，idea也能跑起来了，软件也需要设置很多地方&lt;/h3&gt;
    
    </summary>
    
      <category term="编程软件" scheme="http://heshangcode.coding.me/categories/%E7%BC%96%E7%A8%8B%E8%BD%AF%E4%BB%B6/"/>
    
      <category term="idea" scheme="http://heshangcode.coding.me/categories/%E7%BC%96%E7%A8%8B%E8%BD%AF%E4%BB%B6/idea/"/>
    
    
      <category term="idea" scheme="http://heshangcode.coding.me/tags/idea/"/>
    
  </entry>
  
  <entry>
    <title>Hero+Github搭建个人博客（加优化设置）</title>
    <link href="http://heshangcode.coding.me/2018/07/21/Hero-Github%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BC%98%E5%8C%96%E8%AE%BE%E7%BD%AE%EF%BC%89/"/>
    <id>http://heshangcode.coding.me/2018/07/21/Hero-Github搭建个人博客（优化设置）/</id>
    <published>2018-07-21T12:56:08.000Z</published>
    <updated>2018-08-03T07:35:26.430Z</updated>
    
    <content type="html"><![CDATA[<h1 id="哈哈哈哈，自己的博客终于搭好了！！"><a href="#哈哈哈哈，自己的博客终于搭好了！！" class="headerlink" title="哈哈哈哈，自己的博客终于搭好了！！"></a>哈哈哈哈，自己的博客终于搭好了！！</h1><h4 id="还是写个博客记录一下自己如何搭建的吧"><a href="#还是写个博客记录一下自己如何搭建的吧" class="headerlink" title="还是写个博客记录一下自己如何搭建的吧"></a>还是写个博客记录一下自己如何搭建的吧</h4><a id="more"></a><p>首先来首音乐压压惊吧</p><p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=448749148&auto=1&height=66"></iframe><br>&emsp;&emsp;其实自己很久之前就想搭个博客，自己写点东西，但是可能就认为搭个博客很难，自己也懒，就没有搭建，结果今天周六，想给自己休息休息，然后找了教程，用Github+hero搭建了这个博客，一个小时就可以完成的，其实并没有那么难，傻瓜式操作，搭建完之后，发现一些优缺点：</p><ul><li>重点是免费的，只需要你注册一个GitHub账号，自己一台电脑，然后就ojbk的事。</li><li>自带免费的域名，如果自己有其他需求，也可以购买其他的域名。</li><li>但是由于Github是国外的，搭建的博客服务器是在Github上，所有没有VPN访问，是很慢的</li></ul><hr><h3 id="搭建的教程"><a href="#搭建的教程" class="headerlink" title="搭建的教程"></a>搭建的教程</h3><p><a href="https://www.bilibili.com/video/av24897960/" target="_blank" rel="noopener">B站视频教程</a>&emsp;&emsp;&emsp;&emsp;<a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">知乎文字教程</a>&emsp;&emsp;&emsp;&emsp;<a href="https://www.jianshu.com/p/834d7cc0668d" target="_blank" rel="noopener">简书文字教程</a></p><h3 id="搭建成功后主题优化教程"><a href="#搭建成功后主题优化教程" class="headerlink" title="搭建成功后主题优化教程"></a>搭建成功后主题优化教程</h3><p><a href="https://www.bilibili.com/video/av17653359/" target="_blank" rel="noopener">B站视频教程</a>&emsp;&emsp;&emsp;&emsp;<a href="http://theme-next.iissnan.com/" target="_blank" rel="noopener">next主题官方文档</a>&emsp;&emsp;&emsp;&emsp;<a href="https://blog.csdn.net/qq_33699981/article/details/72716951" target="_blank" rel="noopener">CSDN个性化设置</a></p><h3 id="写博客markdown语法"><a href="#写博客markdown语法" class="headerlink" title="写博客markdown语法"></a>写博客markdown语法</h3><p><a href="https://blog.csdn.net/qcx321/article/details/53780672" target="_blank" rel="noopener">CSDNmarkdown文字教程</a>&emsp;&emsp;&emsp;&emsp;<a href="https://www.jianshu.com/p/334291767cab" target="_blank" rel="noopener">简书作者教程</a>&emsp;&emsp;&emsp;&emsp;<a href="https://www.jianshu.com/p/q81RER" target="_blank" rel="noopener">简书官方教程</a></p><h3 id="发现一个比较详细的各种设置的博客"><a href="#发现一个比较详细的各种设置的博客" class="headerlink" title="发现一个比较详细的各种设置的博客"></a>发现一个比较详细的各种设置的博客</h3><p><a href="http://jmyblog.top/Hexo-GithubPages-CodingPages搭建自己的个人博客/" target="_blank" rel="noopener">博客链接</a></p><h3 id="为了解决博客部署在GitHub，访问博客速度慢的问题，把博客同时部署在coding上"><a href="#为了解决博客部署在GitHub，访问博客速度慢的问题，把博客同时部署在coding上" class="headerlink" title="为了解决博客部署在GitHub，访问博客速度慢的问题，把博客同时部署在coding上"></a>为了解决博客部署在GitHub，访问博客速度慢的问题，把博客同时部署在coding上</h3><p><a href="https://www.jianshu.com/p/25587e049d54" target="_blank" rel="noopener">简书教程</a></p><h3 id="自己总结的一些点"><a href="#自己总结的一些点" class="headerlink" title="自己总结的一些点"></a>自己总结的一些点</h3><h5 id="新建一个博客文章"><a href="#新建一个博客文章" class="headerlink" title="新建一个博客文章"></a>新建一个博客文章</h5><p>hexo n 文章名字<br>tags:<br>    -  标签名 ##注意 -后面有空格，还有些markdown语句后也要有空格，修改主题文件时，:后面也有空格<br>categories: </p><p>​    - 分类名字</p><p>​    - 子分类名字</p><h5 id="头像设置旋转"><a href="#头像设置旋转" class="headerlink" title="头像设置旋转"></a>头像设置旋转</h5><p>找到本地博客目录下themes\next\source\css\common\components\sidebar\sidebar-author.styl加入：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="built_in">hexo-config</span>(<span class="string">'avatar.opacity'</span>) is a <span class="string">'unit'</span> ? <span class="built_in">hexo-config</span>(<span class="string">'avatar.opacity'</span>) : <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">2s</span> all;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.site-author-image</span>：<span class="selector-tag">hover</span> &#123;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(360deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h5 id="侧栏的音乐设置"><a href="#侧栏的音乐设置" class="headerlink" title="侧栏的音乐设置"></a>侧栏的音乐设置</h5><p>在网易云音乐找到歌，然后点击生成外链播放器，复制代码到blog\themes\next\layout_macro的sidebar.swig文件，添加刚刚复制的外链代码</p><h5 id="代码高亮"><a href="#代码高亮" class="headerlink" title="代码高亮"></a>代码高亮</h5><p>在markdown中的三个点后加代码语言</p><h5 id="页面右上角Github图标设置"><a href="#页面右上角Github图标设置" class="headerlink" title="页面右上角Github图标设置"></a>页面右上角Github图标设置</h5><p>在这里找到想要的设置 <a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">http://tholman.com/github-corners/</a> 复制代码到themes\next\layout文件_layout.swig</p><h5 id="修改文章内链接样式"><a href="#修改文章内链接样式" class="headerlink" title="修改文章内链接样式"></a>修改文章内链接样式</h5><p>文件themes\next\source\css_common\components\post\post.styl下<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.post-body</span> <span class="selector-tag">p</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#0593d3</span>;</span><br><span class="line">  <span class="attribute">border-bottom</span>: none;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">blue</span>;</span><br><span class="line">    <span class="selector-tag">text-decoration</span>: <span class="selector-tag">underline</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h5 id="next6-0以上文字字数和阅读时间统计"><a href="#next6-0以上文字字数和阅读时间统计" class="headerlink" title="next6.0以上文字字数和阅读时间统计"></a>next6.0以上文字字数和阅读时间统计</h5><p>见GitHub：<a href="https://github.com/theme-next/hexo-symbols-count-time" target="_blank" rel="noopener">https://github.com/theme-next/hexo-symbols-count-time</a></p><h5 id="动态背景设置"><a href="#动态背景设置" class="headerlink" title="动态背景设置"></a>动态背景设置</h5><p>在主题文件中 搜素canvas 四个主题</p><h5 id="next6-0以上版本，动画背景无效果，见Github："><a href="#next6-0以上版本，动画背景无效果，见Github：" class="headerlink" title="next6.0以上版本，动画背景无效果，见Github："></a>next6.0以上版本，动画背景无效果，见Github：</h5><p>1.<a href="https://github.com/theme-next/theme-next-canvas-nest" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-canvas-nest</a><br>2.<a href="https://github.com/theme-next/theme-next-three" target="_blank" rel="noopener">https://github.com/theme-next/theme-next-three</a><br>在主题样式里有注释说明</p><h4 id="每次本地写完博客，上传的代码"><a href="#每次本地写完博客，上传的代码" class="headerlink" title="每次本地写完博客，上传的代码"></a>每次本地写完博客，上传的代码</h4><p>hexo claen<br>hexo g<br>hexo d<br>在博客的根目录下进行</p><hr><p>大概就写这些吧，只希望自己博客搭建起来，自己要勤快的写东西！！！！！！</p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;哈哈哈哈，自己的博客终于搭好了！！&quot;&gt;&lt;a href=&quot;#哈哈哈哈，自己的博客终于搭好了！！&quot; class=&quot;headerlink&quot; title=&quot;哈哈哈哈，自己的博客终于搭好了！！&quot;&gt;&lt;/a&gt;哈哈哈哈，自己的博客终于搭好了！！&lt;/h1&gt;&lt;h4 id=&quot;还是写个博客记录一下自己如何搭建的吧&quot;&gt;&lt;a href=&quot;#还是写个博客记录一下自己如何搭建的吧&quot; class=&quot;headerlink&quot; title=&quot;还是写个博客记录一下自己如何搭建的吧&quot;&gt;&lt;/a&gt;还是写个博客记录一下自己如何搭建的吧&lt;/h4&gt;
    
    </summary>
    
      <category term="hero" scheme="http://heshangcode.coding.me/categories/hero/"/>
    
    
      <category term="hero" scheme="http://heshangcode.coding.me/tags/hero/"/>
    
      <category term="博客" scheme="http://heshangcode.coding.me/tags/%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
</feed>
